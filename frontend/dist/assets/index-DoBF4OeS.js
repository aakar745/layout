const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-nu_xN7Rs.js","assets/vendor-react-BNeW3y6d.js","assets/vendor-utils-DNTYNPA0.js","assets/vendor-antd-CPyaZRZ0.js","assets/vendor-styling-DBLAJE0-.js","assets/vendor-canvas-BRbMLhVA.js","assets/index-Bppz5v0Z.css"])))=>i.map(i=>d[i]);
import{j as e,Z as be,_ as Fe,$ as qe,a0 as Ue,a1 as He,a2 as Oe,a3 as Ve,C as Qe,a4 as Ke,I as Ye,a5 as Ge,a6 as Ze}from"./index-nu_xN7Rs.js";import{u as Re,j as Ne,R as Je,i as De,r as B}from"./vendor-react-BNeW3y6d.js";import{a4 as je,a5 as H,a6 as M,o as Z,aI as J,b9 as Xe,a as E,V as X,h as Me,x as ce,m as me,bi as et,bj as tt,S as W,J as ze,b7 as nt,a3 as $e,bb as it,c as O,j as st,al as Pe,d as at,b as L,aO as rt,p as ot,bd as lt,M as ne,C as Be,z as ct,bk as dt,R as Ee,bl as ut,W as p,Y as le,T as We,D as Le,bm as ie,K as ht,P as xe,ap as xt,aZ as pt,b1 as mt}from"./vendor-antd-CPyaZRZ0.js";/* empty css                  */import{u as ft}from"./reduxHooks-D3iepLCM.js";import{u as ye,a as gt,F as yt}from"./vendor-export-CrAKd1if.js";import"./vendor-utils-DNTYNPA0.js";import"./vendor-styling-DBLAJE0-.js";import"./vendor-canvas-BRbMLhVA.js";const _e=t=>{if(!t)return 0;const d=t.shapeType||"rectangle";if(d==="rectangle")return t.width*t.height;if(d==="l-shape"&&t.lShape){const{rect1Width:g,rect1Height:o,rect2Width:b,rect2Height:m}=t.lShape;return g*o+b*m}return t.width*t.height},jt=({bookings:t,paginationTotal:d,stats:g,statsLoading:o=!1})=>{const m=g?{...g,total:d!==void 0?d:g.total,pending:t.filter(h=>h.status==="pending").length,approved:t.filter(h=>h.status==="approved").length,rejected:t.filter(h=>h.status==="rejected").length,confirmed:t.filter(h=>h.status==="confirmed").length,cancelled:t.filter(h=>h.status==="cancelled").length,bookedSQM:Math.round(t.filter(h=>h.status==="confirmed"||h.status==="approved").reduce((h,$)=>{var f;const y=((f=$.stallIds)==null?void 0:f.reduce((j,I)=>I!=null&&I.dimensions?j+_e(I.dimensions):j,0))||0;return h+y},0)*100)/100}:(()=>{const h=d!==void 0?d:t.length,$=t.filter(y=>y.status==="confirmed"||y.status==="approved").reduce((y,f)=>{var I;const j=((I=f.stallIds)==null?void 0:I.reduce((C,R)=>R!=null&&R.dimensions?C+_e(R.dimensions):C,0))||0;return y+j},0);return{total:h,pending:t.filter(y=>y.status==="pending").length,approved:t.filter(y=>y.status==="approved").length,rejected:t.filter(y=>y.status==="rejected").length,confirmed:t.filter(y=>y.status==="confirmed").length,cancelled:t.filter(y=>y.status==="cancelled").length,totalSQM:0,bookedSQM:Math.round($*100)/100}})();return e.jsxs(e.Fragment,{children:[e.jsxs(je,{gutter:[16,16],style:{marginBottom:"24px"},children:[e.jsx(H,{xs:24,sm:12,md:6,children:e.jsx(M,{children:o?e.jsx("div",{style:{textAlign:"center",padding:"20px 0"},children:e.jsx(Z,{})}):e.jsx(J,{title:e.jsxs(E,{title:"Total count across all pages",children:["Total Bookings ",e.jsx(X,{style:{fontSize:"14px",marginLeft:4}})]}),value:m.total,prefix:e.jsx(Xe,{})})})}),e.jsx(H,{xs:24,sm:12,md:6,children:e.jsx(M,{children:o?e.jsx("div",{style:{textAlign:"center",padding:"20px 0"},children:e.jsx(Z,{})}):e.jsx(J,{title:e.jsxs(E,{title:"Count of all pending bookings",children:["Pending Bookings ",e.jsx(X,{style:{fontSize:"14px",marginLeft:4}})]}),value:m.pending,prefix:e.jsx(Me,{style:{color:"#faad14"}})})})}),e.jsx(H,{xs:24,sm:12,md:6,children:e.jsx(M,{children:o?e.jsx("div",{style:{textAlign:"center",padding:"20px 0"},children:e.jsx(Z,{})}):e.jsx(J,{title:e.jsxs(E,{title:"Count of all approved bookings",children:["Approved Bookings ",e.jsx(X,{style:{fontSize:"14px",marginLeft:4}})]}),value:m.approved,prefix:e.jsx(ce,{style:{color:"#52c41a"}})})})}),e.jsx(H,{xs:24,sm:12,md:6,children:e.jsx(M,{children:o?e.jsx("div",{style:{textAlign:"center",padding:"20px 0"},children:e.jsx(Z,{})}):e.jsx(J,{title:e.jsxs(E,{title:"Count of all confirmed bookings",children:["Confirmed Bookings ",e.jsx(X,{style:{fontSize:"14px",marginLeft:4}})]}),value:m.confirmed,prefix:e.jsx(ce,{style:{color:"#52c41a"}})})})})]}),e.jsxs(je,{gutter:[16,16],style:{marginBottom:"24px"},children:[e.jsx(H,{xs:24,sm:12,md:6,children:e.jsx(M,{children:o?e.jsx("div",{style:{textAlign:"center",padding:"20px 0"},children:e.jsx(Z,{})}):e.jsx(J,{title:e.jsxs(E,{title:"Count of all rejected bookings",children:["Rejected Bookings ",e.jsx(X,{style:{fontSize:"14px",marginLeft:4}})]}),value:m.rejected,prefix:e.jsx(me,{style:{color:"#f5222d"}})})})}),e.jsx(H,{xs:24,sm:12,md:6,children:e.jsx(M,{children:o?e.jsx("div",{style:{textAlign:"center",padding:"20px 0"},children:e.jsx(Z,{})}):e.jsx(J,{title:e.jsxs(E,{title:"Count of all cancelled bookings",children:["Cancelled Bookings ",e.jsx(X,{style:{fontSize:"14px",marginLeft:4}})]}),value:m.cancelled,prefix:e.jsx(me,{style:{color:"#f5222d"}})})})}),e.jsx(H,{xs:24,sm:12,md:6,children:e.jsx(M,{children:o?e.jsx("div",{style:{textAlign:"center",padding:"20px 0"},children:e.jsx(Z,{})}):e.jsx(J,{title:e.jsxs(E,{title:"Total area from all stalls in bookings",children:["Total SQM ",e.jsx(X,{style:{fontSize:"14px",marginLeft:4}})]}),value:m.totalSQM,precision:1,suffix:"sqm",prefix:e.jsx(et,{}),valueStyle:{color:"#722ed1"}})})}),e.jsx(H,{xs:24,sm:12,md:6,children:e.jsx(M,{children:o?e.jsx("div",{style:{textAlign:"center",padding:"20px 0"},children:e.jsx(Z,{})}):e.jsx(J,{title:e.jsxs(E,{title:"Booked area from confirmed and approved bookings",children:["Booked SQM ",e.jsx(X,{style:{fontSize:"14px",marginLeft:4}})]}),value:m.bookedSQM,precision:1,suffix:"sqm",prefix:e.jsx(tt,{}),valueStyle:{color:"#52c41a"}})})})]})]})},{RangePicker:bt}=it,vt=({filters:t,exhibitions:d,onFilterChange:g,onRefresh:o})=>e.jsx(M,{style:{marginBottom:"24px"},children:e.jsxs(W,{wrap:!0,children:[e.jsx(ze,{placeholder:"Search by company, customer, email, or phone",prefix:e.jsx(nt,{}),value:t.search,onChange:b=>g({...t,search:b.target.value}),style:{width:250},allowClear:!0}),e.jsx($e,{placeholder:"Filter by exhibition",value:t.exhibition,onChange:b=>g({...t,exhibition:b}),style:{minWidth:200},allowClear:!0,options:d.map(b=>({label:b.name,value:b._id}))}),e.jsx($e,{mode:"multiple",placeholder:"Filter by status",value:t.status,onChange:b=>g({...t,status:b}),style:{minWidth:200},options:[{label:"Pending",value:"pending"},{label:"Approved",value:"approved"},{label:"Rejected",value:"rejected"},{label:"Confirmed",value:"confirmed"},{label:"Cancelled",value:"cancelled"}]}),e.jsx(bt,{onChange:b=>{var m,h;return g({...t,dateRange:b?[((m=b[0])==null?void 0:m.toISOString())||"",((h=b[1])==null?void 0:h.toISOString())||""]:null})}}),e.jsx(O,{icon:e.jsx(st,{}),onClick:o,children:"Refresh"})]})}),pe=t=>{if(!t)return 0;const d=t.shapeType||"rectangle";if(d==="rectangle")return t.width*t.height;if(d==="l-shape"&&t.lShape){const{rect1Width:g,rect1Height:o,rect2Width:b,rect2Height:m}=t.lShape;return g*o+b*m}return t.width*t.height},It=(t,d,g)=>{le.confirm({title:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"#101828",padding:"20px 24px",borderBottom:"1px solid #EAECF0"},children:[e.jsx(Ee,{style:{color:"#F04438",fontSize:"22px"}}),e.jsx("span",{style:{fontSize:"18px",fontWeight:600,lineHeight:"28px"},children:"Delete Booking"})]}),content:e.jsxs("div",{style:{padding:"20px 24px",color:"#475467"},children:[e.jsxs("p",{style:{fontSize:"14px",lineHeight:"20px",marginBottom:"8px"},children:["Are you sure you want to delete booking ",e.jsx("strong",{children:g(t._id,t.createdAt)}),"?"]}),e.jsx("p",{style:{color:"#667085",fontSize:"14px",lineHeight:"20px",marginBottom:0},children:"This action cannot be undone and will permanently delete all associated data including invoices."})]}),footer:e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px",padding:"20px 24px",borderTop:"1px solid #EAECF0",marginTop:0},children:[e.jsx(O,{onClick:()=>le.destroyAll(),style:{height:"40px",padding:"10px 18px",borderRadius:"8px",border:"1px solid #D0D5DD",color:"#344054",fontWeight:500,fontSize:"14px",lineHeight:"20px",display:"flex",alignItems:"center",boxShadow:"0px 1px 2px rgba(16, 24, 40, 0.05)"},children:"Cancel"}),e.jsx(O,{danger:!0,type:"primary",onClick:()=>{d(t._id),le.destroyAll()},style:{height:"40px",padding:"10px 18px",borderRadius:"8px",border:"none",backgroundColor:"#D92D20",color:"white",fontWeight:500,fontSize:"14px",lineHeight:"20px",display:"flex",alignItems:"center",boxShadow:"0px 1px 2px rgba(16, 24, 40, 0.05)"},children:"Delete"})]}),centered:!0,icon:null,width:400,closable:!0,maskClosable:!0,className:"delete-confirmation-modal",styles:{mask:{backgroundColor:"rgba(52, 64, 84, 0.7)"},content:{padding:0,borderRadius:"12px",boxShadow:"0px 4px 6px -2px rgba(16, 24, 40, 0.05), 0px 12px 16px -4px rgba(16, 24, 40, 0.1)"},body:{padding:0},footer:{display:"none"}}})},St=t=>{const d=Re(),{data:g,isLoading:o,error:b,refetch:m}=be({page:1,limit:200},{refetchOnMountOrArgChange:10,refetchOnFocus:!0,refetchOnReconnect:!0}),[h,{isLoading:$}]=Fe(),[y,{isLoading:f}]=qe(),j=async a=>{var n,i,r,s;try{if(a.status!=="approved"&&a.status!=="confirmed"){p.warning("Booking must be approved or confirmed before sending invoice.");return}const u=C(a._id);if(!u){p.error("Invoice not found for this booking.");return}const c=((n=a.exhibitorId)==null?void 0:n.email)||a.customerEmail;if(!c){p.error("No email address found for this booking.");return}const z=((i=a.exhibitorId)==null?void 0:i.contactPerson)||a.customerName,w=((r=a.exhibitorId)==null?void 0:r.companyName)||a.companyName,D=a.stallIds.reduce((N,V)=>{var ue,l;const ee=((ue=V.dimensions)==null?void 0:ue.width)||0,de=((l=V.dimensions)==null?void 0:l.height)||0,te=V.ratePerSqm||0;return N+Math.round(ee*de*te*100)/100},0);let P=0;const q=a.calculations.stalls.filter(N=>N.discount).map(N=>N.discount);if(q.length>0){const N=q[0];N&&(N.type==="percentage"?P=Math.round(D*N.value/100*100)/100:N.type==="fixed"&&(P=Math.min(N.value,D)))}const F=D-P;let K=0;a.calculations.taxes&&a.calculations.taxes.length>0&&(K=a.calculations.taxes.reduce((N,V)=>{const ee=Math.round(F*V.rate/100*100)/100;return N+ee},0));const se=Math.round((F+K)*100)/100,fe=`Dear ${z},

Please find attached the invoice for your stall booking${w?` for ${w}`:""}.

Booking Details:
- Booking ID: ${t.formatBookingNumber(a._id,a.createdAt)}
- Exhibition: ${a.exhibitionId.name}
- Total Amount: ₹${se.toLocaleString()}
- Status: ${a.status.toUpperCase()}

Thank you for your business!

Best regards,
Exhibition Management Team`;await h({id:u,email:c,message:fe}).unwrap(),p.success(`Invoice sent successfully to ${c}`)}catch(u){console.error("Error sending invoice:",u),p.error(((s=u==null?void 0:u.data)==null?void 0:s.message)||"Failed to send invoice. Please try again.")}},I=async a=>{var n,i;try{if(a.status!=="approved"&&a.status!=="confirmed"){p.warning("Booking must be approved or confirmed before sending invoice.");return}const r=C(a._id);if(!r){p.error("Invoice not found for this booking.");return}const s=((n=a.exhibitorId)==null?void 0:n.phone)||a.customerPhone;if(!s){p.error("No phone number found for this booking.");return}await y({id:r,phoneNumber:s}).unwrap(),p.success(`Invoice sent successfully via WhatsApp to ${s}`)}catch(r){console.error("Error sending invoice via WhatsApp:",r),p.error(((i=r==null?void 0:r.data)==null?void 0:i.message)||"Failed to send invoice via WhatsApp. Please try again.")}},C=a=>{if(o||b||!g)return null;const i=(g.data||[]).find(r=>r.bookingId&&typeof r.bookingId=="object"&&r.bookingId._id===a);return i==null?void 0:i._id},R=async a=>{if(a.status!=="approved"&&a.status!=="confirmed"){p.warning("First approve the stall, then view the invoice.");return}if(o){p.loading("Loading invoice data...");return}let n=C(a._id);if(n)d(`/invoice/${n}`);else{const i=new Date(a.createdAt),r=new Date(Date.now()-10*60*1e3);if(i>r){const u="invoice-loading";p.loading({content:"Loading invoice...",key:u});try{if(await m(),n=C(a._id),n){p.success({content:"Invoice ready!",key:u,duration:1}),d(`/invoice/${n}`);return}p.info({content:"Invoice is being generated. Please wait...",key:u});let c=0;const z=4,w=[1e3,2e3,3e3,5e3],D=async()=>{c++,await m();const P=C(a._id);if(P)p.success({content:"Invoice is ready!",key:u,duration:1}),d(`/invoice/${P}`);else if(c<z){const q=w[c-1]||3e3;p.loading({content:`Preparing invoice... (${c}/${z})`,key:u}),setTimeout(D,q)}else p.warning({content:"Invoice is still being processed. Please try again in a moment.",key:u,duration:4})};setTimeout(D,w[0])}catch{p.error({content:"Failed to load invoice. Please try again.",key:u})}}else{const u="invoice-loading";if(p.loading({content:"Checking for invoice...",key:u}),await m(),n=C(a._id),n){p.success({content:"Invoice found!",key:u,duration:1}),d(`/invoice/${n}`);return}if(a.status==="approved"){p.info({content:"Invoice is being generated. Please wait...",key:u});let c=0;const z=3,w=[2e3,4e3,6e3],D=async()=>{c++,await m();const P=C(a._id);if(P)p.success({content:"Invoice is ready!",key:u,duration:1}),d(`/invoice/${P}`);else if(c<z){const q=w[c-1]||4e3;p.loading({content:`Checking invoice availability... (${c}/${z})`,key:u}),setTimeout(D,q)}else p.warning({content:"Invoice is still being processed. Please refresh the page or try again later.",key:u,duration:4})};setTimeout(D,w[0])}else p.error({content:"No invoice found for this booking. Please contact support if this persists.",key:u})}}};return[{title:"Booking Number",dataIndex:"_id",key:"bookingNumber",fixed:"left",width:190,render:(a,n)=>e.jsx(O,{type:"link",onClick:()=>{t.setSelectedBooking(n),t.setIsDetailsModalVisible(!0)},children:t.formatBookingNumber(a,n.createdAt)})},{title:"Exhibition",dataIndex:["exhibitionId","name"],key:"exhibition",width:250,render:(a,n)=>e.jsx("span",{children:n.exhibitionId.name})},{title:"Company Name",dataIndex:"companyName",key:"company",width:250,render:a=>a||"N/A"},{title:"Stall No.",key:"stallNumber",width:120,render:(a,n)=>e.jsx("span",{children:n.stallIds.map((i,r)=>e.jsxs("span",{children:[i.number,r<n.stallIds.length-1?", ":""]},`stall-${i._id||r}`))})},{title:"Stall Type",key:"stallType",width:120,render:(a,n)=>{const i=Array.from(new Set(n.stallIds.map(r=>r.type)));return e.jsx("span",{children:i.map((r,s)=>e.jsxs("span",{children:[r,s<i.length-1?", ":""]},`type-${r}-${s}`))})}},{title:"Dimensions",key:"dimensions",width:150,render:(a,n)=>e.jsx("span",{children:n.stallIds.map((i,r)=>e.jsxs("span",{children:[i.dimensions?i.dimensions.shapeType==="l-shape"?"L-Shape":`${i.dimensions.width}m × ${i.dimensions.height}m`:"No dimensions",r<n.stallIds.length-1?", ":""]},`dim-${i._id||r}`))})},{title:"Area (sqm)",key:"area",width:120,render:(a,n)=>{const i=n.stallIds.reduce((r,s)=>s.dimensions?r+pe(s.dimensions):r,0);return e.jsxs("span",{children:[Math.round(i)," sqm"]})}},{title:"Base Amount",key:"baseAmount",width:150,render:(a,n)=>`₹${n.stallIds.reduce((r,s)=>{const u=pe(s.dimensions),c=s.ratePerSqm||0;return r+Math.round(u*c*100)/100},0).toLocaleString()}`},{title:"Discount",key:"discount",width:150,render:(a,n)=>{const i=n.stallIds.reduce((c,z)=>{const w=pe(z.dimensions),D=z.ratePerSqm||0;return c+Math.round(w*D*100)/100},0),r=n.calculations.stalls.filter(c=>c.discount).map(c=>c.discount);if(r.length===0)return"-";const s=r[0];if(!s)return"-";let u=0;return s.type==="percentage"?u=Math.round(i*s.value/100*100)/100:s.type==="fixed"&&(u=Math.min(s.value,i)),u===0?"-":e.jsx(E,{title:e.jsx("div",{children:r.map((c,z)=>e.jsxs("div",{children:[c==null?void 0:c.name,": ",(c==null?void 0:c.type)==="percentage"?`${c==null?void 0:c.value}%`:`₹${c==null?void 0:c.value}`,e.jsx("br",{}),"Current Amount: ₹",u.toLocaleString()]},`discount-${z}-${(c==null?void 0:c.name)||"unnamed"}`))}),children:e.jsxs(L,{color:"red",children:["-₹",u.toLocaleString(),(s==null?void 0:s.type)==="percentage"&&` (${s.value}%)`,r.length>1&&" +"]})})}},{title:"Total Amount",key:"amount",width:150,render:(a,n)=>{const i=n.stallIds.reduce((w,D)=>{const P=pe(D.dimensions),q=D.ratePerSqm||0;return w+Math.round(P*q*100)/100},0);let r=0;const s=n.calculations.stalls.filter(w=>w.discount).map(w=>w.discount);if(s.length>0){const w=s[0];w&&(w.type==="percentage"?r=Math.round(i*w.value/100*100)/100:w.type==="fixed"&&(r=Math.min(w.value,i)))}const u=i-r;let c=0;return n.calculations.taxes&&n.calculations.taxes.length>0&&(c=n.calculations.taxes.reduce((w,D)=>{const P=Math.round(u*D.rate/100*100)/100;return w+P},0)),`₹${(Math.round((u+c)*100)/100).toLocaleString()}`}},{title:"Booked By",dataIndex:"bookedBy",key:"bookedBy",width:200,render:(a,n)=>{var i;if(n.bookingSource==="exhibitor"&&n.exhibitorId){const r=n.exhibitorId;return e.jsx(E,{title:`${r.email} - Exhibitor Portal`,children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:r.contactPerson}),e.jsx("div",{className:"text-xs text-gray-500",children:"Exhibitor Portal"})]})})}else if(n.bookingSource==="admin"&&n.userId){const r=n.userId,s=((i=r.role)==null?void 0:i.name)||"Admin";return e.jsx(E,{title:`${r.email} - ${s}`,children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:r.name||r.username}),e.jsx("div",{className:"text-xs text-gray-500",children:s})]})})}return e.jsx("span",{className:"text-gray-400",children:"System"})}},{title:"Created At",dataIndex:"createdAt",key:"createdAt",width:200,render:a=>at(a).format("MMM D, YYYY HH:mm")},{title:"Status",dataIndex:"status",key:"status",width:120,fixed:"right",render:a=>e.jsx(L,{color:a==="confirmed"?"success":a==="approved"?"blue":a==="pending"?"warning":a==="rejected"?"error":"default",children:a.toUpperCase()})},{title:"Actions",key:"actions",fixed:"right",width:220,render:(a,n)=>e.jsxs(W,{children:[e.jsx(E,{title:"View Details",children:e.jsx(O,{icon:e.jsx(rt,{}),onClick:()=>{t.setSelectedBooking(n),t.setIsDetailsModalVisible(!0)}})}),e.jsx(ot,{overlay:e.jsxs(ne,{children:[n.status!=="cancelled"&&t.hasPermission("view_bookings")&&e.jsx(ne.Item,{icon:e.jsx(Be,{}),disabled:o||n.status!=="approved"&&n.status!=="confirmed",onClick:()=>R(n),children:n.status!=="approved"&&n.status!=="confirmed"?"Approve First to View Invoice":"View Invoice"},"invoice"),n.status!=="cancelled"&&t.hasPermission("view_bookings")&&e.jsx(ne.Item,{icon:e.jsx(ct,{}),disabled:$||n.status!=="approved"&&n.status!=="confirmed",onClick:()=>j(n),children:$?"Sending...":n.status!=="approved"&&n.status!=="confirmed"?"Approve First to Send Invoice":"Send Invoice"},"sendInvoice"),e.jsx(ne.Item,{icon:e.jsx(dt,{}),disabled:f||n.status!=="approved"&&n.status!=="confirmed",onClick:()=>I(n),children:f?"Sending WhatsApp...":n.status!=="approved"&&n.status!=="confirmed"?"Approve First to Send Invoice":"Send Invoice via WhatsApp"},"sendWhatsApp"),e.jsx(ne.Item,{icon:e.jsx(ce,{}),onClick:()=>{t.setSelectedBooking(n),t.setSelectedStatus(n.status),t.setRejectionReasonText(n.rejectionReason||""),t.setIsStatusModalVisible(!0)},children:"Update Status"},"updateStatus"),t.hasPermission("bookings_delete")&&e.jsx(ne.Item,{icon:e.jsx(Ee,{}),danger:!0,onClick:()=>{It(n,t.handleDelete,t.formatBookingNumber)},children:"Delete"},"delete")]}),trigger:["click"],children:e.jsx(O,{icon:e.jsx(lt,{})})})]})}]},wt=t=>{const{bookings:d,loading:g,pagination:o,fetchBookingsWithPagination:b}=t,m=St(t),h=($,y,f,j)=>e.jsx("div",{className:"ant-table-pagination ant-table-pagination-right",style:{padding:"16px 24px",margin:0,display:"flex",justifyContent:"flex-end"},children:e.jsx(ut,{current:$,pageSize:y,total:f,showTotal:I=>`Total ${I} items`,showSizeChanger:!0,pageSizeOptions:["5","10","20","50","100"],onChange:I=>j(I,y),onShowSizeChange:(I,C)=>j(I,C),size:"default"})});return e.jsxs(e.Fragment,{children:[e.jsx(Pe,{columns:m,dataSource:d,loading:g,rowKey:"_id",scroll:{x:1950},pagination:!1}),h(o.page,o.limit,o.total,($,y)=>b($,y))]})},At=t=>{if(!t)return 0;const d=t.shapeType||"rectangle";if(d==="rectangle")return t.width*t.height;if(d==="l-shape"&&t.lShape){const{rect1Width:g,rect1Height:o,rect2Width:b,rect2Height:m}=t.lShape;return g*o+b*m}return t.width*t.height},{Title:Lt,Text:x}=We,kt=({selectedBooking:t,isDetailsModalVisible:d,setIsDetailsModalVisible:g,setSelectedBooking:o,setIsStatusModalVisible:b,setSelectedStatus:m,setRejectionReasonText:h,formatBookingNumber:$})=>{var y;return e.jsx(le,{title:"Booking Details",open:d,onCancel:()=>{g(!1),o(null)},footer:null,width:800,styles:{body:{padding:"16px"}},children:t&&e.jsxs(W,{direction:"vertical",size:16,style:{width:"100%"},children:[e.jsx(M,{title:"Booking Information",size:"small",styles:{body:{padding:"16px"}},children:e.jsxs(W,{direction:"vertical",size:16,style:{width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",backgroundColor:"#fafafa",borderRadius:"6px",border:"1px solid #f0f0f0"},children:[e.jsxs("div",{children:[e.jsx(x,{strong:!0,style:{fontSize:"16px",color:"#1890ff"},children:$(t._id,t.createdAt)}),e.jsx("br",{}),e.jsx(x,{type:"secondary",style:{fontSize:"13px"},children:t.exhibitionId.name})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx(L,{color:t.status==="confirmed"?"success":t.status==="approved"?"blue":t.status==="pending"?"warning":t.status==="rejected"?"error":"default",style:{fontSize:"12px",fontWeight:500},children:t.status.toUpperCase()}),e.jsx("br",{}),e.jsx(x,{type:"secondary",style:{fontSize:"12px"},children:new Date(t.createdAt).toLocaleDateString()})]})]}),t.rejectionReason&&e.jsxs("div",{style:{padding:"8px 12px",backgroundColor:"#fff2f0",border:"1px solid #ffccc7",borderRadius:"4px"},children:[e.jsx(x,{type:"secondary",style:{fontSize:"12px",fontWeight:500},children:"Rejection Reason:"}),e.jsx("br",{}),e.jsx(x,{style:{fontSize:"13px"},children:t.rejectionReason})]}),e.jsxs("div",{children:[e.jsx(x,{strong:!0,style:{fontSize:"14px",marginBottom:"8px",display:"block"},children:"Customer Details"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px 24px"},children:[e.jsxs("div",{children:[e.jsx(x,{type:"secondary",style:{fontSize:"12px",display:"block"},children:"Name"}),e.jsx(x,{style:{fontSize:"13px"},children:t.customerName})]}),e.jsxs("div",{children:[e.jsx(x,{type:"secondary",style:{fontSize:"12px",display:"block"},children:"Company"}),e.jsx(x,{style:{fontSize:"13px"},children:t.companyName})]}),e.jsxs("div",{children:[e.jsx(x,{type:"secondary",style:{fontSize:"12px",display:"block"},children:"Email"}),e.jsx(x,{style:{fontSize:"13px"},children:t.customerEmail})]}),e.jsxs("div",{children:[e.jsx(x,{type:"secondary",style:{fontSize:"12px",display:"block"},children:"Phone"}),e.jsx(x,{style:{fontSize:"13px"},children:t.customerPhone})]})]})]}),e.jsxs("div",{children:[e.jsx(x,{strong:!0,style:{fontSize:"14px",marginBottom:"8px",display:"block"},children:"Booking Source"}),e.jsx("div",{style:{padding:"8px 12px",backgroundColor:"#f6ffed",border:"1px solid #b7eb8f",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:t.bookingSource==="exhibitor"&&t.exhibitorId?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{flex:1},children:[e.jsx(x,{strong:!0,style:{fontSize:"13px"},children:t.exhibitorId.contactPerson}),e.jsx("br",{}),e.jsx(x,{type:"secondary",style:{fontSize:"12px"},children:t.exhibitorId.email})]}),e.jsx(L,{color:"blue",style:{fontSize:"11px"},children:"Exhibitor Portal"})]}):t.bookingSource==="admin"&&t.userId?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{flex:1},children:[e.jsx(x,{strong:!0,style:{fontSize:"13px"},children:t.userId.name||t.userId.username}),e.jsx("br",{}),e.jsx(x,{type:"secondary",style:{fontSize:"12px"},children:t.userId.email})]}),e.jsx(L,{color:"green",style:{fontSize:"11px"},children:((y=t.userId.role)==null?void 0:y.name)||"Admin"})]}):e.jsx(x,{type:"secondary",style:{fontSize:"13px"},children:"System Generated"})})]})]})}),e.jsx(M,{title:"Stall Details",size:"small",styles:{body:{padding:"12px"}},children:e.jsx(Pe,{dataSource:t.stallIds,pagination:!1,rowKey:"_id",size:"small",columns:[{title:"Stall Number",dataIndex:"number",key:"number"},{title:"Stall Type",key:"type",render:f=>f.type||"-"},{title:"Dimensions",key:"dimensions",render:f=>e.jsx(L,{color:"blue",children:f.dimensions?f.dimensions.shapeType==="l-shape"?"L-Shape":`${f.dimensions.width}x${f.dimensions.height}m`:"No dimensions"})},{title:"Rate (per sqm)",dataIndex:"ratePerSqm",key:"rate",render:f=>`₹${f.toLocaleString()}`},{title:"Base Amount",key:"baseAmount",render:f=>{const j=t.calculations.stalls.find(I=>I.stallId===f._id);return j?`₹${j.baseAmount.toLocaleString()}`:"-"}},{title:"Discount",key:"discount",render:f=>{const j=t.calculations.stalls.find(I=>I.stallId===f._id);return j!=null&&j.discount?e.jsx(E,{title:e.jsx("div",{children:j.discount.type==="percentage"&&` (${j.discount.value}%)`}),children:e.jsxs(L,{color:"red",children:["-₹",j.discount.amount.toLocaleString(),j.discount.type==="percentage"&&` (${j.discount.value}%)`]})}):"-"}}]})}),e.jsx(M,{title:"Financial Summary",size:"small",styles:{body:{padding:"12px"}},children:e.jsx(W,{direction:"vertical",style:{width:"100%"},size:8,children:(()=>{const f=t.stallIds.reduce((i,r)=>{const s=At(r.dimensions),u=r.ratePerSqm||0;return i+Math.round(s*u*100)/100},0);let j=0;const I=t.calculations.stalls.filter(i=>i.discount).map(i=>i.discount);if(I.length>0){const i=I[0];i&&(i.type==="percentage"?j=Math.round(f*i.value/100*100)/100:i.type==="fixed"&&(j=Math.min(i.value,f)))}const C=f-j,R=t.calculations.taxes.map(i=>({...i,amount:Math.round(C*i.rate/100*100)/100})),a=R.reduce((i,r)=>i+r.amount,0),n=Math.round((C+a)*100)/100;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(x,{children:"Total Base Amount:"}),e.jsxs(x,{children:["₹",f.toLocaleString()]})]}),j>0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(x,{children:"Total Discount:"}),e.jsxs(x,{type:"danger",children:["-₹",j.toLocaleString()]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(x,{children:"Amount after Discount:"}),e.jsxs(x,{children:["₹",C.toLocaleString()]})]}),e.jsx(Le,{style:{margin:"8px 0"}}),R.map(i=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(x,{children:[i.name," (",i.rate,"%):"]}),e.jsxs(x,{children:["₹",i.amount.toLocaleString()]})]},`tax-${i.name}-${i.rate}`)),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"8px"},children:[e.jsx(x,{strong:!0,children:"Total Amount (incl. Taxes):"}),e.jsxs(x,{strong:!0,children:["₹",n.toLocaleString()]})]})]})})()})})]})})},Ct=({selectedBooking:t,isStatusModalVisible:d,setIsStatusModalVisible:g,selectedStatus:o,setSelectedStatus:b,rejectionReasonText:m,setRejectionReasonText:h,formatBookingNumber:$,refreshAfterAction:y})=>{const f=Ne(),[j,I]=Je.useState(!1),{refetch:C}=be({page:1,limit:100}),R=async(n,i,r)=>{try{I(!0),await f(Ue({id:n,status:i,...r&&{rejectionReason:r}})).unwrap(),p.success(`Booking ${i} successfully`),y(),g(!1),a(null),(i==="approved"||i==="confirmed")&&(f(He.util.invalidateTags(["Invoice"])),setTimeout(async()=>{await C()},1500))}catch{p.error("Failed to update booking status")}finally{I(!1)}},a=n=>{};return e.jsx(le,{title:"Update Booking Status",open:d,onCancel:()=>{g(!1),h("")},footer:null,width:600,children:t&&e.jsxs("div",{children:[e.jsx(M,{title:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(Be,{style:{fontSize:"18px"}}),e.jsx("span",{children:"Booking Information"})]}),style:{marginBottom:16},variant:"borderless",size:"small",children:e.jsxs(W,{direction:"vertical",size:8,style:{width:"100%"},children:[e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:[e.jsx(L,{color:"processing",children:$(t._id,t.createdAt)}),e.jsx(L,{color:"default",children:t.exhibitionId.name}),e.jsx(L,{color:t.status==="confirmed"?"success":t.status==="approved"?"blue":t.status==="pending"?"warning":t.status==="rejected"?"error":"default",children:t.status.toUpperCase()})]}),e.jsxs("div",{style:{marginTop:"8px"},children:[e.jsx(x,{strong:!0,children:"Stall Details:"}),e.jsx("div",{style:{marginTop:"4px"},children:t.stallIds.map((n,i)=>e.jsxs(L,{style:{margin:"2px"},children:["#",n.number," ",n.type&&`(${n.type})`]},n._id))})]}),e.jsx(Le,{style:{margin:"8px 0"}}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:[e.jsx(x,{strong:!0,style:{minWidth:"120px"},children:"Company:"}),e.jsx(x,{children:t.companyName})]}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:[e.jsx(x,{strong:!0,style:{minWidth:"120px"},children:"Current Status:"}),e.jsx(L,{color:t.status==="confirmed"?"success":t.status==="approved"?"blue":t.status==="pending"?"warning":t.status==="rejected"?"error":"default",children:t.status.toUpperCase()})]})]})}),e.jsxs(M,{title:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(xt,{style:{fontSize:"18px"}}),e.jsx("span",{children:"Update Status"})]}),variant:"borderless",size:"small",children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx(x,{strong:!0,children:"Select New Status:"}),e.jsx("div",{style:{marginTop:"16px"},children:e.jsxs(ie.Group,{value:o,onChange:n=>b(n.target.value),buttonStyle:"solid",style:{display:"flex",flexWrap:"nowrap",overflowX:"auto"},children:[e.jsx(ie.Button,{value:"pending",style:{flex:"0 0 auto"},children:e.jsxs(W,{children:[e.jsx(Me,{style:{color:"#faad14"}}),"Pending"]})}),e.jsx(ie.Button,{value:"approved",style:{flex:"0 0 auto"},children:e.jsxs(W,{children:[e.jsx(ce,{style:{color:"#52c41a"}}),"Approved"]})}),e.jsx(ie.Button,{value:"rejected",style:{flex:"0 0 auto"},children:e.jsxs(W,{children:[e.jsx(me,{style:{color:"#f5222d"}}),"Rejected"]})}),e.jsx(ie.Button,{value:"confirmed",style:{flex:"0 0 auto"},children:e.jsxs(W,{children:[e.jsx(ce,{style:{color:"#1890ff"}}),"Confirmed"]})}),e.jsx(ie.Button,{value:"cancelled",style:{flex:"0 0 auto"},children:e.jsxs(W,{children:[e.jsx(me,{style:{color:"#ff7875"}}),"Cancelled"]})})]})})]}),o==="rejected"&&e.jsx("div",{children:e.jsx(ht.Item,{label:e.jsx(x,{strong:!0,children:"Rejection Reason:"}),required:o==="rejected",rules:[{required:!0,message:"Please provide a reason for rejection"}],help:"This will be visible to the customer",children:e.jsx(ze.TextArea,{rows:4,value:m,onChange:n=>h(n.target.value),placeholder:"Provide a reason for rejection",style:{marginTop:8}})})}),o==="approved"&&e.jsx(xe,{message:"Approval Confirmation",description:"By approving this booking, the stalls will be reserved but not yet confirmed. Customer will be notified.",type:"success",showIcon:!0,style:{marginTop:8}}),o==="confirmed"&&e.jsx(xe,{message:"Confirmation Notice",description:"By confirming this booking, the stalls will be marked as booked. This should be done after payment is received.",type:"info",showIcon:!0,style:{marginTop:8}}),o==="cancelled"&&e.jsx(xe,{message:"Cancellation Warning",description:"By cancelling this booking, all stalls will be marked as available again.",type:"warning",showIcon:!0,style:{marginTop:8}}),o==="pending"&&e.jsx(xe,{message:"Return to Pending",description:"This booking will be moved back to pending status.",type:"warning",showIcon:!0,style:{marginTop:8}})]}),e.jsxs("div",{style:{marginTop:24,display:"flex",justifyContent:"flex-end",gap:"8px"},children:[e.jsx(O,{onClick:()=>{g(!1),h("")},children:"Cancel"}),e.jsx(O,{type:"primary",onClick:()=>{if(o==="rejected"&&!m.trim()){p.error("Rejection reason is required when rejecting a booking");return}R(t._id,o,o==="rejected"?m:void 0)},loading:j,disabled:o==="rejected"&&!m.trim(),children:"Update Status"})]})]})]})})},Tt=t=>{if(!t)return 0;const d=t.shapeType||"rectangle";if(d==="rectangle")return t.width*t.height;if(d==="l-shape"&&t.lShape){const{rect1Width:g,rect1Height:o,rect2Width:b,rect2Height:m}=t.lShape;return g*o+b*m}return t.width*t.height},{Title:Dt,Text:$t}=We,Ft=()=>{const t=Ne(),{bookings:d,loading:g,pagination:o,stats:b,statsLoading:m}=De(l=>l.booking),{exhibitions:h,activeExhibitions:$}=De(l=>l.exhibition),[y,f]=B.useState(null),[j,I]=B.useState(!1),[C,R]=B.useState(!1),[a,n]=B.useState("pending"),[i,r]=B.useState(""),[s,u]=B.useState({search:"",status:[],dateRange:null,exhibition:null}),c=Re(),{data:z,isLoading:w,error:D,refetch:P}=be({page:1,limit:200},{refetchOnMountOrArgChange:10,refetchOnFocus:!0,refetchOnReconnect:!0}),{hasPermission:q}=ft(),F=B.useCallback((l=1,A=10,U)=>{const k=U||s,_={page:l,limit:A};k.search&&(_.search=k.search),k.exhibition&&(_.exhibitionId=k.exhibition),k.status&&k.status.length>0&&(_.status=k.status),k.dateRange&&k.dateRange.length===2&&(_.startDate=k.dateRange[0],_.endDate=k.dateRange[1]),t(Oe(_))},[t,s]),K=B.useCallback(l=>{t(Ve(l?{exhibitionId:l}:{}))},[t]),se=B.useCallback(()=>{F(o.page,o.limit),K(s.exhibition||void 0)},[F,K,o.page,o.limit,s.exhibition]);B.useEffect(()=>{F(o.page,o.limit),K(s.exhibition||void 0)},[F,K,o.page,o.limit,s.exhibition]),B.useEffect(()=>{t(Qe()),t(Ke())},[t]),B.useEffect(()=>{d.length>0&&[...new Set(d.map(A=>A.exhibitionId._id))].forEach(A=>{t(Ye(A))})},[d,t]),B.useEffect(()=>{const l=setTimeout(()=>{F(1,o.limit)},s.search?500:0);return()=>clearTimeout(l)},[s.search,F,o.limit]);const fe=async l=>{try{await t(Ze(l)).unwrap(),p.success("Booking deleted successfully"),se()}catch(A){p.error((A==null?void 0:A.message)||"Failed to delete booking")}},N=l=>{u(l),F(1,o.limit,l),K(l.exhibition||void 0)},V=Array.isArray(d)?d:[],ee=V.filter(l=>{const A=h.find(U=>U._id===l.exhibitionId._id);return A&&A.status==="published"&&A.isActive}),de=ee.filter(l=>{if(s.exhibition&&(typeof l.exhibitionId=="string"?l.exhibitionId:l.exhibitionId._id)!==s.exhibition||s.status&&s.status.length>0&&!s.status.includes(l.status))return!1;if(s.dateRange&&s.dateRange.length===2){const A=new Date(l.createdAt),U=new Date(s.dateRange[0]),k=new Date(s.dateRange[1]);if(A<U||A>k)return!1}if(s.search){const A=s.search.toLowerCase();if(![l.companyName,l.customerName,l.customerEmail,l.customerPhone].join(" ").toLowerCase().includes(A))return!1}return!0}),te=(l,A)=>{var v;const U=new Date(A);if(isNaN(U.getTime()))return"--/--/--";const k=U.getFullYear();let _=ee.find(S=>S._id===l);if(_||(_=V.find(S=>S._id===l)),!_||!_.exhibitionId)return`--/${k}/--`;const ae=typeof _.exhibitionId=="string"?_.exhibitionId:_.exhibitionId._id;if(!ae)return`--/${k}/--`;const re=V.filter(S=>{var G;return(typeof S.exhibitionId=="string"?S.exhibitionId:(G=S.exhibitionId)==null?void 0:G._id)===ae}).sort((S,Y)=>new Date(S.createdAt).getTime()-new Date(Y.createdAt).getTime()).findIndex(S=>S._id===l)+1;if(re===0)return`--/${k}/--`;const ge=re.toString().padStart(2,"0"),oe=h.find(S=>S._id===ae);return`${(oe==null?void 0:oe.invoicePrefix)||((v=_.exhibitionId)==null?void 0:v.invoicePrefix)||"BK"}/${k}/${ge}`},ue=async()=>{try{if(p.loading({content:"Preparing export...",key:"export"}),!h||h.length===0){p.warning("Exhibitions data is still loading. Please wait and try again."),p.destroy("export");return}const l={};s.search&&(l.search=s.search),s.exhibition&&(l.exhibitionId=s.exhibition),s.status&&s.status.length>0&&(l.status=s.status),s.dateRange&&s.dateRange.length===2&&(l.startDate=s.dateRange[0],l.endDate=s.dateRange[1]);const k=(await(await Ge(async()=>{const{default:v}=await import("./index-nu_xN7Rs.js").then(S=>S.ac);return{default:v}},__vite__mapDeps([0,1,2,3,4,5,6]))).default.get("/bookings/export",{params:l})).data;if(!Array.isArray(k))throw new Error("Invalid data format received");const ae=k.filter(v=>{var G;const S=typeof v.exhibitionId=="string"?v.exhibitionId:(G=v.exhibitionId)==null?void 0:G._id;if(!S||!h||h.length===0)return!0;const Y=h.find(he=>he._id===S);return Y&&Y.status==="published"&&Y.isActive}).map(v=>{var G,he,Se,we,Ae,ke,Ce,Te;const S=v.stallIds||[],Y=S.reduce((T,Q)=>Q!=null&&Q.dimensions?T+Tt(Q.dimensions):T,0);return{"Booking Number":te(v._id,v.createdAt),Exhibition:((G=v.exhibitionId)==null?void 0:G.name)||"Unknown Exhibition","Company Name":v.companyName||"N/A","Customer Name":v.customerName,"Customer Email":v.customerEmail,"Customer Phone":v.customerPhone,"Stall Numbers":S.length>0?S.map(T=>(T==null?void 0:T.number)||"N/A").join(", "):"No stalls","Stall Types":S.length>0?Array.from(new Set(S.map(T=>(T==null?void 0:T.type)||(T!=null&&T.stallTypeId&&typeof T.stallTypeId=="object"?T.stallTypeId.name:"-")))).join(", "):"No types",Dimensions:S.length>0?S.map(T=>{const Q=T==null?void 0:T.dimensions;return Q?Q.shapeType==="l-shape"?"L-Shape":`${Q.width}m × ${Q.height}m`:"No dimensions"}).join(", "):"No dimensions","Total Area (sqm)":Math.round(Y),"Base Amount":Math.round(((he=v.calculations)==null?void 0:he.totalBaseAmount)||0),Discount:Math.round(((Se=v.calculations)==null?void 0:Se.totalDiscountAmount)||0),"Total Amount":Math.round(((we=v.calculations)==null?void 0:we.totalAmount)||v.amount||0),Status:((Ae=v.status)==null?void 0:Ae.toUpperCase())||"UNKNOWN","Booked By":v.bookingSource==="exhibitor"&&v.exhibitorId?`${((ke=v.exhibitorId)==null?void 0:ke.contactPerson)||"Unknown"} (Exhibitor)`:v.userId?`${((Ce=v.userId)==null?void 0:Ce.name)||((Te=v.userId)==null?void 0:Te.username)||"Unknown"} (Admin)`:"System","Created Date":new Date(v.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})}}),ve=ye.json_to_sheet(ae),re=ye.book_new();ye.book_append_sheet(re,ve,"Bookings");const ge=gt(re,{bookType:"xlsx",type:"array"}),oe=new Blob([ge],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),Ie=new Date().toISOString().split("T")[0];yt.saveAs(oe,`bookings_export_${Ie}.xlsx`),p.success({content:"Export successful!",key:"export",duration:2})}catch(l){console.error("Export error:",l),p.error({content:"Failed to export bookings",key:"export",duration:2})}};return e.jsxs("div",{className:"dashboard-container",children:[e.jsx("div",{style:{marginBottom:"24px"},children:e.jsxs(je,{gutter:[24,24],align:"middle",children:[e.jsx(H,{flex:"auto",children:e.jsxs(W,{direction:"vertical",size:4,children:[e.jsx(Dt,{level:4,style:{margin:0},children:"Stall Bookings"}),e.jsx($t,{type:"secondary",children:"Manage exhibition stall bookings"})]})}),e.jsx(H,{children:e.jsxs(W,{children:[e.jsx(O,{icon:e.jsx(pt,{}),onClick:ue,size:"large",children:"Export"}),e.jsx(O,{type:"primary",size:"large",icon:e.jsx(mt,{}),onClick:()=>c("/bookings/create"),children:"Create Booking"})]})})]})}),e.jsx(jt,{bookings:de,paginationTotal:de.length,stats:b,statsLoading:m}),e.jsx(vt,{filters:s,exhibitions:$,onFilterChange:N,onRefresh:se}),e.jsx(M,{className:"info-card",styles:{body:{padding:0,overflow:"auto"},header:{paddingBottom:12}},title:"Booking List",children:e.jsx(wt,{bookings:ee,loading:g,fetchBookingsWithPagination:F,pagination:o,setSelectedBooking:f,setIsDetailsModalVisible:I,setIsStatusModalVisible:R,setSelectedStatus:n,setRejectionReasonText:r,formatBookingNumber:te,handleDelete:fe,hasPermission:q})}),e.jsx(kt,{selectedBooking:y,isDetailsModalVisible:j,setIsDetailsModalVisible:I,setSelectedBooking:f,setIsStatusModalVisible:R,setSelectedStatus:n,setRejectionReasonText:r,formatBookingNumber:te}),e.jsx(Ct,{selectedBooking:y,isStatusModalVisible:C,setIsStatusModalVisible:R,selectedStatus:a,setSelectedStatus:n,rejectionReasonText:i,setRejectionReasonText:r,formatBookingNumber:te,refreshAfterAction:se})]})};export{Ft as default};
