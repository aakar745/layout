import{p as V,j as e}from"./index-BRKtYmDF.js";import{r as x,i as _,u as Q,L as U}from"./vendor-react-BNeW3y6d.js";import{T as z,Q as C,c as o,a5 as m,a6 as t,a7 as a,aL as h,w as B,x as j,h as R,aQ as F,L as g,S as G,d as f,D as H,aZ as W,E as A,C as Z,a_ as q,f as J,b as l,m as T}from"./vendor-antd-Dz3j4xaK.js";import"./vendor-utils-CsjRLf7T.js";import"./vendor-styling-BEMjND7I.js";import"./vendor-canvas-BRbMLhVA.js";const{Title:K,Text:c,Paragraph:re}=z,ne=()=>{const[r,M]=x.useState([]),[i,v]=x.useState(!0),[y,b]=x.useState(null),p=_(s=>s.exhibitorAuth.exhibitor),n=Q();x.useEffect(()=>{D()},[]);const D=async()=>{try{v(!0),b(null);const s=await V.getExhibitorBookings();M(s.data||[])}catch(s){console.error("Failed to fetch bookings:",s),b("Unable to load your bookings at this time. Please try again later.")}finally{v(!1)}},P=r.filter(s=>s.status==="approved").length,u=r.filter(s=>s.status==="pending").length;r.filter(s=>s.status==="rejected").length;const $=r.filter(s=>s.status==="confirmed").length,L=s=>{switch(s){case"approved":return e.jsxs(l,{color:"success",children:[e.jsx(j,{})," Approved"]});case"pending":return e.jsxs(l,{color:"warning",children:[e.jsx(R,{})," Pending"]});case"rejected":return e.jsxs(l,{color:"error",children:[e.jsx(T,{})," Rejected"]});case"confirmed":return e.jsxs(l,{color:"blue",children:[e.jsx(j,{})," Confirmed"]});case"cancelled":return e.jsxs(l,{color:"default",children:[e.jsx(T,{})," Cancelled"]});default:return e.jsx(l,{children:"Unknown"})}},Y=s=>{n(`/exhibitor/invoice/${s}`)},k=(s,d)=>s.status===d;return e.jsxs("div",{children:[e.jsxs(K,{level:2,children:["Welcome, ",(p==null?void 0:p.companyName)||"Exhibitor"]}),e.jsx(c,{type:"secondary",children:"Here's an overview of your exhibition activities"}),y&&e.jsx(C,{message:"Error",description:y,type:"error",showIcon:!0,style:{marginTop:24,marginBottom:24}}),u>0&&e.jsx(C,{message:"Pending Approvals",description:`You have ${u} booking(s) waiting for approval.`,type:"info",showIcon:!0,style:{marginTop:24,marginBottom:24},action:e.jsx(o,{size:"small",type:"primary",onClick:()=>n("/exhibitor/bookings"),children:"View Bookings"})}),e.jsxs(m,{gutter:[24,24],style:{marginTop:24},children:[e.jsx(t,{xs:24,sm:12,md:6,children:e.jsx(a,{children:e.jsx(h,{title:"Total Bookings",value:i?"-":r.length,prefix:e.jsx(B,{}),loading:i})})}),e.jsx(t,{xs:24,sm:12,md:6,children:e.jsx(a,{children:e.jsx(h,{title:"Confirmed",value:i?"-":$,valueStyle:{color:"#1890ff"},prefix:e.jsx(j,{}),loading:i})})}),e.jsx(t,{xs:24,sm:12,md:6,children:e.jsx(a,{children:e.jsx(h,{title:"Approved",value:i?"-":P,valueStyle:{color:"#3f8600"},prefix:e.jsx(j,{}),loading:i})})}),e.jsx(t,{xs:24,sm:12,md:6,children:e.jsx(a,{children:e.jsx(h,{title:"Pending",value:i?"-":u,valueStyle:{color:"#faad14"},prefix:e.jsx(R,{}),loading:i})})})]}),e.jsx(a,{title:"Recent Bookings",extra:e.jsx(U,{to:"/exhibitor/bookings",children:"View All"}),style:{marginTop:24},loading:i,children:i?e.jsx(F,{active:!0,paragraph:{rows:3}}):r.length>0?e.jsx(g,{dataSource:r.slice(0,5),renderItem:s=>{var d,I,S,w,E;return e.jsxs(g.Item,{actions:[e.jsx(o,{type:"link",onClick:()=>n(`/exhibitor/bookings/${s._id}`),children:"View Details"},"view"),k(s,"approved")||k(s,"confirmed")?e.jsx(o,{type:"link",icon:e.jsx(W,{}),onClick:()=>Y(s._id),children:"Invoice"},"invoice"):null].filter(Boolean),children:[e.jsx(g.Item.Meta,{title:e.jsxs("div",{children:[e.jsx(c,{strong:!0,children:((d=s.exhibitionId)==null?void 0:d.name)||"Exhibition"}),e.jsxs(c,{type:"secondary",style:{marginLeft:12},children:["Stall: ",((I=s.stallIds)==null?void 0:I.map(N=>N.number).join(", "))||"N/A"]})]}),description:e.jsxs(G,{direction:"vertical",size:1,children:[e.jsxs("div",{children:[e.jsxs(c,{children:["Booked on: ",f(s.createdAt).format("MMM D, YYYY")]}),e.jsx(H,{type:"vertical"}),e.jsxs(c,{children:["Amount: â‚¹",((S=s.amount)==null?void 0:S.toLocaleString())||"N/A"]})]}),e.jsx("div",{children:e.jsxs(c,{children:["Exhibition date: ",f((w=s.exhibitionId)==null?void 0:w.startDate).format("MMM D")," - ",f((E=s.exhibitionId)==null?void 0:E.endDate).format("MMM D, YYYY")]})})]})}),L(s.status)]})}}):e.jsx(A,{description:"No bookings found",image:A.PRESENTED_IMAGE_SIMPLE})}),e.jsx(m,{gutter:[24,24],style:{marginTop:24},children:e.jsx(t,{span:24,children:e.jsx(a,{title:"Quick Actions",children:e.jsxs(m,{gutter:[16,16],children:[e.jsx(t,{xs:24,sm:12,md:8,lg:6,children:e.jsx(o,{type:"primary",icon:e.jsx(B,{}),block:!0,onClick:()=>n("/exhibitions"),children:"Book New Stall"})}),e.jsx(t,{xs:24,sm:12,md:8,lg:6,children:e.jsx(o,{icon:e.jsx(Z,{}),block:!0,onClick:()=>n("/exhibitor/bookings"),children:"View All Bookings"})}),e.jsx(t,{xs:24,sm:12,md:8,lg:6,children:e.jsx(o,{icon:e.jsx(q,{}),block:!0,onClick:()=>n("/exhibitor/bookings?status=approved"),children:"Pending Payments"})}),e.jsx(t,{xs:24,sm:12,md:8,lg:6,children:e.jsx(o,{icon:e.jsx(J,{}),block:!0,onClick:()=>n("/exhibitor/profile"),children:"Update Profile"})})]})})})})]})};export{ne as default};
