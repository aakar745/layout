import{H as $,I as A,J as N,j as e,E as U,D as H}from"./index-0Suq5uxL.js";import{l as L,u as M,j as V,i as W,r as b}from"./vendor-react-BNeW3y6d.js";import{a5 as d,aF as F,Q as J,T as O,a6 as c,a7 as a,S as g,av as Q,d as x,a2 as X,D as v,aI as p,h as Z,P as _,c as j,Y as q,aU as G,aO as K,b as I,Z as ee,w as te,x as se,b2 as ie,A as ae,f as ne,aP as re}from"./vendor-antd--VDS8NUg.js";import"./vendor-utils-CtctGR1F.js";import"./vendor-styling-CU6mz1ss.js";import"./vendor-canvas-BRbMLhVA.js";const{Title:R,Text:i,Paragraph:S}=O,k=()=>{const o=M();return e.jsxs("div",{style:{marginBottom:"24px",position:"sticky",top:"16px",zIndex:10},children:[e.jsx(j,{icon:e.jsx(re,{}),onClick:()=>o("/exhibition"),type:"default",size:"large",style:{borderRadius:"8px",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",background:"white",borderColor:"transparent",fontWeight:500,padding:"0 16px",height:"42px",display:"flex",alignItems:"center",transition:"all 0.3s ease"},className:"back-button-hover",children:e.jsx("span",{style:{marginLeft:8},children:"Back to List"})}),e.jsx("style",{children:`
        .back-button-hover:hover {
          transform: translateX(-5px);
          box-shadow: 0 4px 12px rgba(0,0,0,0.1);
          background: #f0f5ff;
          border-color: #d6e4ff;
        }
      `})]})},he=()=>{const{id:o}=L(),E=M(),h=V(),{currentExhibition:t,halls:Y,stalls:D,loading:T}=W(s=>s.exhibition),[C,y]=b.useState(0);b.useEffect(()=>{o&&(h($(o)),h(A(o)),h(N({exhibitionId:o})))},[o,h]),b.useEffect(()=>{t&&P()},[t]);const u=()=>{if(!t)return{hallCount:0,stallCount:0,bookedStallCount:0,availableStallCount:0};const s=Y.length||0;let n=D.length||0,r=D.filter(l=>l.status==="booked"||l.status==="reserved").length;return n===0&&(t.stalls&&t.stalls.length>0?(n=t.stalls.length,r=t.stalls.filter(l=>l.status==="booked"||l.status==="reserved").length):(n=t.stallCount||0,r=t.bookedStallCount||0)),{hallCount:s,stallCount:n,bookedStallCount:r,availableStallCount:n-r}},P=()=>{if(!t)return 0;const s=new Date,n=new Date(t.startDate),r=new Date(t.endDate);if(s<n)return y(0);if(s>r)return y(100);const l=r.getTime()-n.getTime(),m=s.getTime()-n.getTime();y(Math.round(m/l*100))},B=s=>{switch(s.toLowerCase()){case"published":return"#52c41a";case"draft":return"#faad14";case"completed":return"#1890ff";default:return"#d9d9d9"}},z=()=>{if(!t)return{text:"",count:0,isPast:!1};const s=new Date,n=new Date(t.startDate),r=new Date(t.endDate);return s>r?{text:"Ended",count:Math.ceil((s.getTime()-r.getTime())/864e5),isPast:!0}:s>=n&&s<=r?{text:"Days Remaining",count:Math.ceil((r.getTime()-s.getTime())/864e5),isPast:!1}:{text:"Days Until Start",count:Math.ceil((n.getTime()-s.getTime())/(1e3*60*60*24)),isPast:!1}},w=s=>{E(H(t,s))};if(T)return e.jsxs("div",{style:{padding:"24px"},children:[e.jsx(k,{}),e.jsx(d,{children:e.jsx(F,{active:!0,avatar:!0,paragraph:{rows:6}})})]});if(!t)return e.jsxs("div",{style:{padding:"24px"},children:[e.jsx(k,{}),e.jsx(d,{children:e.jsxs("div",{style:{textAlign:"center",padding:"40px 0"},children:[e.jsx(J,{style:{fontSize:"48px",color:"#d9d9d9",marginBottom:"16px"}}),e.jsx(R,{level:4,children:"Exhibition not found"}),e.jsx(S,{type:"secondary",children:"The exhibition you are looking for does not exist or has been removed."})]})})]});const f=z();return e.jsxs("div",{style:{padding:"24px",background:"#f5f7fa",minHeight:"calc(100vh - 64px)"},children:[e.jsx(k,{}),e.jsx(d,{className:"exhibition-header-card",style:{marginBottom:"24px",borderRadius:"12px",overflow:"hidden"},bodyStyle:{padding:"0"},children:e.jsx("div",{style:{background:"linear-gradient(135deg, #1a365d 0%, #44337a 100%)",padding:"40px 24px",position:"relative"},children:e.jsxs(c,{gutter:[24,24],align:"middle",children:[e.jsxs(a,{xs:24,md:16,children:[e.jsx(R,{level:2,style:{color:"white",marginBottom:"8px",marginTop:0},children:t.name}),e.jsx(S,{style:{color:"rgba(255, 255, 255, 0.8)",fontSize:"16px",marginBottom:"24px"},children:t.description}),e.jsxs(g,{split:e.jsx(v,{type:"vertical",style:{background:"rgba(255,255,255,0.3)"}}),children:[e.jsxs(g,{children:[e.jsx(Q,{style:{color:"rgba(255,255,255,0.8)"}}),e.jsxs(i,{style:{color:"rgba(255,255,255,0.8)"},children:[x(t.startDate).format("MMM D, YYYY")," - ",x(t.endDate).format("MMM D, YYYY")]})]}),t.venue&&e.jsxs(g,{children:[e.jsx(X,{style:{color:"rgba(255,255,255,0.8)"}}),e.jsx(i,{style:{color:"rgba(255,255,255,0.8)"},children:t.venue})]})]})]}),e.jsx(a,{xs:24,md:8,children:e.jsxs(d,{style:{borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",position:"relative",overflow:"visible"},children:[e.jsx("div",{style:{position:"absolute",top:"-12px",right:"-12px",zIndex:2,background:B(t.status),color:"white",padding:"4px 12px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",boxShadow:"0 2px 6px rgba(0,0,0,0.15)"},children:t.status.toUpperCase()}),e.jsx(p,{title:f.text,value:f.count,suffix:"days",valueStyle:{color:f.isPast?"#8c8c8c":"#1890ff",fontWeight:600},prefix:e.jsx(Z,{})}),e.jsx(v,{style:{margin:"16px 0"}}),e.jsx("div",{style:{marginBottom:"8px"},children:e.jsx(i,{type:"secondary",children:"Exhibition Progress"})}),e.jsx(_,{percent:C,status:C===100?"success":"active",strokeColor:{"0%":"#108ee9","100%":"#87d068"}})]})})]})})}),e.jsxs(c,{gutter:[16,16],style:{marginBottom:"24px"},children:[e.jsx(a,{xs:24,sm:8,children:e.jsx(j,{type:"primary",icon:e.jsx(q,{}),onClick:()=>w(`${o}/layout`),block:!0,size:"large",style:{height:"48px"},children:"Manage Layout"})}),e.jsx(a,{xs:24,sm:8,children:e.jsx(j,{icon:e.jsx(G,{}),onClick:()=>w(`${o}/edit`),block:!0,size:"large",style:{height:"48px"},children:"Edit Exhibition"})}),e.jsx(a,{xs:24,sm:8,children:e.jsx(j,{icon:e.jsx(K,{}),onClick:()=>window.open(U(t),"_blank"),block:!0,size:"large",style:{height:"48px"},disabled:t.status!=="published",children:"View Public Page"})})]}),e.jsxs(c,{gutter:[24,24],children:[e.jsx(a,{xs:24,lg:16,children:e.jsxs(d,{title:"Exhibition Details",style:{borderRadius:"12px",height:"100%"},children:[e.jsxs(c,{gutter:[24,24],children:[e.jsxs(a,{xs:24,sm:12,children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx(i,{type:"secondary",style:{display:"block",marginBottom:"8px"},children:"Start Date"}),e.jsx(i,{strong:!0,style:{fontSize:"16px"},children:x(t.startDate).format("MMMM D, YYYY")})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx(i,{type:"secondary",style:{display:"block",marginBottom:"8px"},children:"End Date"}),e.jsx(i,{strong:!0,style:{fontSize:"16px"},children:x(t.endDate).format("MMMM D, YYYY")})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx(i,{type:"secondary",style:{display:"block",marginBottom:"8px"},children:"Created At"}),e.jsx(i,{strong:!0,style:{fontSize:"16px"},children:x(t.createdAt).format("MMMM D, YYYY")})]})]}),e.jsxs(a,{xs:24,sm:12,children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx(i,{type:"secondary",style:{display:"block",marginBottom:"8px"},children:"Status"}),e.jsx(I,{color:B(t.status),style:{padding:"4px 12px",borderRadius:"4px",fontSize:"14px"},children:t.status.toUpperCase()})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx(i,{type:"secondary",style:{display:"block",marginBottom:"8px"},children:"Active Status"}),e.jsx(I,{color:t.isActive?"#52c41a":"#f5222d",style:{padding:"4px 12px",borderRadius:"4px",fontSize:"14px"},children:t.isActive?"ACTIVE":"INACTIVE"})]}),t.venue&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx(i,{type:"secondary",style:{display:"block",marginBottom:"8px"},children:"Venue"}),e.jsx(i,{strong:!0,style:{fontSize:"16px"},children:t.venue})]})]})]}),e.jsx(v,{}),e.jsxs("div",{children:[e.jsx(i,{type:"secondary",style:{display:"block",marginBottom:"8px"},children:"Description"}),e.jsx(S,{children:t.description||"No description provided."})]})]})}),e.jsxs(a,{xs:24,lg:8,children:[e.jsx(d,{title:"Exhibition Stats",style:{borderRadius:"12px",marginBottom:"24px"},children:e.jsxs(c,{gutter:[16,24],children:[e.jsx(a,{span:12,children:e.jsx(p,{title:"Halls",value:u().hallCount,prefix:e.jsx(ee,{})})}),e.jsx(a,{span:12,children:e.jsx(p,{title:"Stalls",value:u().stallCount,prefix:e.jsx(te,{})})}),e.jsx(a,{span:12,children:e.jsx(p,{title:"Booked Stalls",value:u().bookedStallCount,prefix:e.jsx(se,{})})}),e.jsx(a,{span:12,children:e.jsx(p,{title:"Available Stalls",value:u().availableStallCount,prefix:e.jsx(ie,{})})})]})}),e.jsx(d,{title:"Created By",style:{borderRadius:"12px"},children:t.createdBy?e.jsxs(g,{children:[e.jsx(ae,{icon:e.jsx(ne,{})}),e.jsx(i,{children:t.createdByName||"Administrator"})]}):e.jsx(i,{type:"secondary",children:"Information not available"})})]})]})]})};export{he as default};
