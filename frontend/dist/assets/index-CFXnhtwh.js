var so=Object.defineProperty;var no=(t,s,n)=>s in t?so(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n;var Zi=(t,s,n)=>no(t,typeof s!="symbol"?s+"":s,n);import{j as e,_ as ca,a as da,D as ua,P as ha}from"./vendor-pdf-Bmb9L_Rw.js";import{b as io,c as ro,g as ao,d as Ae,T as me,L as es,e as Ye,S as X,f as le,B as Xe,A as yt,h as _n,i as Ce,j as oo,k as Qe,l as ws,r as c,m as q,n as Ri,o as Us,p as Pn,q as ts,s as ct,t as Dt,E as Tt,D as _t,u as De,M as at,v as xa,w as pa,x as bt,y as Dn,z as lt,C as Rn,F as Te,G as On,H as lo,I as Ln,J as Ut,K as co,N as G,O as F,P as uo,Q as Li,U as Ge,V as yn,W as zt,X as Qs,Y as ee,Z as ne,$ as z,a0 as W,a1 as $n,a2 as Ji,a3 as ho,a4 as ve,a5 as Fe,a6 as oe,a7 as $e,a8 as Vn,a9 as Mt,aa as fe,ab as ss,ac as Ot,ad as pe,ae as $i,af as qt,ag as Fi,ah as Is,ai as xo,aj as Mi,ak as ma,al as jt,am as ot,an as qs,ao as po,ap as _s,aq as st,ar as Ss,as as pt,at as mo,au as go,av as fo,a as Re,aw as Bi,ax as er,ay as Os,az as Gs,aA as tr,aB as bo,aC as rs,aD as ze,aE as ys,aF as ga,aG as Et,aH as ns,aI as Ks,aJ as yo,aK as jo,aL as vo,aM as fa,aN as wo,aO as sr,aP as So,aQ as ko,aR as Io,aS as ba,aT as zi,aU as Co,aV as No,aW as Eo,aX as Ao,aY as To,aZ as nr,a_ as ya,a$ as Po,b0 as Do,b1 as Ro,b2 as Lo,b3 as $o,b4 as Fo,b5 as Mo,b6 as Ci,b7 as Bo,b8 as It,b9 as zo,ba as ir,bb as Uo,bc as qo}from"./vendor-antd-RbeexA_j.js";import{c as ht,u as Se,a as Le,b as Me,d as Vt,e as ye,L as tt,f as dt,w as rr,n as ja,g as va,i as Vs,h as _o,j as Cs,k as wa,p as Ui,l as Ns,m as Fn,o as qi,q as is,r as ar,s as Oo,S as Sa,t as Xn,v as _i,x as ka,y as Vo,z as Ia,A as Ho,B as or,C as Wo,D as Yo,E as Qo,F as Go,G as Rs,N as Hn,H as Ko,I as Xo,R as Zo,J as we,K as Jo,P as el}from"./vendor-react-AsBsYwNz.js";import{a as as}from"./vendor-utils-CBI24EYO.js";import{n as Z,k as Ht}from"./vendor-ui-Bb0P9X4s.js";import{E as tl}from"./vendor-editor-BzUp9Vpt.js";import{L as Mn,G as ks,R as Wn,T as Hs,u as sl,a as nl,I as il,C as rl,b as al,c as ol,S as ll,d as cl}from"./vendor-canvas-Bh0RjZpl.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();var Ni={},lr=io;Ni.createRoot=lr.createRoot,Ni.hydrateRoot=lr.hydrateRoot;const cr=localStorage.getItem("token"),dl=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):null,ul={isAuthenticated:!!cr,user:dl,token:cr},Ca=ht({name:"auth",initialState:ul,reducers:{setCredentials:(t,s)=>{t.user=s.payload.user,t.token=s.payload.token,t.isAuthenticated=!0,localStorage.setItem("token",s.payload.token),localStorage.setItem("user",JSON.stringify(s.payload.user))},logout:t=>{t.user=null,t.token=null,t.isAuthenticated=!1,localStorage.removeItem("token"),localStorage.removeItem("user")}}}),{setCredentials:hl,logout:xl}=Ca.actions,pl=Ca.reducer;var it=(t=>(t.NEW_LEAD="New Lead",t.FOLLOWUP_DUE="Follow-up Due",t.STATUS_CHANGE="Status Changed",t.ASSIGNMENT="Lead Assigned",t))(it||{}),Ft=(t=>(t.FACEBOOK="Facebook",t.WEBSITE="Website",t.MANUAL="Manual",t.SYSTEM="System",t))(Ft||{}),ut=(t=>(t.HIGH="High",t.MEDIUM="Medium",t.LOW="Low",t))(ut||{}),Ee=(t=>(t.READ="Read",t.UNREAD="Unread",t))(Ee||{});const Na=()=>[{id:"1",userId:"1",type:it.NEW_LEAD,title:"New Lead from Facebook",message:"John Smith has inquired about Tourist visa",source:Ft.FACEBOOK,priority:ut.HIGH,status:Ee.UNREAD,entityId:"101",entityType:"lead",createdAt:new Date(new Date().setHours(new Date().getHours()-1)).toISOString()},{id:"2",userId:"1",type:it.FOLLOWUP_DUE,title:"Follow-up Due Today",message:"You have a call scheduled with Emma Wilson at 2:00 PM",source:Ft.SYSTEM,priority:ut.HIGH,status:Ee.UNREAD,entityId:"201",entityType:"followup",createdAt:new Date(new Date().setHours(new Date().getHours()-3)).toISOString()},{id:"3",userId:"1",type:it.STATUS_CHANGE,title:"Lead Status Changed",message:'Sarah Johnson changed the status of lead Michael Brown from "New" to "Contacted"',source:Ft.SYSTEM,priority:ut.MEDIUM,status:Ee.UNREAD,entityId:"102",entityType:"lead",createdAt:new Date(new Date().setHours(new Date().getHours()-5)).toISOString()},{id:"4",userId:"1",type:it.ASSIGNMENT,title:"Lead Assigned to You",message:"David Wilson assigned a new lead Raj Patel to you",source:Ft.SYSTEM,priority:ut.MEDIUM,status:Ee.READ,entityId:"103",entityType:"lead",createdAt:new Date(new Date().setDate(new Date().getDate()-1)).toISOString(),readAt:new Date(new Date().setHours(new Date().getHours()-6)).toISOString()},{id:"5",userId:"1",type:it.NEW_LEAD,title:"New Lead from Website",message:"Sophie Martin has inquired about Permanent Residency visa",source:Ft.WEBSITE,priority:ut.HIGH,status:Ee.READ,entityId:"104",entityType:"lead",createdAt:new Date(new Date().setDate(new Date().getDate()-1)).toISOString(),readAt:new Date(new Date().setHours(new Date().getHours()-12)).toISOString()},{id:"6",userId:"1",type:it.FOLLOWUP_DUE,title:"Follow-up Overdue",message:"You missed a WhatsApp follow-up with Akira Tanaka yesterday",source:Ft.SYSTEM,priority:ut.HIGH,status:Ee.UNREAD,entityId:"202",entityType:"followup",createdAt:new Date(new Date().setDate(new Date().getDate()-2)).toISOString()},{id:"7",userId:"1",type:it.STATUS_CHANGE,title:"Lead Status Changed",message:'You changed the status of lead Ana Rodriguez from "Contacted" to "Interested"',source:Ft.SYSTEM,priority:ut.LOW,status:Ee.READ,entityId:"105",entityType:"lead",createdAt:new Date(new Date().setDate(new Date().getDate()-3)).toISOString(),readAt:new Date(new Date().setDate(new Date().getDate()-3)).toISOString()},{id:"8",userId:"1",type:it.NEW_LEAD,title:"New Lead from Manual Entry",message:"A new lead has been added manually for Business visa",source:Ft.MANUAL,priority:ut.MEDIUM,status:Ee.UNREAD,entityId:"106",entityType:"lead",createdAt:new Date(new Date().setDate(new Date().getDate()-4)).toISOString()}],ml=()=>({userId:"1",inApp:{enabled:!0,newLeads:!0,followUpReminders:!0,statusChanges:!0,leadAssignments:!0},email:{newLeads:!0,followUpReminders:!0,statusChanges:!1,leadAssignments:!0},pushNotifications:!1});var Ea={exports:{}};(function(t,s){(function(n,i){t.exports=i()})(ro,function(){return function(n,i,r){n=n||{};var l=i.prototype,a={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function f(h,N,$,y){return l.fromToBase(h,N,$,y)}r.en.relativeTime=a,l.fromToBase=function(h,N,$,y,D){for(var k,j,P,u=$.$locale().relativeTime||a,x=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],I=x.length,o=0;o<I;o+=1){var d=x[o];d.d&&(k=y?r(h).diff($,d.d,!0):$.diff(h,d.d,!0));var R=(n.rounding||Math.round)(Math.abs(k));if(P=k>0,R<=d.r||!d.r){R<=1&&o>0&&(d=x[o-1]);var S=u[d.l];D&&(R=D(""+R)),j=typeof S=="string"?S.replace("%d",R):S(R,N,d.l,P);break}}if(N)return j;var E=P?u.future:u.past;return typeof E=="function"?E(j):E.replace("%s",j)},l.to=function(h,N){return f(h,N,this,!0)},l.from=function(h,N){return f(h,N,this)};var b=function(h){return h.$u?r.utc():r()};l.toNow=function(h){return this.to(b(this),h)},l.fromNow=function(h){return this.from(b(this),h)}}})})(Ea);var gl=Ea.exports;const fl=ao(gl);Ae.extend(fl);const dr=t=>{switch(t){case ut.HIGH:return"#f5222d";case ut.MEDIUM:return"#faad14";case ut.LOW:return"#52c41a";default:return"#1677ff"}},bl=t=>Ae(t).fromNow(),yl=t=>Ae(t).format("YYYY-MM-DD HH:mm"),Ls=t=>t.filter(s=>s.status===Ee.UNREAD).length,jl=t=>{if(!t.entityId||!t.entityType)return"/notifications";switch(t.entityType){case"lead":return`/leads/${t.entityId}`;case"followup":return`/followups/${t.entityId}`;default:return"/notifications"}},{Text:ur,Paragraph:vl}=me,Aa=({notification:t,onView:s,onMarkAsRead:n})=>{const i=()=>{switch(t.type){case it.NEW_LEAD:return e.jsx(ws,{style:{color:"#1677ff"}});case it.FOLLOWUP_DUE:return e.jsx(Qe,{style:{color:"#faad14"}});case it.STATUS_CHANGE:return e.jsx(oo,{style:{color:"#722ed1"}});case it.ASSIGNMENT:return e.jsx(Ce,{style:{color:"#52c41a"}});default:return e.jsx(_n,{style:{color:"#1677ff"}})}},r=()=>{t.status===Ee.UNREAD&&n(t),s(t)};return e.jsx(es.Item,{onClick:r,className:t.status===Ee.UNREAD?"notification-unread":"",style:{cursor:"pointer",backgroundColor:t.status===Ee.UNREAD?"#f0f5ff":"transparent",padding:"16px",borderRadius:"4px",transition:"background-color 0.3s"},children:e.jsx(es.Item.Meta,{avatar:e.jsx(Xe,{dot:t.status===Ee.UNREAD,color:dr(t.priority),children:e.jsx(yt,{icon:i(),size:"large",style:{backgroundColor:"white",border:`1px solid ${dr(t.priority)}`}})}),title:e.jsxs(X,{children:[e.jsx(ur,{strong:!0,children:t.title}),t.status===Ee.UNREAD&&e.jsx(le,{color:"blue",children:"New"})]}),description:e.jsxs("div",{children:[e.jsx(vl,{ellipsis:{rows:2},style:{marginBottom:4},children:t.message}),e.jsx(Ye,{title:yl(t.createdAt),children:e.jsx(ur,{type:"secondary",style:{fontSize:12},children:bl(t.createdAt)})})]})})})},{Title:wl,Text:Sl}=me,{TabPane:hr}=ct,kl=()=>{const t=Se(),[s,n]=c.useState([]),[i,r]=c.useState(!1),[l,a]=c.useState(!1),[f,b]=c.useState(!1),[h,N]=c.useState("all"),[$,y]=c.useState(!1),D=c.useRef(null);c.useEffect(()=>{k();const S=setInterval(()=>{Math.random()<.25&&!l&&(b(!0),y(!0),setTimeout(()=>{y(!1)},2e3))},3e4);return()=>clearInterval(S)},[l]);const k=()=>{r(!0),setTimeout(()=>{const S=Na();n(S),r(!1),b(S.some(E=>E.status===Ee.UNREAD))},600)},j=S=>{a(S),S&&(b(!1),D.current&&D.current.classList.remove("bell-animate"))},P=S=>{u(S),a(!1),S.entityId&&S.entityType?S.entityType==="lead"?t(`/leads/${S.entityId}`):S.entityType==="followup"&&t(`/followups/${S.entityId}`):t("/notifications")},u=S=>{const E=s.map(v=>v.id===S.id?{...v,status:Ee.READ,readAt:new Date().toISOString()}:v);n(E)},x=()=>{a(!1),t("/notifications")},I=()=>{const S=s.map(E=>E.status===Ee.UNREAD?{...E,status:Ee.READ,readAt:new Date().toISOString()}:E);n(S),b(!1)},o=()=>h==="unread"?s.filter(S=>S.status===Ee.UNREAD):s.slice(0,5),d=S=>{N(S)},R=e.jsxs("div",{className:"notification-dropdown",children:[e.jsxs("div",{className:"notification-header",children:[e.jsx(wl,{level:5,style:{margin:0},children:"Notifications"}),e.jsxs(X,{children:[e.jsx(q,{type:"text",size:"small",icon:e.jsx(Ri,{}),onClick:k,loading:i,className:"header-btn",title:"Refresh notifications"}),e.jsx(q,{type:"text",size:"small",icon:e.jsx(Us,{}),onClick:I,disabled:Ls(s)===0,className:"header-btn",title:"Mark all as read"}),e.jsx(q,{type:"text",size:"small",icon:e.jsx(Pn,{}),onClick:()=>t("/notifications"),className:"header-btn",title:"Settings"}),e.jsx(q,{type:"text",size:"small",icon:e.jsx(ts,{}),onClick:()=>a(!1),className:"header-btn",title:"Close"})]})]}),e.jsxs(ct,{activeKey:h,onChange:d,size:"small",className:"notification-tabs",children:[e.jsx(hr,{tab:e.jsx("span",{children:"All"})},"all"),e.jsx(hr,{tab:e.jsxs("span",{className:"tab-label",children:["Unread",e.jsx(Xe,{count:Ls(s),size:"small",offset:[5,-3],style:{backgroundColor:"#1677ff"}})]})},"unread")]}),i?e.jsxs("div",{className:"notification-loading",children:[e.jsx(Dt,{size:"large"}),e.jsx(Sl,{type:"secondary",children:"Loading notifications..."})]}):e.jsx("div",{style:{backgroundColor:"white"},children:e.jsx(es,{className:"notification-list",dataSource:o(),renderItem:S=>e.jsx("div",{onClick:()=>P(S),className:"notification-item",children:e.jsx(Aa,{notification:S,onView:P,onMarkAsRead:u})}),locale:{emptyText:e.jsx(Tt,{image:Tt.PRESENTED_IMAGE_SIMPLE,description:"No notifications",className:"notification-empty"})}})}),e.jsx("div",{className:"notification-footer",children:e.jsx(q,{type:"primary",onClick:x,style:{width:"100%",borderRadius:"4px"},children:"View All Notifications"})})]});return e.jsx("div",{className:`notification-bell-container ${$?"has-new-notification":""}`,ref:D,children:e.jsx(_t,{open:l,onOpenChange:j,trigger:["click"],dropdownRender:()=>R,placement:"bottomRight",arrow:{pointAtCenter:!0},overlayStyle:{zIndex:1050,boxShadow:"0 6px 16px -8px rgba(0,0,0,0.2), 0 9px 28px rgba(0,0,0,0.1)"},destroyPopupOnHide:!0,children:e.jsx(Xe,{count:Ls(s),overflowCount:99,className:f?"badge-pulse":"",style:{backgroundColor:f?"#f5222d":"#1677ff",transition:"background-color 0.3s ease"},size:"small",offset:[-2,2],children:e.jsx(q,{type:"text",icon:e.jsx(_n,{className:"bell-icon"}),className:"notification-bell-btn","aria-label":"Notifications"})})})})},Yn="/api",se=as.create({baseURL:Yn,headers:{"Content-Type":"application/json",Accept:"application/json"}}),Qt=as.create({baseURL:Yn,headers:{"Content-Type":"application/json",Accept:"application/json"}}),Ta=as.create({baseURL:Yn,headers:{"Content-Type":"application/json",Accept:"application/json"}});se.interceptors.request.use(t=>{var l,a,f,b,h,N,$,y,D;const s=localStorage.getItem("token"),n=localStorage.getItem("exhibitor_token"),i=((l=t.url)==null?void 0:l.startsWith("/bookings/"))&&t.method==="patch"||((a=t.url)==null?void 0:a.includes("/exhibition/"))||((f=t.url)==null?void 0:f.includes("/stalls/"))||((b=t.url)==null?void 0:b.includes("/halls/"))||((h=t.url)==null?void 0:h.includes("/users/"))||((N=t.url)==null?void 0:N.includes("/roles/")),r=(($=t.url)==null?void 0:$.includes("/test-booking"))||((y=t.url)==null?void 0:y.includes("/exhibitor-bookings"))||((D=t.url)==null?void 0:D.startsWith("/exhibitors/"));return i?s?t.headers.Authorization=`Bearer ${s}`:console.warn("Admin token required but not found for:",t.url):r&&n?t.headers.Authorization=`Bearer ${n}`:s?t.headers.Authorization=`Bearer ${s}`:n&&(t.headers.Authorization=`Bearer ${n}`),t},t=>Promise.reject(t));Ta.interceptors.request.use(t=>{const s=localStorage.getItem("exhibitor_token");return s&&(t.headers.Authorization=`Bearer ${s}`),t},t=>Promise.reject(t));se.interceptors.response.use(t=>t,t=>{var n,i,r;((n=t.response)==null?void 0:n.status)===401&&localStorage.removeItem("token");const s=((r=(i=t.response)==null?void 0:i.data)==null?void 0:r.message)||t.message;return Promise.reject(new Error(s))});Ta.interceptors.response.use(t=>t,t=>{var n,i,r;((n=t.response)==null?void 0:n.status)===401&&localStorage.removeItem("exhibitor_token");const s=((r=(i=t.response)==null?void 0:i.data)==null?void 0:r.message)||t.message;return Promise.reject(new Error(s))});const xr=async(t,s=!1)=>{const n=s?localStorage.getItem("exhibitor_token"):localStorage.getItem("token");return as.get(`${Yn}${t}`,{responseType:"blob",headers:{Authorization:`Bearer ${n}`}})};class Il{async getSettings(){return(await se.get("/settings")).data}async updateSettings(s){return(await se.put("/settings",s)).data}async uploadLogo(s){const n=new FormData;return n.append("file",s),(await se.post("/settings/upload/logo",n,{headers:{"Content-Type":"multipart/form-data"}})).data}}const Oi=new Il,Cl={settings:null,loading:!1,error:null},$s=Le("settings/fetchSettings",async(t,{rejectWithValue:s})=>{var n,i;try{return await Oi.getSettings()}catch(r){return s(((i=(n=r.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to fetch settings")}}),Fs=Le("settings/updateSettings",async(t,{rejectWithValue:s})=>{var n,i;try{return await Oi.updateSettings(t)}catch(r){return s(((i=(n=r.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to update settings")}}),jn=Le("settings/uploadLogo",async(t,{dispatch:s,rejectWithValue:n})=>{var i,r;try{const l=await Oi.uploadLogo(t);return l.path&&await s(Fs({logo:l.path})),l}catch(l){return n(((r=(i=l.response)==null?void 0:i.data)==null?void 0:r.message)||"Failed to upload logo")}}),Nl=ht({name:"settings",initialState:Cl,reducers:{},extraReducers:t=>{t.addCase($s.pending,s=>{s.loading=!0,s.error=null}).addCase($s.fulfilled,(s,n)=>{s.settings=n.payload,s.loading=!1}).addCase($s.rejected,(s,n)=>{s.loading=!1,s.error=n.payload}).addCase(Fs.pending,s=>{s.loading=!0,s.error=null}).addCase(Fs.fulfilled,(s,n)=>{s.settings=n.payload,s.loading=!1}).addCase(Fs.rejected,(s,n)=>{s.loading=!1,s.error=n.payload}).addCase(jn.pending,s=>{s.loading=!0,s.error=null}).addCase(jn.fulfilled,s=>{s.loading=!1}).addCase(jn.rejected,(s,n)=>{s.loading=!1,s.error=n.payload})}}),El=Nl.reducer,{Header:Al,Sider:Tl,Content:Pl}=De,Dl=Z.div`
  height: 65px;
  padding: 0 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-bottom: 1px solid #E5E7EB;
  transition: all 0.3s;
`,Rl=Z.div`
  border-radius: 8px;
  padding: 10px;
  display: flex;
  justify-content: center;
  align-items: center;
  transition: all 0.2s ease;
`,Ll=Z.img`
  height: auto;
  width: 100%;
  max-width: 150px;
  max-height: auto;
  object-fit: contain;
`;Z.span`
  margin-left: 12px;
  font-size: 18px;
  font-weight: 600;
  color: #111827;
  white-space: nowrap;
  transition: opacity 0.3s, margin-left 0.3s;
`;const Ue=({children:t})=>{var D;const[s,n]=c.useState(!1),i=Se(),r=Me(),l=Vt(),a=ye(k=>k.auth.user),{settings:f}=ye(k=>k.settings),[b,h]=c.useState("/logo.png");c.useEffect(()=>{r($s())},[r]),c.useEffect(()=>{const k=localStorage.getItem("cachedLogoUrl"),j=localStorage.getItem("logoTimestamp"),P=new Date().getTime();if(k&&j&&P-parseInt(j)<36e5)h(k);else if(f!=null&&f.logo){const u=`${se.defaults.baseURL}/public/logo`;h(u),localStorage.setItem("cachedLogoUrl",u),localStorage.setItem("logoTimestamp",P.toString());const x=new Image;x.src=u}},[f]);const N=[{key:"dashboard",icon:e.jsx(Dn,{style:{fontSize:"16px"}}),label:"Dashboard",onClick:()=>i("/dashboard")},{key:"exhibition",icon:e.jsx(lt,{style:{fontSize:"16px"}}),label:"Exhibitions",onClick:()=>i("/exhibition")},{key:"stall",icon:e.jsx(Rn,{style:{fontSize:"16px"}}),label:"Stalls",children:[{key:"stall-list",icon:e.jsx(Rn,{style:{fontSize:"16px"}}),label:"Stall List",onClick:()=>i("/stall/list")},{key:"stall-type",icon:e.jsx(Te,{style:{fontSize:"16px"}}),label:"Stall Types",onClick:()=>i("/stall-types")}]},{key:"bookings",icon:e.jsx(lt,{style:{fontSize:"16px"}}),label:"Stall Bookings",onClick:()=>i("/bookings")},{key:"exhibitors",icon:e.jsx(On,{}),label:"Exhibitors",onClick:()=>i("/exhibitors")},{key:"users",icon:e.jsx(Ce,{}),label:"Users",onClick:()=>i("/index")},{key:"roles",icon:e.jsx(lo,{}),label:"Roles",onClick:()=>i("/roles")},{key:"settings",icon:e.jsx(Pn,{}),label:"Settings",onClick:()=>i("/settings")}],$=[{key:"profile",label:"Profile",icon:e.jsx(Ce,{})},{key:"settings",label:"Settings",icon:e.jsx(Pn,{})},{key:"divider",type:"divider"},{key:"logout",label:"Logout",icon:e.jsx(Ln,{}),onClick:()=>{r(xl()),i("/login")}}],y=()=>{const k=l.pathname.substring(1);return k.charAt(0).toUpperCase()+k.slice(1)};return e.jsxs(De,{style:{minHeight:"100vh"},children:[e.jsxs(Tl,{trigger:null,collapsible:!0,collapsed:s,style:{background:"#fff",borderRight:"1px solid #E5E7EB",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1)",position:"fixed",left:0,top:0,bottom:0,zIndex:100,overflow:"hidden"},width:256,collapsedWidth:80,children:[e.jsx(Dl,{children:e.jsx(Rl,{children:e.jsx(Ll,{src:b,alt:"Logo",onError:()=>h("/logo.png")})})}),e.jsx(at,{mode:"inline",selectedKeys:[l.pathname.substring(1)||"dashboard"],items:N,style:{border:"none",padding:"16px 0",background:"transparent"},className:"main-nav-menu",inlineCollapsed:s})]}),e.jsxs(De,{style:{marginLeft:s?80:256,transition:"all 0.2s"},children:[e.jsxs(Al,{style:{padding:"0 24px",background:"#fff",display:"flex",alignItems:"center",justifyContent:"space-between",boxShadow:"0 1px 0 0 rgb(0 0 0 / 0.05)",zIndex:99},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(q,{type:"text",icon:s?e.jsx(xa,{}):e.jsx(pa,{}),onClick:()=>n(!s),style:{fontSize:16}}),e.jsx("span",{style:{marginLeft:24,fontSize:20,fontWeight:600,color:"#111827"},children:y()})]}),e.jsxs(X,{size:16,children:[e.jsx(q,{type:"text",icon:e.jsx(bt,{}),style:{fontSize:16}}),e.jsx(kl,{}),e.jsx(_t,{menu:{items:$},trigger:["click"],children:e.jsxs(X,{style:{cursor:"pointer"},children:[e.jsx(yt,{style:{backgroundColor:"#7C3AED",cursor:"pointer"},children:(D=a==null?void 0:a.username)==null?void 0:D.charAt(0).toUpperCase()}),e.jsx("span",{style:{color:"#111827",fontWeight:500},children:a==null?void 0:a.username})]})})]})]}),e.jsx(Pl,{style:{margin:"24px",padding:"24px",background:"#fff",borderRadius:"8px",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)"},children:t})]})]})},pr=localStorage.getItem("exhibitor_token"),$l=localStorage.getItem("exhibitor")?JSON.parse(localStorage.getItem("exhibitor")):null,Fl={isAuthenticated:!!pr,exhibitor:$l,token:pr,showLoginModal:!1,loginContext:null},Pa=ht({name:"exhibitorAuth",initialState:Fl,reducers:{setExhibitorCredentials:(t,s)=>{t.exhibitor=s.payload.exhibitor,t.token=s.payload.token,t.isAuthenticated=!0,localStorage.setItem("exhibitor_token",s.payload.token),localStorage.setItem("exhibitor",JSON.stringify(s.payload.exhibitor))},exhibitorLogout:t=>{t.exhibitor=null,t.token=null,t.isAuthenticated=!1,localStorage.removeItem("exhibitor_token"),localStorage.removeItem("exhibitor")},showLoginModal:(t,s)=>{t.showLoginModal=!0,t.loginContext=s.payload||null},hideLoginModal:t=>{t.showLoginModal=!1,t.loginContext=null}}}),{setExhibitorCredentials:Ei,exhibitorLogout:Da,showLoginModal:Bn,hideLoginModal:mr}=Pa.actions,Ml=Pa.reducer,{Header:Bl,Sider:zl,Content:Ul}=De,os=({children:t})=>{var N;const[s,n]=c.useState(!1),i=Se(),r=Me(),l=Vt(),a=ye($=>$.exhibitorAuth.exhibitor),f=[{key:"dashboard",icon:e.jsx(Dn,{}),label:"Dashboard",onClick:()=>i("/exhibitor/dashboard")},{key:"bookings",icon:e.jsx(lt,{}),label:"My Bookings",onClick:()=>i("/exhibitor/bookings")},{key:"profile",icon:e.jsx(Ce,{}),label:"My Profile",onClick:()=>i("/exhibitor/profile")},{key:"exhibitions",icon:e.jsx(Ut,{}),label:"Exhibitions",onClick:()=>i("/exhibitions")},{key:"help",icon:e.jsx(co,{}),label:"Help & Support",onClick:()=>i("/exhibitor/support")}],b=[{key:"profile",label:"Profile",icon:e.jsx(Ce,{}),onClick:()=>i("/exhibitor/profile")},{key:"divider",type:"divider"},{key:"logout",label:"Logout",icon:e.jsx(Ln,{}),onClick:()=>{r(Da()),i("/")}}],h=()=>{const $=l.pathname.replace("/exhibitor/","");return $.charAt(0).toUpperCase()+$.slice(1)};return e.jsxs(De,{style:{minHeight:"100vh"},children:[e.jsxs(zl,{trigger:null,collapsible:!0,collapsed:s,style:{background:"#fff",borderRight:"1px solid #E5E7EB",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1)",position:"fixed",left:0,top:0,bottom:0,zIndex:100},width:256,children:[e.jsxs("div",{style:{height:72,padding:"0 24px",display:"flex",alignItems:"center",justifyContent:s?"center":"flex-start",borderBottom:"1px solid #E5E7EB"},children:[e.jsx("img",{src:"/logo.svg",alt:"Logo",style:{height:32,width:"auto"}}),!s&&e.jsx("span",{style:{marginLeft:12,fontSize:18,fontWeight:600,color:"#1890ff",whiteSpace:"nowrap"},children:"Exhibitor Portal"})]}),e.jsx(at,{mode:"inline",selectedKeys:[l.pathname.split("/").pop()||"dashboard"],items:f,style:{border:"none",padding:"16px 8px",background:"transparent"}})]}),e.jsxs(De,{style:{marginLeft:s?80:256,transition:"all 0.2s"},children:[e.jsxs(Bl,{style:{padding:"0 24px",background:"#fff",display:"flex",alignItems:"center",justifyContent:"space-between",boxShadow:"0 1px 0 0 rgb(0 0 0 / 0.05)",zIndex:99},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(q,{type:"text",icon:s?e.jsx(xa,{}):e.jsx(pa,{}),onClick:()=>n(!s),style:{fontSize:16}}),e.jsx("span",{style:{marginLeft:24,fontSize:20,fontWeight:600,color:"#111827"},children:h()})]}),e.jsxs(X,{size:16,children:[e.jsx(Xe,{count:3,size:"small",children:e.jsx(q,{type:"text",icon:e.jsx(_n,{}),style:{fontSize:16}})}),e.jsx(_t,{menu:{items:b},trigger:["click"],children:e.jsxs(X,{style:{cursor:"pointer"},children:[e.jsx(yt,{style:{backgroundColor:"#1890ff",cursor:"pointer"},children:((N=a==null?void 0:a.companyName)==null?void 0:N.charAt(0).toUpperCase())||"E"}),e.jsx("span",{style:{color:"#111827",fontWeight:500},children:(a==null?void 0:a.companyName)||"Exhibitor"})]})})]})]}),e.jsx(Ul,{style:{margin:"24px",padding:"24px",background:"#fff",borderRadius:"8px",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)"},children:t})]})]})},{Title:Ra,Text:wt,Paragraph:ql}=me,Xs=Ht`
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
`,_l=Ht`
  from { opacity: 0; transform: translateX(-30px); }
  to { opacity: 1; transform: translateX(0); }
`,Ol=Ht`
  from { opacity: 0; transform: translateX(30px); }
  to { opacity: 1; transform: translateX(0); }
`,Vi=Ht`
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
`,La=Ht`
  0% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0px); }
`,Vl=Ht`
  0% { transform: rotate(0deg) translateY(0) scaleY(1); opacity: 0; }
  20% { opacity: 0.5; }
  100% { transform: rotate(25deg) translateY(-260px) scaleY(1.2); opacity: 0; }
`,Hl=Ht`
  0% { transform: rotate(-25deg) translateY(260px) scaleY(1.2); opacity: 0; }
  20% { opacity: 0.5; }
  100% { transform: rotate(0deg) translateY(0) scaleY(1); opacity: 0; }
`,Wl=Ht`
  0% { stroke-dashoffset: 1000; }
  100% { stroke-dashoffset: 0; }
`,Yl=Z.div`
  min-height: 100vh;
  display: flex;
  overflow: hidden;
  
  @media (max-width: 768px) {
    flex-direction: column;
  }
`,Ql=Z.div`
  flex: 1;
  background-image: linear-gradient(135deg, rgba(35, 92, 169, 0.85), rgba(13, 71, 161, 0.9)), url('/exhibition-background.jpg');
  background-size: cover;
  background-position: center;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  color: white;
  padding: 2rem;
  position: relative;
  overflow: hidden;
  animation: ${_l} 0.8s ease-out forwards;
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);
  
  @media (max-width: 768px) {
    min-height: 200px;
  }
`,Gl=Z.div`
  position: absolute;
  width: 2px;
  height: 600px;
  background: linear-gradient(to bottom, transparent, rgba(255, 255, 255, ${t=>.1+t.index%3*.05}), transparent);
  left: ${t=>20+t.index*10}%;
  top: 0;
  z-index: 1;
  opacity: 0;
  transform-origin: top;
  animation: ${t=>t.isHovered?Vl:Hl} ${t=>1.5+t.index*.2}s ease-out;
  animation-delay: ${t=>t.index*.1}s;
  animation-fill-mode: forwards;
`,Kl=Z.div`
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 2rem;
  background-color: #ffffff;
  animation: ${Ol} 0.8s ease-out forwards;
`,Xl=Z.div`
  position: relative;
  width: 100%;
  height: 50px;
  display: flex;
  justify-content: center;
  align-items: center;
`,Zl=Z.svg`
  width: 40px;
  height: 40px;
  
  .path {
    stroke: #1890ff;
    stroke-width: 2;
    fill: none;
    stroke-dasharray: 1000;
    stroke-dashoffset: 0;
    animation: ${Wl} 2s linear infinite;
  }
  
  .dot {
    fill: #1890ff;
    animation: ${Vi} 2s ease-in-out infinite;
  }
`,Jl=Z.span`
  margin-left: 10px;
  animation: ${Xs} 0.5s ease-out;
`,ec=Z.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1;
`,tc=Z.div`
  position: relative;
  z-index: 2;
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
  max-width: 600px;
`,sc=Z.div`
  position: absolute;
  top: 25px;
  left: 30px;
  z-index: 10;
  display: flex;
  align-items: center;
  animation: ${Xs} 0.8s ease-out forwards;
`,nc=Z.div`
  background-color: rgba(255, 255, 255, 0.9);
  border-radius: 8px;
  padding: 12px;
  display: flex;
  justify-content: center;
  align-items: center;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
  transition: all 0.3s ease;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
  }
`,ic=Z.img`
  width: 140px;
  height: auto;
  animation: ${La} 6s ease-in-out infinite;
  filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.4));
`;Z.div({fontSize:"1.25rem",fontWeight:600,marginLeft:"14px",color:"#1a3e72",letterSpacing:"0.5px"});const rc=Z.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-bottom: 2.5rem;
  animation: ${Xs} 0.8s ease-out forwards;
`,ac=Z.div`
  font-size: 2.5rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
  color: #ffffff;
  letter-spacing: 1px;
`,oc=Z(Ra)`
  color: #ffffff !important;
  font-weight: 400 !important;
  text-align: center;
  margin-top: 0 !important;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
`,lc=Z(ql)`
  color: rgba(255, 255, 255, 0.9) !important;
  font-size: 16px;
  line-height: 1.6;
  text-align: center;
  max-width: 500px;
  margin: 1.5rem auto 0;
`,cc=Z.div`
  width: 100%;
  max-width: 400px;
  animation: ${Xs} 0.6s ease-out;
`,dc=Z(G)`
  height: 50px;
  border-radius: 8px;
  border: 1px solid #d9d9d9;
  background-color: #f8f8f8;
  transition: all 0.3s;
  
  &:hover, &:focus {
    background-color: white;
    border-color: #40a9ff;
    box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);
    transform: translateY(-2px);
  }
`,uc=Z(G.Password)`
  height: 50px;
  border-radius: 8px;
  border: 1px solid #d9d9d9;
  background-color: #f8f8f8;
  transition: all 0.3s;
  
  &:hover, &:focus {
    background-color: white;
    border-color: #40a9ff;
    box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);
    transform: translateY(-2px);
  }
`,hc=Z(q)`
  height: 50px;
  border-radius: 8px;
  font-weight: 600;
  box-shadow: 0 2px 0 rgba(0, 0, 0, 0.045);
  transition: all 0.3s;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }
  
  &.success {
    animation: ${Vi} 0.5s ease-in-out;
  }
`,xc=Z.div`
  margin-bottom: 2rem;
  text-align: center;
`,en=Z(F.Item)`
  margin-bottom: 24px;
`,pc=Z.div`
  margin-top: 8px;
`,mc=Z.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
`,gc=Z(uo)`
  .ant-checkbox-checked .ant-checkbox-inner {
    background-color: #1890ff;
    border-color: #1890ff;
  }
  
  .ant-checkbox-inner:hover {
    border-color: #1890ff;
  }
  
  .ant-checkbox-wrapper:hover .ant-checkbox-inner {
    border-color: #1890ff;
  }
`,fc=Z.div`
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(82, 196, 26, 0.1);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 100;
  animation: ${Xs} 0.3s ease-out;
  
  svg {
    font-size: 80px;
    color: #52c41a;
    animation: ${Vi} 0.5s ease-in-out;
  }
`,gr=()=>e.jsxs(Xl,{children:[e.jsxs(Zl,{viewBox:"0 0 50 50",children:[e.jsx("path",{className:"path",d:"M10,10 L40,10 L40,40 L10,40 L10,10 Z M10,25 L40,25 M20,10 L20,40 M30,10 L30,40"}),e.jsx("circle",{className:"dot",cx:"15",cy:"15",r:"2"}),e.jsx("circle",{className:"dot",cx:"25",cy:"15",r:"2"}),e.jsx("circle",{className:"dot",cx:"35",cy:"15",r:"2"}),e.jsx("circle",{className:"dot",cx:"15",cy:"35",r:"2"}),e.jsx("circle",{className:"dot",cx:"25",cy:"35",r:"2"}),e.jsx("circle",{className:"dot",cx:"35",cy:"35",r:"2"})]}),e.jsx(Jl,{children:"Signing in..."})]}),bc=Z.div`
  position: absolute;
  width: ${t=>t.size}px;
  height: ${t=>t.size}px;
  background-color: rgba(255, 255, 255, 0.07);
  border-radius: 50%;
  animation: ${La} ${t=>t.duration}s ease-in-out infinite;
  animation-delay: ${t=>t.delay}s;
  top: ${t=>t.top}%;
  left: ${t=>t.left}%;
  z-index: 1;
`,yc=t=>{if(!t)return 0;const s=t.length>=8,n=/[A-Z]/.test(t),i=/[a-z]/.test(t),r=/\d/.test(t),l=/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/.test(t),a=[s,n,i,r,l];return a.filter(b=>b).length/a.length*100},jc=t=>t<30?"#ff4d4f":t<60?"#faad14":t<80?"#1890ff":"#52c41a",vc=t=>t<30?"Weak":t<60?"Fair":t<80?"Good":"Strong",wc=["At least 8 characters long","Contains uppercase letters","Contains lowercase letters","Contains numbers","Contains special characters"],Sc=()=>{const t=Se(),s=Me(),[n,i]=c.useState(null),[r,l]=c.useState(!1),[a,f]=c.useState(!1),[b,h]=c.useState(""),[N,$]=c.useState(!1),y=ye(p=>p.auth.isAuthenticated),D=c.useRef(null),[k,j]=c.useState({x:0,y:0}),[P,u]=c.useState(!1),[x,I]=c.useState(!1),[o]=F.useForm(),[d,R]=c.useState("/logo.png"),[S,E]=c.useState("EXHIBITION MANAGER");c.useEffect(()=>{const p=localStorage.getItem("cachedLogoUrl"),C=localStorage.getItem("logoTimestamp"),B=new Date().getTime();if(p&&C&&B-parseInt(C)<36e5)R(p);else{const U=`${se.defaults.baseURL}/public/logo`;R(U),localStorage.setItem("cachedLogoUrl",U),localStorage.setItem("logoTimestamp",B.toString());const Y=new Image;Y.src=U}fetch(`${se.defaults.baseURL}/public/site-info`).then(U=>U.json()).then(U=>{U.siteName&&E(U.siteName)}).catch(U=>{console.error("Error fetching site info:",U)})},[]),c.useEffect(()=>{const p=localStorage.getItem("rememberedUser");if(p)try{const C=JSON.parse(p);o.setFieldsValue({username:C.username,password:C.password,remember:!0})}catch{localStorage.removeItem("rememberedUser")}},[o]),c.useEffect(()=>{const p=setTimeout(()=>{u(!0)},100);return()=>clearTimeout(p)},[]),c.useEffect(()=>{y&&t("/dashboard")},[y,t]),c.useEffect(()=>{const p=C=>{if(D.current){const B=D.current.getBoundingClientRect(),U=C.clientX-B.left,Y=C.clientY-B.top;U>=0&&U<=B.width&&Y>=0&&Y<=B.height&&j({x:U,y:Y})}};return window.addEventListener("mousemove",p),()=>{window.removeEventListener("mousemove",p)}},[]);const v=async p=>{var C;try{i(null),l(!0);const B=await se.post("/auth/login",{username:p.username,password:p.password}),{user:U,token:Y}=B.data;if(!U||!Y)throw new Error("Invalid response from server");p.remember?(localStorage.setItem("rememberedUser",JSON.stringify({username:p.username,password:p.password})),localStorage.setItem("rememberUser","true")):(localStorage.removeItem("rememberedUser"),localStorage.removeItem("rememberUser")),f(!0),setTimeout(()=>{s(hl({user:U,token:Y})),ee.success("Login successful!"),t("/dashboard")},1200)}catch(B){console.error("Login Error:",B),console.error("Response Data:",(C=B.response)==null?void 0:C.data);let U="Authentication Error",Y="Invalid username or password.";if(B.response&&typeof B.response=="object"){const{status:Q,data:K}=B.response;Q===401?(U="Invalid Credentials",Y="The username or password you entered is incorrect."):Q===403?(U="Access Denied",Y="You do not have permission to access this resource."):Q===400?(U="Invalid Request",Y="Please check your input and try again."):Q===500&&(U="Server Error",Y="A server error occurred. Please try again later."),K&&typeof K=="object"&&K.message&&(Y=K.message)}else B.request?(U="Connection Error",Y="Unable to connect to the server. Please check your internet connection."):B.message&&(Y=B.message);i({title:U,message:Y})}finally{l(!1)}},g=yc(b),L=jc(g),A=vc(g),m=localStorage.getItem("rememberUser")==="true";if(y)return e.jsxs("div",{style:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",background:"#f0f5ff"},children:[e.jsx(gr,{}),e.jsx(wt,{style:{marginTop:16},children:"Redirecting to dashboard..."})]});const w=p=>{const C=[];for(let B=0;B<p;B++){const U=Math.random()*20+8,Y=Math.random()*3,Q=Math.random()*10+6,K=Math.random()*100,V=Math.random()*100;C.push(e.jsx(bc,{size:U,delay:Y,duration:Q,top:K,left:V,style:{transform:`translate(${k.x/50*(B%5-2)}px, ${k.y/50*(B%5-2)}px)`,opacity:x?0:1,transition:"opacity 0.5s ease-out",backgroundColor:"rgba(255, 255, 255, 0.07)"}},B))}return C},M=p=>{const C=[];for(let B=0;B<p;B++)C.push(e.jsx(Gl,{index:B,isHovered:x},B));return C},T=p=>{I(p)};return e.jsxs(Yl,{style:{opacity:P?1:0,transition:"opacity 0.3s ease-out"},children:[a&&e.jsx(fc,{children:e.jsx(Li,{})}),e.jsxs(Ql,{onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1),children:[e.jsx(sc,{children:e.jsx(nc,{children:e.jsx(ic,{src:d,alt:"Exhibition Manager Logo",onError:()=>R("/logo.png")})})}),e.jsxs(ec,{ref:D,children:[w(12),M(8)]}),e.jsxs(tc,{children:[e.jsx(rc,{children:e.jsx(ac,{children:S})}),e.jsx(oc,{level:4,children:"Your complete solution for managing exhibitions, stalls, and exhibitors"}),e.jsx(lc,{children:"Create floor plans, manage exhibitors, handle bookings, and generate invoices - all in one platform."})]})]}),e.jsx(Kl,{children:e.jsxs(cc,{children:[e.jsxs(xc,{children:[e.jsx(Ra,{level:2,style:{marginBottom:"0.5rem"},children:"Admin Login"}),e.jsx(wt,{type:"secondary",children:"Enter your credentials to access the admin dashboard"})]}),n&&e.jsx(Ge,{message:n.title,description:n.message,type:"error",showIcon:!0,style:{marginBottom:24,borderRadius:8,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.05)"},action:e.jsx(q,{size:"small",type:"text",onClick:()=>i(null),children:"Dismiss"})}),e.jsxs(F,{form:o,name:"login",initialValues:{remember:m},onFinish:v,layout:"vertical",children:[e.jsx(en,{name:"username",rules:[{required:!0,message:"Please input your username!"}],label:"Username",children:e.jsx(dc,{prefix:e.jsx(Ce,{style:{color:"#bfbfbf"}}),placeholder:"Enter your username",disabled:r,autoComplete:"username"})}),e.jsx(en,{name:"password",rules:[{required:!0,message:"Please input your password!"}],label:"Password",help:N&&e.jsxs(pc,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[e.jsx(wt,{type:"secondary",children:"Password Strength:"}),e.jsx(wt,{strong:!0,style:{color:L},children:A})]}),e.jsx(zt,{percent:g,showInfo:!1,strokeColor:L,size:"small"}),e.jsx("div",{style:{marginTop:"8px"},children:e.jsx(Ye,{title:e.jsx("ul",{style:{paddingLeft:"20px",margin:"0"},children:wc.map((p,C)=>e.jsx("li",{children:p},C))}),children:e.jsxs(wt,{type:"secondary",style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[e.jsx(Qs,{style:{marginRight:"4px"}}),"Password requirements"]})})})]}),children:e.jsx(uc,{prefix:e.jsx(yn,{style:{color:"#bfbfbf"}}),placeholder:"Enter your password",disabled:r,autoComplete:"current-password",onChange:p=>h(p.target.value),onFocus:()=>$(!0),onBlur:()=>$(!1)})}),e.jsx(mc,{children:e.jsx(en,{name:"remember",valuePropName:"checked",noStyle:!0,children:e.jsx(gc,{children:"Remember me"})})}),e.jsx(en,{children:r?e.jsx(gr,{}):e.jsx(hc,{type:"primary",htmlType:"submit",block:!0,className:a?"success":"",children:"Sign in"})}),e.jsxs("div",{style:{background:"#f6f6f6",padding:"12px 16px",borderRadius:"8px",border:"1px solid #f0f0f0"},children:[e.jsx(wt,{type:"secondary",children:"Development credentials:"}),e.jsxs("div",{style:{marginTop:"8px",display:"flex",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsx(wt,{strong:!0,children:"Username:"})," ",e.jsx(wt,{code:!0,children:"admin"})]}),e.jsxs("div",{children:[e.jsx(wt,{strong:!0,children:"Password:"})," ",e.jsx(wt,{code:!0,children:"admin123"})]})]})]})]})]})})]})},{Title:kc,Text:We}=me,Ic=({title:t,value:s,icon:n,color:i,gradient:r})=>e.jsxs(W,{className:"stat-card",styles:{body:{padding:"24px"}},style:{background:r,border:"none",overflow:"hidden",position:"relative"},children:[e.jsx("div",{className:"stat-card-background"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",position:"relative",zIndex:1},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1},children:[e.jsx(We,{style:{fontSize:"14px",color:"rgba(255, 255, 255, 0.85)",marginBottom:"8px"},children:t}),e.jsx(We,{style:{fontSize:"28px",fontWeight:600,color:"#FFFFFF",marginBottom:"0"},children:s})]}),e.jsx("div",{className:"stat-card-icon",style:{color:"white"},children:n})]})]}),Cc=()=>{const t=[{title:"Total Users",value:"1,128",icon:e.jsx(Ce,{}),color:"#7C3AED",gradient:"linear-gradient(135deg, #7C3AED 0%, #5B21B6 100%)"},{title:"Total Orders",value:"93",icon:e.jsx($n,{}),color:"#2563EB",gradient:"linear-gradient(135deg, #2563EB 0%, #1D4ED8 100%)"},{title:"Revenue",value:"15,600.00",icon:e.jsx(ho,{}),color:"#059669",gradient:"linear-gradient(135deg, #059669 0%, #047857 100%)"},{title:"Reports",value:"24",icon:e.jsx(Ji,{}),color:"#DC2626",gradient:"linear-gradient(135deg, #DC2626 0%, #B91C1C 100%)"}];return e.jsxs("div",{className:"dashboard-container",children:[e.jsx(kc,{level:4,style:{marginBottom:"24px"},children:"Dashboard"}),e.jsx(ne,{gutter:[24,24],children:t.map((s,n)=>e.jsx(z,{xs:24,sm:12,lg:6,children:e.jsx(Ic,{...s})},n))}),e.jsxs(ne,{gutter:[24,24],style:{marginTop:"24px"},children:[e.jsx(z,{xs:24,lg:12,children:e.jsx(W,{title:"Recent Activity",className:"info-card",styles:{body:{padding:"20px"}},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{className:"activity-item",children:[e.jsx(Ce,{style:{color:"#7C3AED"}}),e.jsxs(We,{children:["User ",e.jsx(We,{strong:!0,children:"'john_doe'"})," logged in"]})]}),e.jsxs("div",{className:"activity-item",children:[e.jsx($n,{style:{color:"#2563EB"}}),e.jsxs(We,{children:["New order ",e.jsx(We,{strong:!0,children:"#12345"})," received"]})]}),e.jsxs("div",{className:"activity-item",children:[e.jsx(Ji,{style:{color:"#059669"}}),e.jsxs(We,{children:["Product ",e.jsx(We,{strong:!0,children:"'Widget X'"})," updated"]})]}),e.jsxs("div",{className:"activity-item",children:[e.jsx(Ce,{style:{color:"#DC2626"}}),e.jsxs(We,{children:["New user registration: ",e.jsx(We,{strong:!0,children:"'jane_smith'"})]})]})]})})}),e.jsx(z,{xs:24,lg:12,children:e.jsx(W,{title:"System Status",className:"info-card",styles:{body:{padding:"20px"}},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{className:"status-item",children:[e.jsx("div",{className:"status-indicator online"}),e.jsxs(We,{children:["Server Status: ",e.jsx(We,{strong:!0,type:"success",children:"Online"})]})]}),e.jsxs("div",{className:"status-item",children:[e.jsx("div",{className:"status-indicator connected"}),e.jsxs(We,{children:["Database Status: ",e.jsx(We,{strong:!0,type:"success",children:"Connected"})]})]}),e.jsxs("div",{className:"status-item",children:[e.jsx("div",{className:"status-indicator backup"}),e.jsxs(We,{children:["Last Backup: ",e.jsx(We,{strong:!0,children:"2 hours ago"})]})]}),e.jsxs("div",{className:"status-item",children:[e.jsx("div",{className:"status-indicator normal"}),e.jsxs(We,{children:["System Load: ",e.jsx(We,{strong:!0,children:"Normal"})]})]})]})})})]})]})},{Title:Nc,Text:ls}=me,fr=[{id:"1",exhibitionName:"Tech Expo 2023",stallNumber:"A12",status:"approved",bookingDate:"2023-03-15",exhibitionDate:"2023-05-20"},{id:"2",exhibitionName:"Digital Summit",stallNumber:"B45",status:"pending",bookingDate:"2023-04-05",exhibitionDate:"2023-06-10"},{id:"3",exhibitionName:"Innovation Fair",stallNumber:"C33",status:"rejected",bookingDate:"2023-04-12",exhibitionDate:"2023-07-15"}],Ec=()=>{const[t,s]=c.useState(fr),[n,i]=c.useState(!1),r=ye(b=>b.exhibitorAuth.exhibitor);c.useEffect(()=>{i(!0),setTimeout(()=>{s(fr),i(!1)},1e3)},[]);const l=t.filter(b=>b.status==="approved").length,a=t.filter(b=>b.status==="pending").length;t.filter(b=>b.status==="rejected").length;const f=b=>{switch(b){case"approved":return e.jsxs(le,{color:"success",children:[e.jsx(Te,{})," Approved"]});case"pending":return e.jsxs(le,{color:"warning",children:[e.jsx(Qe,{})," Pending"]});case"rejected":return e.jsx(le,{color:"error",children:"Rejected"});default:return e.jsx(le,{children:"Unknown"})}};return e.jsxs("div",{children:[e.jsxs(Nc,{level:2,children:["Welcome, ",(r==null?void 0:r.companyName)||"Exhibitor"]}),e.jsx(ls,{type:"secondary",children:"Here's an overview of your exhibition activities"}),a>0&&e.jsx(Ge,{message:"Pending Approvals",description:`You have ${a} booking(s) waiting for approval.`,type:"info",showIcon:!0,style:{marginTop:24,marginBottom:24},action:e.jsx(q,{size:"small",type:"primary",children:"View Details"})}),e.jsxs(ne,{gutter:[24,24],style:{marginTop:24},children:[e.jsx(z,{xs:24,sm:8,children:e.jsx(W,{children:e.jsx(ve,{title:"Total Bookings",value:t.length,prefix:e.jsx(lt,{})})})}),e.jsx(z,{xs:24,sm:8,children:e.jsx(W,{children:e.jsx(ve,{title:"Approved Bookings",value:l,valueStyle:{color:"#3f8600"},prefix:e.jsx(Te,{})})})}),e.jsx(z,{xs:24,sm:8,children:e.jsx(W,{children:e.jsx(ve,{title:"Pending Approvals",value:a,valueStyle:{color:"#faad14"},prefix:e.jsx(Qe,{})})})})]}),e.jsx(W,{title:"Recent Bookings",extra:e.jsx(tt,{to:"/exhibitor/bookings",children:"View All"}),style:{marginTop:24},loading:n,children:e.jsx(es,{dataSource:t,renderItem:b=>e.jsxs(es.Item,{actions:[e.jsx(tt,{to:`/exhibitor/bookings/${b.id}`,children:"View Details"},"view")],children:[e.jsx(es.Item.Meta,{title:e.jsxs("div",{children:[e.jsx(ls,{strong:!0,children:b.exhibitionName}),e.jsxs(ls,{type:"secondary",style:{marginLeft:12},children:["Stall: ",b.stallNumber]})]}),description:e.jsxs("div",{children:[e.jsxs(ls,{children:["Booked on: ",b.bookingDate]}),e.jsx(Fe,{type:"vertical"}),e.jsxs(ls,{children:["Exhibition date: ",b.exhibitionDate]})]})}),f(b.status)]})})}),e.jsx(W,{title:"Upcoming Exhibitions",style:{marginTop:24},children:e.jsxs("div",{style:{textAlign:"center",padding:"20px 0"},children:[e.jsx(Ut,{style:{fontSize:48,color:"#1890ff",marginBottom:16}}),e.jsxs("div",{children:[e.jsx(ls,{children:"Explore available exhibitions and book your stall"}),e.jsx("div",{style:{marginTop:16},children:e.jsx(tt,{to:"/exhibitions",children:e.jsx(q,{type:"primary",children:"Browse Exhibitions"})})})]})]})})]})},xt={getExhibitions:()=>Qt.get("/public/exhibitions"),getExhibition:t=>Qt.get(`/public/exhibitions/${t}`),getLayout:t=>Qt.get(`/public/exhibitions/${t}/layout`),getStallDetails:(t,s)=>Qt.get(`/public/exhibitions/${t}/stalls/${s}`),bookStall:(t,s,n)=>Qt.post(`/public/exhibitions/${t}/stalls/${s}/book`,n),bookMultipleStalls:(t,s)=>Qt.post(`/public/exhibitions/${t}/stalls/book-multiple`,s),searchExhibitors:t=>Qt.get("/public/exhibitors/search",{params:{query:t}}),exhibitorBookStalls:t=>se.post(`/exhibitor-bookings/${t.exhibitionId}`,t),getExhibitorBookings:()=>se.get("/exhibitor-bookings/my-bookings"),getExhibitorBooking:t=>se.get(`/exhibitor-bookings/${t}`),cancelExhibitorBooking:t=>se.patch(`/exhibitor-bookings/${t}/cancel`),getExhibitorBookingInvoice:t=>se.get(`/exhibitor-bookings/${t}/invoice`)},{Title:Ac,Text:Tc}=me,{Option:cs}=oe,{TabPane:ds}=ct,{confirm:Pc}=fe,Dc=()=>{const[t,s]=c.useState([]),[n,i]=c.useState(!1),[r,l]=c.useState(""),[a,f]=c.useState("all"),b=Se();c.useEffect(()=>{h()},[]);const h=async()=>{try{i(!0);const u=await xt.getExhibitorBookings();s(u.data)}catch(u){console.error("Error fetching bookings:",u),ee.error("Failed to load bookings. Please try again.")}finally{i(!1)}},N=u=>{Pc({title:"Are you sure you want to cancel this booking?",icon:e.jsx(ss,{}),content:"This action cannot be undone. Once cancelled, the stalls will be available for others to book.",onOk:async()=>{try{await xt.cancelExhibitorBooking(u),ee.success("Booking cancelled successfully"),h()}catch(x){console.error("Error cancelling booking:",x),ee.error("Failed to cancel booking")}}})},$=u=>{switch(u){case"approved":return e.jsxs(le,{color:"success",children:[e.jsx(Te,{})," Approved"]});case"pending":return e.jsxs(le,{color:"warning",children:[e.jsx(Qe,{})," Pending"]});case"rejected":return e.jsx(le,{color:"error",children:"Rejected"});case"confirmed":return e.jsxs(le,{color:"blue",children:[e.jsx(Te,{})," Confirmed"]});case"cancelled":return e.jsx(le,{color:"default",children:"Cancelled"});default:return e.jsx(le,{children:"Unknown"})}},y=u=>{switch(u){case"paid":return e.jsx(le,{color:"success",children:"Paid"});case"pending":return e.jsx(le,{color:"warning",children:"Pending"});case"refunded":return e.jsx(le,{color:"default",children:"Refunded"});default:return e.jsx(le,{children:"Unknown"})}},D=async u=>{try{const x=await xt.getExhibitorBookingInvoice(u);x&&x.data&&x.data._id?b(`/exhibitor/invoice/${u}`):ee.error("Invoice not found or not available")}catch(x){console.error("Error fetching invoice:",x),ee.error("Failed to retrieve invoice details")}},k=[{title:"Exhibition",dataIndex:["exhibitionId","name"],key:"exhibitionName",render:(u,x)=>{var I;return((I=x.exhibitionId)==null?void 0:I.name)||"N/A"},sorter:(u,x)=>{var I,o;return(((I=u.exhibitionId)==null?void 0:I.name)||"").localeCompare(((o=x.exhibitionId)==null?void 0:o.name)||"")}},{title:"Stall(s)",dataIndex:"stallIds",key:"stallNumbers",render:u=>(u==null?void 0:u.map(x=>x.number).join(", "))||"N/A"},{title:"Booking Date",dataIndex:"createdAt",key:"createdAt",render:u=>Ae(u).format("MMM D, YYYY"),sorter:(u,x)=>Ae(u.createdAt).unix()-Ae(x.createdAt).unix()},{title:"Exhibition Date",key:"exhibitionDate",render:(u,x)=>{var d,R;const I=Ae((d=x.exhibitionId)==null?void 0:d.startDate).format("MMM D"),o=Ae((R=x.exhibitionId)==null?void 0:R.endDate).format("MMM D, YYYY");return`${I} - ${o}`},sorter:(u,x)=>{var I,o;return Ae((I=u.exhibitionId)==null?void 0:I.startDate).unix()-Ae((o=x.exhibitionId)==null?void 0:o.startDate).unix()}},{title:"Status",dataIndex:"status",key:"status",render:u=>$(u),filters:[{text:"Approved",value:"approved"},{text:"Pending",value:"pending"},{text:"Rejected",value:"rejected"},{text:"Confirmed",value:"confirmed"},{text:"Cancelled",value:"cancelled"}],onFilter:(u,x)=>x.status===u},{title:"Payment",dataIndex:"paymentStatus",key:"paymentStatus",render:u=>y(u)},{title:"Amount",dataIndex:"amount",key:"amount",render:u=>`â‚¹${u.toLocaleString()}`,sorter:(u,x)=>u.amount-x.amount},{title:"Actions",key:"action",render:(u,x)=>{const I=[{key:"view",icon:e.jsx(Mt,{}),label:"View Details",onClick:()=>b(`/exhibitor/bookings/${x._id}`)}];return["approved","confirmed"].includes(x.status)&&I.push({key:"invoice",icon:e.jsx(Ut,{}),label:"View Invoice",onClick:()=>D(x._id)}),x.status==="pending"&&I.push({key:"cancel",icon:e.jsx(ss,{}),label:"Cancel Booking",onClick:()=>N(x._id)}),e.jsx(X,{size:"middle",children:e.jsx(_t,{overlay:e.jsx(at,{items:I}),trigger:["click"],children:e.jsx(q,{type:"text",icon:e.jsx(Vn,{})})})})}}],j=u=>{l(u)},P=t.filter(u=>{var o,d;const x=(((o=u.exhibitionId)==null?void 0:o.name)||"").toLowerCase().includes(r.toLowerCase())||u.stallIds.some(R=>R.number.toLowerCase().includes(r.toLowerCase()))||(((d=u.exhibitionId)==null?void 0:d.venue)||"").toLowerCase().includes(r.toLowerCase()),I=a==="all"||u.status===a;return x&&I});return e.jsxs("div",{children:[e.jsx(Ac,{level:2,children:"My Bookings"}),e.jsx(Tc,{type:"secondary",children:"Manage all your exhibition stall bookings in one place"}),e.jsx(W,{style:{marginTop:24},children:e.jsxs(ct,{defaultActiveKey:"all",children:[e.jsxs(ds,{tab:"All Bookings",children:[e.jsxs("div",{style:{marginBottom:16,display:"flex",justifyContent:"space-between"},children:[e.jsxs(X,{children:[e.jsx(G,{placeholder:"Search by exhibition, stall, or venue",prefix:e.jsx(bt,{}),style:{width:300},onChange:u=>j(u.target.value),value:r}),e.jsxs(oe,{defaultValue:"all",style:{width:120},onChange:u=>f(u),children:[e.jsx(cs,{value:"all",children:"All Status"}),e.jsx(cs,{value:"approved",children:"Approved"}),e.jsx(cs,{value:"pending",children:"Pending"}),e.jsx(cs,{value:"rejected",children:"Rejected"}),e.jsx(cs,{value:"confirmed",children:"Confirmed"}),e.jsx(cs,{value:"cancelled",children:"Cancelled"})]})]}),e.jsx(tt,{to:"/exhibitions",children:e.jsx(q,{type:"primary",children:"Book New Stall"})})]}),e.jsx($e,{columns:k,dataSource:P,rowKey:"_id",pagination:{pageSize:10},loading:n})]},"all"),e.jsx(ds,{tab:"Pending",children:e.jsx($e,{columns:k,dataSource:t.filter(u=>u.status==="pending"),rowKey:"_id",pagination:{pageSize:10},loading:n})},"pending"),e.jsx(ds,{tab:"Approved",children:e.jsx($e,{columns:k,dataSource:t.filter(u=>u.status==="approved"),rowKey:"_id",pagination:{pageSize:10},loading:n})},"approved"),e.jsx(ds,{tab:"Confirmed",children:e.jsx($e,{columns:k,dataSource:t.filter(u=>u.status==="confirmed"),rowKey:"_id",pagination:{pageSize:10},loading:n})},"confirmed"),e.jsx(ds,{tab:"Rejected",children:e.jsx($e,{columns:k,dataSource:t.filter(u=>u.status==="rejected"),rowKey:"_id",pagination:{pageSize:10},loading:n})},"rejected"),e.jsx(ds,{tab:"Cancelled",children:e.jsx($e,{columns:k,dataSource:t.filter(u=>u.status==="cancelled"),rowKey:"_id",pagination:{pageSize:10},loading:n})},"cancelled")]})})]})},{Title:br,Text:Zn}=me,Rc=()=>{var $,y,D,k,j,P,u,x,I,o,d,R,S;const{id:t}=dt(),s=Se(),[n,i]=c.useState(null),[r,l]=c.useState(!0);c.useEffect(()=>{a()},[t]);const a=async()=>{try{l(!0);const E=await xt.getExhibitorBooking(t||"");i(E.data)}catch(E){console.error("Error fetching booking details:",E),ee.error("Failed to load booking details")}finally{l(!1)}},f=async()=>{try{s(`/exhibitor/invoice/${t}`)}catch(E){console.error("Error fetching invoice:",E),ee.error("Failed to retrieve invoice")}},b=E=>{switch(E){case"approved":return e.jsxs(le,{color:"success",children:[e.jsx(Te,{})," Approved"]});case"pending":return e.jsxs(le,{color:"warning",children:[e.jsx(Qe,{})," Pending"]});case"rejected":return e.jsx(le,{color:"error",children:"Rejected"});case"confirmed":return e.jsxs(le,{color:"blue",children:[e.jsx(Te,{})," Confirmed"]});case"cancelled":return e.jsx(le,{color:"default",children:"Cancelled"});default:return e.jsx(le,{children:"Unknown"})}},h=E=>{switch(E){case"paid":return e.jsx(le,{color:"success",children:"Paid"});case"pending":return e.jsx(le,{color:"warning",children:"Pending"});case"refunded":return e.jsx(le,{color:"default",children:"Refunded"});default:return e.jsx(le,{children:"Unknown"})}},N=[{title:"Stall Number",dataIndex:"number",key:"number"},{title:"Dimensions",key:"dimensions",render:E=>`${E.dimensions.width}m Ã— ${E.dimensions.height}m`},{title:"Size",key:"size",render:E=>`${E.dimensions.width*E.dimensions.height} mÂ²`},{title:"Rate per mÂ²",dataIndex:"ratePerSqm",key:"ratePerSqm",render:E=>`â‚¹${E.toLocaleString()}`},{title:"Amount",key:"amount",render:(E,v,g)=>{var A;const L=(A=n.calculations)==null?void 0:A.stalls[g];return L?`â‚¹${L.baseAmount.toLocaleString()}`:"N/A"}}];return r?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"500px"},children:e.jsx(Dt,{size:"large"})}):n?e.jsxs("div",{style:{padding:"20px"},children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(q,{icon:e.jsx(Ot,{}),onClick:()=>s("/exhibitor/bookings"),style:{marginRight:16},children:"Back to Bookings"}),["approved","confirmed"].includes(n.status)&&e.jsx(q,{type:"primary",icon:e.jsx(Ut,{}),onClick:f,children:"View Invoice"})]}),e.jsxs(W,{title:"Booking Details",style:{marginBottom:20},children:[e.jsxs(pe,{bordered:!0,column:{xs:1,sm:2,md:3},children:[e.jsx(pe.Item,{label:"Booking ID",children:n._id}),e.jsx(pe.Item,{label:"Exhibition",children:(($=n.exhibitionId)==null?void 0:$.name)||"N/A"}),e.jsx(pe.Item,{label:"Venue",children:((y=n.exhibitionId)==null?void 0:y.venue)||"N/A"}),e.jsx(pe.Item,{label:"Booking Date",children:Ae(n.createdAt).format("MMM D, YYYY")}),e.jsxs(pe.Item,{label:"Exhibition Dates",children:[Ae((D=n.exhibitionId)==null?void 0:D.startDate).format("MMM D, YYYY")," -",Ae((k=n.exhibitionId)==null?void 0:k.endDate).format("MMM D, YYYY")]}),e.jsx(pe.Item,{label:"Status",children:b(n.status)}),e.jsx(pe.Item,{label:"Payment Status",children:h(n.paymentStatus||"pending")}),e.jsxs(pe.Item,{label:"Total Amount",children:["â‚¹",((j=n.amount)==null?void 0:j.toLocaleString())||"N/A"]})]}),n.rejectionReason&&e.jsxs("div",{style:{marginTop:16},children:[e.jsx(br,{level:5,style:{color:"#f5222d"},children:"Rejection Reason:"}),e.jsx(Zn,{children:n.rejectionReason})]})]}),e.jsx(W,{title:"Stall Details",style:{marginBottom:20},children:e.jsx($e,{dataSource:n.stallIds||[],columns:N,rowKey:"_id",pagination:!1})}),e.jsx(W,{title:"Calculation Summary",children:e.jsx(ne,{gutter:[16,16],children:e.jsx(z,{span:24,children:e.jsxs(pe,{bordered:!0,column:1,children:[e.jsxs(pe.Item,{label:"Base Amount",children:["â‚¹",((P=n.calculations)==null?void 0:P.totalBaseAmount.toLocaleString())||"N/A"]}),((u=n.calculations)==null?void 0:u.totalDiscountAmount)>0&&e.jsxs(pe.Item,{label:"Discount",children:["- â‚¹",((x=n.calculations)==null?void 0:x.totalDiscountAmount.toLocaleString())||"N/A"]}),((I=n.calculations)==null?void 0:I.totalDiscountAmount)>0&&e.jsxs(pe.Item,{label:"Amount After Discount",children:["â‚¹",((o=n.calculations)==null?void 0:o.totalAmountAfterDiscount.toLocaleString())||"N/A"]}),(R=(d=n.calculations)==null?void 0:d.taxes)==null?void 0:R.map(E=>e.jsxs(pe.Item,{label:`${E.name} (${E.rate}%)`,children:["+ â‚¹",E.amount.toLocaleString()||"N/A"]},E.name)),e.jsx(pe.Item,{label:"Total Amount",children:e.jsxs(Zn,{strong:!0,style:{fontSize:"16px"},children:["â‚¹",((S=n.amount)==null?void 0:S.toLocaleString())||"N/A"]})})]})})})}),e.jsx(W,{title:"Customer Information",style:{marginTop:20},children:e.jsxs(pe,{bordered:!0,column:{xs:1,sm:2},children:[e.jsx(pe.Item,{label:"Company Name",children:n.companyName}),e.jsx(pe.Item,{label:"Contact Person",children:n.customerName}),e.jsx(pe.Item,{label:"Email",children:n.customerEmail}),e.jsx(pe.Item,{label:"Phone",children:n.customerPhone})]})})]}):e.jsx(W,{children:e.jsxs("div",{style:{textAlign:"center",margin:"50px 0"},children:[e.jsx(br,{level:3,children:"Booking Not Found"}),e.jsx(Zn,{type:"secondary",children:"The requested booking could not be found or you don't have permission to view it."}),e.jsx("div",{style:{marginTop:20},children:e.jsx(q,{type:"primary",onClick:()=>s("/exhibitor/bookings"),children:"Back to Bookings"})})]})})},Lc=window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1",Hi=Lc?"https://aakardata.in/api":"http://localhost:5000/api",$c="ma7o6bmjpok2nhnhq6jgcwrlg446a2hnyxqih70ni695pvm5",Ai=as.create({baseURL:Hi}),tn=as.create({baseURL:Hi});Ai.interceptors.request.use(t=>{const s=localStorage.getItem("exhibitor_token");return s&&(t.headers.Authorization=`Bearer ${s}`),t},t=>Promise.reject(t));const Zt=as.create({baseURL:Hi});Zt.interceptors.request.use(t=>{const s=localStorage.getItem("token");return s&&(t.headers.Authorization=`Bearer ${s}`),t},t=>Promise.reject(t));const rt={sendRegistrationOTP:async t=>await tn.post("/exhibitors/send-otp",{email:t}),verifyOTP:async t=>await tn.post("/exhibitors/verify-otp",t),register:async t=>await tn.post("/exhibitors/register",t),login:async t=>await tn.post("/exhibitors/login",t),getProfile:async()=>await Ai.get("/exhibitors/profile"),updateProfile:async t=>await Ai.put("/exhibitors/profile",t),getExhibitors:async()=>await Zt.get("/exhibitors/admin/exhibitors"),getExhibitor:async t=>await Zt.get(`/exhibitors/admin/exhibitors/${t}`),createExhibitor:async t=>await Zt.post("/exhibitors/admin/exhibitors",t),updateStatus:async(t,s,n)=>await Zt.put(`/exhibitors/admin/exhibitors/${t}/status`,{status:s,rejectionReason:n}),updateExhibitor:async(t,s)=>await Zt.put(`/exhibitors/admin/exhibitors/${t}`,s),deleteExhibitor:async t=>await Zt.delete(`/exhibitors/admin/exhibitors/${t}`)},{Title:yr,Text:jr}=me,{TabPane:vr}=ct,Fc=()=>{var b;const[t]=F.useForm(),[s,n]=c.useState(!1),[i,r]=c.useState(!1),l=Me(),a=ye(h=>h.exhibitorAuth.exhibitor);c.useEffect(()=>{(async()=>{try{r(!0);const N=await rt.getProfile();N.data&&l(Ei({exhibitor:N.data,token:(a==null?void 0:a.token)||localStorage.getItem("exhibitor_token")||""}))}catch{ee.error("Failed to fetch exhibitor profile")}finally{r(!1)}})()},[l]),c.useEffect(()=>{a&&t.setFieldsValue({companyName:a.companyName||"",contactPerson:a.contactPerson||"",email:a.email||"",phone:a.phone||"",address:a.address||"",website:a.website||"",description:a.description||"",panNumber:a.panNumber||"",gstNumber:a.gstNumber||"",city:a.city||"",state:a.state||"",pinCode:a.pinCode||""})},[a,t]);const f=async h=>{try{n(!0);const N=await rt.updateProfile(h),$=(a==null?void 0:a.token)||localStorage.getItem("exhibitor_token")||"";l(Ei({exhibitor:{...a,...h},token:$})),ee.success("Profile updated successfully")}catch{ee.error("Failed to update profile")}finally{n(!1)}};return e.jsxs("div",{children:[e.jsx(yr,{level:2,children:"My Profile"}),e.jsx(jr,{type:"secondary",children:"Manage your exhibitor profile information"}),e.jsx(W,{style:{marginTop:24},loading:i,children:e.jsxs(ct,{defaultActiveKey:"profile",children:[e.jsx(vr,{tab:"Profile Information",children:e.jsxs(ne,{gutter:32,children:[e.jsx(z,{span:6,children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:24},children:[e.jsx(yt,{size:100,icon:e.jsx(Ce,{}),style:{backgroundColor:"#1890ff",marginBottom:16},children:((b=a==null?void 0:a.companyName)==null?void 0:b.charAt(0).toUpperCase())||"E"}),e.jsx(yr,{level:4,children:a==null?void 0:a.companyName}),e.jsx(jr,{type:"secondary",children:a==null?void 0:a.email})]})}),e.jsx(z,{span:18,children:e.jsxs(F,{form:t,layout:"vertical",onFinish:f,initialValues:{companyName:(a==null?void 0:a.companyName)||"",contactPerson:(a==null?void 0:a.contactPerson)||"",email:(a==null?void 0:a.email)||"",phone:(a==null?void 0:a.phone)||"",address:(a==null?void 0:a.address)||"",website:(a==null?void 0:a.website)||"",description:(a==null?void 0:a.description)||"",panNumber:(a==null?void 0:a.panNumber)||"",gstNumber:(a==null?void 0:a.gstNumber)||"",city:(a==null?void 0:a.city)||"",state:(a==null?void 0:a.state)||"",pinCode:(a==null?void 0:a.pinCode)||""},children:[e.jsxs(ne,{gutter:16,children:[e.jsx(z,{span:12,children:e.jsx(F.Item,{name:"companyName",label:"Company Name",rules:[{required:!0,message:"Please enter your company name"}],children:e.jsx(G,{prefix:e.jsx($i,{}),placeholder:"Company Name"})})}),e.jsx(z,{span:12,children:e.jsx(F.Item,{name:"contactPerson",label:"Contact Person",rules:[{required:!0,message:"Please enter contact person name"}],children:e.jsx(G,{prefix:e.jsx(Ce,{}),placeholder:"Contact Person"})})})]}),e.jsxs(ne,{gutter:16,children:[e.jsx(z,{span:12,children:e.jsx(F.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please enter your email"},{type:"email",message:"Please enter a valid email"}],children:e.jsx(G,{prefix:e.jsx(qt,{}),placeholder:"Email",disabled:!0})})}),e.jsx(z,{span:12,children:e.jsx(F.Item,{name:"phone",label:"Phone",rules:[{required:!0,message:"Please enter your phone number"}],children:e.jsx(G,{prefix:e.jsx(Fi,{}),placeholder:"Phone Number"})})})]}),e.jsx(F.Item,{name:"address",label:"Address",children:e.jsx(G.TextArea,{rows:2,placeholder:"Company Address"})}),e.jsxs(ne,{gutter:16,children:[e.jsx(z,{span:8,children:e.jsx(F.Item,{name:"city",label:"City",children:e.jsx(G,{placeholder:"City"})})}),e.jsx(z,{span:8,children:e.jsx(F.Item,{name:"state",label:"State",children:e.jsx(G,{placeholder:"State"})})}),e.jsx(z,{span:8,children:e.jsx(F.Item,{name:"pinCode",label:"PIN Code",rules:[{pattern:/^[0-9]{6}$/,message:"Please enter a valid 6-digit PIN code"}],children:e.jsx(G,{placeholder:"PIN Code",maxLength:6})})})]}),e.jsxs(ne,{gutter:16,children:[e.jsx(z,{span:12,children:e.jsx(F.Item,{name:"panNumber",label:"PAN No.",rules:[{pattern:/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/,message:"Please enter a valid PAN number"}],children:e.jsx(G,{placeholder:"PAN Number",style:{textTransform:"uppercase"},maxLength:10})})}),e.jsx(z,{span:12,children:e.jsx(F.Item,{name:"gstNumber",label:"GST No.",rules:[{pattern:/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/,message:"Please enter a valid GST number"}],children:e.jsx(G,{placeholder:"GST Number",style:{textTransform:"uppercase"}})})})]}),e.jsx(F.Item,{name:"website",label:"Website",children:e.jsx(G,{placeholder:"https://www.yourcompany.com"})}),e.jsx(F.Item,{name:"description",label:"Company Description",children:e.jsx(G.TextArea,{rows:4,placeholder:"Brief description of your company"})}),e.jsx(F.Item,{children:e.jsx(q,{type:"primary",htmlType:"submit",loading:s,icon:e.jsx(Is,{}),children:"Save Changes"})})]})})]})},"profile"),e.jsx(vr,{tab:"Change Password",children:e.jsxs(F,{layout:"vertical",onFinish:h=>{ee.success("Password updated successfully")},children:[e.jsx(F.Item,{name:"currentPassword",label:"Current Password",rules:[{required:!0,message:"Please enter your current password"}],children:e.jsx(G.Password,{placeholder:"Current Password"})}),e.jsx(F.Item,{name:"newPassword",label:"New Password",rules:[{required:!0,message:"Please enter your new password"},{min:6,message:"Password must be at least 6 characters"}],children:e.jsx(G.Password,{placeholder:"New Password"})}),e.jsx(F.Item,{name:"confirmPassword",label:"Confirm New Password",dependencies:["newPassword"],rules:[{required:!0,message:"Please confirm your new password"},({getFieldValue:h})=>({validator(N,$){return!$||h("newPassword")===$?Promise.resolve():Promise.reject(new Error("The two passwords do not match"))}})],children:e.jsx(G.Password,{placeholder:"Confirm New Password"})}),e.jsx(F.Item,{children:e.jsx(q,{type:"primary",htmlType:"submit",children:"Update Password"})})]})},"password")]})})]})};var Mc=class extends Error{constructor(s){super(s[0].message);Zi(this,"issues");this.name="SchemaError",this.issues=s}},$a=(t=>(t.uninitialized="uninitialized",t.pending="pending",t.fulfilled="fulfilled",t.rejected="rejected",t))($a||{});function wr(t){return{status:t,isUninitialized:t==="uninitialized",isLoading:t==="pending",isSuccess:t==="fulfilled",isError:t==="rejected"}}var Sr=Vs;function Fa(t,s){if(t===s||!(Sr(t)&&Sr(s)||Array.isArray(t)&&Array.isArray(s)))return s;const n=Object.keys(s),i=Object.keys(t);let r=n.length===i.length;const l=Array.isArray(s)?[]:{};for(const a of n)l[a]=Fa(t[a],s[a]),r&&(r=t[a]===l[a]);return r?t:l}function vs(t){let s=0;for(const n in t)s++;return s}var kr=t=>[].concat(...t);function Bc(t){return new RegExp("(^|:)//").test(t)}function zc(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}function zn(t){return t!=null}function Uc(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}var qc=t=>t.replace(/\/$/,""),_c=t=>t.replace(/^\//,"");function Oc(t,s){if(!t)return s;if(!s)return t;if(Bc(s))return s;const n=t.endsWith("/")||!s.startsWith("?")?"/":"";return t=qc(t),s=_c(s),`${t}${n}${s}`}function Vc(t,s,n){return t.has(s)?t.get(s):t.set(s,n).get(s)}var Ir=(...t)=>fetch(...t),Hc=t=>t.status>=200&&t.status<=299,Wc=t=>/ion\/(vnd\.api\+)?json/.test(t.get("content-type")||"");function Cr(t){if(!Vs(t))return t;const s={...t};for(const[n,i]of Object.entries(s))i===void 0&&delete s[n];return s}function Wi({baseUrl:t,prepareHeaders:s=$=>$,fetchFn:n=Ir,paramsSerializer:i,isJsonContentType:r=Wc,jsonContentType:l="application/json",jsonReplacer:a,timeout:f,responseHandler:b,validateStatus:h,...N}={}){return typeof fetch>"u"&&n===Ir&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),async(y,D,k)=>{const{getState:j,extra:P,endpoint:u,forced:x,type:I}=D;let o,{url:d,headers:R=new Headers(N.headers),params:S=void 0,responseHandler:E=b??"json",validateStatus:v=h??Hc,timeout:g=f,...L}=typeof y=="string"?{url:y}:y,A,m=D.signal;g&&(A=new AbortController,D.signal.addEventListener("abort",A.abort),m=A.signal);let w={...N,signal:m,...L};R=new Headers(Cr(R)),w.headers=await s(R,{getState:j,arg:y,extra:P,endpoint:u,forced:x,type:I,extraOptions:k})||R;const M=V=>typeof V=="object"&&(Vs(V)||Array.isArray(V)||typeof V.toJSON=="function");if(!w.headers.has("content-type")&&M(w.body)&&w.headers.set("content-type",l),M(w.body)&&r(w.headers)&&(w.body=JSON.stringify(w.body,a)),S){const V=~d.indexOf("?")?"&":"?",_=i?i(S):new URLSearchParams(Cr(S));d+=V+_}d=Oc(t,d);const T=new Request(d,w);o={request:new Request(d,w)};let C,B=!1,U=A&&setTimeout(()=>{B=!0,A.abort()},g);try{C=await n(T)}catch(V){return{error:{status:B?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(V)},meta:o}}finally{U&&clearTimeout(U),A==null||A.signal.removeEventListener("abort",A.abort)}const Y=C.clone();o.response=Y;let Q,K="";try{let V;if(await Promise.all([$(C,E).then(_=>Q=_,_=>V=_),Y.text().then(_=>K=_,()=>{})]),V)throw V}catch(V){return{error:{status:"PARSING_ERROR",originalStatus:C.status,data:K,error:String(V)},meta:o}}return v(C,Q)?{data:Q,meta:o}:{error:{status:C.status,data:Q},meta:o}};async function $(y,D){if(typeof D=="function")return D(y);if(D==="content-type"&&(D=r(y.headers)?"json":"text"),D==="json"){const k=await y.text();return k.length?JSON.parse(k):null}return y.text()}}var Nr=class{constructor(t,s=void 0){this.value=t,this.meta=s}},Yi=Cs("__rtkq/focused"),Ma=Cs("__rtkq/unfocused"),Qi=Cs("__rtkq/online"),Ba=Cs("__rtkq/offline");function Qn(t){return t.type==="query"}function Yc(t){return t.type==="mutation"}function Gn(t){return t.type==="infinitequery"}function Un(t){return Qn(t)||Gn(t)}function Gi(t,s,n,i,r,l){return Qc(t)?t(s,n,i,r).filter(zn).map(Ti).map(l):Array.isArray(t)?t.map(Ti).map(l):[]}function Qc(t){return typeof t=="function"}function Ti(t){return typeof t=="string"?{type:t}:t}function Gc(t,s){return t.catch(s)}var Ws=Symbol("forceQueryFn"),Pi=t=>typeof t[Ws]=="function";function Kc({serializeQueryArgs:t,queryThunk:s,infiniteQueryThunk:n,mutationThunk:i,api:r,context:l}){const a=new Map,f=new Map,{unsubscribeQueryResult:b,removeMutationResult:h,updateSubscriptionOptions:N}=r.internalActions;return{buildInitiateQuery:P,buildInitiateInfiniteQuery:u,buildInitiateMutation:x,getRunningQueryThunk:$,getRunningMutationThunk:y,getRunningQueriesThunk:D,getRunningMutationsThunk:k};function $(I,o){return d=>{var E;const R=l.endpointDefinitions[I],S=t({queryArgs:o,endpointDefinition:R,endpointName:I});return(E=a.get(d))==null?void 0:E[S]}}function y(I,o){return d=>{var R;return(R=f.get(d))==null?void 0:R[o]}}function D(){return I=>Object.values(a.get(I)||{}).filter(zn)}function k(){return I=>Object.values(f.get(I)||{}).filter(zn)}function j(I,o){const d=(R,{subscribe:S=!0,forceRefetch:E,subscriptionOptions:v,[Ws]:g,...L}={})=>(A,m)=>{var H;const w=t({queryArgs:R,endpointDefinition:o,endpointName:I});let M;const T={...L,type:"query",subscribe:S,forceRefetch:E,subscriptionOptions:v,endpointName:I,originalArgs:R,queryCacheKey:w,[Ws]:g};if(Qn(o))M=s(T);else{const{direction:te,initialPageParam:ue}=L;M=n({...T,direction:te,initialPageParam:ue})}const p=r.endpoints[I].select(R),C=A(M),B=p(m()),{requestId:U,abort:Y}=C,Q=B.requestId!==U,K=(H=a.get(A))==null?void 0:H[w],V=()=>p(m()),_=Object.assign(g?C.then(V):Q&&!K?Promise.resolve(B):Promise.all([K,C]).then(V),{arg:R,requestId:U,subscriptionOptions:v,queryCacheKey:w,abort:Y,async unwrap(){const te=await _;if(te.isError)throw te.error;return te.data},refetch:()=>A(d(R,{subscribe:!1,forceRefetch:!0})),unsubscribe(){S&&A(b({queryCacheKey:w,requestId:U}))},updateSubscriptionOptions(te){_.subscriptionOptions=te,A(N({endpointName:I,requestId:U,queryCacheKey:w,options:te}))}});if(!K&&!Q&&!g){const te=Vc(a,A,{});te[w]=_,_.then(()=>{delete te[w],vs(te)||a.delete(A)})}return _};return d}function P(I,o){return j(I,o)}function u(I,o){return j(I,o)}function x(I){return(o,{track:d=!0,fixedCacheKey:R}={})=>(S,E)=>{const v=i({type:"mutation",endpointName:I,originalArgs:o,track:d,fixedCacheKey:R}),g=S(v),{requestId:L,abort:A,unwrap:m}=g,w=Gc(g.unwrap().then(C=>({data:C})),C=>({error:C})),M=()=>{S(h({requestId:L,fixedCacheKey:R}))},T=Object.assign(w,{arg:g.arg,requestId:L,abort:A,unwrap:m,reset:M}),p=f.get(S)||{};return f.set(S,p),p[L]=T,T.then(()=>{delete p[L],vs(p)||f.delete(S)}),R&&(p[R]=T,T.then(()=>{p[R]===T&&(delete p[R],vs(p)||f.delete(S))})),T}}}var za=class extends Mc{constructor(t,s,n,i){super(t),this.value=s,this.schemaName=n,this._bqMeta=i}};async function Gt(t,s,n,i){const r=await t["~standard"].validate(s);if(r.issues)throw new za(r.issues,s,n,i);return r.value}function Xc(t){return t}var Es=(t={})=>({...t,[Sa]:!0});function Zc({reducerPath:t,baseQuery:s,context:{endpointDefinitions:n},serializeQueryArgs:i,api:r,assertTagType:l,selectors:a,onSchemaFailure:f,catchSchemaFailure:b,skipSchemaValidation:h}){const N=(L,A,m,w)=>(M,T)=>{const p=n[L],C=i({queryArgs:A,endpointDefinition:p,endpointName:L});if(M(r.internalActions.queryResultPatched({queryCacheKey:C,patches:m})),!w)return;const B=r.endpoints[L].select(A)(T()),U=Gi(p.providesTags,B.data,void 0,A,{},l);M(r.internalActions.updateProvidedBy([{queryCacheKey:C,providedTags:U}]))};function $(L,A,m=0){const w=[A,...L];return m&&w.length>m?w.slice(0,-1):w}function y(L,A,m=0){const w=[...L,A];return m&&w.length>m?w.slice(1):w}const D=(L,A,m,w=!0)=>(M,T)=>{const C=r.endpoints[L].select(A)(T()),B={patches:[],inversePatches:[],undo:()=>M(r.util.patchQueryData(L,A,B.inversePatches,w))};if(C.status==="uninitialized")return B;let U;if("data"in C)if(Vo(C.data)){const[Y,Q,K]=Ia(C.data,m);B.patches.push(...Q),B.inversePatches.push(...K),U=Y}else U=m(C.data),B.patches.push({op:"replace",path:[],value:U}),B.inversePatches.push({op:"replace",path:[],value:C.data});return B.patches.length===0||M(r.util.patchQueryData(L,A,B.patches,w)),B},k=(L,A,m)=>w=>w(r.endpoints[L].initiate(A,{subscribe:!1,forceRefetch:!0,[Ws]:()=>({data:m})})),j=(L,A)=>L.query&&L[A]?L[A]:Xc,P=async(L,{signal:A,abort:m,rejectWithValue:w,fulfillWithValue:M,dispatch:T,getState:p,extra:C})=>{var Q,K;const B=n[L.endpointName],{metaSchema:U,skipSchemaValidation:Y=h}=B;try{let V=j(B,"transformResponse");const _={signal:A,abort:m,dispatch:T,getState:p,extra:C,endpoint:L.endpointName,type:L.type,forced:L.type==="query"?u(L,p()):void 0,queryCacheKey:L.type==="query"?L.queryCacheKey:void 0},H=L.type==="query"?L[Ws]:void 0;let te;const ue=async(de,ce,be,Je)=>{if(ce==null&&de.pages.length)return Promise.resolve({data:de});const O={queryArg:L.originalArgs,pageParam:ce},ae=await ke(O),re=Je?$:y;return{data:{pages:re(de.pages,ae.data,be),pageParams:re(de.pageParams,ce,be)},meta:ae.meta}};async function ke(de){let ce;const{extraOptions:be,argSchema:Je,rawResponseSchema:O,responseSchema:ae}=B;if(Je&&!Y&&(de=await Gt(Je,de,"argSchema",{})),H?ce=H():B.query?ce=await s(B.query(de),_,be):ce=await B.queryFn(de,_,be,J=>s(J,_,be)),typeof process<"u",ce.error)throw new Nr(ce.error,ce.meta);let{data:re}=ce;O&&!Y&&(re=await Gt(O,ce.data,"rawResponseSchema",ce.meta));let he=await V(re,ce.meta,de);return ae&&!Y&&(he=await Gt(ae,he,"responseSchema",ce.meta)),{...ce,data:he}}if(L.type==="query"&&"infiniteQueryOptions"in B){const{infiniteQueryOptions:de}=B,{maxPages:ce=1/0}=de;let be;const Je={pages:[],pageParams:[]},O=(Q=a.selectQueryEntry(p(),L.queryCacheKey))==null?void 0:Q.data,re=u(L,p())&&!L.direction||!O?Je:O;if("direction"in L&&L.direction&&re.pages.length){const he=L.direction==="backward",ie=(he?Ua:Di)(de,re);be=await ue(re,ie,ce,he)}else{const{initialPageParam:he=de.initialPageParam}=L,J=(O==null?void 0:O.pageParams)??[],ie=J[0]??he,xe=J.length;be=await ue(re,ie,ce),H&&(be={data:be.data.pages[0]});for(let ge=1;ge<xe;ge++){const Ie=Di(de,be.data);be=await ue(be.data,Ie,ce)}}te=be}else te=await ke(L.originalArgs);return U&&!Y&&te.meta&&(te.meta=await Gt(U,te.meta,"metaSchema",te.meta)),M(te.data,Es({fulfilledTimeStamp:Date.now(),baseQueryMeta:te.meta}))}catch(V){let _=V;if(_ instanceof Nr){let H=j(B,"transformErrorResponse");const{rawErrorResponseSchema:te,errorResponseSchema:ue}=B;let{value:ke,meta:de}=_;try{te&&!Y&&(ke=await Gt(te,ke,"rawErrorResponseSchema",de)),U&&!Y&&(de=await Gt(U,de,"metaSchema",de));let ce=await H(ke,de,L.originalArgs);return ue&&!Y&&(ce=await Gt(ue,ce,"errorResponseSchema",de)),w(ce,Es({baseQueryMeta:de}))}catch(ce){_=ce}}try{if(_ instanceof za){const H={endpoint:L.endpointName,arg:L.originalArgs,type:L.type,queryCacheKey:L.type==="query"?L.queryCacheKey:void 0};(K=B.onSchemaFailure)==null||K.call(B,_,H),f==null||f(_,H);const{catchSchemaFailure:te=b}=B;if(te)return w(te(_,H),Es({baseQueryMeta:_._bqMeta}))}}catch(H){_=H}throw console.error(_),_}};function u(L,A){const m=a.selectQueryEntry(A,L.queryCacheKey),w=a.selectConfig(A).refetchOnMountOrArgChange,M=m==null?void 0:m.fulfilledTimeStamp,T=L.forceRefetch??(L.subscribe&&w);return T?T===!0||(Number(new Date)-Number(M))/1e3>=T:!1}const x=()=>Le(`${t}/executeQuery`,P,{getPendingMeta({arg:A}){const m=n[A.endpointName];return Es({startedTimeStamp:Date.now(),...Gn(m)?{direction:A.direction}:{}})},condition(A,{getState:m}){var Y;const w=m(),M=a.selectQueryEntry(w,A.queryCacheKey),T=M==null?void 0:M.fulfilledTimeStamp,p=A.originalArgs,C=M==null?void 0:M.originalArgs,B=n[A.endpointName],U=A.direction;return Pi(A)?!0:(M==null?void 0:M.status)==="pending"?!1:u(A,w)||Qn(B)&&((Y=B==null?void 0:B.forceRefetch)!=null&&Y.call(B,{currentArg:p,previousArg:C,endpointState:M,state:w}))?!0:!(T&&!U)},dispatchConditionRejection:!0}),I=x(),o=x(),d=Le(`${t}/executeMutation`,P,{getPendingMeta(){return Es({startedTimeStamp:Date.now()})}}),R=L=>"force"in L,S=L=>"ifOlderThan"in L,E=(L,A,m)=>(w,M)=>{const T=R(m)&&m.force,p=S(m)&&m.ifOlderThan,C=(U=!0)=>{const Y={forceRefetch:U,isPrefetch:!0};return r.endpoints[L].initiate(A,Y)},B=r.endpoints[L].select(A)(M());if(T)w(C());else if(p){const U=B==null?void 0:B.fulfilledTimeStamp;if(!U){w(C());return}(Number(new Date)-Number(new Date(U)))/1e3>=p&&w(C())}else w(C(!1))};function v(L){return A=>{var m,w;return((w=(m=A==null?void 0:A.meta)==null?void 0:m.arg)==null?void 0:w.endpointName)===L}}function g(L,A){return{matchPending:Xn(ka(L),v(A)),matchFulfilled:Xn(is(L),v(A)),matchRejected:Xn(_i(L),v(A))}}return{queryThunk:I,mutationThunk:d,infiniteQueryThunk:o,prefetch:E,updateQueryData:D,upsertQueryData:k,patchQueryData:N,buildMatchThunkActions:g}}function Di(t,{pages:s,pageParams:n}){const i=s.length-1;return t.getNextPageParam(s[i],s,n[i],n)}function Ua(t,{pages:s,pageParams:n}){var i;return(i=t.getPreviousPageParam)==null?void 0:i.call(t,s[0],s,n[0],n)}function qa(t,s,n,i){return Gi(n[t.meta.arg.endpointName][s],is(t)?t.payload:void 0,qi(t)?t.payload:void 0,t.meta.arg.originalArgs,"baseQueryMeta"in t.meta?t.meta.baseQueryMeta:void 0,i)}function sn(t,s,n){const i=t[s];i&&n(i)}function Ys(t){return("arg"in t?t.arg.fixedCacheKey:t.fixedCacheKey)??t.requestId}function Er(t,s,n){const i=t[Ys(s)];i&&n(i)}var nn={};function Jc({reducerPath:t,queryThunk:s,mutationThunk:n,serializeQueryArgs:i,context:{endpointDefinitions:r,apiUid:l,extractRehydrationInfo:a,hasRehydrationInfo:f},assertTagType:b,config:h}){const N=Cs(`${t}/resetApiState`);function $(v,g,L,A){var m;v[m=g.queryCacheKey]??(v[m]={status:"uninitialized",endpointName:g.endpointName}),sn(v,g.queryCacheKey,w=>{w.status="pending",w.requestId=L&&w.requestId?w.requestId:A.requestId,g.originalArgs!==void 0&&(w.originalArgs=g.originalArgs),w.startedTimeStamp=A.startedTimeStamp;const M=r[A.arg.endpointName];Gn(M)&&"direction"in g&&(w.direction=g.direction)})}function y(v,g,L,A){sn(v,g.arg.queryCacheKey,m=>{if(m.requestId!==g.requestId&&!A)return;const{merge:w}=r[g.arg.endpointName];if(m.status="fulfilled",w)if(m.data!==void 0){const{fulfilledTimeStamp:M,arg:T,baseQueryMeta:p,requestId:C}=g;let B=Ui(m.data,U=>w(U,L,{arg:T.originalArgs,baseQueryMeta:p,fulfilledTimeStamp:M,requestId:C}));m.data=B}else m.data=L;else m.data=r[g.arg.endpointName].structuralSharing??!0?Fa(Wo(m.data)?Yo(m.data):m.data,L):L;delete m.error,m.fulfilledTimeStamp=g.fulfilledTimeStamp})}const D=ht({name:`${t}/queries`,initialState:nn,reducers:{removeQueryResult:{reducer(v,{payload:{queryCacheKey:g}}){delete v[g]},prepare:Ns()},cacheEntriesUpserted:{reducer(v,g){for(const L of g.payload){const{queryDescription:A,value:m}=L;$(v,A,!0,{arg:A,requestId:g.meta.requestId,startedTimeStamp:g.meta.timestamp}),y(v,{arg:A,requestId:g.meta.requestId,fulfilledTimeStamp:g.meta.timestamp,baseQueryMeta:{}},m,!0)}},prepare:v=>({payload:v.map(A=>{const{endpointName:m,arg:w,value:M}=A,T=r[m];return{queryDescription:{type:"query",endpointName:m,originalArgs:A.arg,queryCacheKey:i({queryArgs:w,endpointDefinition:T,endpointName:m})},value:M}}),meta:{[Sa]:!0,requestId:ja(),timestamp:Date.now()}})},queryResultPatched:{reducer(v,{payload:{queryCacheKey:g,patches:L}}){sn(v,g,A=>{A.data=ar(A.data,L.concat())})},prepare:Ns()}},extraReducers(v){v.addCase(s.pending,(g,{meta:L,meta:{arg:A}})=>{const m=Pi(A);$(g,A,m,L)}).addCase(s.fulfilled,(g,{meta:L,payload:A})=>{const m=Pi(L.arg);y(g,L,A,m)}).addCase(s.rejected,(g,{meta:{condition:L,arg:A,requestId:m},error:w,payload:M})=>{sn(g,A.queryCacheKey,T=>{if(!L){if(T.requestId!==m)return;T.status="rejected",T.error=M??w}})}).addMatcher(f,(g,L)=>{const{queries:A}=a(L);for(const[m,w]of Object.entries(A))((w==null?void 0:w.status)==="fulfilled"||(w==null?void 0:w.status)==="rejected")&&(g[m]=w)})}}),k=ht({name:`${t}/mutations`,initialState:nn,reducers:{removeMutationResult:{reducer(v,{payload:g}){const L=Ys(g);L in v&&delete v[L]},prepare:Ns()}},extraReducers(v){v.addCase(n.pending,(g,{meta:L,meta:{requestId:A,arg:m,startedTimeStamp:w}})=>{m.track&&(g[Ys(L)]={requestId:A,status:"pending",endpointName:m.endpointName,startedTimeStamp:w})}).addCase(n.fulfilled,(g,{payload:L,meta:A})=>{A.arg.track&&Er(g,A,m=>{m.requestId===A.requestId&&(m.status="fulfilled",m.data=L,m.fulfilledTimeStamp=A.fulfilledTimeStamp)})}).addCase(n.rejected,(g,{payload:L,error:A,meta:m})=>{m.arg.track&&Er(g,m,w=>{w.requestId===m.requestId&&(w.status="rejected",w.error=L??A)})}).addMatcher(f,(g,L)=>{const{mutations:A}=a(L);for(const[m,w]of Object.entries(A))((w==null?void 0:w.status)==="fulfilled"||(w==null?void 0:w.status)==="rejected")&&m!==(w==null?void 0:w.requestId)&&(g[m]=w)})}}),j={tags:{},keys:{}},P=ht({name:`${t}/invalidation`,initialState:j,reducers:{updateProvidedBy:{reducer(v,g){var L,A,m;for(const{queryCacheKey:w,providedTags:M}of g.payload){u(v,w);for(const{type:T,id:p}of M){const C=(A=(L=v.tags)[T]??(L[T]={}))[m=p||"__internal_without_id"]??(A[m]=[]);C.includes(w)||C.push(w)}v.keys[w]=M}},prepare:Ns()}},extraReducers(v){v.addCase(D.actions.removeQueryResult,(g,{payload:{queryCacheKey:L}})=>{u(g,L)}).addMatcher(f,(g,L)=>{var m,w,M;const{provided:A}=a(L);for(const[T,p]of Object.entries(A))for(const[C,B]of Object.entries(p)){const U=(w=(m=g.tags)[T]??(m[T]={}))[M=C||"__internal_without_id"]??(w[M]=[]);for(const Y of B)U.includes(Y)||U.push(Y)}}).addMatcher(Fn(is(s),qi(s)),(g,L)=>{x(g,[L])}).addMatcher(D.actions.cacheEntriesUpserted.match,(g,L)=>{const A=L.payload.map(({queryDescription:m,value:w})=>({type:"UNKNOWN",payload:w,meta:{requestStatus:"fulfilled",requestId:"UNKNOWN",arg:m}}));x(g,A)})}});function u(v,g){var A;const L=v.keys[g]??[];for(const m of L){const w=m.type,M=m.id??"__internal_without_id",T=(A=v.tags[w])==null?void 0:A[M];T&&(v.tags[w][M]=T.filter(p=>p!==g))}delete v.keys[g]}function x(v,g){const L=g.map(A=>{const m=qa(A,"providesTags",r,b),{queryCacheKey:w}=A.meta.arg;return{queryCacheKey:w,providedTags:m}});P.caseReducers.updateProvidedBy(v,P.actions.updateProvidedBy(L))}const I=ht({name:`${t}/subscriptions`,initialState:nn,reducers:{updateSubscriptionOptions(v,g){},unsubscribeQueryResult(v,g){},internal_getRTKQSubscriptions(){}}}),o=ht({name:`${t}/internalSubscriptions`,initialState:nn,reducers:{subscriptionsUpdated:{reducer(v,g){return ar(v,g.payload)},prepare:Ns()}}}),d=ht({name:`${t}/config`,initialState:{online:Uc(),focused:zc(),middlewareRegistered:!1,...h},reducers:{middlewareRegistered(v,{payload:g}){v.middlewareRegistered=v.middlewareRegistered==="conflict"||l!==g?"conflict":!0}},extraReducers:v=>{v.addCase(Qi,g=>{g.online=!0}).addCase(Ba,g=>{g.online=!1}).addCase(Yi,g=>{g.focused=!0}).addCase(Ma,g=>{g.focused=!1}).addMatcher(f,g=>({...g}))}}),R=Oo({queries:D.reducer,mutations:k.reducer,provided:P.reducer,subscriptions:o.reducer,config:d.reducer}),S=(v,g)=>R(N.match(g)?void 0:v,g),E={...d.actions,...D.actions,...I.actions,...o.actions,...k.actions,...P.actions,resetApiState:N};return{reducer:S,actions:E}}var gt=Symbol.for("RTKQ/skipToken"),_a={status:"uninitialized"},Ar=Ui(_a,()=>{}),Tr=Ui(_a,()=>{});function ed({serializeQueryArgs:t,reducerPath:s,createSelector:n}){const i=I=>Ar,r=I=>Tr;return{buildQuerySelector:y,buildInfiniteQuerySelector:D,buildMutationSelector:k,selectInvalidatedBy:j,selectCachedArgsForQuery:P,selectApiState:a,selectQueries:f,selectMutations:h,selectQueryEntry:b,selectConfig:N};function l(I){return{...I,...wr(I.status)}}function a(I){return I[s]}function f(I){var o;return(o=a(I))==null?void 0:o.queries}function b(I,o){var d;return(d=f(I))==null?void 0:d[o]}function h(I){var o;return(o=a(I))==null?void 0:o.mutations}function N(I){var o;return(o=a(I))==null?void 0:o.config}function $(I,o,d){return R=>{if(R===gt)return n(i,d);const S=t({queryArgs:R,endpointDefinition:o,endpointName:I});return n(v=>b(v,S)??Ar,d)}}function y(I,o){return $(I,o,l)}function D(I,o){const{infiniteQueryOptions:d}=o;function R(S){const E={...S,...wr(S.status)},{isLoading:v,isError:g,direction:L}=E,A=L==="forward",m=L==="backward";return{...E,hasNextPage:u(d,E.data),hasPreviousPage:x(d,E.data),isFetchingNextPage:v&&A,isFetchingPreviousPage:v&&m,isFetchNextPageError:g&&A,isFetchPreviousPageError:g&&m}}return $(I,o,R)}function k(){return I=>{let o;return typeof I=="object"?o=Ys(I)??gt:o=I,n(o===gt?r:S=>{var E,v;return((v=(E=a(S))==null?void 0:E.mutations)==null?void 0:v[o])??Tr},l)}}function j(I,o){const d=I[s],R=new Set;for(const S of o.filter(zn).map(Ti)){const E=d.provided.tags[S.type];if(!E)continue;let v=(S.id!==void 0?E[S.id]:kr(Object.values(E)))??[];for(const g of v)R.add(g)}return kr(Array.from(R.values()).map(S=>{const E=d.queries[S];return E?[{queryCacheKey:S,endpointName:E.endpointName,originalArgs:E.originalArgs}]:[]}))}function P(I,o){return Object.values(f(I)).filter(d=>(d==null?void 0:d.endpointName)===o&&d.status!=="uninitialized").map(d=>d.originalArgs)}function u(I,o){return o?Di(I,o)!=null:!1}function x(I,o){return!o||!I.getPreviousPageParam?!1:Ua(I,o)!=null}}var us=WeakMap?new WeakMap:void 0,qn=({endpointName:t,queryArgs:s})=>{let n="";const i=us==null?void 0:us.get(s);if(typeof i=="string")n=i;else{const r=JSON.stringify(s,(l,a)=>(a=typeof a=="bigint"?{$bigint:a.toString()}:a,a=Vs(a)?Object.keys(a).sort().reduce((f,b)=>(f[b]=a[b],f),{}):a,a));Vs(s)&&(us==null||us.set(s,r)),n=r}return`${t}(${n})`};function Oa(...t){return function(n){const i=rr(h=>{var N;return(N=n.extractRehydrationInfo)==null?void 0:N.call(n,h,{reducerPath:n.reducerPath??"api"})}),r={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...n,extractRehydrationInfo:i,serializeQueryArgs(h){let N=qn;if("serializeQueryArgs"in h.endpointDefinition){const $=h.endpointDefinition.serializeQueryArgs;N=y=>{const D=$(y);return typeof D=="string"?D:qn({...y,queryArgs:D})}}else n.serializeQueryArgs&&(N=n.serializeQueryArgs);return N(h)},tagTypes:[...n.tagTypes||[]]},l={endpointDefinitions:{},batch(h){h()},apiUid:ja(),extractRehydrationInfo:i,hasRehydrationInfo:rr(h=>i(h)!=null)},a={injectEndpoints:b,enhanceEndpoints({addTagTypes:h,endpoints:N}){if(h)for(const $ of h)r.tagTypes.includes($)||r.tagTypes.push($);if(N)for(const[$,y]of Object.entries(N))typeof y=="function"?y(l.endpointDefinitions[$]):Object.assign(l.endpointDefinitions[$]||{},y);return a}},f=t.map(h=>h.init(a,r,l));function b(h){const N=h.endpoints({query:$=>({...$,type:"query"}),mutation:$=>({...$,type:"mutation"}),infiniteQuery:$=>({...$,type:"infinitequery"})});for(const[$,y]of Object.entries(N)){if(h.overrideExisting!==!0&&$ in l.endpointDefinitions){if(h.overrideExisting==="throw")throw new Error(va(39));continue}l.endpointDefinitions[$]=y;for(const D of f)D.injectEndpoint($,y)}return a}return a.injectEndpoints({endpoints:n.endpoints})}}function Rt(t,...s){return Object.assign(t,...s)}var td=({api:t,queryThunk:s,internalState:n})=>{const i=`${t.reducerPath}/subscriptions`;let r=null,l=null;const{updateSubscriptionOptions:a,unsubscribeQueryResult:f}=t.internalActions,b=(D,k)=>{var P,u,x;if(a.match(k)){const{queryCacheKey:I,requestId:o,options:d}=k.payload;return(P=D==null?void 0:D[I])!=null&&P[o]&&(D[I][o]=d),!0}if(f.match(k)){const{queryCacheKey:I,requestId:o}=k.payload;return D[I]&&delete D[I][o],!0}if(t.internalActions.removeQueryResult.match(k))return delete D[k.payload.queryCacheKey],!0;if(s.pending.match(k)){const{meta:{arg:I,requestId:o}}=k,d=D[u=I.queryCacheKey]??(D[u]={});return d[`${o}_running`]={},I.subscribe&&(d[o]=I.subscriptionOptions??d[o]??{}),!0}let j=!1;if(s.fulfilled.match(k)||s.rejected.match(k)){const I=D[k.meta.arg.queryCacheKey]||{},o=`${k.meta.requestId}_running`;j||(j=!!I[o]),delete I[o]}if(s.rejected.match(k)){const{meta:{condition:I,arg:o,requestId:d}}=k;if(I&&o.subscribe){const R=D[x=o.queryCacheKey]??(D[x]={});R[d]=o.subscriptionOptions??R[d]??{},j=!0}}return j},h=()=>n.currentSubscriptions,y={getSubscriptions:h,getSubscriptionCount:D=>{const j=h()[D]??{};return vs(j)},isRequestSubscribed:(D,k)=>{var P;const j=h();return!!((P=j==null?void 0:j[D])!=null&&P[k])}};return(D,k)=>{if(r||(r=JSON.parse(JSON.stringify(n.currentSubscriptions))),t.util.resetApiState.match(D))return r=n.currentSubscriptions={},l=null,[!0,!1];if(t.internalActions.internal_getRTKQSubscriptions.match(D))return[!1,y];const j=b(n.currentSubscriptions,D);let P=!0;if(j){l||(l=setTimeout(()=>{const I=JSON.parse(JSON.stringify(n.currentSubscriptions)),[,o]=Ia(r,()=>I);k.next(t.internalActions.subscriptionsUpdated(o)),r=I,l=null},500));const u=typeof D.type=="string"&&!!D.type.startsWith(i),x=s.rejected.match(D)&&D.meta.condition&&!!D.meta.arg.subscribe;P=!u&&!x}return[P,!1]}};function sd(t){for(const s in t)return!1;return!0}var nd=2147483647/1e3-1,id=({reducerPath:t,api:s,queryThunk:n,context:i,internalState:r,selectors:{selectQueryEntry:l,selectConfig:a}})=>{const{removeQueryResult:f,unsubscribeQueryResult:b,cacheEntriesUpserted:h}=s.internalActions,N=Fn(b.match,n.fulfilled,n.rejected,h.match);function $(P){const u=r.currentSubscriptions[P];return!!u&&!sd(u)}const y={},D=(P,u,x)=>{const I=u.getState(),o=a(I);if(N(P)){let d;if(h.match(P))d=P.payload.map(R=>R.queryDescription.queryCacheKey);else{const{queryCacheKey:R}=b.match(P)?P.payload:P.meta.arg;d=[R]}k(d,u,o)}if(s.util.resetApiState.match(P))for(const[d,R]of Object.entries(y))R&&clearTimeout(R),delete y[d];if(i.hasRehydrationInfo(P)){const{queries:d}=i.extractRehydrationInfo(P);k(Object.keys(d),u,o)}};function k(P,u,x){const I=u.getState();for(const o of P){const d=l(I,o);j(o,d==null?void 0:d.endpointName,u,x)}}function j(P,u,x,I){const o=i.endpointDefinitions[u],d=(o==null?void 0:o.keepUnusedDataFor)??I.keepUnusedDataFor;if(d===1/0)return;const R=Math.max(0,Math.min(d,nd));if(!$(P)){const S=y[P];S&&clearTimeout(S),y[P]=setTimeout(()=>{$(P)||x.dispatch(f({queryCacheKey:P})),delete y[P]},R*1e3)}}return D},Pr=new Error("Promise never resolved before cacheEntryRemoved."),rd=({api:t,reducerPath:s,context:n,queryThunk:i,mutationThunk:r,internalState:l,selectors:{selectQueryEntry:a,selectApiState:f}})=>{const b=or(i),h=or(r),N=is(i,r),$={};function y(u,x,I){const o=$[u];o!=null&&o.valueResolved&&(o.valueResolved({data:x,meta:I}),delete o.valueResolved)}function D(u){const x=$[u];x&&(delete $[u],x.cacheEntryRemoved())}const k=(u,x,I)=>{const o=j(u);function d(R,S,E,v){const g=a(I,S),L=a(x.getState(),S);!g&&L&&P(R,v,S,x,E)}if(i.pending.match(u))d(u.meta.arg.endpointName,o,u.meta.requestId,u.meta.arg.originalArgs);else if(t.internalActions.cacheEntriesUpserted.match(u))for(const{queryDescription:R,value:S}of u.payload){const{endpointName:E,originalArgs:v,queryCacheKey:g}=R;d(E,g,u.meta.requestId,v),y(g,S,{})}else if(r.pending.match(u))x.getState()[s].mutations[o]&&P(u.meta.arg.endpointName,u.meta.arg.originalArgs,o,x,u.meta.requestId);else if(N(u))y(o,u.payload,u.meta.baseQueryMeta);else if(t.internalActions.removeQueryResult.match(u)||t.internalActions.removeMutationResult.match(u))D(o);else if(t.util.resetApiState.match(u))for(const R of Object.keys($))D(R)};function j(u){return b(u)?u.meta.arg.queryCacheKey:h(u)?u.meta.arg.fixedCacheKey??u.meta.requestId:t.internalActions.removeQueryResult.match(u)?u.payload.queryCacheKey:t.internalActions.removeMutationResult.match(u)?Ys(u.payload):""}function P(u,x,I,o,d){const R=n.endpointDefinitions[u],S=R==null?void 0:R.onCacheEntryAdded;if(!S)return;const E={},v=new Promise(M=>{E.cacheEntryRemoved=M}),g=Promise.race([new Promise(M=>{E.valueResolved=M}),v.then(()=>{throw Pr})]);g.catch(()=>{}),$[I]=E;const L=t.endpoints[u].select(Un(R)?x:I),A=o.dispatch((M,T,p)=>p),m={...o,getCacheEntry:()=>L(o.getState()),requestId:d,extra:A,updateCachedData:Un(R)?M=>o.dispatch(t.util.updateQueryData(u,x,M)):void 0,cacheDataLoaded:g,cacheEntryRemoved:v},w=S(x,m);Promise.resolve(w).catch(M=>{if(M!==Pr)throw M})}return k},ad=({api:t,context:{apiUid:s},reducerPath:n})=>(i,r)=>{t.util.resetApiState.match(i)&&r.dispatch(t.internalActions.middlewareRegistered(s))},od=({reducerPath:t,context:s,context:{endpointDefinitions:n},mutationThunk:i,queryThunk:r,api:l,assertTagType:a,refetchQuery:f,internalState:b})=>{const{removeQueryResult:h}=l.internalActions,N=Fn(is(i),qi(i)),$=Fn(is(i,r),_i(i,r));let y=[];const D=(P,u)=>{N(P)?j(qa(P,"invalidatesTags",n,a),u):$(P)?j([],u):l.util.invalidateTags.match(P)&&j(Gi(P.payload,void 0,void 0,void 0,void 0,a),u)};function k(P){var I;const{queries:u,mutations:x}=P;for(const o of[u,x])for(const d in o)if(((I=o[d])==null?void 0:I.status)==="pending")return!0;return!1}function j(P,u){const x=u.getState(),I=x[t];if(y.push(...P),I.config.invalidationBehavior==="delayed"&&k(I))return;const o=y;if(y=[],o.length===0)return;const d=l.util.selectInvalidatedBy(x,o);s.batch(()=>{const R=Array.from(d.values());for(const{queryCacheKey:S}of R){const E=I.queries[S],v=b.currentSubscriptions[S]??{};E&&(vs(v)===0?u.dispatch(h({queryCacheKey:S})):E.status!=="uninitialized"&&u.dispatch(f(E)))}})}return D},ld=({reducerPath:t,queryThunk:s,api:n,refetchQuery:i,internalState:r})=>{const l={},a=(y,D)=>{(n.internalActions.updateSubscriptionOptions.match(y)||n.internalActions.unsubscribeQueryResult.match(y))&&b(y.payload,D),(s.pending.match(y)||s.rejected.match(y)&&y.meta.condition)&&b(y.meta.arg,D),(s.fulfilled.match(y)||s.rejected.match(y)&&!y.meta.condition)&&f(y.meta.arg,D),n.util.resetApiState.match(y)&&N()};function f({queryCacheKey:y},D){const k=D.getState()[t],j=k.queries[y],P=r.currentSubscriptions[y];if(!j||j.status==="uninitialized")return;const{lowestPollingInterval:u,skipPollingIfUnfocused:x}=$(P);if(!Number.isFinite(u))return;const I=l[y];I!=null&&I.timeout&&(clearTimeout(I.timeout),I.timeout=void 0);const o=Date.now()+u;l[y]={nextPollTimestamp:o,pollingInterval:u,timeout:setTimeout(()=>{(k.config.focused||!x)&&D.dispatch(i(j)),f({queryCacheKey:y},D)},u)}}function b({queryCacheKey:y},D){const j=D.getState()[t].queries[y],P=r.currentSubscriptions[y];if(!j||j.status==="uninitialized")return;const{lowestPollingInterval:u}=$(P);if(!Number.isFinite(u)){h(y);return}const x=l[y],I=Date.now()+u;(!x||I<x.nextPollTimestamp)&&f({queryCacheKey:y},D)}function h(y){const D=l[y];D!=null&&D.timeout&&clearTimeout(D.timeout),delete l[y]}function N(){for(const y of Object.keys(l))h(y)}function $(y={}){let D=!1,k=Number.POSITIVE_INFINITY;for(let j in y)y[j].pollingInterval&&(k=Math.min(y[j].pollingInterval,k),D=y[j].skipPollingIfUnfocused||D);return{lowestPollingInterval:k,skipPollingIfUnfocused:D}}return a},cd=({api:t,context:s,queryThunk:n,mutationThunk:i})=>{const r=ka(n,i),l=_i(n,i),a=is(n,i),f={};return(h,N)=>{var $,y;if(r(h)){const{requestId:D,arg:{endpointName:k,originalArgs:j}}=h.meta,P=s.endpointDefinitions[k],u=P==null?void 0:P.onQueryStarted;if(u){const x={},I=new Promise((S,E)=>{x.resolve=S,x.reject=E});I.catch(()=>{}),f[D]=x;const o=t.endpoints[k].select(Un(P)?j:D),d=N.dispatch((S,E,v)=>v),R={...N,getCacheEntry:()=>o(N.getState()),requestId:D,extra:d,updateCachedData:Un(P)?S=>N.dispatch(t.util.updateQueryData(k,j,S)):void 0,queryFulfilled:I};u(j,R)}}else if(a(h)){const{requestId:D,baseQueryMeta:k}=h.meta;($=f[D])==null||$.resolve({data:h.payload,meta:k}),delete f[D]}else if(l(h)){const{requestId:D,rejectedWithValue:k,baseQueryMeta:j}=h.meta;(y=f[D])==null||y.reject({error:h.payload??h.error,isUnhandledError:!k,meta:j}),delete f[D]}}},dd=({reducerPath:t,context:s,api:n,refetchQuery:i,internalState:r})=>{const{removeQueryResult:l}=n.internalActions,a=(b,h)=>{Yi.match(b)&&f(h,"refetchOnFocus"),Qi.match(b)&&f(h,"refetchOnReconnect")};function f(b,h){const N=b.getState()[t],$=N.queries,y=r.currentSubscriptions;s.batch(()=>{for(const D of Object.keys(y)){const k=$[D],j=y[D];if(!j||!k)continue;(Object.values(j).some(u=>u[h]===!0)||Object.values(j).every(u=>u[h]===void 0)&&N.config[h])&&(vs(j)===0?b.dispatch(l({queryCacheKey:D})):k.status!=="uninitialized"&&b.dispatch(i(k)))}})}return a};function ud(t){const{reducerPath:s,queryThunk:n,api:i,context:r}=t,{apiUid:l}=r,a={invalidateTags:Cs(`${s}/invalidateTags`)},f=$=>$.type.startsWith(`${s}/`),b=[ad,id,od,ld,rd,cd];return{middleware:$=>{let y=!1;const k={...t,internalState:{currentSubscriptions:{}},refetchQuery:N,isThisApiSliceAction:f},j=b.map(x=>x(k)),P=td(k),u=dd(k);return x=>I=>{if(!Ho(I))return x(I);y||(y=!0,$.dispatch(i.internalActions.middlewareRegistered(l)));const o={...$,next:x},d=$.getState(),[R,S]=P(I,o,d);let E;if(R?E=x(I):E=S,$.getState()[s]&&(u(I,o,d),f(I)||r.hasRehydrationInfo(I)))for(const v of j)v(I,o,d);return E}},actions:a};function N($){return t.api.endpoints[$.endpointName].initiate($.originalArgs,{subscribe:!1,forceRefetch:!0})}}var Dr=Symbol(),Va=({createSelector:t=wa}={})=>({name:Dr,init(s,{baseQuery:n,tagTypes:i,reducerPath:r,serializeQueryArgs:l,keepUnusedDataFor:a,refetchOnMountOrArgChange:f,refetchOnFocus:b,refetchOnReconnect:h,invalidationBehavior:N,onSchemaFailure:$,catchSchemaFailure:y,skipSchemaValidation:D},k){_o();const j=_=>_;Object.assign(s,{reducerPath:r,endpoints:{},internalActions:{onOnline:Qi,onOffline:Ba,onFocus:Yi,onFocusLost:Ma},util:{}});const P=ed({serializeQueryArgs:l,reducerPath:r,createSelector:t}),{selectInvalidatedBy:u,selectCachedArgsForQuery:x,buildQuerySelector:I,buildInfiniteQuerySelector:o,buildMutationSelector:d}=P;Rt(s.util,{selectInvalidatedBy:u,selectCachedArgsForQuery:x});const{queryThunk:R,infiniteQueryThunk:S,mutationThunk:E,patchQueryData:v,updateQueryData:g,upsertQueryData:L,prefetch:A,buildMatchThunkActions:m}=Zc({baseQuery:n,reducerPath:r,context:k,api:s,serializeQueryArgs:l,assertTagType:j,selectors:P,onSchemaFailure:$,catchSchemaFailure:y,skipSchemaValidation:D}),{reducer:w,actions:M}=Jc({context:k,queryThunk:R,mutationThunk:E,serializeQueryArgs:l,reducerPath:r,assertTagType:j,config:{refetchOnFocus:b,refetchOnReconnect:h,refetchOnMountOrArgChange:f,keepUnusedDataFor:a,reducerPath:r,invalidationBehavior:N}});Rt(s.util,{patchQueryData:v,updateQueryData:g,upsertQueryData:L,prefetch:A,resetApiState:M.resetApiState,upsertQueryEntries:M.cacheEntriesUpserted}),Rt(s.internalActions,M);const{middleware:T,actions:p}=ud({reducerPath:r,context:k,queryThunk:R,mutationThunk:E,infiniteQueryThunk:S,api:s,assertTagType:j,selectors:P});Rt(s.util,p),Rt(s,{reducer:w,middleware:T});const{buildInitiateQuery:C,buildInitiateInfiniteQuery:B,buildInitiateMutation:U,getRunningMutationThunk:Y,getRunningMutationsThunk:Q,getRunningQueriesThunk:K,getRunningQueryThunk:V}=Kc({queryThunk:R,mutationThunk:E,infiniteQueryThunk:S,api:s,serializeQueryArgs:l,context:k});return Rt(s.util,{getRunningMutationThunk:Y,getRunningMutationsThunk:Q,getRunningQueryThunk:V,getRunningQueriesThunk:K}),{name:Dr,injectEndpoint(_,H){var ke;const ue=(ke=s.endpoints)[_]??(ke[_]={});Qn(H)&&Rt(ue,{name:_,select:I(_,H),initiate:C(_,H)},m(R,_)),Yc(H)&&Rt(ue,{name:_,select:d(),initiate:U(_)},m(E,_)),Gn(H)&&Rt(ue,{name:_,select:o(_,H),initiate:B(_,H)},m(R,_))}}}});Va();function rn(t){return t.replace(t[0],t[0].toUpperCase())}function hd(t){return t.type==="query"}function xd(t){return t.type==="mutation"}function Ha(t){return t.type==="infinitequery"}function As(t,...s){return Object.assign(t,...s)}var Jn=Symbol();function ei(t,s,n,i){const r=c.useMemo(()=>({queryArgs:t,serialized:typeof t=="object"?s({queryArgs:t,endpointDefinition:n,endpointName:i}):t}),[t,s,n,i]),l=c.useRef(r);return c.useEffect(()=>{l.current.serialized!==r.serialized&&(l.current=r)},[r]),l.current.serialized===r.serialized?l.current.queryArgs:t}function an(t){const s=c.useRef(t);return c.useEffect(()=>{Rs(s.current,t)||(s.current=t)},[t]),Rs(s.current,t)?s.current:t}var pd=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",md=pd(),gd=()=>typeof navigator<"u"&&navigator.product==="ReactNative",fd=gd(),bd=()=>md||fd?c.useLayoutEffect:c.useEffect,yd=bd(),Rr=t=>t.isUninitialized?{...t,isUninitialized:!1,isFetching:!0,isLoading:t.data===void 0,status:$a.pending}:t;function ti(t,...s){const n={};return s.forEach(i=>{n[i]=t[i]}),n}var si=["data","status","isLoading","isSuccess","isError","error"];function jd({api:t,moduleOptions:{batch:s,hooks:{useDispatch:n,useSelector:i,useStore:r},unstable__sideEffectsInRender:l,createSelector:a},serializeQueryArgs:f,context:b}){const h=l?o=>o():c.useEffect;return{buildQueryHooks:u,buildInfiniteQueryHooks:x,buildMutationHook:I,usePrefetch:y};function N(o,d,R){if(d!=null&&d.endpointName&&o.isUninitialized){const{endpointName:A}=d,m=b.endpointDefinitions[A];R!==gt&&f({queryArgs:d.originalArgs,endpointDefinition:m,endpointName:A})===f({queryArgs:R,endpointDefinition:m,endpointName:A})&&(d=void 0)}let S=o.isSuccess?o.data:d==null?void 0:d.data;S===void 0&&(S=o.data);const E=S!==void 0,v=o.isLoading,g=(!d||d.isLoading||d.isUninitialized)&&!E&&v,L=o.isSuccess||E&&(v&&!(d!=null&&d.isError)||o.isUninitialized);return{...o,data:S,currentData:o.data,isFetching:v,isLoading:g,isSuccess:L}}function $(o,d,R){if(d!=null&&d.endpointName&&o.isUninitialized){const{endpointName:A}=d,m=b.endpointDefinitions[A];R!==gt&&f({queryArgs:d.originalArgs,endpointDefinition:m,endpointName:A})===f({queryArgs:R,endpointDefinition:m,endpointName:A})&&(d=void 0)}let S=o.isSuccess?o.data:d==null?void 0:d.data;S===void 0&&(S=o.data);const E=S!==void 0,v=o.isLoading,g=(!d||d.isLoading||d.isUninitialized)&&!E&&v,L=o.isSuccess||v&&E;return{...o,data:S,currentData:o.data,isFetching:v,isLoading:g,isSuccess:L}}function y(o,d){const R=n(),S=an(d);return c.useCallback((E,v)=>R(t.util.prefetch(o,E,{...S,...v})),[o,R,S])}function D(o,d,{refetchOnReconnect:R,refetchOnFocus:S,refetchOnMountOrArgChange:E,skip:v=!1,pollingInterval:g=0,skipPollingIfUnfocused:L=!1,...A}={}){const{initiate:m}=t.endpoints[o],w=n(),M=c.useRef(void 0);if(!M.current){const _=w(t.internalActions.internal_getRTKQSubscriptions());M.current=_}const T=ei(v?gt:d,qn,b.endpointDefinitions[o],o),p=an({refetchOnReconnect:R,refetchOnFocus:S,pollingInterval:g,skipPollingIfUnfocused:L}),C=A.initialPageParam,B=an(C),U=c.useRef(void 0);let{queryCacheKey:Y,requestId:Q}=U.current||{},K=!1;Y&&Q&&(K=M.current.isRequestSubscribed(Y,Q));const V=!K&&U.current!==void 0;return h(()=>{V&&(U.current=void 0)},[V]),h(()=>{var te;const _=U.current;if(T===gt){_==null||_.unsubscribe(),U.current=void 0;return}const H=(te=U.current)==null?void 0:te.subscriptionOptions;if(!_||_.arg!==T){_==null||_.unsubscribe();const ue=w(m(T,{subscriptionOptions:p,forceRefetch:E,...Ha(b.endpointDefinitions[o])?{initialPageParam:B}:{}}));U.current=ue}else p!==H&&_.updateSubscriptionOptions(p)},[w,m,E,T,p,V,B,o]),[U,w,m,p]}function k(o,d){return(S,{skip:E=!1,selectFromResult:v}={})=>{const{select:g}=t.endpoints[o],L=ei(E?gt:S,f,b.endpointDefinitions[o],o),A=c.useRef(void 0),m=c.useMemo(()=>a([g(L),(C,B)=>B,C=>L],d,{memoizeOptions:{resultEqualityCheck:Rs}}),[g,L]),w=c.useMemo(()=>v?a([m],v,{devModeChecks:{identityFunctionCheck:"never"}}):m,[m,v]),M=i(C=>w(C,A.current),Rs),T=r(),p=m(T.getState(),A.current);return yd(()=>{A.current=p},[p]),M}}function j(o){c.useEffect(()=>()=>{var d,R;(R=(d=o.current)==null?void 0:d.unsubscribe)==null||R.call(d),o.current=void 0},[o])}function P(o){if(!o.current)throw new Error(va(38));return o.current.refetch()}function u(o){const d=(E,v={})=>{const[g]=D(o,E,v);return j(g),c.useMemo(()=>({refetch:()=>P(g)}),[g])},R=({refetchOnReconnect:E,refetchOnFocus:v,pollingInterval:g=0,skipPollingIfUnfocused:L=!1}={})=>{const{initiate:A}=t.endpoints[o],m=n(),[w,M]=c.useState(Jn),T=c.useRef(void 0),p=an({refetchOnReconnect:E,refetchOnFocus:v,pollingInterval:g,skipPollingIfUnfocused:L});h(()=>{var Q,K;const Y=(Q=T.current)==null?void 0:Q.subscriptionOptions;p!==Y&&((K=T.current)==null||K.updateSubscriptionOptions(p))},[p]);const C=c.useRef(p);h(()=>{C.current=p},[p]);const B=c.useCallback(function(Y,Q=!1){let K;return s(()=>{var V;(V=T.current)==null||V.unsubscribe(),T.current=K=m(A(Y,{subscriptionOptions:C.current,forceRefetch:!Q})),M(Y)}),K},[m,A]),U=c.useCallback(()=>{var Y,Q;(Y=T.current)!=null&&Y.queryCacheKey&&m(t.internalActions.removeQueryResult({queryCacheKey:(Q=T.current)==null?void 0:Q.queryCacheKey}))},[m]);return c.useEffect(()=>()=>{var Y;(Y=T==null?void 0:T.current)==null||Y.unsubscribe()},[]),c.useEffect(()=>{w!==Jn&&!T.current&&B(w,!0)},[w,B]),c.useMemo(()=>[B,w,{reset:U}],[B,w,U])},S=k(o,N);return{useQueryState:S,useQuerySubscription:d,useLazyQuerySubscription:R,useLazyQuery(E){const[v,g,{reset:L}]=R(E),A=S(g,{...E,skip:g===Jn}),m=c.useMemo(()=>({lastArg:g}),[g]);return c.useMemo(()=>[v,{...A,reset:L},m],[v,A,L,m])},useQuery(E,v){const g=d(E,v),L=S(E,{selectFromResult:E===gt||v!=null&&v.skip?void 0:Rr,...v}),A=ti(L,...si);return c.useDebugValue(A),c.useMemo(()=>({...L,...g}),[L,g])}}}function x(o){const d=(S,E={})=>{const[v,g,L,A]=D(o,S,E),m=c.useRef(A);h(()=>{m.current=A},[A]);const w=c.useCallback(function(p,C){let B;return s(()=>{var U;(U=v.current)==null||U.unsubscribe(),v.current=B=g(L(p,{subscriptionOptions:m.current,direction:C}))}),B},[v,g,L]);j(v);const M=ei(E.skip?gt:S,qn,b.endpointDefinitions[o],o),T=c.useCallback(()=>P(v),[v]);return c.useMemo(()=>({trigger:w,refetch:T,fetchNextPage:()=>w(M,"forward"),fetchPreviousPage:()=>w(M,"backward")}),[T,w,M])},R=k(o,$);return{useInfiniteQueryState:R,useInfiniteQuerySubscription:d,useInfiniteQuery(S,E){const{refetch:v,fetchNextPage:g,fetchPreviousPage:L}=d(S,E),A=R(S,{selectFromResult:S===gt||E!=null&&E.skip?void 0:Rr,...E}),m=ti(A,...si,"hasNextPage","hasPreviousPage");return c.useDebugValue(m),c.useMemo(()=>({...A,fetchNextPage:g,fetchPreviousPage:L,refetch:v}),[A,g,L,v])}}}function I(o){return({selectFromResult:d,fixedCacheKey:R}={})=>{const{select:S,initiate:E}=t.endpoints[o],v=n(),[g,L]=c.useState();c.useEffect(()=>()=>{g!=null&&g.arg.fixedCacheKey||g==null||g.reset()},[g]);const A=c.useCallback(function(Y){const Q=v(E(Y,{fixedCacheKey:R}));return L(Q),Q},[v,E,R]),{requestId:m}=g||{},w=c.useMemo(()=>S({fixedCacheKey:R,requestId:g==null?void 0:g.requestId}),[R,g,S]),M=c.useMemo(()=>d?a([w],d):w,[d,w]),T=i(M,Rs),p=R==null?g==null?void 0:g.arg.originalArgs:void 0,C=c.useCallback(()=>{s(()=>{g&&L(void 0),R&&v(t.internalActions.removeMutationResult({requestId:m,fixedCacheKey:R}))})},[v,R,g,m]),B=ti(T,...si,"endpointName");c.useDebugValue(B);const U=c.useMemo(()=>({...T,originalArgs:p,reset:C}),[T,p,C]);return c.useMemo(()=>[A,U],[A,U])}}}var vd=Symbol(),wd=({batch:t=Qo,hooks:s={useDispatch:Me,useSelector:ye,useStore:Go},createSelector:n=wa,unstable__sideEffectsInRender:i=!1,...r}={})=>({name:vd,init(l,{serializeQueryArgs:a},f){const b=l,{buildQueryHooks:h,buildInfiniteQueryHooks:N,buildMutationHook:$,usePrefetch:y}=jd({api:l,moduleOptions:{batch:t,hooks:s,unstable__sideEffectsInRender:i,createSelector:n},serializeQueryArgs:a,context:f});return As(b,{usePrefetch:y}),As(f,{batch:t}),{injectEndpoint(D,k){if(hd(k)){const{useQuery:j,useLazyQuery:P,useLazyQuerySubscription:u,useQueryState:x,useQuerySubscription:I}=h(D);As(b.endpoints[D],{useQuery:j,useLazyQuery:P,useLazyQuerySubscription:u,useQueryState:x,useQuerySubscription:I}),l[`use${rn(D)}Query`]=j,l[`useLazy${rn(D)}Query`]=P}if(xd(k)){const j=$(D);As(b.endpoints[D],{useMutation:j}),l[`use${rn(D)}Mutation`]=j}else if(Ha(k)){const{useInfiniteQuery:j,useInfiniteQuerySubscription:P,useInfiniteQueryState:u}=N(D);As(b.endpoints[D],{useInfiniteQuery:j,useInfiniteQuerySubscription:P,useInfiniteQueryState:u}),l[`use${rn(D)}InfiniteQuery`]=j}}}}}),Ki=Oa(Va(),wd());const Sd="/api",vn=Ki({reducerPath:"exhibitorInvoiceApi",baseQuery:Wi({baseUrl:Sd,credentials:"include",prepareHeaders:t=>{const s=localStorage.getItem("exhibitor_token");return s&&t.set("authorization",`Bearer ${s}`),t.set("Content-Type","application/json"),t.set("Accept","application/json"),t}}),tagTypes:["ExhibitorInvoice"],endpoints:t=>({getExhibitorInvoice:t.query({query:s=>({url:`/exhibitor-bookings/${s}/invoice`,method:"GET"}),transformErrorResponse:s=>(console.error("Get Exhibitor Invoice Error:",s),s),providesTags:(s,n,i)=>[{type:"ExhibitorInvoice",id:i}]}),downloadExhibitorInvoice:t.mutation({query:s=>({url:`/exhibitor-bookings/${s}/invoice/download`,method:"GET",responseHandler:n=>n.blob()})}),shareViaEmail:t.mutation({query:({bookingId:s,...n})=>({url:`/exhibitor-bookings/${s}/invoice/share/email`,method:"POST",body:n})}),shareViaWhatsApp:t.mutation({query:({bookingId:s,...n})=>({url:`/exhibitor-bookings/${s}/invoice/share/whatsapp`,method:"POST",body:n})})})}),{useGetExhibitorInvoiceQuery:kd,useDownloadExhibitorInvoiceMutation:Id,useShareViaEmailMutation:Cd,useShareViaWhatsAppMutation:Nd}=vn,Wa=({booking:t})=>{var I,o,d,R;const s=()=>{const S=new Date(t.exhibitionId.startDate||""),E=new Date(t.exhibitionId.endDate||""),v={};let g=new Date(S);for(;g<=E;){const A=g.toLocaleString("default",{month:"short",year:"numeric"});v[A]||(v[A]=[]),v[A].push(g.getDate().toString().padStart(2,"0")),g=new Date(g),g.setDate(g.getDate()+1)}const L=Object.entries(v).map(([A,m])=>`${m.join(", ")} ${A}`);return`${t.exhibitionId.name||"ABSE"} (${L.join(" & ")})`},n=S=>{const E=new Date(S);return{date:E.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}),time:E.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}},i=t.stallIds.map((S,E)=>{var A;const v=S,g=S.dimensions.width*S.dimensions.height,L=g*S.ratePerSqm;return{key:S._id,sn:E+1,stallNo:S.number,stallType:((A=v.stallTypeId)==null?void 0:A.name)||"Standard",dimensions:`${S.dimensions.width}x${S.dimensions.height}m`,area:g.toFixed(0),rate:S.ratePerSqm.toFixed(0),amount:L}}),r=i.reduce((S,E)=>S+E.amount,0),l=t.calculations,a=((I=l.stalls[0])==null?void 0:I.discount)!==void 0&&((o=l.stalls[0])==null?void 0:o.discount)!==null,f=a&&((R=(d=l.stalls[0])==null?void 0:d.discount)==null?void 0:R.value)||0,b=a&&f>0?Math.round(r*f/100*100)/100:0,h=r-b,N=l.taxes.find(S=>S.name.includes("GST")),$=N?N.rate:18,y=Math.round(h*$/100*100)/100,D=h+y,k=r,j=b,P=h,u=y,x=D;return e.jsx("div",{className:"invoice-container",children:e.jsxs("div",{className:"proforma-invoice",children:[e.jsxs("div",{className:"header-section",children:[e.jsx("div",{className:"logo-cell",children:"Logo"}),e.jsxs("div",{className:"title-company",children:[e.jsx("div",{className:"title-cell",children:"PROFORMA INVOICE"}),e.jsx("div",{className:"company-cell",children:t.exhibitionId.companyName})]})]}),e.jsxs("div",{className:"bill-to-section",children:[e.jsx("div",{className:"bill-to-cell",children:"Bill To"}),e.jsxs("div",{className:"bill-to-info",children:[e.jsxs("div",{className:"info-row",children:[e.jsx("div",{className:"label-cell",children:"Company Name"}),e.jsx("div",{className:"value-cell",children:t.companyName}),e.jsx("div",{className:"date-label-cell",children:"Date"}),e.jsx("div",{className:"date-value-cell",children:n(t.createdAt).date})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("div",{className:"label-cell",children:"Phone No."}),e.jsx("div",{className:"value-cell",children:t.customerPhone}),e.jsx("div",{className:"date-label-cell",children:"Time"}),e.jsx("div",{className:"date-value-cell",children:n(t.createdAt).time})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("div",{className:"label-cell",children:"GST No."}),e.jsx("div",{className:"value-cell",children:t.customerGSTIN}),e.jsx("div",{className:"date-label-cell",children:"Invoice No"}),e.jsx("div",{className:"date-value-cell",children:t.invoiceNumber})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("div",{className:"label-cell",children:"Address"}),e.jsx("div",{className:"value-cell",children:t.customerAddress})]})]})]}),e.jsxs("div",{className:"expo-venue-section",children:[e.jsxs("div",{className:"expo-column",children:[e.jsx("div",{className:"heading",children:"Expo Name"}),e.jsx("div",{className:"content",children:s()})]}),e.jsxs("div",{className:"venue-column",children:[e.jsx("div",{className:"heading",children:"Venue"}),e.jsx("div",{className:"content",children:t.exhibitionId.venue})]})]}),e.jsx("div",{className:"section-header stall-summary-header",children:"Stall Summary"}),e.jsxs("div",{className:"stall-table",children:[e.jsxs("div",{className:"stall-header",children:[e.jsx("div",{className:"stall-header-cell",children:"S/N"}),e.jsx("div",{className:"stall-header-cell",children:"Stall No."}),e.jsx("div",{className:"stall-header-cell",children:"Stall Type"}),e.jsx("div",{className:"stall-header-cell",children:"Dimensions"}),e.jsx("div",{className:"stall-header-cell",children:"Area (sqm)"}),e.jsx("div",{className:"stall-header-cell",children:"Rate (per sqm)"}),e.jsx("div",{className:"stall-header-cell",children:"Amount"})]}),i.map(S=>e.jsxs("div",{className:"stall-row",children:[e.jsx("div",{className:"stall-cell",children:S.sn}),e.jsx("div",{className:"stall-cell",children:S.stallNo}),e.jsx("div",{className:"stall-cell",children:S.stallType}),e.jsx("div",{className:"stall-cell",children:S.dimensions}),e.jsx("div",{className:"stall-cell",children:S.area}),e.jsx("div",{className:"stall-cell",children:Number(S.rate).toLocaleString("en-IN")}),e.jsx("div",{className:"stall-cell",children:S.amount.toLocaleString("en-IN")})]},S.key))]}),e.jsx("div",{className:"section-header",children:"Calculation Summary"}),e.jsxs("div",{className:"calc-table",children:[e.jsxs("div",{className:"calc-row",children:[e.jsx("div",{className:"calc-label",children:"Total Basic Amount"}),e.jsxs("div",{className:"calc-value",children:["â‚¹",k.toLocaleString("en-IN")]})]}),f>0&&e.jsxs("div",{className:"calc-row",children:[e.jsxs("div",{className:"calc-label",children:["Discount (",f,"%)"]}),e.jsxs("div",{className:"calc-value",children:["-â‚¹",j.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"calc-row",children:[e.jsx("div",{className:"calc-label",children:f>0?"Amount after Discount":"Net Amount"}),e.jsxs("div",{className:"calc-value",children:["â‚¹",P.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"calc-row",children:[e.jsxs("div",{className:"calc-label",children:["GST (",$,"%)"]}),e.jsxs("div",{className:"calc-value",children:["â‚¹",u.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"calc-row total-row",children:[e.jsx("div",{className:"calc-label",children:"Total Amount"}),e.jsxs("div",{className:"calc-value",children:["â‚¹",x.toLocaleString("en-IN")]})]})]}),e.jsxs("div",{className:"details-section",children:[e.jsxs("div",{className:"bank-details",children:[e.jsx("div",{className:"details-header",children:"Bank Details"}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"Bank Name"}),e.jsx("div",{className:"detail-value",children:t.exhibitionId.bankName})]}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"Account No."}),e.jsx("div",{className:"detail-value",children:t.exhibitionId.bankAccount})]}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"Name"}),e.jsx("div",{className:"detail-value",children:t.exhibitionId.bankAccountName})]}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"Branch"}),e.jsx("div",{className:"detail-value",children:t.exhibitionId.bankBranch})]}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"IFSC CODE"}),e.jsx("div",{className:"detail-value",children:t.exhibitionId.bankIFSC})]})]}),e.jsxs("div",{className:"company-details",children:[e.jsx("div",{className:"details-header",children:"Company Details"}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"CIN No."}),e.jsx("div",{className:"detail-value",children:t.exhibitionId.companyCIN})]}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"Pan No."}),e.jsx("div",{className:"detail-value",children:t.exhibitionId.companyPAN})]}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"SAC CODE"}),e.jsx("div",{className:"detail-value",children:t.exhibitionId.companySAC})]}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"GST No."}),e.jsx("div",{className:"detail-value",children:t.exhibitionId.companyGST})]}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"Email"}),e.jsx("div",{className:"detail-value",children:t.exhibitionId.companyEmail})]}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"Website"}),e.jsx("div",{className:"detail-value",children:t.exhibitionId.companyWebsite})]}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"Address"}),e.jsx("div",{className:"detail-value",children:t.exhibitionId.companyAddress})]})]})]}),e.jsxs("div",{className:"instruction-section",children:[e.jsx("div",{className:"instruction-header",children:"PI Instruction"}),e.jsx("div",{className:"instruction-content",dangerouslySetInnerHTML:{__html:t.exhibitionId.piInstructions||"THIS INVOICE IS PROFORMA INVOICE DO NOT CLAIM ANY GOVERNMENT CREDITS ON THIS PROFORMA INVOICE. FINAL INVOICE WOULD BE RAISED AFTER 100% PAYMENT."}})]}),e.jsxs("div",{className:"instruction-section",children:[e.jsx("div",{className:"instruction-header",children:"Terms & Conditions"}),e.jsx("div",{className:"instruction-content",dangerouslySetInnerHTML:{__html:t.exhibitionId.termsAndConditions||'All cheques / Drafts should be payable to "AAKAR EXHIBITION Private Limited". This bill is payable as per agreed terms. All delayed payments will be charged interest @ 18% p.a. All Complaints / Disputes, if any on this bill should reach us within 15 days on receipt of bill, failing which the bill becomes fully payable. Subject to Ahmedabad Jurisdiction.'}})]}),e.jsx("div",{className:"signature-section",children:e.jsx("div",{className:"signature-text",children:"Authorised Signature"})})]})})};da.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${ca}/pdf.worker.min.js`;const{Title:Ed,Text:Lr}=me,Ad=()=>{const{id:t}=dt(),{data:s,isLoading:n,error:i}=kd(t||""),[r]=Id(),[l]=Cd(),[a]=Nd(),[f,b]=c.useState(!1),[h,N]=c.useState(!1),[$,y]=c.useState(!1),[D,k]=c.useState(null),[j,P]=c.useState(1),[u]=F.useForm(),[x]=F.useForm(),[I,o]=c.useState(null);function d({numPages:A}){k(A),P(1)}const R=async()=>{try{const A=await r(t||"").unwrap(),m=URL.createObjectURL(A);o(m),b(!0)}catch(A){console.error("Error generating PDF preview:",A),ee.error("Failed to generate PDF preview")}},S=async()=>{try{const A=await r(t||"").unwrap(),m=URL.createObjectURL(A),w=document.createElement("a");w.href=m,w.download=`Invoice-${(s==null?void 0:s.invoiceNumber)||t||"download"}.pdf`,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(m)}catch(A){console.error("Error downloading PDF:",A),ee.error("Failed to download PDF")}},E=()=>{N(!0)},v=()=>{y(!0)},g=async A=>{try{await l({bookingId:t||"",email:A.email,message:A.message}).unwrap(),ee.success(`Invoice sent to ${A.email}`),N(!1),u.resetFields()}catch(m){console.error("Error sending email:",m),ee.error("Failed to send email")}},L=async A=>{try{await a({bookingId:t||"",phoneNumber:A.phoneNumber}).unwrap();const m=A.phoneNumber.replace(/\D/g,""),w=encodeURIComponent(A.message);window.open(`https://wa.me/${m}?text=${w}`,"_blank"),y(!1),x.resetFields()}catch(m){console.error("Error opening WhatsApp:",m),ee.error("Failed to open WhatsApp")}};return n?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx(Dt,{size:"large"})}):i||!s?e.jsxs("div",{style:{textAlign:"center",marginTop:"50px"},children:[e.jsx(Ed,{level:3,children:"Invoice Not Found"}),e.jsx(Lr,{children:"The requested invoice could not be loaded. Please try again later."})]}):e.jsxs(e.Fragment,{children:[e.jsxs(W,{title:"Invoice Details",style:{margin:"20px"},children:[e.jsx(ne,{gutter:[16,24],children:e.jsx(z,{span:24,children:e.jsxs(X,{children:[e.jsx(q,{type:"primary",icon:e.jsx(xo,{}),onClick:R,children:"Preview Invoice"}),e.jsx(q,{icon:e.jsx(Mi,{}),onClick:S,children:"Download PDF"}),e.jsx(q,{icon:e.jsx(qt,{}),onClick:E,children:"Share via Email"}),e.jsx(q,{icon:e.jsx(ma,{}),onClick:v,children:"Share via WhatsApp"})]})})}),e.jsx(Fe,{}),e.jsx(Wa,{booking:{...s.bookingId,customerGSTIN:s.bookingId.exhibitionId.companyGST||"",invoiceNumber:s.invoiceNumber,exhibitionId:{...s.bookingId.exhibitionId,companyName:s.bookingId.exhibitionId.companyName||"",bankName:s.bookingId.exhibitionId.bankName||"",bankAccount:s.bookingId.exhibitionId.bankAccount||"",bankAccountName:s.bookingId.exhibitionId.bankAccountName||"",bankBranch:s.bookingId.exhibitionId.bankBranch||"",bankIFSC:s.bookingId.exhibitionId.bankIFSC||"",companyCIN:s.bookingId.exhibitionId.companyCIN||"",companyPAN:s.bookingId.exhibitionId.companyPAN||"",companySAC:s.bookingId.exhibitionId.companySAC||"",companyGST:s.bookingId.exhibitionId.companyGST||"",companyEmail:s.bookingId.exhibitionId.companyEmail||"",companyWebsite:s.bookingId.exhibitionId.companyWebsite||"",companyAddress:s.bookingId.exhibitionId.companyAddress||""}}})]}),e.jsxs(fe,{title:"Invoice Preview",visible:f,onCancel:()=>b(!1),footer:null,width:800,children:[I&&e.jsx(ua,{file:I,onLoadSuccess:d,options:{cMapUrl:"cmaps/",cMapPacked:!0},children:e.jsx(ha,{pageNumber:j,width:750})}),D&&e.jsx("div",{style:{textAlign:"center",marginTop:"10px"},children:e.jsxs(Lr,{children:["Page ",j," of ",D]})})]}),e.jsx(fe,{title:"Share Invoice via Email",visible:h,onCancel:()=>N(!1),footer:null,children:e.jsxs(F,{form:u,layout:"vertical",onFinish:g,children:[e.jsx(F.Item,{name:"email",label:"Email Address",rules:[{required:!0,message:"Please enter an email address"},{type:"email",message:"Please enter a valid email address"}],children:e.jsx(G,{placeholder:"example@example.com"})}),e.jsx(F.Item,{name:"message",label:"Message",initialValue:`Please find attached the invoice for your booking with invoice number ${s.invoiceNumber}.`,children:e.jsx(G.TextArea,{rows:4})}),e.jsx(F.Item,{children:e.jsx(q,{type:"primary",htmlType:"submit",children:"Send"})})]})}),e.jsx(fe,{title:"Share Invoice via WhatsApp",visible:$,onCancel:()=>y(!1),footer:null,children:e.jsxs(F,{form:x,layout:"vertical",onFinish:L,children:[e.jsx(F.Item,{name:"phoneNumber",label:"Phone Number",rules:[{required:!0,message:"Please enter a phone number"}],children:e.jsx(G,{placeholder:"+1234567890"})}),e.jsx(F.Item,{name:"message",label:"Message",initialValue:`Please find the invoice for your booking with invoice number ${s.invoiceNumber}.`,children:e.jsx(G.TextArea,{rows:4})}),e.jsx(F.Item,{children:e.jsx(q,{type:"primary",htmlType:"submit",children:"Open WhatsApp"})})]})})]})},{Option:hs}=oe,{Title:Td,Text:Pd}=me,Dd=()=>{const t=Me(),{message:s}=jt.useApp(),[n]=F.useForm(),{settings:i,loading:r}=ye(y=>y.settings),[l,a]=c.useState([]),[f,b]=c.useState(0);c.useEffect(()=>{t($s())},[t]),c.useEffect(()=>{if(i&&(n.setFieldsValue({siteName:i.siteName,adminEmail:i.adminEmail,language:i.language,timezone:i.timezone,emailNotifications:i.emailNotifications,footerText:i.footerText}),i.logo)){const y=j=>{const P=localStorage.getItem("token");return{url:`${se.defaults.baseURL}/uploads/${j}`,token:P}},{url:D,token:k}=y(i.logo);fetch(D,{headers:{authorization:`Bearer ${k}`}}).then(j=>j.blob()).then(j=>{var u;const P=URL.createObjectURL(j);a([{uid:"-1",name:((u=i.logo)==null?void 0:u.split("/").pop())||"logo",status:"done",url:P,thumbUrl:P,type:j.type,response:{path:i.logo}}])}).catch(()=>{a([])})}},[i,n]);const h=y=>{t(Fs(y)).unwrap().then(()=>s.success("Settings updated successfully")).catch(D=>s.error(`Failed to update settings: ${D}`))},N={name:"file",action:`${se.defaults.baseURL}/settings/upload/logo`,headers:{authorization:`Bearer ${localStorage.getItem("token")}`},maxCount:1,accept:"image/*",fileList:l,listType:"picture-card",showUploadList:{showPreviewIcon:!0,showRemoveIcon:!0},onChange(y){const{status:D,name:k,response:j,uid:P}=y.file;if(D==="uploading"){a([...y.fileList]);return}if(D==="done"&&j){b(0);const u=localStorage.getItem("token"),x=`${se.defaults.baseURL}/uploads/${j.path}`;fetch(x,{headers:{authorization:`Bearer ${u}`}}).then(I=>I.blob()).then(I=>{const o=URL.createObjectURL(I);a([{uid:y.file.uid,name:k,status:"done",url:o,thumbUrl:o,type:I.type,response:j}]),s.success(`${k} uploaded successfully`),n.setFieldValue("logo",j.path)}).catch(()=>{s.error(`${k} preview failed to load`),a([])})}else D==="error"?(s.error(`${k} upload failed.`),a([]),b(0)):D==="removed"&&(a([]),n.setFieldValue("logo",null),b(0))},onRemove(){return a([]),n.setFieldValue("logo",null),b(0),!0},customRequest:async({file:y,onSuccess:D,onError:k,onProgress:j})=>{try{t(jn(y)).unwrap().then(P=>{D&&D(P)}).catch(P=>{k&&k(new Error(P))})}catch(P){k&&k(P)}}},$=e.jsx("div",{children:f>0?e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(zt,{type:"circle",percent:f,width:80}),e.jsx("div",{style:{marginTop:8},children:"Uploading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(_s,{}),e.jsx("div",{style:{marginTop:8},children:"Upload Logo"})]})});return e.jsxs("div",{className:"dashboard-container",children:[e.jsx("div",{style:{marginBottom:"24px"},children:e.jsx(ne,{gutter:[24,24],align:"middle",children:e.jsx(z,{flex:"auto",children:e.jsxs(X,{direction:"vertical",size:4,children:[e.jsx(Td,{level:4,style:{margin:0},children:"Settings"}),e.jsx(Pd,{type:"secondary",children:"Configure system settings and preferences"})]})})})}),e.jsx(W,{className:"info-card",children:e.jsxs(F,{form:n,layout:"vertical",onFinish:h,initialValues:{siteName:"Exhibition Management System",emailNotifications:!0,language:"en",timezone:"UTC"},children:[e.jsxs(ne,{gutter:24,children:[e.jsxs(z,{span:12,children:[e.jsx(F.Item,{label:"Site Name",name:"siteName",rules:[{required:!0,message:"Please input the site name!"}],children:e.jsx(G,{})}),e.jsx(F.Item,{label:"Admin Email",name:"adminEmail",rules:[{required:!0,message:"Please input the admin email!"},{type:"email",message:"Please enter a valid email!"}],children:e.jsx(G,{})}),e.jsx(F.Item,{label:"Language",name:"language",children:e.jsxs(oe,{children:[e.jsx(hs,{value:"en",children:"English"}),e.jsx(hs,{value:"es",children:"Spanish"}),e.jsx(hs,{value:"fr",children:"French"})]})}),e.jsx(F.Item,{label:"Timezone",name:"timezone",children:e.jsxs(oe,{children:[e.jsx(hs,{value:"UTC",children:"UTC"}),e.jsx(hs,{value:"EST",children:"EST"}),e.jsx(hs,{value:"PST",children:"PST"})]})}),e.jsx(F.Item,{label:"Email Notifications",name:"emailNotifications",valuePropName:"checked",children:e.jsx(ot,{})})]}),e.jsxs(z,{span:12,children:[e.jsxs(F.Item,{label:"Site Logo",name:"logo",tooltip:"Upload your site logo (recommended size: 200x200px, max 2MB)",children:[e.jsx(qs,{...N,children:l.length<1&&$}),l.length>0&&f>0&&e.jsx(zt,{percent:f,status:"active",style:{marginTop:8}})]}),e.jsx(F.Item,{label:"Footer Text",name:"footerText",children:e.jsx(G.TextArea,{rows:4,placeholder:"Enter footer text (optional)"})})]})]}),e.jsx(F.Item,{children:e.jsxs(X,{children:[e.jsx(q,{type:"primary",htmlType:"submit",icon:e.jsx(Is,{}),loading:r,children:"Save Settings"}),e.jsx(q,{onClick:()=>n.resetFields(),icon:e.jsx(po,{}),children:"Reset"})]})})]})})]})},{Title:on,Paragraph:$r,Text:xs}=me,{confirm:Rd}=fe,Ld=[{id:1,name:"Administrator",description:"Full access to all resources",userCount:3,permissions:{read:!0,write:!0,delete:!0}},{id:2,name:"Editor",description:"Can edit and publish content",userCount:8,permissions:{read:!0,write:!0,delete:!1}},{id:3,name:"Viewer",description:"Can view content only",userCount:15,permissions:{read:!0,write:!1,delete:!1}},{id:4,name:"Analyst",description:"Can view and analyze data",userCount:7,permissions:{read:!0,write:!1,delete:!1}}];function ni({allowed:t}){return t?e.jsx(Li,{className:"text-success",style:{color:"#52c41a",fontSize:16}}):e.jsx(mo,{className:"text-danger",style:{color:"#f5222d",fontSize:16}})}function $d(){const[t,s]=c.useState(""),n=l=>{Rd({title:"Are you sure you want to delete this role?",icon:e.jsx(ss,{}),content:`This will permanently delete the ${l} role. This action cannot be undone.`,okText:"Yes, delete it",okType:"danger",cancelText:"Cancel",onOk(){console.log("Deleting role:",l)}})},i=[{title:"Role",dataIndex:"name",key:"name",render:(l,a)=>e.jsxs(X,{children:[e.jsx(yt,{style:{backgroundColor:a.id===1?"#1677ff":a.id===2?"#52c41a":a.id===3?"#faad14":"#f5222d"},children:l.charAt(0).toUpperCase()}),e.jsx(xs,{strong:!0,children:l})]})},{title:"Description",dataIndex:"description",key:"description",render:l=>e.jsx(xs,{type:"secondary",children:l})},{title:"Users",dataIndex:"userCount",key:"userCount",render:l=>e.jsx(Xe,{count:l,color:"#1677ff",showZero:!0})},{title:"Read",dataIndex:["permissions","read"],key:"read",align:"center",render:l=>e.jsx(ni,{allowed:l})},{title:"Write",dataIndex:["permissions","write"],key:"write",align:"center",render:l=>e.jsx(ni,{allowed:l})},{title:"Delete",dataIndex:["permissions","delete"],key:"delete",align:"center",render:l=>e.jsx(ni,{allowed:l})},{title:"Actions",key:"actions",align:"right",render:(l,a)=>e.jsxs(X,{children:[e.jsx(Ye,{title:"Edit role",children:e.jsx(q,{type:"primary",shape:"circle",icon:e.jsx(Ss,{}),size:"small",onClick:()=>console.log("Edit role:",a.name)})}),e.jsx(Ye,{title:"Delete role",children:e.jsx(q,{danger:!0,shape:"circle",icon:e.jsx(pt,{}),size:"small",onClick:()=>n(a.name)})})]})}],r=Ld.filter(l=>l.name.toLowerCase().includes(t.toLowerCase())||l.description.toLowerCase().includes(t.toLowerCase()));return e.jsxs("div",{style:{padding:"12px 0"},children:[e.jsxs("div",{style:{marginBottom:24},children:[e.jsx(on,{level:2,children:"Roles & Permissions"}),e.jsx($r,{children:"Manage role-based access control and permissions for your users."})]}),e.jsxs(W,{style:{borderRadius:8,boxShadow:"0 2px 8px rgba(0,0,0,0.09)"},children:[e.jsxs(ne,{gutter:16,style:{marginBottom:16},children:[e.jsx(z,{span:16,children:e.jsx(G,{placeholder:"Search roles...",allowClear:!0,value:t,onChange:l=>s(l.target.value),prefix:e.jsx(xs,{type:"secondary",style:{fontSize:16},children:"ðŸ”"})})}),e.jsx(z,{span:8,style:{textAlign:"right"},children:e.jsx(q,{type:"primary",icon:e.jsx(st,{}),style:{borderRadius:6},children:"Add Role"})})]}),e.jsx($e,{columns:i,dataSource:r,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showTotal:(l,a)=>`Showing ${a[0]}-${a[1]} of ${l} roles`},style:{marginTop:8}})]}),e.jsx(W,{title:e.jsx(on,{level:4,style:{margin:0},children:"Role Management Tips"}),style:{marginTop:24,borderRadius:8,boxShadow:"0 2px 8px rgba(0,0,0,0.09)"},children:e.jsxs("div",{style:{display:"flex",gap:16,flexWrap:"wrap"},children:[e.jsxs(X,{direction:"vertical",style:{flex:1,minWidth:250},children:[e.jsx(on,{level:5,children:"Best Practices"}),e.jsxs("ul",{style:{paddingLeft:20},children:[e.jsx("li",{children:e.jsx(xs,{children:"Follow the principle of least privilege"})}),e.jsx("li",{children:e.jsx(xs,{children:"Regularly audit user roles"})}),e.jsx("li",{children:e.jsx(xs,{children:"Document role responsibilities"})})]})]}),e.jsxs(X,{direction:"vertical",style:{flex:1,minWidth:250},children:[e.jsx(on,{level:5,children:"Role Inheritance"}),e.jsx($r,{children:"Higher-level roles automatically include permissions from lower-level roles to ensure consistency."})]})]})})]})}const Fd=async()=>{try{return(await se.get("/users")).data.map(s=>({...s,id:s._id,name:s.name||s.username,status:s.isActive?"active":"inactive",department:s.department||"General"}))}catch(t){throw console.error("Error fetching users:",t),t}},Md=async t=>{try{const s={username:t.username,email:t.email,password:t.password,role:t.role,isActive:t.isActive},n=await se.post("/users",s);return{...n.data,id:n.data._id,name:t.name||n.data.username,status:n.data.isActive?"active":"inactive",department:n.data.department||"General"}}catch(s){throw console.error("Error creating user:",s),s}},Bd=async(t,s)=>{const n={...s};s.status&&(n.isActive=s.status==="active",delete n.status);try{const i=await se.put(`/users/${t}`,n);return{...i.data,id:i.data._id,name:i.data.name||i.data.username,status:i.data.isActive?"active":"inactive",department:i.data.department||"General"}}catch(i){throw console.error("Error updating user:",i),i}},zd=async t=>{try{return(await se.delete(`/users/${t}`)).data}catch(s){throw console.error("Error deleting user:",s),s}},Ud=t=>typeof t=="string"?t:(t==null?void 0:t.name)||"Unknown",qd=t=>typeof t=="string"?t:(t==null?void 0:t._id)||"",{Text:ii}=me,_d=({user:t,visible:s,onClose:n})=>t?e.jsxs(fe,{title:"User Details",open:s,onCancel:n,footer:null,width:600,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:24},children:[e.jsx(yt,{src:t.avatar,icon:!t.avatar&&e.jsx(Ce,{}),size:64}),e.jsxs("div",{style:{marginLeft:16},children:[e.jsx(me.Title,{level:4,style:{margin:0},children:t.name}),e.jsx(ii,{type:"secondary",children:t.email})]})]}),e.jsx(Fe,{}),e.jsxs(pe,{bordered:!0,column:1,children:[e.jsx(pe.Item,{label:e.jsxs(e.Fragment,{children:[e.jsx(go,{})," Role"]}),children:(()=>{const i=Ud(t.role),r=i.toLowerCase()==="admin"?"#1677ff":i.toLowerCase()==="manager"?"#52c41a":"#faad14";return e.jsx(le,{color:r,children:i.toUpperCase()})})()}),e.jsx(pe.Item,{label:e.jsxs(e.Fragment,{children:[e.jsx(On,{})," Department"]}),children:t.department}),e.jsx(pe.Item,{label:e.jsxs(e.Fragment,{children:[e.jsx(qt,{})," Email"]}),children:t.email}),e.jsx(pe.Item,{label:"Status",children:t.status==="active"?e.jsx(Xe,{status:"success",text:e.jsx(ii,{style:{color:"#52c41a"},children:"Active"})}):e.jsx(Xe,{status:"default",text:e.jsx(ii,{type:"secondary",children:"Inactive"})})}),e.jsx(pe.Item,{label:e.jsxs(e.Fragment,{children:[e.jsx(Qe,{})," Last Login"]}),children:t.lastLogin}),e.jsx(pe.Item,{label:"Created On",children:t.createdAt||"Not available"})]})]}):null,{Option:ri}=oe,Od=({user:t,visible:s,onClose:n,onSuccess:i})=>{const[r]=F.useForm(),[l,a]=c.useState(!1);c.useEffect(()=>{t&&s&&r.setFieldsValue({name:t.name,email:t.email,role:qd(t.role),status:t.status==="active"})},[t,s,r]);const f=async()=>{try{const b=await r.validateFields();if(!t)return;a(!0);const h={name:b.name,email:b.email,role:b.role,status:b.status?"active":"inactive"};await Bd(t.id,h),ee.success("User updated successfully"),i(),n()}catch(b){b instanceof Error?ee.error(`Failed to update user: ${b.message}`):ee.error("Failed to update user"),console.error("Update user error:",b)}finally{a(!1)}};return e.jsx(fe,{title:"Edit User",open:s,onCancel:n,footer:[e.jsx(q,{onClick:n,children:"Cancel"},"cancel"),e.jsx(q,{type:"primary",loading:l,onClick:f,children:"Save Changes"},"submit")],children:e.jsxs(F,{form:r,layout:"vertical",requiredMark:!1,children:[e.jsx(F.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please enter the user name"}],children:e.jsx(G,{placeholder:"Full name"})}),e.jsx(F.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please enter email"},{type:"email",message:"Please enter a valid email"}],children:e.jsx(G,{placeholder:"Email address"})}),e.jsx(F.Item,{name:"role",label:"Role",rules:[{required:!0,message:"Please select a role"}],children:e.jsxs(oe,{placeholder:"Select role",children:[e.jsx(ri,{value:"admin",children:"Admin"}),e.jsx(ri,{value:"manager",children:"Manager"}),e.jsx(ri,{value:"agent",children:"Agent"})]})}),e.jsx(F.Item,{name:"status",label:"Status",valuePropName:"checked",children:e.jsx(ot,{checkedChildren:"Active",unCheckedChildren:"Inactive"})})]})})},Vd=async()=>{try{return(await se.get("/roles")).data}catch(t){throw console.error("Error fetching roles:",t),t}},{Option:ln}=oe,Hd=({visible:t,onClose:s,onSuccess:n})=>{const[i]=F.useForm(),[r,l]=c.useState(!1),[a,f]=c.useState([]),[b,h]=c.useState(!1);c.useEffect(()=>{t&&N()},[t]);const N=async()=>{try{h(!0);const y=await Vd();f(y)}catch(y){console.error("Failed to fetch roles:",y),ee.error("Failed to load roles")}finally{h(!1)}},$=async()=>{try{const y=await i.validateFields();l(!0);const D={username:y.name.replace(/\s+/g,"_").toLowerCase(),name:y.name,email:y.email,password:y.password,role:y.role,isActive:y.status};await Md(D),ee.success("User created successfully"),i.resetFields(),n(),s()}catch(y){y instanceof Error?ee.error(`Failed to create user: ${y.message}`):ee.error("Failed to create user"),console.error("Create user error:",y)}finally{l(!1)}};return e.jsx(fe,{title:"Create New User",open:t,onCancel:s,footer:[e.jsx(q,{onClick:s,children:"Cancel"},"cancel"),e.jsx(q,{type:"primary",loading:r,onClick:$,children:"Create User"},"submit")],children:e.jsxs(F,{form:i,layout:"vertical",requiredMark:!1,children:[e.jsx(F.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please enter the user name"}],children:e.jsx(G,{placeholder:"Full name"})}),e.jsx(F.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please enter email"},{type:"email",message:"Please enter a valid email"}],children:e.jsx(G,{placeholder:"Email address"})}),e.jsx(F.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please enter password"},{min:6,message:"Password must be at least 6 characters"}],children:e.jsx(G.Password,{placeholder:"Enter password"})}),e.jsx(F.Item,{name:"role",label:"Role",rules:[{required:!0,message:"Please select a role"}],children:e.jsx(oe,{placeholder:"Select role",loading:b,children:a.length>0?a.map(y=>e.jsx(ln,{value:y._id,children:y.name},y._id)):e.jsxs(e.Fragment,{children:[e.jsx(ln,{value:"admin",children:"Admin"}),e.jsx(ln,{value:"manager",children:"Manager"}),e.jsx(ln,{value:"agent",children:"Agent"})]})})}),e.jsx(F.Item,{name:"status",label:"Status",valuePropName:"checked",initialValue:!0,children:e.jsx(ot,{checkedChildren:"Active",unCheckedChildren:"Inactive"})})]})})},{Title:Wd,Paragraph:Yd,Text:ps}=me,{TabPane:ai}=ct,{confirm:Qd}=fe;function Gd(){const[t,s]=c.useState(""),[n,i]=c.useState("all"),[r,l]=c.useState([]),[a,f]=c.useState(!0),[b,h]=c.useState(!1),[N,$]=c.useState(!1),[y,D]=c.useState(!1),[k,j]=c.useState(null);c.useEffect(()=>{P()},[]);const P=async()=>{f(!0);try{const v=await Fd();l(v)}catch(v){console.error("Error fetching users:",v),ee.error("Failed to load users. Please try again later.")}finally{f(!1)}},u=(v,g)=>{Qd({title:"Are you sure you want to delete this user?",icon:e.jsx(ss,{}),content:`This will permanently delete ${g}'s account. This action cannot be undone.`,okText:"Yes, delete",okType:"danger",cancelText:"Cancel",onOk:async()=>{try{await zd(v),ee.success(`${g} has been deleted successfully.`),P()}catch(L){console.error("Error deleting user:",L),ee.error("Failed to delete user. Please try again.")}}})},x=v=>{j(v),h(!0)},I=v=>{j(v),$(!0)},o=()=>{D(!0)},d=[{title:"User",key:"user",render:(v,g)=>e.jsxs(X,{children:[e.jsx(yt,{src:g.avatar,icon:!g.avatar&&e.jsx(Ce,{}),size:"large"}),e.jsxs(X,{direction:"vertical",size:0,children:[e.jsx(ps,{strong:!0,children:g.name}),e.jsx(ps,{type:"secondary",style:{fontSize:"12px"},children:g.email})]})]})},{title:"Department",dataIndex:"department",key:"department",render:v=>e.jsx(ps,{children:v})},{title:"Role",dataIndex:"role",key:"role",render:v=>{const g=typeof v=="string"?v:v&&typeof v=="object"&&v.name?v.name:"Unknown";let L=g.toLowerCase()==="admin"?"#1677ff":g.toLowerCase()==="manager"?"#52c41a":"#faad14";return e.jsx(le,{color:L,style:{fontWeight:500,borderRadius:"4px"},children:g.toUpperCase()})},filters:[{text:"Admin",value:"admin"},{text:"Manager",value:"manager"},{text:"Agent",value:"agent"}],onFilter:(v,g)=>{const L=g.role;return(typeof L=="string"?L.toLowerCase():L&&typeof L=="object"&&L.name?L.name.toLowerCase():"").indexOf(v.toLowerCase())===0}},{title:"Status",dataIndex:"status",key:"status",render:v=>e.jsx(X,{children:v==="active"?e.jsx(Xe,{status:"success",text:e.jsx(ps,{style:{color:"#52c41a"},children:"Active"})}):e.jsx(Xe,{status:"default",text:e.jsx(ps,{type:"secondary",children:"Inactive"})})}),filters:[{text:"Active",value:"active"},{text:"Inactive",value:"inactive"}],onFilter:(v,g)=>g.status===v},{title:"Last Login",dataIndex:"lastLogin",key:"lastLogin",render:v=>e.jsxs(X,{children:[e.jsx(Qe,{style:{color:"#8c8c8c"}}),e.jsx(ps,{type:"secondary",children:v})]}),sorter:(v,g)=>{const L=new Date(v.lastLogin||""),A=new Date(g.lastLogin||"");return L.getTime()-A.getTime()}},{title:"Action",key:"action",render:(v,g)=>e.jsxs(X,{size:"small",children:[e.jsx(Ye,{title:"View details",children:e.jsx(q,{type:"text",icon:e.jsx(Mt,{}),size:"small",onClick:()=>x(g)})}),e.jsx(Ye,{title:"Edit user",children:e.jsx(q,{type:"text",icon:e.jsx(Ss,{}),size:"small",onClick:()=>I(g)})}),e.jsx(Ye,{title:"Delete user",children:e.jsx(q,{type:"text",danger:!0,icon:e.jsx(pt,{}),size:"small",onClick:()=>u(g.id,g.name)})})]})}],R=r.filter(v=>(n==="all"||n==="active"&&v.status==="active"||n==="inactive"&&v.status==="inactive")&&Object.values(v).some(g=>typeof g=="string"&&g.toLowerCase().includes(t.toLowerCase()))),S={admin:r.filter(v=>{const g=v.role;return(typeof g=="string"?g.toLowerCase():g&&typeof g=="object"&&g.name?g.name.toLowerCase():"")==="admin"}).length,manager:r.filter(v=>{const g=v.role;return(typeof g=="string"?g.toLowerCase():g&&typeof g=="object"&&g.name?g.name.toLowerCase():"")==="manager"}).length,agent:r.filter(v=>{const g=v.role;return(typeof g=="string"?g.toLowerCase():g&&typeof g=="object"&&g.name?g.name.toLowerCase():"")==="agent"}).length},E={active:r.filter(v=>v.status==="active").length,inactive:r.filter(v=>v.status==="inactive").length};return e.jsxs("div",{style:{padding:"12px 0"},children:[e.jsxs("div",{style:{marginBottom:24},children:[e.jsx(Wd,{level:2,children:"User Management"}),e.jsx(Yd,{children:"Manage user accounts, permissions, and access control."})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16},children:[e.jsx(G,{placeholder:"Search users...",prefix:e.jsx(bt,{}),style:{width:250},value:t,onChange:v=>s(v.target.value)}),e.jsx(q,{type:"primary",icon:e.jsx(ws,{}),onClick:o,children:"Add User"})]}),e.jsxs(ne,{gutter:[16,16],style:{marginBottom:24},children:[e.jsx(z,{xs:24,sm:8,children:e.jsx(W,{style:{borderRadius:8,boxShadow:"0 2px 8px rgba(0,0,0,0.09)"},children:e.jsx(ve,{title:"Total Users",value:r.length,prefix:e.jsx(Ce,{}),valueStyle:{color:"#1677ff"},loading:a})})}),e.jsx(z,{xs:24,sm:8,children:e.jsx(W,{style:{borderRadius:8,boxShadow:"0 2px 8px rgba(0,0,0,0.09)"},children:e.jsx(ve,{title:"Active Users",value:E.active,prefix:e.jsx(Li,{}),valueStyle:{color:"#52c41a"},loading:a})})}),e.jsx(z,{xs:24,sm:8,children:e.jsx(W,{style:{borderRadius:8,boxShadow:"0 2px 8px rgba(0,0,0,0.09)"},children:e.jsx(ve,{title:"Admin Users",value:S.admin,prefix:e.jsx(Ce,{}),valueStyle:{color:"#faad14"},loading:a})})})]}),e.jsx(W,{style:{marginBottom:24,borderRadius:8,boxShadow:"0 2px 8px rgba(0,0,0,0.09)"},children:e.jsxs(ne,{gutter:[16,16],justify:"space-between",align:"middle",children:[e.jsx(z,{xs:24,md:8,children:e.jsx(G,{placeholder:"Search users...",prefix:e.jsx(bt,{style:{color:"rgba(0,0,0,.45)"}}),onChange:v=>s(v.target.value),allowClear:!0,size:"middle"})}),e.jsx(z,{xs:24,md:16,style:{textAlign:"right"},children:e.jsxs(X,{wrap:!0,children:[e.jsx(Ye,{title:"Refresh data",children:e.jsx(q,{icon:a?e.jsx(fo,{}):e.jsx(bt,{}),onClick:P,disabled:a,children:"Refresh"})}),e.jsx(q,{icon:e.jsx(Mi,{}),children:"Export"}),e.jsx(q,{type:"primary",icon:e.jsx(ws,{}),onClick:o,children:"Add User"})]})})]})}),e.jsxs(W,{style:{borderRadius:8,boxShadow:"0 2px 8px rgba(0,0,0,0.09)"},children:[e.jsxs(ct,{defaultActiveKey:"all",onChange:i,tabBarStyle:{marginBottom:24},children:[e.jsx(ai,{tab:`All Users (${r.length})`},"all"),e.jsx(ai,{tab:`Active (${E.active})`},"active"),e.jsx(ai,{tab:`Inactive (${E.inactive})`},"inactive")]}),e.jsx($e,{columns:d,dataSource:R,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showTotal:(v,g)=>`${g[0]}-${g[1]} of ${v} users`},loading:a})]}),e.jsx(_d,{user:k,visible:b,onClose:()=>h(!1)}),e.jsx(Od,{user:k,visible:N,onClose:()=>$(!1),onSuccess:P}),e.jsx(Hd,{visible:y,onClose:()=>D(!1),onSuccess:P})]})}const{Title:Sx,Text:cn,Paragraph:Ts}=me,Kd=({settings:t,onSave:s,loading:n})=>{const[i]=F.useForm();Re.useEffect(()=>{i.setFieldsValue(t)},[t,i]);const r=l=>{s(l)};return e.jsxs(W,{title:e.jsxs(X,{children:[e.jsx(qt,{}),e.jsx("span",{children:"Email Notifications"})]}),style:{marginBottom:24},children:[e.jsx(Ts,{children:"Configure which notifications you want to receive via email. Email notifications will be sent to your registered email address."}),e.jsx(Ge,{message:"Email Notifications",description:"Email notifications help you stay updated even when you're not logged into the system.",type:"info",showIcon:!0,style:{marginBottom:24}}),e.jsxs(F,{form:i,layout:"vertical",initialValues:t,onFinish:r,children:[e.jsxs(ne,{gutter:[24,16],children:[e.jsxs(z,{span:24,children:[e.jsx(F.Item,{name:"newLeads",valuePropName:"checked",label:e.jsx(cn,{strong:!0,children:"New Lead Notifications"}),children:e.jsx(ot,{})}),e.jsx(Ts,{type:"secondary",style:{marginTop:-16,marginBottom:16},children:"Receive email when new leads are created or assigned to you"})]}),e.jsxs(z,{span:24,children:[e.jsx(F.Item,{name:"followUpReminders",valuePropName:"checked",label:e.jsx(cn,{strong:!0,children:"Follow-up Reminders"}),children:e.jsx(ot,{})}),e.jsx(Ts,{type:"secondary",style:{marginTop:-16,marginBottom:16},children:"Receive reminders for upcoming follow-ups"})]}),e.jsxs(z,{span:24,children:[e.jsx(F.Item,{name:"statusChanges",valuePropName:"checked",label:e.jsx(cn,{strong:!0,children:"Status Change Notifications"}),children:e.jsx(ot,{})}),e.jsx(Ts,{type:"secondary",style:{marginTop:-16,marginBottom:16},children:"Receive notifications when lead statuses are updated"})]}),e.jsxs(z,{span:24,children:[e.jsx(F.Item,{name:"leadAssignments",valuePropName:"checked",label:e.jsx(cn,{strong:!0,children:"Lead Assignment Notifications"}),children:e.jsx(ot,{})}),e.jsx(Ts,{type:"secondary",style:{marginTop:-16,marginBottom:16},children:"Receive notifications when leads are assigned to you"})]})]}),e.jsx(Fe,{}),e.jsx(F.Item,{children:e.jsx(q,{type:"primary",htmlType:"submit",icon:e.jsx(Is,{}),loading:n,children:"Save Email Preferences"})})]})]})},{Title:Xd,Text:kx,Paragraph:Fr}=me,{Search:Zd}=G,{TabPane:Mr}=ct,Jd=()=>{const t=Se();dt();const[s,n]=c.useState([]),[i,r]=c.useState([]),[l,a]=c.useState(!1),[f,b]=c.useState(""),[h,N]=c.useState("ALL"),[$,y]=c.useState("ALL"),[D,k]=c.useState(ml().email),[j,P]=c.useState(!1),[u,x]=c.useState("all");c.useEffect(()=>{I()},[]),c.useEffect(()=>{o()},[s,f,h,$,u]);const I=()=>{a(!0),setTimeout(()=>{n(Na()),a(!1)},500)},o=()=>{let A=s;if(u==="unread"&&(A=A.filter(m=>m.status===Ee.UNREAD)),f){const m=f.toLowerCase();A=A.filter(w=>w.title.toLowerCase().includes(m)||w.message.toLowerCase().includes(m))}h!=="ALL"&&(A=A.filter(m=>m.type===h)),$!=="ALL"&&(A=A.filter(m=>m.source===$)),r(A)},d=A=>{x(A)},R=A=>{b(A)},S=()=>{b(""),N("ALL"),y("ALL"),x("all")},E=A=>{const m=jl(A);t(m)},v=A=>{const m=s.map(w=>w.id===A.id?{...w,status:Ee.READ,readAt:new Date().toISOString()}:w);n(m)},g=()=>{const A=s.map(m=>m.status===Ee.UNREAD?{...m,status:Ee.READ,readAt:new Date().toISOString()}:m);n(A),er.success({message:"All notifications marked as read",description:"All notifications have been marked as read successfully."})},L=A=>{P(!0),setTimeout(()=>{k(A),P(!1),er.success({message:"Settings saved",description:"Your email notification settings have been updated successfully."})},1e3)};return e.jsx("div",{className:"notifications-page",children:e.jsxs(ne,{gutter:[24,24],children:[e.jsx(z,{xs:24,children:e.jsx(W,{children:e.jsxs(ne,{justify:"space-between",align:"middle",children:[e.jsxs(z,{children:[e.jsx(Xd,{level:4,children:e.jsxs(X,{children:[e.jsx(_n,{}),"Notifications"]})}),e.jsx(Fr,{children:"Stay updated with all your lead activities and follow-ups"})]}),e.jsx(z,{children:e.jsxs(X,{children:[e.jsx(Ye,{title:"Refresh notifications",children:e.jsx(q,{icon:e.jsx(Ri,{}),onClick:I,loading:l,children:"Refresh"})}),e.jsx(q,{type:"primary",icon:e.jsx(Us,{}),onClick:g,disabled:Ls(s)===0,children:"Mark All as Read"})]})})]})})}),e.jsx(z,{xs:24,lg:16,children:e.jsxs(W,{className:"notifications-list-card",style:{marginBottom:24},children:[e.jsxs(ct,{activeKey:u,onChange:d,tabBarExtraContent:e.jsx(X,{children:e.jsx(Xe,{count:Ls(s),offset:[-5,0],children:e.jsx("span",{style:{padding:"0 8px"},children:"Unread"})})}),children:[e.jsx(Mr,{tab:"All Notifications"},"all"),e.jsx(Mr,{tab:"Unread"},"unread")]}),e.jsxs("div",{style:{marginBottom:16,display:"flex",justifyContent:"space-between"},children:[e.jsx(Zd,{placeholder:"Search notifications...",onSearch:R,style:{width:300},allowClear:!0}),e.jsx(X,{children:e.jsx(q,{icon:e.jsx(Bi,{}),onClick:S,disabled:f===""&&h==="ALL"&&$==="ALL",children:"Reset Filters"})})]}),e.jsx(es,{dataSource:i,renderItem:A=>e.jsx(Aa,{notification:A,onView:E,onMarkAsRead:v}),pagination:{pageSize:10,showTotal:(A,m)=>`${m[0]}-${m[1]} of ${A} notifications`},rowKey:"id",loading:l,locale:{emptyText:e.jsx(Tt,{description:e.jsx("span",{children:"No notifications found"})})}})]})}),e.jsxs(z,{xs:24,lg:8,children:[e.jsx(Kd,{settings:D,onSave:L,loading:j}),e.jsx(W,{title:e.jsxs(X,{children:[e.jsx(Pn,{}),e.jsx("span",{children:"Notification Tips"})]}),children:e.jsx(Fr,{children:e.jsxs("ul",{children:[e.jsx("li",{children:"Notifications help you stay informed about important lead activities"}),e.jsx("li",{children:"Use email notifications for critical updates when you're away"}),e.jsx("li",{children:"Click on a notification to see more details or take action"}),e.jsx("li",{children:"Mark notifications as read to keep your inbox organized"})]})})})]})]})})};class Zs extends Re.Component{constructor(s){super(s),this.state={hasError:!1,error:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,n){console.error("Error caught by boundary:",s,n)}render(){var s;return this.state.hasError?e.jsx(Os,{status:"error",title:"Something went wrong",subTitle:((s=this.state.error)==null?void 0:s.message)||"An unexpected error occurred",extra:[e.jsx(q,{type:"primary",onClick:()=>window.location.href="/dashboard",children:"Go to Dashboard"},"home"),e.jsx(q,{onClick:()=>window.location.reload(),children:"Reload Page"},"reload")]}):this.props.children}}const Oe=t=>{var n,i;const s=((i=(n=t.response)==null?void 0:n.data)==null?void 0:i.message)||"An error occurred";throw new Error(s)},Ne={getExhibitions:async()=>{try{return await se.get("/exhibitions")}catch(t){return Oe(t)}},getActiveExhibitions:async()=>{try{return await se.get("/exhibitions/active")}catch(t){return Oe(t)}},getExhibition:async t=>{try{return await se.get(`/exhibitions/${t}`)}catch(s){return Oe(s)}},createExhibition:async t=>{try{return await se.post("/exhibitions",t)}catch(s){return Oe(s)}},updateExhibition:async(t,s)=>{try{return await se.put(`/exhibitions/${t}`,s)}catch(n){return Oe(n)}},deleteExhibition:async t=>{try{return await se.delete(`/exhibitions/${t}`)}catch(s){return Oe(s)}},getHalls:async t=>{try{return await se.get(`/exhibitions/${t}/halls`)}catch(s){return Oe(s)}},createHall:async(t,s)=>{try{const{_id:n,id:i,createdAt:r,updatedAt:l,...a}=s;return console.log("Creating hall with data:",{exhibitionId:t,data:a}),(await se.post(`/exhibitions/${t}/halls`,a)).data}catch(n){throw console.error("Error creating hall:",n),n}},updateHall:async(t,s,n)=>{try{const{_id:i,id:r,createdAt:l,updatedAt:a,...f}=n;console.log("Updating hall with data:",{exhibitionId:t,hallId:s,data:f});const b=await se.put(`/exhibitions/${t}/halls/${s}`,f);return console.log("Hall updated:",b.data),b}catch(i){return console.error("Error updating hall:",i),Oe(i)}},deleteHall:async(t,s)=>{var n,i,r;try{if(!t||!s)throw new Error("Exhibition ID and Hall ID are required");console.log("Deleting hall:",{exhibitionId:t,hallId:s});const l=await se.delete(`/exhibitions/${t}/halls/${s}`);if(!l.data)throw new Error("No response received from server");return l}catch(l){throw console.error("Error deleting hall:",l),((n=l.response)==null?void 0:n.status)===401?new Error("Unauthorized. Please log in again."):((i=l.response)==null?void 0:i.status)===403?new Error("You do not have permission to delete halls."):((r=l.response)==null?void 0:r.status)===404?new Error("Hall not found."):l}},saveLayout:async(t,s)=>{try{if(!t)throw new Error("Exhibition ID is required");return{data:{halls:s}}}catch(n){return Oe(n)}},getLayout:async t=>{try{if(!t)throw new Error("Exhibition ID is required");return await se.get(`/exhibitions/${t}/layout`)}catch(s){return Oe(s)}},getStalls:async(t,s)=>{try{if(!t)throw new Error("Exhibition ID is required");return await se.get(`/exhibitions/${t}/stalls`,{params:{hallId:s}})}catch(n){return Oe(n)}},createStall:async(t,s)=>{try{if(!t)throw new Error("Exhibition ID is required");return await se.post(`/exhibitions/${t}/stalls`,s)}catch(n){return Oe(n)}},updateStall:async(t,s,n)=>{try{if(!t||!s)throw new Error("Exhibition ID and Stall ID are required");console.log("Updating stall:",{exhibitionId:t,stallId:s,data:n});const i=await se.put(`/exhibitions/${t}/stalls/${s}`,n);return console.log("Stall update response:",i),i}catch(i){return console.error("Error updating stall:",i),Oe(i)}},deleteStall:async(t,s)=>{try{if(!t||!s)throw new Error("Exhibition ID and Stall ID are required");return await se.delete(`/exhibitions/${t}/stalls/${s}`)}catch(n){return Oe(n)}},getFixtures:async(t,s)=>{try{const n=`/exhibitions/${t}/fixtures`,i=s?{type:s}:void 0;return await se.get(n,{params:i})}catch(n){return Oe(n)}},getFixture:async(t,s)=>{try{return await se.get(`/exhibitions/${t}/fixtures/${s}`)}catch(n){return Oe(n)}},createFixture:async(t,s)=>{try{return await se.post(`/exhibitions/${t}/fixtures`,s)}catch(n){return Oe(n)}},updateFixture:async(t,s,n)=>{try{return await se.put(`/exhibitions/${t}/fixtures/${s}`,n)}catch(i){return Oe(i)}},deleteFixture:async(t,s)=>{try{return await se.delete(`/exhibitions/${t}/fixtures/${s}`)}catch(n){return Oe(n)}}},eu={exhibitions:[],currentExhibition:null,halls:[],stalls:[],fixtures:[],loading:!1,error:null},Ct=Le("exhibition/fetchExhibitions",async(t,{rejectWithValue:s})=>{try{return(await Ne.getExhibitions()).data.map(r=>({...r,id:r._id||r.id})).filter(r=>r.id)}catch(n){return s(n.message)}}),mt=Le("exhibition/fetchExhibition",async(t,{rejectWithValue:s})=>{try{if(!t)throw new Error("Exhibition ID is required");return(await Ne.getExhibition(t)).data}catch(n){return s(n.message)}}),wn=Le("exhibition/createExhibition",async(t,{rejectWithValue:s})=>{try{return(await Ne.createExhibition(t)).data}catch(n){return s(n.message)}}),Sn=Le("exhibition/updateExhibition",async({id:t,data:s},{rejectWithValue:n})=>{try{if(!t)throw new Error("Exhibition ID is required");return(await Ne.updateExhibition(t,s)).data}catch(i){return n(i.message)}}),Pt=Le("exhibition/fetchHalls",async(t,{rejectWithValue:s})=>{var n;try{if(!t)throw new Error("Exhibition ID is required");return(await Ne.getHalls(t)).data}catch(i){return((n=i.response)==null?void 0:n.status)===404?[]:s(i.message)}}),At=Le("exhibition/fetchStalls",async({exhibitionId:t,hallId:s},{rejectWithValue:n})=>{try{if(!t)throw new Error("Exhibition ID is required");return(await Ne.getStalls(t,s)).data}catch(i){return n(i.message)}}),Ms=Le("exhibition/deleteExhibition",async(t,{rejectWithValue:s})=>{try{return await Ne.deleteExhibition(t),t}catch(n){return s(n.message)}}),Bs=Le("exhibition/fetchFixtures",async({exhibitionId:t,type:s},{rejectWithValue:n})=>{try{if(!t)throw new Error("Exhibition ID is required");return(await Ne.getFixtures(t,s)).data}catch(i){return n(i.message)}}),kn=Le("exhibition/createFixture",async({exhibitionId:t,data:s},{rejectWithValue:n})=>{try{if(!t)throw new Error("Exhibition ID is required");return(await Ne.createFixture(t,s)).data}catch(i){return n(i.message)}}),In=Le("exhibition/updateFixture",async({exhibitionId:t,id:s,data:n},{rejectWithValue:i})=>{try{if(!t||!s)throw new Error("Exhibition ID and Fixture ID are required");return(await Ne.updateFixture(t,s,n)).data}catch(r){return i(r.message)}}),Cn=Le("exhibition/deleteFixture",async({exhibitionId:t,id:s},{rejectWithValue:n})=>{try{if(!t||!s)throw new Error("Exhibition ID and Fixture ID are required");return await Ne.deleteFixture(t,s),s}catch(i){return n(i.message)}}),Ya=ht({name:"exhibition",initialState:eu,reducers:{clearCurrentExhibition:t=>{t.currentExhibition=null,t.halls=[],t.stalls=[],t.fixtures=[],t.error=null},clearError:t=>{t.error=null},clearStalls:t=>{t.stalls=[]},clearFixtures:t=>{t.fixtures=[]}},extraReducers:t=>{t.addCase(Ct.pending,s=>{s.loading=!0,s.error=null}).addCase(Ct.fulfilled,(s,n)=>{s.loading=!1,s.exhibitions=n.payload}).addCase(Ct.rejected,(s,n)=>{s.loading=!1,s.error=n.payload}).addCase(mt.pending,s=>{s.loading=!0,s.error=null}).addCase(mt.fulfilled,(s,n)=>{s.loading=!1,s.currentExhibition=n.payload}).addCase(mt.rejected,(s,n)=>{s.loading=!1,s.error=n.payload}).addCase(wn.pending,s=>{s.loading=!0,s.error=null}).addCase(wn.fulfilled,(s,n)=>{s.loading=!1,s.exhibitions.push(n.payload)}).addCase(wn.rejected,(s,n)=>{s.loading=!1,s.error=n.payload}).addCase(Sn.pending,s=>{s.loading=!0,s.error=null}).addCase(Sn.fulfilled,(s,n)=>{s.loading=!1,s.currentExhibition=n.payload;const i=s.exhibitions.findIndex(r=>r.id===n.payload.id);i!==-1&&(s.exhibitions[i]=n.payload)}).addCase(Sn.rejected,(s,n)=>{s.loading=!1,s.error=n.payload}).addCase(Pt.pending,s=>{s.loading=!0,s.error=null}).addCase(Pt.fulfilled,(s,n)=>{s.loading=!1,s.halls=n.payload}).addCase(Pt.rejected,(s,n)=>{s.loading=!1,s.error=n.payload}).addCase(At.pending,s=>{s.loading=!0,s.error=null}).addCase(At.fulfilled,(s,n)=>{s.loading=!1;const i=n.payload.map(r=>{var l;return{...r,id:r._id||r.id,_id:r._id||r.id,stallTypeId:typeof r.stallTypeId=="string"?r.stallTypeId:(l=r.stallTypeId)==null?void 0:l._id,stallType:r.stallType||{name:"N/A",description:null}}});n.meta.arg.hallId,s.stalls=i}).addCase(At.rejected,(s,n)=>{s.loading=!1,s.error=n.payload}).addCase(Ms.pending,s=>{s.loading=!0,s.error=null}).addCase(Ms.fulfilled,(s,n)=>{s.loading=!1,s.exhibitions=s.exhibitions.filter(i=>(i._id||i.id)!==n.payload)}).addCase(Ms.rejected,(s,n)=>{s.loading=!1,s.error=n.payload}).addCase(Bs.pending,s=>{s.loading=!0,s.error=null}).addCase(Bs.fulfilled,(s,n)=>{s.loading=!1,s.fixtures=n.payload.map(i=>({...i,id:i._id||i.id,_id:i._id||i.id}))}).addCase(Bs.rejected,(s,n)=>{s.loading=!1,s.error=n.payload}).addCase(kn.pending,s=>{s.loading=!0,s.error=null}).addCase(kn.fulfilled,(s,n)=>{s.loading=!1;const i={...n.payload,id:n.payload._id||n.payload.id,_id:n.payload._id||n.payload.id};s.fixtures.push(i)}).addCase(kn.rejected,(s,n)=>{s.loading=!1,s.error=n.payload}).addCase(In.pending,s=>{s.loading=!0,s.error=null}).addCase(In.fulfilled,(s,n)=>{s.loading=!1;const i={...n.payload,id:n.payload._id||n.payload.id,_id:n.payload._id||n.payload.id},r=s.fixtures.findIndex(l=>l.id===i.id||l._id===i._id);r!==-1&&(s.fixtures[r]=i)}).addCase(In.rejected,(s,n)=>{s.loading=!1,s.error=n.payload}).addCase(Cn.pending,s=>{s.loading=!0,s.error=null}).addCase(Cn.fulfilled,(s,n)=>{s.loading=!1,s.fixtures=s.fixtures.filter(i=>i.id!==n.payload&&i._id!==n.payload)}).addCase(Cn.rejected,(s,n)=>{s.loading=!1,s.error=n.payload})}}),{clearCurrentExhibition:Ix,clearError:Cx,clearStalls:Nx,clearFixtures:Ex}=Ya.actions,tu=Ya.reducer,_e=(t,s)=>{if(!t)return"";let i=`/exhibition/${t.slug||t._id||t.id}`;return s&&(i+=`/${s}`),i},Kn=(t,s)=>t?`/exhibitions/${t.slug||t._id||t.id}`:"",{Title:su,Text:Kt}=me,{RangePicker:nu}=Gs,iu=()=>{const{message:t,modal:s}=jt.useApp(),n=Se(),i=Me(),{exhibitions:r,loading:l}=ye(m=>m.exhibition),[a,f]=c.useState([]),[b,h]=c.useState(!1),[N,$]=c.useState(!1),[y,D]=c.useState({status:[],dateRange:null,search:"",activeStatus:null}),[k,j]=c.useState("all");c.useEffect(()=>{i(Ct())},[i]);const P=c.useMemo(()=>{const m=r.length,w=r.filter(C=>C.status==="published").length,M=r.filter(C=>new Date(C.startDate)>new Date).length,T=r.filter(C=>C.status==="completed").length,p=r.filter(C=>C.isActive).length;return{total:m,active:w,upcoming:M,completed:T,activeCount:p}},[r]),u=async m=>{const w=m._id||m.id;try{h(!0),await i(Ms(w)).unwrap(),t.success("Exhibition deleted successfully")}catch(M){t.error(M.message||"Failed to delete exhibition")}finally{h(!1)}},x=async()=>{s.confirm({title:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"#101828",padding:"20px 24px",borderBottom:"1px solid #EAECF0"},children:[e.jsx(pt,{style:{color:"#F04438",fontSize:"22px"}}),e.jsx("span",{style:{fontSize:"18px",fontWeight:600,lineHeight:"28px"},children:"Delete Selected Exhibitions"})]}),content:e.jsxs("div",{style:{padding:"20px 24px",color:"#475467"},children:[e.jsxs("p",{style:{fontSize:"14px",lineHeight:"20px",marginBottom:"8px"},children:["Are you sure you want to delete ",e.jsxs("strong",{children:[a.length," selected exhibitions"]}),"?"]}),e.jsx("p",{style:{color:"#667085",fontSize:"14px",lineHeight:"20px",marginBottom:0},children:"This action cannot be undone and will permanently delete all associated data for these exhibitions."})]}),footer:e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px",padding:"20px 24px",borderTop:"1px solid #EAECF0",marginTop:0},children:[e.jsx(q,{onClick:()=>fe.destroyAll(),style:{height:"40px",padding:"10px 18px",borderRadius:"8px",border:"1px solid #D0D5DD",color:"#344054",fontWeight:500,fontSize:"14px",lineHeight:"20px",display:"flex",alignItems:"center",boxShadow:"0px 1px 2px rgba(16, 24, 40, 0.05)"},children:"Cancel"}),e.jsx(q,{danger:!0,type:"primary",onClick:async()=>{try{h(!0),await Promise.all(a.map(m=>i(Ms(m._id||m.id)).unwrap())),t.success(`Successfully deleted ${a.length} exhibitions`),f([])}catch(m){t.error(m.message||"Failed to delete some exhibitions")}finally{h(!1),fe.destroyAll()}},style:{height:"40px",padding:"10px 18px",borderRadius:"8px",border:"none",backgroundColor:"#D92D20",color:"white",fontWeight:500,fontSize:"14px",lineHeight:"20px",display:"flex",alignItems:"center",boxShadow:"0px 1px 2px rgba(16, 24, 40, 0.05)"},children:"Delete All"})]}),centered:!0,icon:null,width:400,closable:!0,maskClosable:!0,className:"delete-confirmation-modal",styles:{mask:{backgroundColor:"rgba(52, 64, 84, 0.7)"},content:{padding:0,borderRadius:"12px",boxShadow:"0px 4px 6px -2px rgba(16, 24, 40, 0.05), 0px 12px 16px -4px rgba(16, 24, 40, 0.1)"},body:{padding:0},footer:{display:"none"}}})},I=async(m,w)=>{try{$(!0);const M=m._id||m.id;await Ne.updateExhibition(M,{status:w});const T=r.map(p=>(p._id||p.id)===M?{...p,status:w}:p);i(Ct.fulfilled(T,"",void 0)),t.success("Status updated successfully")}catch{t.error("Failed to update status"),i(Ct())}finally{$(!1)}},o=async(m,w)=>{try{$(!0);const M=m._id||m.id;await Ne.updateExhibition(M,{isActive:w});const T=r.map(p=>(p._id||p.id)===M?{...p,isActive:w}:p);i(Ct.fulfilled(T,"",void 0)),t.success(`Exhibition ${w?"activated":"deactivated"} successfully`)}catch{t.error("Failed to update active status"),i(Ct())}finally{$(!1)}},d=(m,w)=>{const M=m._id||m.id;w==="/layout"?n(_e(m,"layout"),{state:{exhibitionId:M}}):n(_e(m)+w,{state:{exhibitionId:M}})},R=m=>{switch(m.toLowerCase()){case"published":return"#52c41a";case"draft":return"#faad14";case"completed":return"#1890ff";default:return"#d9d9d9"}},S=(m,w)=>{const M=R(m);return e.jsxs(X,{size:4,style:{display:"inline-flex",alignItems:"center"},children:[e.jsx(le,{color:M,style:{textTransform:"capitalize",minWidth:"80px",textAlign:"center",margin:0},children:m}),!w&&e.jsx(le,{color:"red",style:{margin:0},children:"Inactive"})]})},E=m=>{const w=new Date,M=new Date(m.startDate),T=new Date(m.endDate);if(w<M)return 0;if(w>T)return 100;const p=T.getTime()-M.getTime(),C=w.getTime()-M.getTime();return Math.round(C/p*100)},v=m=>{s.confirm({title:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"#101828",padding:"20px 24px",borderBottom:"1px solid #EAECF0"},children:[e.jsx(pt,{style:{color:"#F04438",fontSize:"22px"}}),e.jsx("span",{style:{fontSize:"18px",fontWeight:600,lineHeight:"28px"},children:"Delete Exhibition"})]}),content:e.jsxs("div",{style:{padding:"20px 24px",color:"#475467"},children:[e.jsxs("p",{style:{fontSize:"14px",lineHeight:"20px",marginBottom:"8px"},children:["Are you sure you want to delete ",e.jsx("strong",{children:m.name}),"?"]}),e.jsx("p",{style:{color:"#667085",fontSize:"14px",lineHeight:"20px",marginBottom:0},children:"This action cannot be undone and will permanently delete all associated data."})]}),footer:e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px",padding:"20px 24px",borderTop:"1px solid #EAECF0",marginTop:0},children:[e.jsx(q,{onClick:()=>fe.destroyAll(),style:{height:"40px",padding:"10px 18px",borderRadius:"8px",border:"1px solid #D0D5DD",color:"#344054",fontWeight:500,fontSize:"14px",lineHeight:"20px",display:"flex",alignItems:"center",boxShadow:"0px 1px 2px rgba(16, 24, 40, 0.05)"},children:"Cancel"}),e.jsx(q,{danger:!0,type:"primary",onClick:()=>{u(m),fe.destroyAll()},style:{height:"40px",padding:"10px 18px",borderRadius:"8px",border:"none",backgroundColor:"#D92D20",color:"white",fontWeight:500,fontSize:"14px",lineHeight:"20px",display:"flex",alignItems:"center",boxShadow:"0px 1px 2px rgba(16, 24, 40, 0.05)"},children:"Delete"})]}),centered:!0,icon:null,width:400,closable:!0,maskClosable:!0,className:"delete-confirmation-modal",styles:{mask:{backgroundColor:"rgba(52, 64, 84, 0.7)"},content:{padding:0,borderRadius:"12px",boxShadow:"0px 4px 6px -2px rgba(16, 24, 40, 0.05), 0px 12px 16px -4px rgba(16, 24, 40, 0.1)"},body:{padding:0},footer:{display:"none"}}})},g=m=>[{key:"view",label:"View Details",icon:e.jsx(Mt,{}),onClick:()=>d(m,"")},{key:"edit",label:"Edit Exhibition",icon:e.jsx(Ss,{}),onClick:()=>d(m,"/edit")},{key:"layout",label:"Manage Layout",icon:e.jsx(rs,{}),onClick:()=>d(m,"/layout")},{type:"divider"},...m.status==="published"?[{key:"public-view",label:"Public View",icon:e.jsx(Mt,{}),onClick:()=>window.open(Kn(m),"_blank")},{type:"divider"}]:[],{key:"status",label:"Change Status",icon:e.jsx(Bi,{}),children:[{key:"draft",label:e.jsxs(X,{children:[e.jsx(le,{color:"#faad14",style:{margin:0},children:"Draft"}),e.jsx("span",{children:"Set as Draft"})]}),icon:e.jsx(Ut,{}),onClick:()=>I(m,"draft"),disabled:m.status==="draft"||N},{key:"published",label:e.jsxs(X,{children:[e.jsx(le,{color:"#52c41a",style:{margin:0},children:"Published"}),e.jsx("span",{children:"Publish"})]}),icon:e.jsx(Te,{}),onClick:()=>I(m,"published"),disabled:m.status==="published"||N},{key:"completed",label:e.jsxs(X,{children:[e.jsx(le,{color:"#1890ff",style:{margin:0},children:"Completed"}),e.jsx("span",{children:"Mark as Completed"})]}),icon:e.jsx(Qe,{}),onClick:()=>I(m,"completed"),disabled:m.status==="completed"||N}]},{key:"active-status",label:e.jsxs(X,{children:[m.isActive?e.jsx(le,{color:"red",style:{margin:0},children:"Deactivate"}):e.jsx(le,{color:"#52c41a",style:{margin:0},children:"Activate"}),e.jsx("span",{children:m.isActive?"Deactivate":"Activate"})]}),icon:e.jsx(tr,{}),onClick:()=>o(m,!m.isActive),disabled:N},{type:"divider"},{key:"delete",label:"Delete",icon:e.jsx(pt,{}),danger:!0,onClick:()=>v(m)}],L=c.useMemo(()=>r.filter(m=>{if(y.search&&!m.name.toLowerCase().includes(y.search.toLowerCase())||y.status.length>0&&!y.status.includes(m.status)||y.activeStatus!==null&&m.isActive!==y.activeStatus)return!1;if(y.dateRange){const[w,M]=y.dateRange,T=new Date(m.startDate),p=new Date(m.endDate);if(T<new Date(w)||p>new Date(M))return!1}switch(k){case"active":return m.status==="published";case"upcoming":return new Date(m.startDate)>new Date;case"completed":return m.status==="completed";default:return!0}}),[r,y,k]),A=[{title:"Exhibition Details",key:"details",render:(m,w)=>e.jsx(Kt,{strong:!0,style:{fontSize:"16px",cursor:"pointer"},onClick:()=>d(w,""),children:w.name})},{title:"Status",key:"status",width:180,align:"center",render:(m,w)=>S(w.status,w.isActive),filters:[{text:"Draft",value:"draft"},{text:"Published",value:"published"},{text:"Completed",value:"completed"}],onFilter:(m,w)=>w.status===m},{title:"Start Date",key:"startDate",width:130,render:(m,w)=>e.jsx(Kt,{children:Ae(w.startDate).format("MMM D, YYYY")})},{title:"End Date",key:"endDate",width:130,render:(m,w)=>e.jsx(Kt,{children:Ae(w.endDate).format("MMM D, YYYY")})},{title:"Create Date",key:"createdAt",width:130,render:(m,w)=>e.jsx(Kt,{children:Ae(w.createdAt).format("MMM D, YYYY")})},{title:"Progress",key:"progress",width:200,render:(m,w)=>e.jsx(zt,{percent:E(w),size:"small",status:w.status==="completed"?"success":"active"})},{title:"Actions",key:"actions",width:150,fixed:"right",render:(m,w)=>e.jsxs(X,{size:"middle",children:[e.jsx(Ye,{title:"View Details",children:e.jsx(q,{type:"text",icon:e.jsx(Mt,{}),onClick:()=>d(w,"")})}),e.jsx(Ye,{title:"Edit Exhibition",children:e.jsx(q,{type:"text",icon:e.jsx(Ss,{}),onClick:()=>d(w,"/edit")})}),e.jsx(_t,{menu:{items:g(w)},trigger:["click"],placement:"bottomRight",children:e.jsx(q,{type:"text",icon:e.jsx(Vn,{})})})]})}];return e.jsxs("div",{className:"dashboard-container",children:[e.jsx("div",{style:{marginBottom:"24px"},children:e.jsxs(ne,{gutter:[24,24],align:"middle",children:[e.jsx(z,{flex:"auto",children:e.jsxs(X,{direction:"vertical",size:4,children:[e.jsx(su,{level:4,style:{margin:0},children:"Exhibitions"}),e.jsx(Kt,{type:"secondary",children:"Manage your exhibition spaces and layouts"})]})}),e.jsx(z,{children:e.jsx(q,{type:"primary",icon:e.jsx(st,{}),onClick:()=>n("/exhibition/create"),size:"large",children:"Create Exhibition"})})]})}),e.jsxs(ne,{gutter:[24,24],style:{marginBottom:"24px"},children:[e.jsx(z,{xs:24,sm:12,md:6,lg:4,children:e.jsx(W,{children:e.jsx(ve,{title:"Total Exhibitions",value:P.total,prefix:e.jsx(Ut,{})})})}),e.jsx(z,{xs:24,sm:12,md:6,lg:5,children:e.jsx(W,{children:e.jsx(ve,{title:"Published Exhibitions",value:P.active,prefix:e.jsx(Te,{style:{color:"#52c41a"}})})})}),e.jsx(z,{xs:24,sm:12,md:6,lg:5,children:e.jsx(W,{children:e.jsx(ve,{title:"Upcoming Exhibitions",value:P.upcoming,prefix:e.jsx(Qe,{style:{color:"#1890ff"}})})})}),e.jsx(z,{xs:24,sm:12,md:6,lg:5,children:e.jsx(W,{children:e.jsx(ve,{title:"Completed Exhibitions",value:P.completed,prefix:e.jsx(Te,{style:{color:"#8c8c8c"}})})})}),e.jsx(z,{xs:24,sm:12,md:6,lg:5,children:e.jsx(W,{children:e.jsx(ve,{title:"Active Status",value:P.activeCount,prefix:e.jsx(tr,{style:{color:"#52c41a"}})})})})]}),e.jsx(W,{className:"info-card",style:{marginBottom:"16px"},styles:{body:{padding:"20px"}},children:e.jsxs(X,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxs(ne,{gutter:[16,16],align:"middle",children:[e.jsx(z,{flex:"auto",children:e.jsxs(X,{size:"middle",wrap:!0,children:[e.jsx(G,{placeholder:"Search exhibitions",prefix:e.jsx(bt,{style:{color:"#8c8c8c"}}),style:{width:"250px"},value:y.search,onChange:m=>D(w=>({...w,search:m.target.value})),allowClear:!0}),e.jsx(oe,{mode:"multiple",placeholder:"Filter by status",style:{minWidth:"200px"},value:y.status,onChange:m=>D(w=>({...w,status:m})),options:[{label:"Draft",value:"draft"},{label:"Published",value:"published"},{label:"Completed",value:"completed"}]}),e.jsxs(oe,{placeholder:"Active Status",style:{width:"150px"},value:y.activeStatus,onChange:m=>D(w=>({...w,activeStatus:m})),allowClear:!0,children:[e.jsx(oe.Option,{value:!0,children:"Active"}),e.jsx(oe.Option,{value:!1,children:"Inactive"})]}),e.jsx(nu,{onChange:m=>D(w=>{var M,T;return{...w,dateRange:m?[((M=m[0])==null?void 0:M.toISOString())||"",((T=m[1])==null?void 0:T.toISOString())||""]:null}})})]})}),e.jsx(z,{children:e.jsx(bo,{options:[{label:"All",value:"all"},{label:"Active",value:"active"},{label:"Upcoming",value:"upcoming"},{label:"Completed",value:"completed"}],value:k,onChange:m=>j(m)})})]}),a.length>0&&e.jsx(ne,{children:e.jsxs(X,{children:[e.jsxs(Kt,{children:["Selected ",a.length," items"]}),e.jsx(q,{danger:!0,onClick:x,children:"Delete Selected"})]})})]})}),e.jsx(W,{className:"info-card",styles:{body:{padding:0}},children:e.jsx($e,{columns:A,dataSource:L.map(m=>({...m,key:m._id||m.id})),rowKey:m=>m._id||m.id,loading:l||b||N,rowSelection:{selectedRowKeys:a.map(m=>m._id||m.id),onChange:(m,w)=>f(w),selections:[$e.SELECTION_ALL,$e.SELECTION_NONE]},footer:()=>a.length>0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 0"},children:[e.jsxs(Kt,{children:["Selected ",e.jsx("strong",{children:a.length})," ",a.length===1?"exhibition":"exhibitions"]}),e.jsx(q,{danger:!0,onClick:x,icon:e.jsx(pt,{}),loading:b,children:"Delete Selected"})]}),scroll:{x:1500},pagination:{pageSize:10,showSizeChanger:!0,showTotal:m=>`Total ${m} items`,style:{marginTop:"16px"}}})})]})},js={getStallTypes:async()=>se.get("/stall-types"),createStallType:async t=>se.post("/stall-types",t),updateStallType:async(t,s)=>se.put(`/stall-types/${t}`,s),deleteStallType:async t=>se.delete(`/stall-types/${t}`)},{RangePicker:ru}=Gs,{Title:Lt,Text:$t}=me,Br=({value:t="",onChange:s})=>{const n=Re.useRef(null),[i]=Re.useState(t);return e.jsx(tl,{apiKey:$c,onInit:(r,l)=>{n.current=l},value:t,init:{height:300,menubar:!1,plugins:["advlist","autolink","lists","link","charmap","preview","searchreplace","visualblocks","code","fullscreen","insertdatetime","table","help","wordcount"],toolbar:"undo redo | formatselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist | removeformat | help",content_style:'body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif; font-size: 14px; }',branding:!1,promotion:!1,entity_encoding:"raw",convert_urls:!1,paste_data_images:!0,resize:!1,statusbar:!1,browser_spellcheck:!0,setup:r=>{r.on("init",()=>{r.undoManager.clear(),r.undoManager.add()}),r.on("change",()=>{r.undoManager.add()})}},onEditorChange:r=>{s==null||s(r)}})},au=({form:t})=>{const[s,n]=c.useState([]),[i,r]=c.useState(!1);return c.useEffect(()=>{(async()=>{try{r(!0);const a=await js.getStallTypes();n(a.data.filter(f=>f.status==="active"))}catch(a){console.error("Failed to fetch stall types:",a)}finally{r(!1)}})()},[]),e.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[e.jsxs(W,{className:"settings-card",children:[e.jsx(Lt,{level:4,children:"Basic Information"}),e.jsx($t,{type:"secondary",style:{marginBottom:"24px",display:"block"},children:"Enter the main details of your exhibition"}),e.jsxs(ne,{gutter:24,children:[e.jsx(z,{span:24,children:e.jsx(F.Item,{name:"name",label:"Exhibition Name",rules:[{required:!0,message:"Please enter exhibition name"}],children:e.jsx(G,{placeholder:"Enter exhibition name"})})}),e.jsx(z,{span:24,children:e.jsx(F.Item,{name:"description",label:"Description",rules:[{required:!0,message:"Please enter description"}],children:e.jsx(G.TextArea,{rows:4,placeholder:"Enter exhibition description"})})}),e.jsx(z,{span:24,children:e.jsx(F.Item,{name:"venue",label:"Exhibition Venue",rules:[{required:!0,message:"Please enter exhibition venue"}],children:e.jsx(G.TextArea,{rows:2,placeholder:"Enter exhibition venue details"})})}),e.jsx(z,{span:24,children:e.jsx(F.Item,{name:"invoicePrefix",label:"Invoice Prefix",tooltip:"This prefix will be used for all invoices generated for this exhibition (e.g. INV, EXP23)",rules:[{max:10,message:"Prefix cannot be longer than 10 characters"},{pattern:/^[A-Za-z0-9-]*$/,message:"Only letters, numbers, and hyphens are allowed"}],children:e.jsx(G,{placeholder:"Enter invoice prefix (default: INV)"})})}),e.jsx(z,{span:24,children:e.jsx(F.Item,{name:"dateRange",label:"Exhibition Dates",rules:[{required:!0,message:"Please select exhibition dates"}],children:e.jsx(ru,{style:{width:"100%"}})})})]})]}),e.jsxs(W,{className:"settings-card",style:{marginTop:"24px"},children:[e.jsx(Lt,{level:4,children:"Company Details"}),e.jsx($t,{type:"secondary",style:{marginBottom:"24px",display:"block"},children:"Enter your company information"}),e.jsxs(ne,{gutter:24,children:[e.jsxs(z,{span:12,children:[e.jsx(F.Item,{name:"companyName",label:"Company Name",rules:[{required:!0,message:"Please enter company name"}],children:e.jsx(G,{placeholder:"Enter company name"})}),e.jsx(F.Item,{name:"companyContactNo",label:"Contact No.",rules:[{required:!0,message:"Please enter contact number"}],children:e.jsx(G,{placeholder:"Enter contact number"})}),e.jsx(F.Item,{name:"companyEmail",label:"Email",rules:[{required:!0,message:"Please enter email"},{type:"email",message:"Please enter a valid email"}],children:e.jsx(G,{placeholder:"Enter email address"})}),e.jsx(F.Item,{name:"companyAddress",label:"Address",rules:[{required:!0,message:"Please enter address"}],children:e.jsx(G.TextArea,{rows:4,placeholder:"Enter company address"})}),e.jsx(F.Item,{name:"termsAndConditions",label:"Terms & Conditions",tooltip:"Use the rich text editor to format your terms and conditions",children:e.jsx(Br,{})})]}),e.jsxs(z,{span:12,children:[e.jsx(F.Item,{name:"companyPAN",label:"PAN No.",rules:[{required:!0,message:"Please enter PAN number"}],children:e.jsx(G,{placeholder:"Enter PAN number"})}),e.jsx(F.Item,{name:"companyGST",label:"GST No.",rules:[{required:!0,message:"Please enter GST number"}],children:e.jsx(G,{placeholder:"Enter GST number"})}),e.jsx(F.Item,{name:"companySAC",label:"SAC Code No.",children:e.jsx(G,{placeholder:"Enter SAC code number"})}),e.jsx(F.Item,{name:"companyCIN",label:"CIN No.",children:e.jsx(G,{placeholder:"Enter CIN number"})}),e.jsx(F.Item,{name:"companyWebsite",label:"Website",rules:[{type:"url",message:"Please enter a valid URL"}],children:e.jsx(G,{placeholder:"Enter website URL"})}),e.jsx(F.Item,{name:"piInstructions",label:"PI Instructions",tooltip:"Use the rich text editor to format your PI instructions",children:e.jsx(Br,{})})]})]})]}),e.jsxs(W,{className:"settings-card",style:{marginTop:"24px"},children:[e.jsx(Lt,{level:4,children:"Bank Details"}),e.jsx($t,{type:"secondary",style:{marginBottom:"24px",display:"block"},children:"Enter your bank account information for payments"}),e.jsxs(ne,{gutter:24,children:[e.jsxs(z,{span:12,children:[e.jsx(F.Item,{name:"bankName",label:"Bank Name",rules:[{required:!0,message:"Please enter bank name"}],children:e.jsx(G,{placeholder:"Enter bank name"})}),e.jsx(F.Item,{name:"bankBranch",label:"Branch Name",rules:[{required:!0,message:"Please enter branch name"}],children:e.jsx(G,{placeholder:"Enter branch name"})}),e.jsx(F.Item,{name:"bankIFSC",label:"IFSC Code",rules:[{required:!0,message:"Please enter IFSC code"},{pattern:/^[A-Z]{4}0[A-Z0-9]{6}$/,message:"Please enter a valid IFSC code"}],children:e.jsx(G,{placeholder:"Enter IFSC code",style:{textTransform:"uppercase"}})})]}),e.jsxs(z,{span:12,children:[e.jsx(F.Item,{name:"bankAccountName",label:"Account Name",rules:[{required:!0,message:"Please enter account name"}],children:e.jsx(G,{placeholder:"Enter account name"})}),e.jsx(F.Item,{name:"bankAccount",label:"Account Number",rules:[{required:!0,message:"Please enter account number"},{pattern:/^\d+$/,message:"Please enter a valid account number"}],children:e.jsx(G,{placeholder:"Enter account number"})})]})]})]}),e.jsxs(W,{className:"settings-card",style:{marginTop:"24px"},children:[e.jsx(Lt,{level:4,children:"Stall Rates & Pricing"}),e.jsx($t,{type:"secondary",style:{marginBottom:"24px",display:"block"},children:"Configure pricing, taxes, and discounts for stalls"}),e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsx(Lt,{level:5,children:"Stall Type Rates"}),e.jsx($t,{type:"secondary",style:{marginBottom:"16px",display:"block"},children:"Configure pricing per square meter for different types of stalls"}),e.jsx(F.List,{name:"stallRates",children:(l,{add:a,remove:f})=>e.jsxs(e.Fragment,{children:[l.map(({key:b,name:h,...N})=>e.jsxs(X,{style:{display:"flex",marginBottom:8},align:"baseline",children:[e.jsx(F.Item,{...N,name:[h,"stallTypeId"],rules:[{required:!0,message:"Please select stall type"}],children:e.jsx(oe,{loading:i,placeholder:"Select stall type",style:{width:200},children:s.map($=>e.jsx(oe.Option,{value:$._id,children:$.name},$._id))})}),e.jsx(F.Item,{...N,name:[h,"rate"],rules:[{required:!0,message:"Please enter rate"}],children:e.jsx(ze,{min:0,placeholder:"Rate per sq.m",style:{width:200},prefix:"â‚¹",formatter:$=>`${$}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:$=>{const y=$?Number($.replace(/\â‚¹\s?|(,*)/g,"")):0;return isNaN(y)?0:y}})}),e.jsx(ys,{onClick:()=>f(h)})]},b)),e.jsx(F.Item,{children:e.jsx(q,{type:"dashed",onClick:()=>a(),block:!0,icon:e.jsx(st,{}),children:"Add Stall Type Rate"})})]})})]}),e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsx(Lt,{level:5,children:"Tax Configuration"}),e.jsx($t,{type:"secondary",style:{marginBottom:"16px",display:"block"},children:"Configure applicable taxes for stall bookings"}),e.jsx(F.List,{name:"taxConfig",children:(l,{add:a,remove:f})=>e.jsxs(e.Fragment,{children:[l.map(({key:b,name:h,...N})=>e.jsxs(X,{style:{display:"flex",marginBottom:8},align:"baseline",children:[e.jsx(F.Item,{...N,name:[h,"name"],rules:[{required:!0,message:"Please enter tax name"}],children:e.jsx(G,{placeholder:"Tax name",style:{width:150}})}),e.jsx(F.Item,{...N,name:[h,"rate"],rules:[{required:!0,message:"Please enter tax rate"}],children:e.jsx(ze,{min:0,max:100,placeholder:"Tax rate",style:{width:150},formatter:$=>`${$}%`,parser:$=>{const y=$?Number($.replace("%","")):0;return isNaN(y)?0:Math.min(y,100)}})}),e.jsx(F.Item,{...N,name:[h,"isActive"],valuePropName:"checked",children:e.jsx(ot,{checkedChildren:"Active",unCheckedChildren:"Inactive"})}),e.jsx(ys,{onClick:()=>f(h)})]},b)),e.jsx(F.Item,{children:e.jsx(q,{type:"dashed",onClick:()=>a(),block:!0,icon:e.jsx(st,{}),children:"Add Tax"})})]})})]}),e.jsxs("div",{children:[e.jsx(Lt,{level:5,children:"Admin Discount Configuration"}),e.jsx($t,{type:"secondary",style:{marginBottom:"16px",display:"block"},children:"Configure available discounts for admin panel stall bookings"}),e.jsx(F.List,{name:"discountConfig",children:(l,{add:a,remove:f})=>e.jsxs(e.Fragment,{children:[l.map(({key:b,name:h,...N})=>e.jsxs(X,{style:{display:"flex",marginBottom:8},align:"baseline",children:[e.jsx(F.Item,{...N,name:[h,"name"],rules:[{required:!0,message:"Please enter discount name"}],children:e.jsx(G,{placeholder:"Discount",style:{width:150}})}),e.jsx(F.Item,{...N,name:[h,"type"],rules:[{required:!0,message:"Please select type"}],children:e.jsxs(oe,{style:{width:150},children:[e.jsx(oe.Option,{value:"percentage",children:"Percentage (%)"}),e.jsx(oe.Option,{value:"fixed",children:"Fixed Amount (â‚¹)"})]})}),e.jsx(F.Item,{noStyle:!0,shouldUpdate:($,y)=>{var D,k,j,P;return((k=(D=$==null?void 0:$.discountConfig)==null?void 0:D[h])==null?void 0:k.type)!==((P=(j=y==null?void 0:y.discountConfig)==null?void 0:j[h])==null?void 0:P.type)},children:({getFieldValue:$})=>{const y=$(["discountConfig",h,"type"]);return e.jsx(F.Item,{...N,name:[h,"value"],rules:[{required:!0,message:`Please enter ${y==="percentage"?"percentage":"amount"}`}],children:e.jsx(ze,{min:0,max:y==="percentage"?100:void 0,placeholder:y==="percentage"?"Percentage":"Amount",style:{width:150},formatter:D=>y==="percentage"?`${D}%`:`â‚¹${D}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:D=>{const k=D?Number(D.replace(/[â‚¹%,]/g,"")):0;return isNaN(k)?0:k}})})}}),e.jsx(F.Item,{...N,name:[h,"isActive"],valuePropName:"checked",children:e.jsx(ot,{checkedChildren:"Active",unCheckedChildren:"Inactive"})}),e.jsx(ys,{onClick:()=>f(h)})]},b)),e.jsx(F.Item,{children:e.jsx(q,{type:"dashed",onClick:()=>a(),block:!0,icon:e.jsx(st,{}),children:"Add Admin Discount"})})]})})]}),e.jsxs("div",{style:{marginTop:"24px"},children:[e.jsx(Lt,{level:5,children:"Public Discount Configuration"}),e.jsx($t,{type:"secondary",style:{marginBottom:"16px",display:"block"},children:"Configure available discounts for public stall bookings"}),e.jsx(F.List,{name:"publicDiscountConfig",children:(l,{add:a,remove:f})=>e.jsxs(e.Fragment,{children:[l.map(({key:b,name:h,...N})=>e.jsxs(X,{style:{display:"flex",marginBottom:8},align:"baseline",children:[e.jsx(F.Item,{...N,name:[h,"name"],rules:[{required:!0,message:"Please enter discount name"}],children:e.jsx(G,{placeholder:"Discount",style:{width:150}})}),e.jsx(F.Item,{...N,name:[h,"type"],rules:[{required:!0,message:"Please select type"}],children:e.jsxs(oe,{style:{width:150},children:[e.jsx(oe.Option,{value:"percentage",children:"Percentage (%)"}),e.jsx(oe.Option,{value:"fixed",children:"Fixed Amount (â‚¹)"})]})}),e.jsx(F.Item,{noStyle:!0,shouldUpdate:($,y)=>{var D,k,j,P;return((k=(D=$==null?void 0:$.publicDiscountConfig)==null?void 0:D[h])==null?void 0:k.type)!==((P=(j=y==null?void 0:y.publicDiscountConfig)==null?void 0:j[h])==null?void 0:P.type)},children:({getFieldValue:$})=>{const y=$(["publicDiscountConfig",h,"type"]);return e.jsx(F.Item,{...N,name:[h,"value"],rules:[{required:!0,message:`Please enter ${y==="percentage"?"percentage":"amount"}`}],children:e.jsx(ze,{min:0,max:y==="percentage"?100:void 0,placeholder:y==="percentage"?"Percentage":"Amount",style:{width:150},formatter:D=>y==="percentage"?`${D}%`:`â‚¹${D}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:D=>{const k=D?Number(D.replace(/[â‚¹%,]/g,"")):0;return isNaN(k)?0:k}})})}}),e.jsx(F.Item,{...N,name:[h,"isActive"],valuePropName:"checked",children:e.jsx(ot,{checkedChildren:"Active",unCheckedChildren:"Inactive"})}),e.jsx(ys,{onClick:()=>f(h)})]},b)),e.jsx(F.Item,{children:e.jsx(q,{type:"dashed",onClick:()=>a(),block:!0,icon:e.jsx(st,{}),children:"Add Public Discount"})})]})})]})]}),e.jsxs(W,{className:"settings-card",style:{marginTop:"24px"},children:[e.jsx(Lt,{level:4,children:"Status Settings"}),e.jsx($t,{type:"secondary",style:{marginBottom:"24px",display:"block"},children:"Manage the visibility and status of your exhibition"}),e.jsxs(ne,{gutter:24,children:[e.jsx(z,{span:12,children:e.jsx(F.Item,{name:"status",label:"Status",rules:[{required:!0,message:"Please select status"}],children:e.jsxs(oe,{children:[e.jsx(oe.Option,{value:"draft",children:"Draft"}),e.jsx(oe.Option,{value:"published",children:"Published"}),e.jsx(oe.Option,{value:"completed",children:"Completed"})]})})}),e.jsx(z,{span:12,children:e.jsx(F.Item,{name:"isActive",label:"Active Status",valuePropName:"checked",children:e.jsx(ot,{checkedChildren:"Active",unCheckedChildren:"Inactive"})})})]})]})]})},{Title:zr,Text:oi}=me,ou=({form:t})=>{const{message:s}=jt.useApp(),[n,i]=c.useState([]),[r,l]=c.useState([]),[a,f]=c.useState(0),[b,h]=c.useState({}),N=j=>{const P=localStorage.getItem("token");return{url:`${se.defaults.baseURL}/uploads/${j}`,token:P}};c.useEffect(()=>{const j=t.getFieldValue("headerLogo");if(j){const{url:P,token:u}=N(j);fetch(P,{headers:{authorization:`Bearer ${u}`}}).then(x=>x.blob()).then(x=>{const I=URL.createObjectURL(x);i([{uid:"-1",name:j.split("/").pop()||"logo",status:"done",url:I,thumbUrl:I,type:x.type,response:{path:j}}])}).catch(()=>{i([])})}},[t]),c.useEffect(()=>{const j=t.getFieldValue("sponsorLogos")||[];j.length>0&&Promise.all(j.map(async(P,u)=>{const{url:x,token:I}=N(P);try{const d=await(await fetch(x,{headers:{authorization:`Bearer ${I}`}})).blob(),R=URL.createObjectURL(d);return{uid:`-${u+1}`,name:P.split("/").pop()||`sponsor-${u+1}`,status:"done",url:R,thumbUrl:R,type:d.type,response:{path:P}}}catch{return null}})).then(P=>{l(P.filter(Boolean))})},[t]);const $={name:"file",action:`${se.defaults.baseURL}/exhibitions/upload/logos`,headers:{authorization:`Bearer ${localStorage.getItem("token")}`},maxCount:1,accept:"image/*",fileList:n,listType:"picture-card",showUploadList:{showPreviewIcon:!0,showRemoveIcon:!0},onChange(j){const{status:P,name:u,response:x,uid:I}=j.file;if(P==="uploading"){i([...j.fileList]);return}if(P==="done"&&x){const{url:o,token:d}=N(x.path);f(0),fetch(o,{headers:{authorization:`Bearer ${d}`}}).then(R=>R.blob()).then(R=>{const S=URL.createObjectURL(R);i([{uid:j.file.uid,name:u,status:"done",url:S,thumbUrl:S,type:R.type,response:x}]),s.success(`${u} uploaded successfully`),t.setFieldValue("headerLogo",x.path),x.thumbnail&&t.setFieldValue("headerLogoThumbnail",x.thumbnail)}).catch(()=>{s.error(`${u} preview failed to load`),i([])})}else P==="error"?(s.error(`${u} upload failed.`),i([]),f(0)):P==="removed"&&(i([]),t.setFieldValue("headerLogo",null),t.setFieldValue("headerLogoThumbnail",null),f(0))},customRequest:async j=>{const{onProgress:P,onSuccess:u,onError:x,file:I,action:o,headers:d}=j;try{const R=new FormData;R.append("file",I);const S=new XMLHttpRequest;S.open("POST",o||"",!0),d&&Object.keys(d).forEach(E=>{S.setRequestHeader(E,d[E])}),S.upload.onprogress=E=>{E.lengthComputable&&P&&(P({percent:E.loaded/E.total*100}),f(Math.round(E.loaded/E.total*100)))},S.onload=()=>{if(S.status>=200&&S.status<300)try{const E=JSON.parse(S.response);u==null||u(E,I),f(0)}catch(E){x==null||x(E)}else x==null||x(new Error("Upload failed"))},S.onerror=()=>{f(0),x==null||x(new Error("Upload request failed"))},S.send(R)}catch(R){f(0),x==null||x(R)}},onRemove(){return i([]),t.setFieldValue("headerLogo",null),t.setFieldValue("headerLogoThumbnail",null),f(0),!0},onPreview:async j=>{if(!j.url)return;const P=window.open("");P&&(P.document.write(`
          <img src="${j.url}" style="max-width: 100%; height: auto;" 
               onload="this.style.marginTop = Math.max(0, (window.innerHeight - this.height) / 2) + 'px'"
          />
        `),P.document.head.innerHTML="<title>Image Preview</title>")}},y={name:"file",action:`${se.defaults.baseURL}/exhibitions/upload/sponsors`,headers:{authorization:`Bearer ${localStorage.getItem("token")}`},accept:"image/*",fileList:r,listType:"picture-card",multiple:!0,showUploadList:{showPreviewIcon:!0,showRemoveIcon:!0},onChange(j){const{status:P,name:u,response:x,uid:I}=j.file;if(P==="uploading"){l([...j.fileList]);return}if(P==="done"&&x&&x.paths&&x.paths.length>0){h(S=>{const E={...S};return delete E[I],E});const o=x.paths[0],{url:d,token:R}=N(o);fetch(d,{headers:{authorization:`Bearer ${R}`}}).then(S=>S.blob()).then(S=>{const E=URL.createObjectURL(S),v=[...r],g=v.findIndex(m=>m.uid===j.file.uid),L={uid:j.file.uid,name:u,status:"done",url:E,thumbUrl:E,type:S.type,response:{path:o}};g>-1?v[g]=L:v.push(L),l(v),s.success(`${u} uploaded successfully`);const A=v.filter(m=>{var w;return m.status==="done"&&((w=m.response)==null?void 0:w.path)}).map(m=>m.response.path);if(t.setFieldValue("sponsorLogos",A),x.thumbnails&&x.thumbnails.length>0){const m=t.getFieldValue("sponsorLogoThumbnails")||[];t.setFieldValue("sponsorLogoThumbnails",[...m,...x.thumbnails])}}).catch(()=>{s.error(`${u} preview failed to load`),l(S=>S.filter(E=>E.uid!==j.file.uid))})}else P==="error"?(s.error(`${u} upload failed.`),l(o=>o.filter(d=>d.uid!==j.file.uid)),h(o=>{const d={...o};return delete d[I],d})):P==="removed"&&h(o=>{const d={...o};return delete d[I],d})},customRequest:async j=>{const{onProgress:P,onSuccess:u,onError:x,file:I,action:o,headers:d}=j,R=typeof I=="object"&&"uid"in I?I.uid:String(Date.now());try{const S=new FormData;S.append("file",I);const E=new XMLHttpRequest;E.open("POST",o||"",!0),d&&Object.keys(d).forEach(v=>{E.setRequestHeader(v,d[v])}),E.upload.onprogress=v=>{if(v.lengthComputable&&P){const g=v.loaded/v.total*100;P({percent:g}),h(L=>({...L,[R]:Math.round(g)}))}},E.onload=()=>{if(E.status>=200&&E.status<300)try{const v=JSON.parse(E.response);u==null||u(v,I),h(g=>{const L={...g};return delete L[R],L})}catch(v){x==null||x(v)}else x==null||x(new Error("Upload failed"))},E.onerror=()=>{h(v=>{const g={...v};return delete g[R],g}),x==null||x(new Error("Upload request failed"))},E.send(S)}catch(S){h(E=>{const v={...E};return delete v[R],v}),x==null||x(S)}},onRemove(j){var I;const P=r.filter(o=>o.uid!==j.uid);l(P);const u=P.filter(o=>{var d;return o.status==="done"&&((d=o.response)==null?void 0:d.path)}).map(o=>o.response.path);t.setFieldValue("sponsorLogos",u);const x=t.getFieldValue("sponsorLogoThumbnails")||[];if(x.length>0&&(I=j.response)!=null&&I.path){const o=j.response.path.split("/"),d=o[o.length-1],R=x.filter(S=>!S.includes(d));t.setFieldValue("sponsorLogoThumbnails",R)}return h(o=>{const d={...o};return delete d[j.uid],d}),!0},onPreview:async j=>{if(!j.url)return;const P=window.open("");P&&(P.document.write(`
          <img src="${j.url}" style="max-width: 100%; height: auto;" 
               onload="this.style.marginTop = Math.max(0, (window.innerHeight - this.height) / 2) + 'px'"
          />
        `),P.document.head.innerHTML="<title>Image Preview</title>")}},D=e.jsx("div",{children:a>0?e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(zt,{type:"circle",percent:a,width:80}),e.jsx("div",{style:{marginTop:8},children:"Uploading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(_s,{}),e.jsx("div",{style:{marginTop:8},children:"Upload Logo"})]})}),k=e.jsxs("div",{children:[e.jsx(_s,{}),e.jsx("div",{style:{marginTop:8},children:"Upload Sponsor Logos"})]});return e.jsx("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:e.jsxs(W,{className:"settings-card",children:[e.jsx(zr,{level:4,children:"Header Settings"}),e.jsx(oi,{type:"secondary",style:{marginBottom:"24px",display:"block"},children:"Configure how the exhibition header appears to visitors"}),e.jsxs(ne,{gutter:24,children:[e.jsx(z,{span:24,children:e.jsxs(F.Item,{name:"headerLogo",label:"Header Logo",tooltip:"Upload your exhibition logo (recommended size: 200x200px, max 2MB)",children:[e.jsx(qs,{...$,children:n.length<1&&D}),n.length>0&&a>0&&e.jsx(zt,{percent:a,status:"active",style:{marginTop:8}})]})}),e.jsx(z,{span:24,children:e.jsx(F.Item,{name:"headerTitle",label:"Header Title",rules:[{required:!0,message:"Please enter a header title"},{max:100,message:"Title cannot be longer than 100 characters"}],tooltip:"This title will be prominently displayed at the top of your exhibition page",children:e.jsx(G,{placeholder:"Enter a title for your exhibition header"})})}),e.jsx(z,{span:24,children:e.jsx(F.Item,{name:"headerSubtitle",label:"Header Subtitle",rules:[{max:200,message:"Subtitle cannot be longer than 200 characters"}],tooltip:"A brief tagline or subtitle to provide additional context",children:e.jsx(G,{placeholder:"Enter a subtitle (optional)"})})}),e.jsx(z,{span:24,children:e.jsx(F.Item,{name:"headerDescription",label:"Header Description",rules:[{max:500,message:"Description cannot be longer than 500 characters"}],tooltip:"A detailed description that appears in the header section",children:e.jsx(G.TextArea,{placeholder:"Enter a description for your exhibition header (optional)",rows:4,showCount:!0,maxLength:500})})}),e.jsxs(z,{span:24,children:[e.jsx(Fe,{}),e.jsx(zr,{level:5,children:"Sponsor Logos"}),e.jsx(oi,{type:"secondary",style:{marginBottom:"16px",display:"block"},children:"Add sponsor logos that will be displayed in the exhibition header"}),e.jsxs(F.Item,{name:"sponsorLogos",tooltip:"Upload sponsor logos (recommended size: 150x150px, max 2MB each)",children:[e.jsx(qs,{...y,children:k}),Object.entries(b).map(([j,P])=>{var u;return e.jsxs("div",{style:{marginTop:8,display:"flex",alignItems:"center"},children:[e.jsxs(oi,{style:{marginRight:10,width:150},ellipsis:!0,children:[((u=r.find(x=>x.uid===j))==null?void 0:u.name)||"File",":"]}),e.jsx(zt,{percent:P,status:"active",style:{flex:1}})]},j)})]})]})]})]})})},{Title:Ur,Text:qr}=me,lu=({form:t})=>{const{message:s}=jt.useApp(),[n,i]=c.useState([]),r=a=>{const f=localStorage.getItem("token");return{url:`${se.defaults.baseURL}/uploads/${a}`,token:f}};c.useEffect(()=>{const a=t.getFieldValue("footerLogo");if(a){const{url:f,token:b}=r(a);fetch(f,{headers:{authorization:`Bearer ${b}`}}).then(h=>h.blob()).then(h=>{const N=URL.createObjectURL(h);i([{uid:"-1",name:a.split("/").pop()||"logo",status:"done",url:N,thumbUrl:N,type:h.type,response:{path:a}}])}).catch(()=>{i([])})}},[t]);const l={name:"file",action:`${se.defaults.baseURL}/exhibitions/upload/logos`,headers:{authorization:`Bearer ${localStorage.getItem("token")}`},maxCount:1,accept:"image/*",fileList:n,listType:"picture-card",showUploadList:{showPreviewIcon:!0,showRemoveIcon:!0},onChange(a){const{status:f,name:b,response:h}=a.file;if(f==="uploading"){i([...a.fileList]);return}if(f==="done"&&h){const{url:N,token:$}=r(h.path);fetch(N,{headers:{authorization:`Bearer ${$}`}}).then(y=>y.blob()).then(y=>{const D=URL.createObjectURL(y);i([{uid:a.file.uid,name:b,status:"done",url:D,thumbUrl:D,type:y.type,response:h}]),s.success(`${b} uploaded successfully`),t.setFieldValue("footerLogo",h.path)}).catch(()=>{s.error(`${b} preview failed to load`),i([])})}else f==="error"?(s.error(`${b} upload failed.`),i([])):f==="removed"&&(i([]),t.setFieldValue("footerLogo",null))},onRemove(){return i([]),t.setFieldValue("footerLogo",null),!0},onPreview:async a=>{if(!a.url)return;const f=window.open("");f&&(f.document.write(`
          <img src="${a.url}" style="max-width: 100%; height: auto;" 
               onload="this.style.marginTop = Math.max(0, (window.innerHeight - this.height) / 2) + 'px'"
          />
        `),f.document.head.innerHTML="<title>Image Preview</title>")}};return e.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[e.jsxs(W,{className:"settings-card",children:[e.jsx(Ur,{level:4,children:"Footer Content"}),e.jsx(qr,{type:"secondary",style:{marginBottom:"24px",display:"block"},children:"Configure the footer content and contact information"}),e.jsxs(ne,{gutter:24,children:[e.jsx(z,{span:24,children:e.jsx(F.Item,{name:"footerLogo",label:"Footer Logo",tooltip:"Upload your footer logo (recommended size: 200x200px, max 2MB)",children:e.jsx(qs,{...l,children:n.length<1&&e.jsxs("div",{children:[e.jsx(_s,{}),e.jsx("div",{style:{marginTop:8},children:"Upload Logo"})]})})})}),e.jsx(z,{span:24,children:e.jsx(F.Item,{name:"footerText",label:"Footer Text",rules:[{required:!0,message:"Please enter footer text"},{max:500,message:"Text cannot be longer than 500 characters"}],tooltip:"This text will appear in the footer section of your exhibition page",children:e.jsx(G.TextArea,{rows:4,placeholder:"Enter footer text",showCount:!0,maxLength:500})})}),e.jsx(z,{span:24,children:e.jsx(F.Item,{name:"contactEmail",label:"Contact Email",rules:[{type:"email",message:"Please enter a valid email"},{max:100,message:"Email cannot be longer than 100 characters"}],children:e.jsx(G,{placeholder:"Enter contact email"})})}),e.jsx(z,{span:24,children:e.jsx(F.Item,{name:"contactPhone",label:"Contact Phone",rules:[{pattern:/^[0-9-+()]*$/,message:"Please enter a valid phone number"},{max:20,message:"Phone number cannot be longer than 20 characters"}],children:e.jsx(G,{placeholder:"Enter contact phone number"})})})]})]}),e.jsxs(W,{className:"settings-card",style:{marginTop:"24px"},children:[e.jsx(Ur,{level:4,children:"Footer Links"}),e.jsx(qr,{type:"secondary",style:{marginBottom:"24px",display:"block"},children:"Add useful links to the footer section"}),e.jsx(F.List,{name:"footerLinks",children:(a,{add:f,remove:b})=>e.jsxs(e.Fragment,{children:[a.map(({key:h,name:N,...$})=>e.jsxs(ne,{gutter:16,style:{marginBottom:"16px"},children:[e.jsx(z,{span:11,children:e.jsx(F.Item,{...$,name:[N,"label"],rules:[{required:!0,message:"Please enter link label"}],children:e.jsx(G,{placeholder:"Link Label"})})}),e.jsx(z,{span:12,children:e.jsx(F.Item,{...$,name:[N,"url"],rules:[{required:!0,message:"Please enter URL"},{type:"url",message:"Please enter a valid URL"}],children:e.jsx(G,{placeholder:"URL (e.g., https://example.com)"})})}),e.jsx(z,{span:1,style:{display:"flex",alignItems:"center"},children:e.jsx(ys,{onClick:()=>b(N)})})]},h)),e.jsx(F.Item,{children:e.jsx(q,{type:"dashed",onClick:()=>f(),block:!0,icon:e.jsx(st,{}),children:"Add Footer Link"})})]})})]})]})},{Title:_r,Text:Or}=me,cu=()=>e.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[e.jsxs(W,{className:"settings-card",children:[e.jsx(_r,{level:4,children:"Exhibition Amenities"}),e.jsx(Or,{type:"secondary",style:{marginBottom:"24px",display:"block"},children:"Add amenities and facilities available at your exhibition with their rates"}),e.jsx(F.List,{name:"amenities",children:(t,{add:s,remove:n})=>e.jsxs(e.Fragment,{children:[t.map(({key:i,name:r,...l})=>e.jsxs(ne,{gutter:16,style:{marginBottom:"16px"},children:[e.jsx(z,{span:6,children:e.jsx(F.Item,{...l,name:[r,"type"],rules:[{required:!0,message:"Please select amenity type"}],children:e.jsxs(oe,{placeholder:"Select type",children:[e.jsx(oe.Option,{value:"facility",children:"Facility"}),e.jsx(oe.Option,{value:"service",children:"Service"}),e.jsx(oe.Option,{value:"equipment",children:"Equipment"}),e.jsx(oe.Option,{value:"other",children:"Other"})]})})}),e.jsx(z,{span:6,children:e.jsx(F.Item,{...l,name:[r,"name"],rules:[{required:!0,message:"Please enter amenity name"},{max:100,message:"Name cannot be longer than 100 characters"}],children:e.jsx(G,{placeholder:"Enter name (e.g. Power)"})})}),e.jsx(z,{span:7,children:e.jsx(F.Item,{...l,name:[r,"description"],rules:[{required:!0,message:"Please enter amenity description"},{max:200,message:"Description cannot be longer than 200 characters"}],children:e.jsx(G.TextArea,{placeholder:"Describe the amenity",rows:2,showCount:!0,maxLength:200})})}),e.jsx(z,{span:4,children:e.jsx(F.Item,{...l,name:[r,"rate"],rules:[{required:!0,message:"Please enter rate"},{type:"number",min:0,message:"Rate must be greater than or equal to 0"}],children:e.jsx(ze,{style:{width:"100%"},placeholder:"Enter rate",prefix:"â‚¹",min:0,formatter:a=>`${a}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:a=>{const f=a?Number(a.replace(/\â‚¹\s?|(,*)/g,"")):0;return isNaN(f)?0:f}})})}),e.jsx(z,{span:1,style:{display:"flex",alignItems:"center"},children:e.jsx(ys,{onClick:()=>n(r)})})]},i)),e.jsx(F.Item,{children:e.jsx(q,{type:"dashed",onClick:()=>s(),block:!0,icon:e.jsx(st,{}),children:"Add Amenity"})})]})})]}),e.jsxs(W,{className:"settings-card",style:{marginTop:"24px"},children:[e.jsx(_r,{level:4,children:"Special Requirements"}),e.jsx(Or,{type:"secondary",style:{marginBottom:"24px",display:"block"},children:"Specify any special requirements or accessibility features"}),e.jsx(ne,{gutter:24,children:e.jsx(z,{span:24,children:e.jsx(F.Item,{name:"specialRequirements",rules:[{max:1e3,message:"Requirements cannot be longer than 1000 characters"}],children:e.jsx(G.TextArea,{rows:4,placeholder:"Enter any special requirements or accessibility features",showCount:!0,maxLength:1e3})})})})]})]}),Qa=({initialValues:t,onSubmit:s,submitText:n="Submit"})=>{const[i]=F.useForm(),r=a=>{s(a)},l=[{key:"general",label:"General",children:e.jsx(au,{form:i})},{key:"header",label:"Header",children:e.jsx(ou,{form:i})},{key:"footer",label:"Footer",children:e.jsx(lu,{form:i})},{key:"amenities",label:"Amenities",children:e.jsx(cu,{form:i})}];return e.jsx(F,{form:i,layout:"vertical",initialValues:t,onFinish:r,style:{height:"100%"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx("div",{style:{flex:1,marginBottom:"24px"},children:e.jsx(ct,{defaultActiveKey:"general",items:l,type:"card"})}),e.jsx("div",{style:{textAlign:"right",borderTop:"1px solid #f0f0f0",paddingTop:"24px"},children:e.jsx(q,{type:"primary",htmlType:"submit",children:n})})]})})},du=()=>{const t=Se(),s=Me(),n=async i=>{var r;try{const[l,a]=i.dateRange,f={name:i.name,description:i.description,venue:i.venue,startDate:l.toISOString(),endDate:a.toISOString(),status:i.status||"draft",isActive:i.isActive??!0,invoicePrefix:i.invoicePrefix,stallRates:i.stallRates||[],dimensions:{width:100,height:100},taxConfig:i.taxConfig||[],discountConfig:i.discountConfig||[],publicDiscountConfig:i.publicDiscountConfig||[],companyName:i.companyName,companyContactNo:i.companyContactNo,companyEmail:i.companyEmail,companyAddress:i.companyAddress,companyWebsite:i.companyWebsite,companyPAN:i.companyPAN,companyGST:i.companyGST,companySAC:i.companySAC,companyCIN:i.companyCIN,termsAndConditions:i.termsAndConditions,piInstructions:i.piInstructions,bankName:i.bankName,bankBranch:i.bankBranch,bankIFSC:i.bankIFSC,bankAccountName:i.bankAccountName,bankAccount:i.bankAccount,headerTitle:i.headerTitle,headerSubtitle:i.headerSubtitle,headerDescription:i.headerDescription,headerLogo:i.headerLogo,sponsorLogos:i.sponsorLogos||[],footerText:i.footerText,footerLogo:i.footerLogo,contactEmail:i.contactEmail,contactPhone:i.contactPhone,footerLinks:i.footerLinks||[],amenities:((r=i.amenities)==null?void 0:r.map(N=>({type:N.type,name:N.name,description:N.description,rate:N.rate})))||[],specialRequirements:i.specialRequirements},b=await s(wn(f)).unwrap();ee.success("Exhibition created successfully");const h=b._id||b.id;h?t(_e({_id:h,id:h,name:f.name}),{state:{exhibitionId:h}}):(ee.error("Exhibition ID not found in response"),t("/exhibition"))}catch(l){ee.error(l.message||"Failed to create exhibition"),console.error("Error creating exhibition:",l)}};return e.jsx(W,{title:"Create New Exhibition",children:e.jsx(Qa,{onSubmit:n,submitText:"Create Exhibition"})})},{Title:Vr,Text:Ke,Paragraph:li}=me,ci=()=>{const t=Se();return e.jsxs("div",{style:{marginBottom:"24px",position:"sticky",top:"16px",zIndex:10},children:[e.jsx(q,{icon:e.jsx(Ot,{}),onClick:()=>t("/exhibition"),type:"default",size:"large",style:{borderRadius:"8px",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",background:"white",borderColor:"transparent",fontWeight:500,padding:"0 16px",height:"42px",display:"flex",alignItems:"center",transition:"all 0.3s ease"},className:"back-button-hover",children:e.jsx("span",{style:{marginLeft:8},children:"Back to List"})}),e.jsx("style",{children:`
        .back-button-hover:hover {
          transform: translateX(-5px);
          box-shadow: 0 4px 12px rgba(0,0,0,0.1);
          background: #f0f5ff;
          border-color: #d6e4ff;
        }
      `})]})},uu=()=>{const{id:t}=dt(),s=Se(),n=Me(),{currentExhibition:i,halls:r,stalls:l,loading:a}=ye(j=>j.exhibition),[f,b]=c.useState(0);c.useEffect(()=>{t&&(n(mt(t)),n(Pt(t)),n(At({exhibitionId:t})))},[t,n]),c.useEffect(()=>{i&&N()},[i]);const h=()=>{if(!i)return{hallCount:0,stallCount:0,bookedStallCount:0,availableStallCount:0};const j=r.length||0;let P=l.length||0,u=l.filter(x=>x.status==="booked"||x.status==="reserved").length;return P===0&&(i.stalls&&i.stalls.length>0?(P=i.stalls.length,u=i.stalls.filter(x=>x.status==="booked"||x.status==="reserved").length):(P=i.stallCount||0,u=i.bookedStallCount||0)),{hallCount:j,stallCount:P,bookedStallCount:u,availableStallCount:P-u}},N=()=>{if(!i)return 0;const j=new Date,P=new Date(i.startDate),u=new Date(i.endDate);if(j<P)return b(0);if(j>u)return b(100);const x=u.getTime()-P.getTime(),I=j.getTime()-P.getTime();b(Math.round(I/x*100))},$=j=>{switch(j.toLowerCase()){case"published":return"#52c41a";case"draft":return"#faad14";case"completed":return"#1890ff";default:return"#d9d9d9"}},y=()=>{if(!i)return{text:"",count:0,isPast:!1};const j=new Date,P=new Date(i.startDate),u=new Date(i.endDate);return j>u?{text:"Ended",count:Math.ceil((j.getTime()-u.getTime())/864e5),isPast:!0}:j>=P&&j<=u?{text:"Days Remaining",count:Math.ceil((u.getTime()-j.getTime())/864e5),isPast:!1}:{text:"Days Until Start",count:Math.ceil((P.getTime()-j.getTime())/(1e3*60*60*24)),isPast:!1}},D=j=>{s(_e(i,j))};if(a)return e.jsxs("div",{style:{padding:"24px"},children:[e.jsx(ci,{}),e.jsx(W,{children:e.jsx(ga,{active:!0,avatar:!0,paragraph:{rows:6}})})]});if(!i)return e.jsxs("div",{style:{padding:"24px"},children:[e.jsx(ci,{}),e.jsx(W,{children:e.jsxs("div",{style:{textAlign:"center",padding:"40px 0"},children:[e.jsx(Qs,{style:{fontSize:"48px",color:"#d9d9d9",marginBottom:"16px"}}),e.jsx(Vr,{level:4,children:"Exhibition not found"}),e.jsx(li,{type:"secondary",children:"The exhibition you are looking for does not exist or has been removed."})]})})]});const k=y();return e.jsxs("div",{style:{padding:"24px",background:"#f5f7fa",minHeight:"calc(100vh - 64px)"},children:[e.jsx(ci,{}),e.jsx(W,{className:"exhibition-header-card",style:{marginBottom:"24px",borderRadius:"12px",overflow:"hidden"},bodyStyle:{padding:"0"},children:e.jsx("div",{style:{background:"linear-gradient(135deg, #1a365d 0%, #44337a 100%)",padding:"40px 24px",position:"relative"},children:e.jsxs(ne,{gutter:[24,24],align:"middle",children:[e.jsxs(z,{xs:24,md:16,children:[e.jsx(Vr,{level:2,style:{color:"white",marginBottom:"8px",marginTop:0},children:i.name}),e.jsx(li,{style:{color:"rgba(255, 255, 255, 0.8)",fontSize:"16px",marginBottom:"24px"},children:i.description}),e.jsxs(X,{split:e.jsx(Fe,{type:"vertical",style:{background:"rgba(255,255,255,0.3)"}}),children:[e.jsxs(X,{children:[e.jsx(Et,{style:{color:"rgba(255,255,255,0.8)"}}),e.jsxs(Ke,{style:{color:"rgba(255,255,255,0.8)"},children:[Ae(i.startDate).format("MMM D, YYYY")," - ",Ae(i.endDate).format("MMM D, YYYY")]})]}),i.venue&&e.jsxs(X,{children:[e.jsx(ns,{style:{color:"rgba(255,255,255,0.8)"}}),e.jsx(Ke,{style:{color:"rgba(255,255,255,0.8)"},children:i.venue})]})]})]}),e.jsx(z,{xs:24,md:8,children:e.jsxs(W,{style:{borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",position:"relative",overflow:"visible"},children:[e.jsx("div",{style:{position:"absolute",top:"-12px",right:"-12px",zIndex:2,background:$(i.status),color:"white",padding:"4px 12px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",boxShadow:"0 2px 6px rgba(0,0,0,0.15)"},children:i.status.toUpperCase()}),e.jsx(ve,{title:k.text,value:k.count,suffix:"days",valueStyle:{color:k.isPast?"#8c8c8c":"#1890ff",fontWeight:600},prefix:e.jsx(Qe,{})}),e.jsx(Fe,{style:{margin:"16px 0"}}),e.jsx("div",{style:{marginBottom:"8px"},children:e.jsx(Ke,{type:"secondary",children:"Exhibition Progress"})}),e.jsx(zt,{percent:f,status:f===100?"success":"active",strokeColor:{"0%":"#108ee9","100%":"#87d068"}})]})})]})})}),e.jsxs(ne,{gutter:[16,16],style:{marginBottom:"24px"},children:[e.jsx(z,{xs:24,sm:8,children:e.jsx(q,{type:"primary",icon:e.jsx(rs,{}),onClick:()=>D(`${t}/layout`),block:!0,size:"large",style:{height:"48px"},children:"Manage Layout"})}),e.jsx(z,{xs:24,sm:8,children:e.jsx(q,{icon:e.jsx(Ss,{}),onClick:()=>D(`${t}/edit`),block:!0,size:"large",style:{height:"48px"},children:"Edit Exhibition"})}),e.jsx(z,{xs:24,sm:8,children:e.jsx(q,{icon:e.jsx(Mt,{}),onClick:()=>window.open(Kn(i),"_blank"),block:!0,size:"large",style:{height:"48px"},disabled:i.status!=="published",children:"View Public Page"})})]}),e.jsxs(ne,{gutter:[24,24],children:[e.jsx(z,{xs:24,lg:16,children:e.jsxs(W,{title:"Exhibition Details",style:{borderRadius:"12px",height:"100%"},children:[e.jsxs(ne,{gutter:[24,24],children:[e.jsxs(z,{xs:24,sm:12,children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx(Ke,{type:"secondary",style:{display:"block",marginBottom:"8px"},children:"Start Date"}),e.jsx(Ke,{strong:!0,style:{fontSize:"16px"},children:Ae(i.startDate).format("MMMM D, YYYY")})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx(Ke,{type:"secondary",style:{display:"block",marginBottom:"8px"},children:"End Date"}),e.jsx(Ke,{strong:!0,style:{fontSize:"16px"},children:Ae(i.endDate).format("MMMM D, YYYY")})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx(Ke,{type:"secondary",style:{display:"block",marginBottom:"8px"},children:"Created At"}),e.jsx(Ke,{strong:!0,style:{fontSize:"16px"},children:Ae(i.createdAt).format("MMMM D, YYYY")})]})]}),e.jsxs(z,{xs:24,sm:12,children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx(Ke,{type:"secondary",style:{display:"block",marginBottom:"8px"},children:"Status"}),e.jsx(le,{color:$(i.status),style:{padding:"4px 12px",borderRadius:"4px",fontSize:"14px"},children:i.status.toUpperCase()})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx(Ke,{type:"secondary",style:{display:"block",marginBottom:"8px"},children:"Active Status"}),e.jsx(le,{color:i.isActive?"#52c41a":"#f5222d",style:{padding:"4px 12px",borderRadius:"4px",fontSize:"14px"},children:i.isActive?"ACTIVE":"INACTIVE"})]}),i.venue&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx(Ke,{type:"secondary",style:{display:"block",marginBottom:"8px"},children:"Venue"}),e.jsx(Ke,{strong:!0,style:{fontSize:"16px"},children:i.venue})]})]})]}),e.jsx(Fe,{}),e.jsxs("div",{children:[e.jsx(Ke,{type:"secondary",style:{display:"block",marginBottom:"8px"},children:"Description"}),e.jsx(li,{children:i.description||"No description provided."})]})]})}),e.jsxs(z,{xs:24,lg:8,children:[e.jsx(W,{title:"Exhibition Stats",style:{borderRadius:"12px",marginBottom:"24px"},children:e.jsxs(ne,{gutter:[16,24],children:[e.jsx(z,{span:12,children:e.jsx(ve,{title:"Halls",value:h().hallCount,prefix:e.jsx(Ks,{})})}),e.jsx(z,{span:12,children:e.jsx(ve,{title:"Stalls",value:h().stallCount,prefix:e.jsx(lt,{})})}),e.jsx(z,{span:12,children:e.jsx(ve,{title:"Booked Stalls",value:h().bookedStallCount,prefix:e.jsx(Te,{})})}),e.jsx(z,{span:12,children:e.jsx(ve,{title:"Available Stalls",value:h().availableStallCount,prefix:e.jsx(yo,{})})})]})}),e.jsx(W,{title:"Created By",style:{borderRadius:"12px"},children:i.createdBy?e.jsxs(X,{children:[e.jsx(yt,{icon:e.jsx(Ce,{})}),e.jsx(Ke,{children:i.createdByName||"Administrator"})]}):e.jsx(Ke,{type:"secondary",children:"Information not available"})})]})]})]})},hu=()=>{var D;const{message:t}=jt.useApp(),{id:s}=dt(),i=(D=Vt().state)==null?void 0:D.exhibitionId,r=Se(),l=Me(),{currentExhibition:a,loading:f,error:b}=ye(k=>k.exhibition),[h,N]=c.useState(!1);c.useEffect(()=>{(async()=>{if(!i){t.error("Exhibition ID not found"),r("/exhibition");return}try{await l(mt(i)).unwrap()}catch(j){t.error(j.message||"Failed to fetch exhibition"),r("/exhibition")}finally{N(!0)}})()},[i,l,t,r]),c.useEffect(()=>{b&&t.error(b)},[b,t]);const $=async k=>{var j;if(!(!i||!a))try{const[P,u]=k.dateRange,x={name:k.name,description:k.description,venue:k.venue,startDate:P.toISOString(),endDate:u.toISOString(),status:k.status,isActive:k.isActive,invoicePrefix:k.invoicePrefix,stallRates:k.stallRates||[],dimensions:a.dimensions,taxConfig:k.taxConfig||[],discountConfig:k.discountConfig||[],publicDiscountConfig:k.publicDiscountConfig||[],companyName:k.companyName,companyContactNo:k.companyContactNo,companyEmail:k.companyEmail,companyAddress:k.companyAddress,companyWebsite:k.companyWebsite,companyPAN:k.companyPAN,companyGST:k.companyGST,companySAC:k.companySAC,companyCIN:k.companyCIN,termsAndConditions:k.termsAndConditions,piInstructions:k.piInstructions,bankName:k.bankName,bankBranch:k.bankBranch,bankIFSC:k.bankIFSC,bankAccountName:k.bankAccountName,bankAccount:k.bankAccount,headerTitle:k.headerTitle,headerSubtitle:k.headerSubtitle,headerDescription:k.headerDescription,headerLogo:k.headerLogo,sponsorLogos:k.sponsorLogos||[],footerText:k.footerText,footerLogo:k.footerLogo,contactEmail:k.contactEmail,contactPhone:k.contactPhone,footerLinks:k.footerLinks||[],amenities:((j=k.amenities)==null?void 0:j.map(I=>({type:I.type,name:I.name,description:I.description,rate:I.rate})))||[],specialRequirements:k.specialRequirements};await l(Sn({id:i,data:x})).unwrap(),t.success("Exhibition updated successfully"),r(_e(a),{state:{exhibitionId:i}})}catch(P){t.error(P.message||"Failed to update exhibition")}};if(!h)return e.jsx(W,{loading:!0});if(!i)return e.jsx(Hn,{to:"/exhibition",replace:!0});if(f||!a)return e.jsx(W,{loading:!0});const y={name:a.name,description:a.description,venue:a.venue,dateRange:[Ae(a.startDate),Ae(a.endDate)],status:a.status,isActive:a.isActive,invoicePrefix:a.invoicePrefix,stallRates:a.stallRates||[],taxConfig:a.taxConfig||[],discountConfig:a.discountConfig||[],publicDiscountConfig:a.publicDiscountConfig||[],companyName:a.companyName,companyContactNo:a.companyContactNo,companyEmail:a.companyEmail,companyAddress:a.companyAddress,companyWebsite:a.companyWebsite,companyPAN:a.companyPAN,companyGST:a.companyGST,companySAC:a.companySAC,companyCIN:a.companyCIN,termsAndConditions:a.termsAndConditions,piInstructions:a.piInstructions,bankName:a.bankName,bankBranch:a.bankBranch,bankIFSC:a.bankIFSC,bankAccountName:a.bankAccountName,bankAccount:a.bankAccount,headerTitle:a.headerTitle,headerSubtitle:a.headerSubtitle,headerDescription:a.headerDescription,headerLogo:a.headerLogo,sponsorLogos:a.sponsorLogos||[],footerText:a.footerText,footerLogo:a.footerLogo,contactEmail:a.contactEmail,contactPhone:a.contactPhone,footerLinks:a.footerLinks||[],amenities:a.amenities||[],specialRequirements:a.specialRequirements};return e.jsx(W,{title:"Edit Exhibition",extra:e.jsx("a",{onClick:()=>r(_e(a),{state:{exhibitionId:i}}),children:"Back to Details"}),children:e.jsx(Qa,{initialValues:y,onSubmit:$,submitText:"Update Exhibition"})})},xu=({width:t,height:s,scale:n=1,position:i={x:0,y:0},isSelected:r=!1,onSelect:l=()=>{},onChange:a=()=>{},children:f,isEditable:b=!0})=>{const h=$=>{b&&(l(),$.cancelBubble=!0)},N=Re.useMemo(()=>{const $=[];for(let D=0;D<=t;D+=5)$.push(e.jsx(Mn,{points:[D,0,D,s],stroke:"#e8e8e8",strokeWidth:1/n,dash:[5/n]},`v${D}`));for(let D=0;D<=s;D+=5)$.push(e.jsx(Mn,{points:[0,D,t,D],stroke:"#e8e8e8",strokeWidth:1/n,dash:[5/n]},`h${D}`));return $},[t,s,n]);return e.jsxs(ks,{x:i.x,y:i.y,width:t,height:s,onClick:h,children:[e.jsx(Wn,{width:t,height:s,fill:"#ffffff",stroke:r&&b?"#1890ff":"#d9d9d9",strokeWidth:r&&b?2/n:1/n,shadowColor:"rgba(0,0,0,0.1)",shadowBlur:10/n,shadowOffset:{x:0,y:0},shadowOpacity:.5,cornerRadius:4/n}),e.jsx(ks,{children:N}),e.jsx(Hs,{text:`${t}m Ã— ${s}m`,fontSize:14/n,fill:"#666666",x:5,y:5}),f]})},pu=({visible:t,width:s,height:n,onCancel:i,onSubmit:r})=>{const[l]=F.useForm();Re.useEffect(()=>{t&&l.setFieldsValue({width:s,height:n})},[t,s,n,l]);const a=()=>{l.validateFields().then(f=>{r(f),l.resetFields()})};return e.jsx(fe,{title:"Edit Exhibition Space",open:t,onCancel:()=>{l.resetFields(),i()},onOk:a,destroyOnClose:!0,children:e.jsxs(F,{form:l,layout:"vertical",initialValues:{width:s,height:n},children:[e.jsx(F.Item,{name:"width",label:"Width (meters)",rules:[{required:!0,message:"Please enter width"},{type:"number",min:10,message:"Width must be at least 10 meters"}],children:e.jsx(ze,{min:10,max:1e3,style:{width:"100%"},placeholder:"Enter width in meters"})}),e.jsx(F.Item,{name:"height",label:"Height (meters)",rules:[{required:!0,message:"Please enter height"},{type:"number",min:10,message:"Height must be at least 10 meters"}],children:e.jsx(ze,{min:10,max:1e3,style:{width:"100%"},placeholder:"Enter height in meters"})})]})})},Ga=({hall:t,isSelected:s=!1,onSelect:n,onChange:i,scale:r=1,position:l={x:0,y:0},exhibitionWidth:a=100,exhibitionHeight:f=100,isStallMode:b=!1})=>{const h=Re.useRef(null),N=Re.useRef(null),$=Re.useMemo(()=>{const u=[],{width:x,height:I}=t.dimensions,o=1;for(let d=0;d<=x;d+=o)u.push(e.jsx(Mn,{points:[d,0,d,I],stroke:"#ddd",strokeWidth:1/r,dash:[2/r,2/r],listening:!1},`v${d}`));for(let d=0;d<=I;d+=o)u.push(e.jsx(Mn,{points:[0,d,x,d],stroke:"#ddd",strokeWidth:1/r,dash:[2/r,2/r],listening:!1},`h${d}`));return u},[t.dimensions.width,t.dimensions.height,r]);Re.useEffect(()=>{var u;s&&N.current&&h.current&&(N.current.nodes([h.current]),(u=N.current.getLayer())==null||u.batchDraw())},[s]);const y=u=>{u.cancelBubble=!0;const x=u.target,I=x.x(),o=x.y(),d=Math.max(0,Math.min(I,a-t.dimensions.width)),R=Math.max(0,Math.min(o,f-t.dimensions.height));x.x(Math.round(d)),x.y(Math.round(R))},D=u=>{u.cancelBubble=!0;const x=u.target,I=Math.max(0,Math.min(x.x(),a-t.dimensions.width)),o=Math.max(0,Math.min(x.y(),f-t.dimensions.height));i==null||i({...t,_id:t._id,id:t.id||t._id,exhibitionId:t.exhibitionId,dimensions:{...t.dimensions,x:Math.round(I),y:Math.round(o)}})},k=u=>{u.cancelBubble=!0},j=u=>{if(!h.current)return;const x=h.current,I=x.scaleX(),o=x.scaleY();x.scaleX(1),x.scaleY(1);const d=Math.round(x.width()*I),R=Math.round(x.height()*o),S=x.x(),E=x.y(),v=Math.max(0,Math.min(S,a-d)),g=Math.max(0,Math.min(E,f-R));i==null||i({...t,_id:t._id,id:t.id||t._id,exhibitionId:t.exhibitionId,dimensions:{x:v,y:g,width:Math.max(5,Math.min(d,a-v)),height:Math.max(5,Math.min(R,f-g))}})},P=u=>{u.cancelBubble=!0,n==null||n(t)};return e.jsxs(ks,{ref:h,x:t.dimensions.x,y:t.dimensions.y,width:t.dimensions.width,height:t.dimensions.height,draggable:!b&&!!i,onClick:P,onTap:P,onDragStart:k,onDragMove:y,onDragEnd:D,onTransformEnd:j,children:[e.jsx(Wn,{width:t.dimensions.width,height:t.dimensions.height,fill:"#ffffff",stroke:s?"#1890ff":"#d9d9d9",strokeWidth:s?2/r:1/r,shadowColor:"rgba(0,0,0,0.1)",shadowBlur:5/r,shadowOffset:{x:2/r,y:2/r},shadowOpacity:.5}),e.jsx(ks,{children:$}),e.jsx(Hs,{text:t.name,fontSize:14/r,fill:"#000000",width:t.dimensions.width,align:"center",y:t.dimensions.height/2-7/r})]})},mu=t=>{if(!t)return"";const s=window.location.origin,n=t.replace(/^\/?(api\/uploads\/)?/,"");if(n.includes("fixtures/"))return`${s}/api/uploads/${n}`;const i=localStorage.getItem("token");return i?`${s}/api/uploads/${n}?token=${i}`:""},Ka=({fixture:t,isSelected:s=!1,onSelect:n,onChange:i,scale:r=1,position:l={x:0,y:0},exhibitionWidth:a=100,exhibitionHeight:f=100,isEditable:b=!0})=>{const h=Re.useRef(null),N=Re.useRef(null),[$,y]=c.useState("");c.useEffect(()=>{if(t.icon){const o=mu(t.icon);y(o)}else y("")},[t.icon]);const[D]=sl($);Re.useEffect(()=>{var o;s&&N.current&&h.current&&(N.current.nodes([h.current]),(o=N.current.getLayer())==null||o.batchDraw())},[s]);const k=o=>{o.cancelBubble=!0},j=o=>{o.cancelBubble=!0;const d=o.target,R=d.x(),S=d.y(),E=Math.max(0,Math.min(R,a-t.dimensions.width)),v=Math.max(0,Math.min(S,f-t.dimensions.height));d.x(Math.round(E)),d.y(Math.round(v))},P=o=>{o.cancelBubble=!0;const d=o.target,R=d.x(),S=d.y(),E=Math.max(0,Math.min(R,a-t.dimensions.width)),v=Math.max(0,Math.min(S,f-t.dimensions.height)),g=t._id||t.id;i==null||i({...t,_id:g,id:g,exhibitionId:t.exhibitionId,position:{x:Math.round(E),y:Math.round(v)}})},u=o=>{if(!h.current)return;const d=h.current,R=d.scaleX(),S=d.scaleY(),E=d.rotation();d.scaleX(1),d.scaleY(1);const v=Math.round(t.dimensions.width*R),g=Math.round(t.dimensions.height*S),L=d.x(),A=d.y(),m=Math.max(0,Math.min(L,a-v)),w=Math.max(0,Math.min(A,f-g)),M=t._id||t.id;i==null||i({...t,_id:M,id:M,exhibitionId:t.exhibitionId,position:{x:m,y:w},dimensions:{width:Math.max(.5,Math.min(v,a-m)),height:Math.max(.5,Math.min(g,f-w))},rotation:E})},x=o=>{o.cancelBubble=!0,n==null||n(t)},I=()=>{const o=t.borderColor||(s?"#1890ff":"#d9d9d9"),d=t.borderRadius!==void 0?t.borderRadius/r:3/r;return D?e.jsx(il,{image:D,width:t.dimensions.width,height:t.dimensions.height,fill:t.color||"#ffffff",stroke:o,strokeWidth:s?2/r:1/r,cornerRadius:d,shadowColor:"rgba(0,0,0,0.1)",shadowBlur:5/r,shadowOffset:{x:2/r,y:2/r},shadowOpacity:.5}):e.jsx(Wn,{width:t.dimensions.width,height:t.dimensions.height,fill:t.color||"#f0f2f5",stroke:o,strokeWidth:s?2/r:1/r,cornerRadius:d,shadowColor:"rgba(0,0,0,0.1)",shadowBlur:5/r,shadowOffset:{x:2/r,y:2/r},shadowOpacity:.5})};return e.jsxs(e.Fragment,{children:[e.jsxs(ks,{ref:h,x:t.position.x,y:t.position.y,width:t.dimensions.width,height:t.dimensions.height,rotation:t.rotation||0,draggable:b&&!!i,onClick:x,onTap:x,onDragStart:k,onDragMove:j,onDragEnd:P,onTransformEnd:u,children:[I(),t.name&&t.showName!==!1&&e.jsx(Hs,{text:t.name,fontSize:12/r,fill:"#000000",width:t.dimensions.width,align:"center",y:-16/r})]}),s&&b&&e.jsx(nl,{ref:N,rotateEnabled:!0,enabledAnchors:["top-left","top-right","bottom-left","bottom-right"],boundBoxFunc:(o,d)=>d.width<.5||d.height<.5?o:d})]})},gu=({visible:t,x:s,y:n,onExhibitionClick:i,onHallClick:r,onStallClick:l,onFixtureClick:a,onClose:f})=>{if(!t)return null;const b=[{key:"exhibition",icon:e.jsx(rs,{}),label:"Exhibition Space",onClick:()=>{i(),f()}},{key:"hall",icon:e.jsx(Ks,{}),label:"Add Hall",onClick:()=>{r(),f()}}];return l&&b.push({key:"stall",icon:e.jsx(lt,{}),label:"Add Stall",onClick:()=>{l(),f()}}),a&&b.push({key:"fixture",icon:e.jsx(Rn,{}),label:"Add Fixture",onClick:()=>{a(),f()}}),e.jsx("div",{style:{position:"fixed",top:n,left:s,zIndex:1e3,boxShadow:"0 2px 8px rgba(0,0,0,0.15)",borderRadius:"4px",backgroundColor:"#fff",width:"200px"},children:e.jsx(at,{items:b})})},fu=({stall:t,isSelected:s=!1,onSelect:n,onChange:i,hallWidth:r=0,hallHeight:l=0,hallX:a=0,hallY:f=0,scale:b=1})=>{const h=c.useRef(null),[N,$]=c.useState(!1),[y,D]=c.useState(!1),[k,j]=c.useState(!1);c.useEffect(()=>{j(window.innerWidth<768);const w=()=>{j(window.innerWidth<768)};return window.addEventListener("resize",w),()=>window.removeEventListener("resize",w)},[]),c.useEffect(()=>{if(N)D(!0);else{const w=setTimeout(()=>{D(!1)},100);return()=>clearTimeout(w)}},[N]),c.useEffect(()=>{if(N&&h.current){if(k&&!s)return;h.current.getStage()&&h.current.moveToTop()}},[N,s,k]);const P=s||t.isSelected,u=c.useCallback(w=>{switch(w){case"available":return"#52c41a";case"booked":return"#faad14";case"reserved":return"#1890ff";default:return"#d9d9d9"}},[]),x=c.useCallback(w=>{switch(w){case"available":return"rgba(82, 196, 26, 0.2)";case"booked":return"rgba(250, 173, 20, 0.2)";case"reserved":return"rgba(24, 144, 255, 0.2)";default:return"rgba(217, 217, 217, 0.2)"}},[]),I=c.useCallback(w=>{w.cancelBubble=!0;const M=w.target,T=M.x()-a,p=M.y()-f,C=Math.max(0,Math.min(T,r-t.dimensions.width)),B=Math.max(0,Math.min(p,l-t.dimensions.height));M.x(Math.round(C+a)),M.y(Math.round(B+f))},[a,f,r,l,t.dimensions.width,t.dimensions.height]),o=c.useCallback(w=>{if(w.cancelBubble=!0,!i)return;const M=w.target,T=M.x()-a,p=M.y()-f,C=Math.max(0,Math.min(T,r-t.dimensions.width)),B=Math.max(0,Math.min(p,l-t.dimensions.height));i({...t,id:t.id||t._id,_id:t._id||t.id,dimensions:{...t.dimensions,x:Math.round(C),y:Math.round(B)}})},[i,a,f,r,l,t]),d=c.useCallback(w=>{w.cancelBubble=!0},[]),R=c.useCallback(w=>{w.cancelBubble=!0,n&&n()},[n]),S=c.useCallback(()=>{k&&!P||$(!0)},[k,P]),E=c.useCallback(()=>{$(!1)},[]),v={x:0,y:0,width:10,height:10},g=t.dimensions||v,L=t.typeName||"Standard";t.ratePerSqm*g.width*g.height;const A=0,m=c.useMemo(()=>t.status!=="available"&&t.companyName?`${L} - ${g.width}Ã—${g.height}m - ${t.companyName}`:`${L} - ${g.width}Ã—${g.height}m`,[L,g.width,g.height,t.status,t.companyName]);return e.jsxs(ks,{ref:h,x:g.x+a,y:g.y+f,width:g.width,height:g.height,draggable:!!i,onClick:R,onTap:R,onDragStart:d,onDragMove:I,onDragEnd:o,opacity:t.status==="available"?1:.7,cursor:t.status==="available"?"pointer":"default",onMouseEnter:S,onMouseLeave:E,listening:!k||t.status==="available",transformsEnabled:k?"position":"all",children:[e.jsx(Wn,{width:g.width,height:g.height,fill:P?"rgba(24, 144, 255, 0.1)":x(t.status),stroke:P?"#1890ff":u(t.status),strokeWidth:P?2/b:1/b,shadowColor:"rgba(0,0,0,0.1)",shadowBlur:k?2:3,shadowOffset:{x:1,y:1},shadowOpacity:.3,rotation:A,perfectDrawEnabled:!0,transformsEnabled:"all",cornerRadius:.05}),e.jsx(Hs,{text:t.number,fontSize:Math.min(g.width,g.height)*.25,fill:"#000000",width:g.width,height:g.height,align:"center",verticalAlign:"middle",transformsEnabled:"position",perfectDrawEnabled:!0,fontStyle:"bold"}),P&&e.jsx(rl,{x:g.width-2,y:2,radius:1.5,fill:"#1890ff",stroke:"#ffffff",strokeWidth:.3/b,transformsEnabled:"position"}),y&&e.jsxs(al,{x:g.width/2,y:0,opacity:1,children:[e.jsx(ol,{fill:"rgba(0, 0, 0, 1.0)",cornerRadius:.5,pointerDirection:"down",pointerWidth:4,pointerHeight:2,lineJoin:"round",y:-7}),e.jsx(Hs,{text:m,fontSize:1.2,fill:"#ffffff",align:"center",padding:2,y:-7,offsetY:0,width:Math.max(m.length*.7,25),height:3,verticalAlign:"middle"})]})]})},Xi=c.memo(fu),Js=({width:t,height:s,exhibitionWidth:n=100,exhibitionHeight:i=100,halls:r=[],stalls:l=[],fixtures:a=[],selectedHall:f=null,selectedFixture:b=null,onSelectHall:h=()=>{},onSelectFixture:N=()=>{},onHallChange:$=()=>{},onFixtureChange:y=()=>{},onExhibitionChange:D=()=>{},onAddHall:k=()=>{},onAddStall:j=()=>{},onAddFixture:P=()=>{},children:u,isStallMode:x=!1,isFixtureMode:I=!1})=>{const o=c.useRef(null),d=c.useRef(null),[R,S]=c.useState(1),[E,v]=c.useState({x:0,y:0}),[g,L]=c.useState(!1),[A,m]=c.useState(!1),[w,M]=c.useState({visible:!1,x:0,y:0}),[T,p]=c.useState(!1),[C,B]=c.useState(!1),[U,Y]=c.useState(!1);c.useEffect(()=>{const J=()=>{Y(window.innerWidth<768)};return J(),window.addEventListener("resize",J),()=>{window.removeEventListener("resize",J)}},[]);const Q=c.useCallback(J=>{if(J.evt.preventDefault(),!o.current)return;const ie=o.current,xe=R,ge=ie.getPointerPosition(),Ie={x:(ge.x-ie.x())/xe,y:(ge.y-ie.y())/xe},Be=1.15,Ze=J.evt.deltaY<0?xe*Be:xe/Be,vt=Math.min(Math.max(.1,Ze),20),nt={x:ge.x-Ie.x*vt,y:ge.y-Ie.y*vt};S(vt),v(nt)},[R]),K=c.useCallback(()=>{if(!o.current)return;const J=o.current,ie=Math.min(R*1.15,20),xe=J.width()/2,ge=J.height()/2,Ie={x:(xe-E.x)/R,y:(ge-E.y)/R},Be={x:xe-Ie.x*ie,y:ge-Ie.y*ie};S(ie),v(Be)},[R,E]),V=c.useCallback(()=>{if(!o.current)return;const J=o.current,ie=Math.max(R/1.15,.1),xe=J.width()/2,ge=J.height()/2,Ie={x:(xe-E.x)/R,y:(ge-E.y)/R},Be={x:xe-Ie.x*ie,y:ge-Ie.y*ie};S(ie),v(Be)},[R,E]),_=c.useCallback(J=>{J.target===o.current&&(M({...w,visible:!1}),m(!0),d.current&&U&&d.current.hitGraphEnabled(!1))},[w,U]),H=c.useCallback(J=>{J.target===o.current&&U&&d.current&&(J.cancelBubble=!0)},[U]),te=c.useCallback(J=>{J.target===o.current&&(v({x:J.target.x(),y:J.target.y()}),d.current&&U&&d.current.hitGraphEnabled(!0),o.current&&o.current.batchDraw(),m(!1))},[U]),ue=c.useCallback(()=>{L(!0),document.body.style.cursor=A?"grabbing":"grab"},[A]),ke=c.useCallback(()=>{L(!1),document.body.style.cursor="default"},[]),de=J=>{var xe,ge,Ie;const ie=J.target.getClassName();if(ie==="Stage"||ie==="Layer"){M({...w,visible:!1});return}if(ie==="Group"||ie==="Rect"){h(null),N(null);const Be=(xe=o.current)==null?void 0:xe.getPointerPosition();if(Be&&ce(Be)){const{x:Ze,y:vt}=Be,{x:nt,y:Wt}=((ge=o.current)==null?void 0:ge.position())||{x:0,y:0},{x:Yt,y:Ja}=((Ie=o.current)==null?void 0:Ie.scale())||{x:1,y:1},eo=(Ze-nt)/Yt,to=(vt-Wt)/Ja;M({x:eo,y:to,visible:!0})}else M({...w,visible:!1})}else M({...w,visible:!1})},ce=J=>{if(!n||!i||!o.current)return!1;const{x:ie,y:xe}=J,{x:ge,y:Ie}=o.current.position(),{x:Be}=o.current.scale(),Ze={x:(ie-ge)/Be,y:(xe-Ie)/Be};return Ze.x>=0&&Ze.x<=n&&Ze.y>=0&&Ze.y<=i},be=c.useCallback(()=>{h(null),N(null),p(!0),B(!0),M({...w,visible:!1})},[h,N,w]),Je=c.useCallback(J=>{D(J),B(!1)},[D]),O=()=>{p(!0),B(!0),M({...w,visible:!1})},ae=()=>{k(),M({...w,visible:!1})},re=()=>{j(),M({...w,visible:!1})};c.useEffect(()=>{if(t>0&&s>0&&n>0&&i>0){const J=x?20:40,ie=t-J*2,xe=s-J*2,ge=ie/n,Ie=xe/i,Ze=Math.min(ge,Ie),vt=(t-n*Ze)/2,nt=(s-i*Ze)/2;S(Ze),v({x:vt,y:nt}),o.current&&o.current.batchDraw()}},[t,s,n,i,x]);const he=Re.Children.map(u,J=>Re.isValidElement(J)?Re.cloneElement(J,{scale:R,position:E}):J);return c.useEffect(()=>{if(o.current&&d.current){const J=o.current;d.current;let ie=0;const xe=U?30:15,ge=Ie=>{const Be=Date.now();if(Be-ie<xe){Ie.cancelBubble=!0;return}ie=Be};return J.on("dragmove",ge),()=>{J.off("dragmove",ge)}}},[A,U]),t<=0||s<=0||n<=0||i<=0?e.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"#fafafa"},children:"Loading..."}):e.jsxs("div",{style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",background:"#fafafa",cursor:g?A?"grabbing":"grab":"default"},children:[e.jsx("div",{style:{position:"absolute",top:16,right:16,zIndex:1,display:"flex",gap:"8px"},children:e.jsxs(X,{style:{background:"rgba(255, 255, 255, 0.9)",padding:"8px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",backdropFilter:"blur(8px)"},children:[e.jsx(q,{icon:e.jsx(jo,{}),onClick:V,disabled:R<=.1,style:{borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center"}}),e.jsxs("div",{style:{padding:"0 8px",fontSize:"14px",color:"#666",userSelect:"none"},children:[Math.round(R*100),"%"]}),e.jsx(q,{icon:e.jsx(vo,{}),onClick:K,disabled:R>=20,style:{borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center"}})]})}),e.jsx(ll,{ref:o,width:t,height:s,onClick:de,draggable:!0,onDragStart:_,onDragMove:H,onDragEnd:te,onMouseEnter:ue,onMouseLeave:ke,onWheel:Q,x:E.x,y:E.y,scaleX:R,scaleY:R,perfectDrawEnabled:!0,hitGraphEnabled:!A,pixelRatio:U?Math.min(1.5,window.devicePixelRatio||1):window.devicePixelRatio||1,children:e.jsx(cl,{ref:d,children:e.jsxs(xu,{width:n,height:i,scale:R,position:{x:0,y:0},isSelected:T,onSelect:I?void 0:be,onChange:x||I?void 0:D,isEditable:!x&&!I,children:[r.map(J=>e.jsx(Ga,{hall:J,isSelected:(f==null?void 0:f.id)===J.id,onSelect:()=>h(J),onChange:x||I?void 0:$,scale:R,position:{x:0,y:0},exhibitionWidth:n,exhibitionHeight:i,isStallMode:x||I},J._id||J.id)),l.map(J=>{const ie=J._id||J.id,xe=r.find(ge=>ge.id===J.hallId||ge._id===J.hallId);return xe?e.jsx(Xi,{stall:{...J,_id:ie,id:ie},hallX:xe.dimensions.x,hallY:xe.dimensions.y,hallWidth:xe.dimensions.width,hallHeight:xe.dimensions.height,scale:R},ie):null}),a.map(J=>{const ie=J._id||J.id,ge=((b==null?void 0:b._id)||(b==null?void 0:b.id))===ie;return e.jsx(Ka,{fixture:{...J,_id:ie,id:ie},isSelected:ge,onSelect:()=>N(J),onChange:I?y:void 0,scale:R,position:{x:0,y:0},exhibitionWidth:n,exhibitionHeight:i,isEditable:I},ie)}),he]})})}),e.jsx(gu,{visible:w.visible,x:w.x,y:w.y,onExhibitionClick:O,onHallClick:ae,onStallClick:re,onClose:()=>M({...w,visible:!1})}),e.jsx(pu,{visible:C,width:n,height:i,onCancel:()=>B(!1),onSubmit:Je})]})},bu=({visible:t,hall:s,exhibitionWidth:n,exhibitionHeight:i,onCancel:r,onSubmit:l,onDelete:a})=>{const[f]=F.useForm();Re.useEffect(()=>{t&&(s?f.setFieldsValue({name:s.name,width:s.dimensions.width,height:s.dimensions.height}):f.setFieldsValue({name:"",width:Math.min(10,n),height:Math.min(10,i)}))},[t,s,n,i,f]);const b=async()=>{var y,D;const N=await f.validateFields(),$=s?{...s,_id:s._id,id:s.id||s._id,name:N.name,dimensions:{x:((y=s.dimensions)==null?void 0:y.x)||0,y:((D=s.dimensions)==null?void 0:D.y)||0,width:N.width,height:N.height},exhibitionId:s.exhibitionId}:{name:N.name,dimensions:{x:0,y:0,width:N.width,height:N.height}};l($),f.resetFields()},h=()=>{s&&a&&fe.confirm({title:"Delete Hall",content:`Are you sure you want to delete hall "${s.name}"? This action cannot be undone.`,okText:"Yes, Delete",cancelText:"No, Cancel",okButtonProps:{className:"confirm-delete-button"},centered:!0,onOk:()=>a(s)})};return e.jsx(fe,{title:s?"Edit Hall":"Add New Hall",open:t,onCancel:()=>{f.resetFields(),r()},footer:null,width:400,destroyOnClose:!0,className:"hall-form-modal",children:e.jsxs(F,{form:f,layout:"vertical",style:{marginTop:"16px"},children:[e.jsx(F.Item,{name:"name",label:e.jsxs("span",{style:{color:"#000"},children:["Hall Name ",e.jsx("span",{style:{color:"#ff4d4f"},children:"*"})]}),rules:[{required:!0,message:"Please enter hall name"}],children:e.jsx(G,{placeholder:"Enter hall name"})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[e.jsx(F.Item,{name:"width",label:e.jsxs("span",{style:{color:"#000"},children:["Width (meters) ",e.jsx("span",{style:{color:"#ff4d4f"},children:"*"})]}),rules:[{required:!0,message:"Please enter width"},{type:"number",min:5,message:"Width must be at least 5 meters"},{type:"number",max:n,message:`Width cannot exceed ${n} meters`}],children:e.jsx(ze,{min:5,max:n,style:{width:"100%"},placeholder:"Enter width"})}),e.jsx(F.Item,{name:"height",label:e.jsxs("span",{style:{color:"#000"},children:["Height (meters) ",e.jsx("span",{style:{color:"#ff4d4f"},children:"*"})]}),rules:[{required:!0,message:"Please enter height"},{type:"number",min:5,message:"Height must be at least 5 meters"},{type:"number",max:i,message:`Height cannot exceed ${i} meters`}],children:e.jsx(ze,{min:5,max:i,style:{width:"100%"},placeholder:"Enter height"})})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"32px",gap:"8px"},children:[e.jsx(X,{children:s&&a&&e.jsx(q,{className:"delete-button",icon:e.jsx(pt,{}),onClick:h,children:"Delete Hall"})}),e.jsxs(X,{children:[e.jsx(q,{onClick:()=>{f.resetFields(),r()},children:"Cancel"}),e.jsx(q,{type:"primary",onClick:b,className:"update-button",children:s?"Update Hall":"Create Hall"})]})]})]})})},{Title:yu}=me,ju=({visible:t,stall:s,hall:n,exhibition:i,onCancel:r,onSubmit:l,onDelete:a})=>{const[f]=F.useForm(),[b,h]=c.useState([]),[N,$]=c.useState(!1),y=(u,x,I,o,d)=>{const S=[...I].sort((v,g)=>{const L=Math.floor(v.dimensions.y/5),A=Math.floor(g.dimensions.y/5);return L===A?v.dimensions.x-g.dimensions.x:v.dimensions.y-g.dimensions.y}),E=(v,g)=>v+u>o||g+x>d?!1:!S.some(L=>{const A=L.dimensions.x,m=L.dimensions.y,w=L.dimensions.width,M=L.dimensions.height,T=1;return!(v+u+T<=A||v>=A+w+T||g+x+T<=m||g>=m+M+T)});for(const v of S){const g=v.dimensions.x+v.dimensions.width+1,L=v.dimensions.y;if(E(g,L))return{x:g,y:L};const A=v.dimensions.x,m=v.dimensions.y+v.dimensions.height+1;if(E(A,m))return{x:A,y:m}}for(let v=0;v<d;v+=5)for(let g=0;g<o;g+=5)if(E(g,v))return{x:g,y:v};return{x:0,y:0}};c.useEffect(()=>{if(s){console.log("Setting form values for stall:",s);const u={number:s.number,stallTypeId:s.stallTypeId,width:s.dimensions.width,height:s.dimensions.height,ratePerSqm:s.ratePerSqm,status:s.status};console.log("Form values to set:",u),f.setFieldsValue(u)}else n&&!f.getFieldValue("status")&&f.setFieldsValue({status:"available",width:Math.min(20,n.dimensions.width/4),height:Math.min(20,n.dimensions.height/4),ratePerSqm:0})},[s,n,f]),c.useEffect(()=>{t&&(async()=>{var x;try{$(!0);const I=await js.getStallTypes();console.log("Fetched stall types:",I.data);const o=((x=i.stallRates)==null?void 0:x.map(R=>R.stallTypeId))||[];console.log("Configured stall type IDs:",o);const d=I.data.filter(R=>R.status==="active"&&R._id&&o.includes(R._id));console.log("Filtered stall types:",d),h(d)}catch(I){console.error("Failed to fetch stall types:",I)}finally{$(!1)}})()},[t,i.stallRates]);const D=u=>{var I;console.log("Stall type changed to:",u);const x=(I=i.stallRates)==null?void 0:I.find(o=>o.stallTypeId===u);console.log("Found stall rate:",x),x&&f.setFieldsValue({ratePerSqm:x.rate})},k=()=>{f.resetFields(),r()},j=()=>{if(console.log("Hall data:",n),!n||!n._id&&!n.id){ee.error("Invalid hall selected. Please try again.");return}f.validateFields().then(u=>{var d;const x=n._id||n.id;if(!x){ee.error("Hall ID is missing. Please select a hall again.");return}const I=s?{x:s.dimensions.x,y:s.dimensions.y}:y(u.width,u.height,((d=i.stalls)==null?void 0:d.filter(R=>R.hallId===x))||[],n.dimensions.width,n.dimensions.height),o={id:s==null?void 0:s.id,_id:s==null?void 0:s._id,number:u.number,stallTypeId:u.stallTypeId,dimensions:{x:I.x,y:I.y,width:u.width,height:u.height},ratePerSqm:u.ratePerSqm,status:u.status,hallId:x};console.log("Submitting stall data:",o),l(o)})},P=u=>{switch(u){case"available":return"#52c41a";case"booked":return"#faad14";case"reserved":return"#1890ff";default:return"#d9d9d9"}};return e.jsx(e.Fragment,{children:e.jsx(fe,{title:e.jsxs(X,{children:[e.jsx(lt,{style:{fontSize:"20px"}}),e.jsx(yu,{level:4,style:{margin:0},children:s?"Edit Stall":"Add Stall"})]}),open:t,onCancel:k,destroyOnClose:!0,forceRender:!0,width:480,centered:!0,footer:[e.jsxs(X,{size:"middle",children:[s&&a&&e.jsx(q,{danger:!0,icon:e.jsx(pt,{}),onClick:()=>a(s),children:"Delete"}),e.jsx(q,{onClick:k,children:"Cancel"}),e.jsx(q,{type:"primary",onClick:j,children:s?"Save Changes":"Create"})]},"footer-buttons")],children:e.jsxs(F,{form:f,layout:"vertical",preserve:!1,requiredMark:"optional",style:{padding:"12px 0"},children:[e.jsx(F.Item,{name:"number",label:"Stall Number",rules:[{required:!0,message:"Please enter stall number"}],children:e.jsx(G,{placeholder:"Enter stall number",size:"large",style:{borderRadius:"6px"}})}),e.jsx(F.Item,{name:"stallTypeId",label:"Stall Type",rules:[{required:!0,message:"Please select stall type"}],children:e.jsx(oe,{loading:N,placeholder:"Select stall type",size:"large",onChange:D,children:b.map(u=>e.jsx(oe.Option,{value:u._id,children:u.name},u._id))})}),e.jsx(Fe,{orientation:"left",plain:!0,style:{margin:"24px 0"},children:"Dimensions"}),e.jsxs(X,{style:{width:"100%",gap:"16px"},children:[e.jsx(F.Item,{name:"width",label:"Width (meters)",rules:[{required:!0,message:"Please enter width"},{type:"number",min:1,message:"Width must be at least 1 meter"},{type:"number",max:(n==null?void 0:n.dimensions.width)||100,message:"Width cannot exceed hall width"}],style:{flex:1},children:e.jsx(ze,{min:1,max:(n==null?void 0:n.dimensions.width)||100,style:{width:"100%"},size:"large",placeholder:"Width",addonAfter:"m"})}),e.jsx(F.Item,{name:"height",label:"Height (meters)",rules:[{required:!0,message:"Please enter height"},{type:"number",min:1,message:"Height must be at least 1 meter"},{type:"number",max:(n==null?void 0:n.dimensions.height)||100,message:"Height cannot exceed hall height"}],style:{flex:1},children:e.jsx(ze,{min:1,max:(n==null?void 0:n.dimensions.height)||100,style:{width:"100%"},size:"large",placeholder:"Height",addonAfter:"m"})})]}),e.jsx(Fe,{orientation:"left",plain:!0,style:{margin:"24px 0"},children:"Details"}),e.jsx(F.Item,{name:"ratePerSqm",label:"Rate per sq.m (â‚¹)",rules:[{required:!0,message:"Please select a stall type to set the rate"}],children:e.jsx(ze,{min:0,style:{width:"100%"},size:"large",placeholder:"Rate will be set based on stall type",prefix:"â‚¹",disabled:!0,formatter:u=>`${u}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:u=>{const x=u?Number(u.replace(/\â‚¹\s?|(,*)/g,"")):0;return isNaN(x)?0:x}})}),e.jsx(F.Item,{name:"status",label:"Status",rules:[{required:!0,message:"Please select status"}],children:e.jsxs(oe,{placeholder:"Select status",size:"large",style:{borderRadius:"6px"},children:[e.jsx(oe.Option,{value:"available",children:e.jsxs(X,{children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:P("available")}}),"Available"]})}),e.jsx(oe.Option,{value:"booked",children:e.jsxs(X,{children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:P("booked")}}),"Booked"]})}),e.jsx(oe.Option,{value:"reserved",children:e.jsxs(X,{children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:P("reserved")}}),"Reserved"]})})]})})]})})})},Hr=t=>{if(!t)return"";const s=window.location.origin,n=t.replace(/^\/?(api\/uploads\/)?/,"");if(n.includes("fixtures/"))return`${s}/api/uploads/${n}`;const i=localStorage.getItem("token");return i?`${s}/api/uploads/${n}?token=${i}`:""},vu=({name:t,type:s,color:n,rotation:i,showName:r,iconUrl:l,defaultIcons:a,borderColor:f=null,borderRadius:b=0})=>{c.useEffect(()=>{console.log("FixturePreview rendering with props:",{name:t,type:s,color:n,rotation:i,showName:r,iconUrl:l,defaultIconAvailable:!!a[s],borderColor:f,borderRadius:b})},[t,s,n,i,r,l,a,f,b]);const h=a[s]||"ðŸ“¦";return e.jsxs("div",{style:{padding:"24px",textAlign:"center",backgroundColor:"#fafafa",borderBottom:"1px solid #f0f0f0",borderRadius:"8px 8px 0 0"},children:[e.jsx("div",{style:{display:"inline-flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"120px",height:"120px",borderRadius:`${b||4}px`,backgroundColor:n||"#f0f0f0",transform:`rotate(${i}deg)`,transition:"all 0.3s ease",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",overflow:"hidden",position:"relative",border:f?`1px solid ${f}`:"1px solid rgba(0,0,0,0.05)"},children:l?e.jsx("img",{src:l,alt:t,style:{width:"100%",height:"100%",objectFit:"contain",padding:"8px"}}):e.jsx("div",{style:{fontSize:"48px",lineHeight:"1",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:h})}),r&&e.jsx("div",{style:{marginTop:"12px",fontSize:"16px",fontWeight:500,color:"#333"},children:t}),e.jsxs("div",{style:{marginTop:"4px",fontSize:"14px",color:"#888",display:"flex",gap:"8px",justifyContent:"center",alignItems:"center"},children:[e.jsx("span",{children:s.charAt(0).toUpperCase()+s.slice(1)}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:n}),i>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[i,"Â°"]})]}),f&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["Border: ",f]})]}),b>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["Radius: ",b,"px"]})]})]})]})},{Text:wu}=me,di=({activeKey:t,form:s,fixture:n,exhibitionWidth:i,exhibitionHeight:r,selectedType:l,showName:a,iconFileList:f,fixtureTypes:b,fixtureIcons:h,defaultColors:N,defaultDimensions:$,colorPresets:y,uploadProps:D,iconPreviewVisible:k=!1,previewImage:j="",onTypeChange:P,onColorChange:u,onShowNameChange:x,onIconPreviewCancel:I=()=>{}})=>{switch(t){case"basic":return o();case"position":return d();case"appearance":return R();default:return o()}function o(){return e.jsxs("div",{className:"tab-content",children:[e.jsx(F.Item,{name:"name",label:"Fixture Name",rules:[{required:!0,message:"Please enter fixture name"}],children:e.jsx(G,{placeholder:"Enter fixture name",prefix:e.jsx(Qs,{style:{color:"#aaa"}}),style:{borderRadius:"8px"}})}),e.jsx(F.Item,{name:"showName",label:"Show Name on Layout",tooltip:"Toggle whether the fixture name appears on the layout",valuePropName:"checked",children:e.jsx(ot,{defaultChecked:!0,checkedChildren:"Visible",unCheckedChildren:"Hidden",onChange:S=>{x(S),console.log("Form values after showName toggle:",s.getFieldsValue(!0))}})}),e.jsx(F.Item,{name:"type",label:"Fixture Type",rules:[{required:!0,message:"Please select fixture type"}],children:e.jsx(oe,{placeholder:"Select fixture type",onChange:P,options:b.map(S=>({...S,label:e.jsxs(X,{children:[e.jsx("span",{style:{fontSize:16},children:h[S.value]}),e.jsx("span",{children:S.label})]})})),style:{width:"100%",borderRadius:"8px"},listHeight:300,dropdownStyle:{borderRadius:"8px"}})})]})}function d(){return e.jsxs("div",{className:"tab-content",children:[e.jsx(W,{size:"small",title:"Position (meters)",style:{marginBottom:16,borderRadius:8},styles:{body:{padding:"12px 16px"}},children:e.jsxs(ne,{gutter:16,children:[e.jsx(z,{span:12,children:e.jsx(F.Item,{name:["position","x"],label:"X Position",rules:[{required:!0,message:"X position is required"}],children:e.jsx(ze,{style:{width:"100%",borderRadius:"8px"},min:0,max:i,step:.1,precision:1,placeholder:"X position"})})}),e.jsx(z,{span:12,children:e.jsx(F.Item,{name:["position","y"],label:"Y Position",rules:[{required:!0,message:"Y position is required"}],children:e.jsx(ze,{style:{width:"100%",borderRadius:"8px"},min:0,max:r,step:.1,precision:1,placeholder:"Y position"})})})]})}),e.jsx(W,{size:"small",title:"Dimensions (meters)",style:{marginBottom:16,borderRadius:8},styles:{body:{padding:"12px 16px"}},children:e.jsxs(ne,{gutter:16,children:[e.jsx(z,{span:12,children:e.jsx(F.Item,{name:["dimensions","width"],label:"Width",rules:[{required:!0,message:"Width is required"}],children:e.jsx(ze,{style:{width:"100%",borderRadius:"8px"},min:.5,max:20,step:.1,precision:1,placeholder:"Width"})})}),e.jsx(z,{span:12,children:e.jsx(F.Item,{name:["dimensions","height"],label:"Height",rules:[{required:!0,message:"Height is required"}],children:e.jsx(ze,{style:{width:"100%",borderRadius:"8px"},min:.5,max:20,step:.1,precision:1,placeholder:"Height"})})})]})}),e.jsx(W,{size:"small",title:e.jsxs("span",{children:[e.jsx(wo,{})," Rotation (degrees)"]}),style:{borderRadius:8},styles:{body:{padding:"12px 16px"}},children:e.jsx(F.Item,{name:"rotation",noStyle:!0,children:e.jsx(fa,{min:0,max:360,marks:{0:"0Â°",90:"90Â°",180:"180Â°",270:"270Â°",360:"360Â°"},tooltip:{formatter:S=>`${S}Â°`},style:{marginTop:10},keyboard:!1})})})]})}function R(){return e.jsxs("div",{className:"tab-content",children:[e.jsx(F.Item,{name:"color",label:"Color",tooltip:"Choose a color for the fixture. This affects the background color and tint applied to SVG icons.",rules:[{validator:(S,E)=>{try{return E?Promise.resolve():Promise.reject("Please select a color")}catch{return Promise.reject("Please enter a valid color value")}}}],children:e.jsx(sr,{format:"hex",allowClear:!0,showText:!0,disabledAlpha:!0,presets:y,onChange:u,style:{width:"100%"}})}),e.jsx(F.Item,{name:"borderColor",label:"Border Color",tooltip:"Choose a border color for the fixture. Leave empty for default borders.",children:e.jsx(sr,{format:"hex",allowClear:!0,showText:!0,disabledAlpha:!0,presets:y,style:{width:"100%"}})}),e.jsx(F.Item,{name:"borderRadius",label:"Border Radius",tooltip:"Set the corner radius in pixels. Higher values make more rounded corners.",children:e.jsx(ze,{min:0,max:20,step:1,style:{width:"100%",borderRadius:"8px"},addonAfter:"px"})}),e.jsxs(W,{size:"small",title:"Icon Upload",style:{borderRadius:8,marginBottom:16,marginTop:16},styles:{body:{padding:"16px"}},children:[e.jsx("div",{style:{marginBottom:0},children:e.jsx(qs,{...D,children:f.length<1&&e.jsxs("div",{children:[e.jsx(So,{style:{fontSize:20}}),e.jsx("div",{style:{marginTop:8},children:"Upload Icon"})]})})}),e.jsx(wu,{type:"secondary",style:{display:"block",marginTop:12},children:"Upload a custom icon or use the default icon for the selected fixture type. Supported formats: PNG, JPG, SVG. SVG icons are preferred for better quality at all sizes."})]}),e.jsx(F.Item,{name:"icon",label:"Icon URL",tooltip:"URL to an icon image for this fixture. Will be used if no icon is uploaded.",children:e.jsx(G,{placeholder:"https://example.com/icon.png",prefix:e.jsx(ko,{style:{color:"#aaa"}}),style:{borderRadius:"8px"}})}),e.jsx(fe,{open:k,title:"Icon Preview",footer:null,onCancel:I,children:e.jsx("img",{alt:"Icon Preview",style:{width:"100%"},src:j})})]})}},Su=t=>[{key:"basic",label:e.jsxs("span",{children:[e.jsx(Ks,{}),"Basic Info"]}),children:e.jsx(di,{...t,activeKey:"basic"})},{key:"position",label:e.jsxs("span",{children:[e.jsx(ns,{}),"Position"]}),children:e.jsx(di,{...t,activeKey:"position"})},{key:"appearance",label:e.jsxs("span",{children:[e.jsx(_s,{}),"Appearance"]}),children:e.jsx(di,{...t,activeKey:"appearance"})}],{Text:Ax,Title:Tx}=me,{TabPane:Px}=ct,ku=[{value:"sofa",label:"Sofa"},{value:"chair",label:"Chair"},{value:"table",label:"Table"},{value:"desk",label:"Desk"},{value:"plant",label:"Plant"},{value:"entrance",label:"Entrance"},{value:"exit",label:"Exit"},{value:"info",label:"Information"},{value:"restroom",label:"Restroom"},{value:"food",label:"Food Area"},{value:"custom",label:"Custom"}],dn={sofa:{width:2,height:1},chair:{width:5,height:5},table:{width:1,height:1},desk:{width:2,height:.8},plant:{width:.5,height:.5},entrance:{width:1.5,height:.2},exit:{width:1.5,height:.2},info:{width:1,height:1},restroom:{width:1,height:1},food:{width:2,height:2},custom:{width:1,height:1}},Bt={sofa:"#a0d0ff",chair:"#a0d0ff",table:"#e0e0e0",desk:"#e0e0e0",plant:"#90ee90",entrance:"#98fb98",exit:"#ffcccb",info:"#add8e6",restroom:"#d8bfd8",food:"#ffe4b5",custom:"#f0f0f0"},ui={sofa:"ðŸ›‹ï¸",chair:"ðŸª‘",table:"ðŸªŸ",desk:"ðŸ–¥ï¸",plant:"ðŸª´",entrance:"ðŸšª",exit:"ðŸšª",info:"â„¹ï¸",restroom:"ðŸš»",food:"ðŸ½ï¸",custom:"ðŸ“¦"},Iu=({visible:t,fixture:s,onCancel:n,onSubmit:i,onDelete:r,exhibitionWidth:l,exhibitionHeight:a})=>{const[f]=F.useForm(),[b,h]=c.useState(!1),[N,$]=c.useState(""),[y,D]=c.useState("basic"),[k,j]=c.useState(""),[P,u]=c.useState([]),[x,I]=c.useState(!1),[o,d]=c.useState(""),{message:R}=jt.useApp(),[S,E]=c.useState("#f0f0f0"),[v,g]=c.useState("New Fixture"),[L,A]=c.useState("chair"),[m,w]=c.useState(0),[M,T]=c.useState(!0),[p,C]=c.useState(null),[B,U]=c.useState(0);c.useEffect(()=>{if(t)if(s){const O=te(s.color),ae=Bt[s.type]||"#f0f0f0",re=O||ae;console.log("Setting up fixture colors:",{original:s.color,normalized:O,fallback:ae,final:re}),E(re),g(s.name),A(s.type),w(s.rotation||0),$(s.type),T(s.showName!==!1),C(s.borderColor||null),U(s.borderRadius||0)}else{const O="chair",ae=Bt[O];E(ae),g("New Fixture"),A(O),w(0),$(O),T(!0),C(null),U(0)}},[t,s]),c.useEffect(()=>{if(t&&f){if(s){const O=te(s.color),ae=Bt[s.type]||"#f0f0f0",re=O||ae;f.setFieldsValue({name:s.name,type:s.type,position:{x:s.position.x,y:s.position.y},dimensions:{width:s.dimensions.width,height:s.dimensions.height},rotation:s.rotation||0,color:re,icon:s.icon||"",showName:s.showName!==!1,borderColor:s.borderColor||null,borderRadius:s.borderRadius||0});const he=s.icon?Hr(s.icon):"";j(he),s.icon?u([{uid:"-1",name:s.icon.split("/").pop()||"icon",status:"done",url:he,thumbUrl:he}]):u([])}else{const O="chair",ae=Bt[O];f.setFieldsValue({name:"New Fixture",type:O,position:{x:Math.floor(l/2),y:Math.floor(a/2)},dimensions:dn[O],rotation:0,color:ae,icon:"",showName:!0,borderColor:null,borderRadius:0}),j(""),u([])}D("basic")}},[t,s,f,l,a]);const Y=()=>{if(f&&t)try{const O=f.getFieldsValue(!0);if(O.name&&g(O.name),O.type&&A(O.type),O.rotation!==void 0&&w(O.rotation),O.color){const ae=te(O.color);ae&&E(ae)}if(O.showName!==void 0&&T(O.showName),O.borderColor!==void 0){const ae=O.borderColor?te(O.borderColor):null;C(ae)}O.borderRadius!==void 0&&U(O.borderRadius)}catch(O){console.log("Error updating preview",O)}};c.useEffect(()=>{if(f&&t)return f.getFieldsValue,Y(),()=>{}},[f,t]);const Q=O=>{if($(O),A(O),!s){const ae=Bt[O]||Bt.custom;f.setFieldsValue({dimensions:dn[O]||dn.custom,color:ae}),E(ae)}},K=O=>{const ae=te(O);f.setFieldValue("color",ae),E(ae);const re=Object.entries(Bt).find(([he,J])=>J.toLowerCase()===ae.toLowerCase());re&&!s&&(f.setFieldValue("type",re[0]),$(re[0]),A(re[0]))},V=()=>(console.log("Rendering fixture preview with:",{name:v,type:L,color:S,rotation:m,showName:M,iconUrl:k,borderColor:p,borderRadius:B}),e.jsx(vu,{name:v,type:L,color:S,rotation:m,showName:M,iconUrl:k,defaultIcons:ui,borderColor:p,borderRadius:B})),_=({file:O,fileList:ae})=>{var re;if(O.status==="uploading"&&u(ae),O.status==="done"){R.success(`${O.name} uploaded successfully`);let J=(((re=O.response)==null?void 0:re.url)||"").replace(/^\/api\/uploads\//,"");J&&!J.startsWith("fixtures/")&&(J=`fixtures/${J.replace(/^\//,"")}`),console.log("Icon path stored in form:",J),f.setFieldValue("icon",J);const ie=Hr(J);console.log("Using direct backend URL:",ie),j(ie);const xe=O.name.toLowerCase().endsWith(".svg"),ge=ae.map(Ie=>Ie.uid===O.uid?{...Ie,url:ie,thumbUrl:ie,type:xe?"image/svg+xml":Ie.type}:Ie);u(ge),console.log("Form values after icon upload:",f.getFieldsValue(!0))}O.status==="error"&&(R.error(`${O.name} upload failed.`),u(ae.filter(he=>he.uid!==O.uid)))},H={name:"file",action:`${se.defaults.baseURL}/fixtures/upload/icons`,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},accept:"image/png,image/jpeg,image/jpg,image/svg+xml",listType:"picture-card",fileList:P,onChange:_,onPreview:O=>{d(O.url||O.thumbUrl||""),I(!0)},onRemove:()=>(j(""),u([]),f.setFieldValue("icon",""),console.log("Form values after icon removal:",f.getFieldsValue(!0)),!0),maxCount:1,showUploadList:{showPreviewIcon:!0,showRemoveIcon:!0,showDownloadIcon:!1,removeIcon:e.jsx(pt,{style:{color:"#ff4d4f"}})}},te=O=>{try{if(!O)return"#f0f0f0";if(typeof O=="object"&&O!==null){if(typeof O.toHexString=="function")return O.toHexString();if(O.rgb||O.hex)return O.hex||`rgb(${O.rgb.r},${O.rgb.g},${O.rgb.b})`}if(typeof O=="string"){if(/^#([0-9A-F]{3}){1,2}$/i.test(O))return O;if(/^([0-9A-F]{3}){1,2}$/i.test(O))return`#${O}`;if(/^rgb\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*\)$/.test(O))return O}return"#f0f0f0"}catch(ae){return console.error("Error normalizing color:",ae),"#f0f0f0"}},ue=[{label:"Primary Colors",colors:["#1890ff","#52c41a","#faad14","#f5222d","#722ed1"]},{label:"Neutrals",colors:["#000000","#262626","#595959","#8c8c8c","#bfbfbf","#d9d9d9","#f0f0f0","#ffffff"]}],ke=Re.useCallback(()=>{s&&r&&r(s)},[s,r]),de=O=>{D(O),document.activeElement instanceof HTMLElement&&document.activeElement.blur()},ce=Su({form:f,fixture:s,exhibitionWidth:l,exhibitionHeight:a,selectedType:N,showName:M,iconFileList:P,fixtureTypes:ku,fixtureIcons:ui,defaultColors:Bt,defaultDimensions:dn,colorPresets:ue,uploadProps:H,iconPreviewVisible:x,previewImage:o,onTypeChange:Q,onColorChange:K,onShowNameChange:O=>T(O),onIconPreviewCancel:()=>I(!1),activeKey:y}),be=async()=>{try{h(!0);const O=await f.validateFields();g(O.name),A(O.type),w(O.rotation||0),E(te(O.color)),T(O.showName),C(O.borderColor?te(O.borderColor):null),U(O.borderRadius||0);let ae="";O.icon?ae=Je(O.icon):s!=null&&s.icon&&(ae=s.icon),console.log("Form values being submitted:",{name:O.name,type:O.type,color:O.color,icon:O.icon,originalIcon:s==null?void 0:s.icon,cleanedIcon:ae,showName:O.showName,borderColor:O.borderColor,borderRadius:O.borderRadius});const re=(s==null?void 0:s._id)||(s==null?void 0:s.id)||"",he=O.color?te(O.color):(s==null?void 0:s.color)||"#f0f0f0",J=O.borderColor?te(O.borderColor):null,ie={...s,id:re,_id:re,name:O.name,type:O.type,position:O.position,dimensions:O.dimensions,rotation:O.rotation,color:he,icon:ae,zIndex:(s==null?void 0:s.zIndex)||1,isActive:(s==null?void 0:s.isActive)!==void 0?s.isActive:!0,borderColor:J,borderRadius:O.borderRadius||0};re&&(ie.showName=O.showName),console.log("Submitting fixture with icon path:",ae),console.log("Color being submitted:",he),await i(ie),n()}catch(O){console.error("Fixture submission failed:",O),R.error("Failed to save fixture. Please check the form and try again.")}finally{h(!1)}},Je=O=>{if(!O||typeof O!="string")return"";if(O.startsWith("fixtures/")&&!O.includes("?")&&!O.includes("http"))return O;let ae=O.replace(/^\/api\/uploads\//,"");if(ae=ae.replace(/^\//,""),ae.includes("?")||ae.includes("http")){const re=ae.split("?")[0].split("/").pop()||"";if(re)return`fixtures/${re}`}return ae&&!ae.startsWith("fixtures/")?`fixtures/${ae}`:ae};return e.jsxs(fe,{title:e.jsxs("div",{style:{padding:"8px 0",display:"flex",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:24,marginRight:8},children:s?ui[s.type]:"ðŸª‘"}),e.jsx("span",{children:s?`Edit ${s.name}`:"Add New Fixture"})]}),open:t,onCancel:n,confirmLoading:b,footer:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("div",{children:s&&r&&e.jsx(q,{danger:!0,icon:e.jsx(pt,{}),onClick:ke,style:{borderRadius:"6px"},children:"Delete"})}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx(q,{onClick:n,icon:e.jsx(Io,{}),style:{borderRadius:"6px"},children:"Cancel"}),e.jsx(q,{type:"primary",onClick:be,icon:e.jsx(Is,{}),style:{borderRadius:"6px"},children:s?"Update":"Create"})]})]}),width:560,centered:!0,styles:{header:{borderBottom:"1px solid #f0f0f0",padding:"16px 24px"},body:{backgroundColor:"#fff",borderRadius:"0 0 8px 8px",padding:"0"},footer:{borderTop:"1px solid #f0f0f0",padding:"12px 24px",margin:0}},children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:`
        .svg-icon {
          filter: drop-shadow(0px 1px 2px rgba(0,0,0,0.2));
        }
        
        /* Fix for passive event listener warnings */
        .ant-slider, .ant-slider-handle, .ant-color-picker-trigger, .ant-color-picker-dropdown {
          touch-action: none !important;
        }
        
        .ant-slider-rail, .ant-slider-track {
          touch-action: pan-y !important;
        }
        
        .ant-tabs-tab, .ant-select-selector, .ant-input-number-input, .ant-color-picker-slider, .ant-color-picker-palette {
          touch-action: manipulation !important;
        }
        
        /* Fix circular references warning */
        .ant-color-picker-trigger-disabled .ant-color-picker-clear {
          display: none;
        }
      `}}),V(),e.jsx(F,{form:f,layout:"vertical",initialValues:{name:"New Fixture",type:"chair",position:{x:0,y:0},dimensions:{width:1,height:1},rotation:0,color:"#f0f0f0",icon:"",showName:!0,borderColor:null,borderRadius:0},style:{padding:"0 24px 20px"},onValuesChange:Y,children:e.jsx(ct,{activeKey:y,onChange:de,items:ce,tabBarStyle:{marginBottom:16},centered:!0})})]})},Cu=({exhibitionId:t,destination:s="layout",label:n="Back to Layout"})=>{const i=Se(),{currentExhibition:r}=ye(l=>l.exhibition);return e.jsxs("div",{style:{marginBottom:"24px",position:"sticky",top:"16px",zIndex:10},children:[e.jsx(q,{icon:e.jsx(Ot,{}),onClick:()=>i(_e(r,s),{state:{exhibitionId:t}}),type:"default",size:"large",style:{borderRadius:"8px",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",background:"white",borderColor:"transparent",fontWeight:500,padding:"0 16px",height:"42px",display:"flex",alignItems:"center",transition:"all 0.3s ease"},className:"back-button-hover",children:e.jsx("span",{style:{marginLeft:8},children:n})}),e.jsx("style",{children:`
        .back-button-hover:hover {
          transform: translateX(-5px);
          box-shadow: 0 4px 12px rgba(0,0,0,0.1);
          background: #f0f5ff;
          border-color: #d6e4ff;
        }
      `})]})},Nu=()=>{var k;const{id:t}=dt(),s=Vt(),n=Se(),i=Me(),r=((k=s.state)==null?void 0:k.exhibitionId)||t,{currentExhibition:l}=ye(j=>j.exhibition),a=c.useRef(null),[f,b]=c.useState({width:100,height:100}),[h,N]=c.useState({width:0,height:0}),[$]=F.useForm();c.useEffect(()=>{if(!r){ee.error("Exhibition ID not found"),n("/exhibition");return}i(mt(r))},[r,i,n]),c.useEffect(()=>{l!=null&&l.dimensions&&(b(l.dimensions),$.setFieldsValue(l.dimensions))},[l,$]),c.useEffect(()=>{const j=()=>{a.current&&N({width:a.current.clientWidth,height:a.current.clientHeight})};return j(),window.addEventListener("resize",j),()=>window.removeEventListener("resize",j)},[]);const y=async()=>{try{const j=await $.validateFields();await Ne.updateExhibition(r,{dimensions:j}),ee.success("Exhibition space saved successfully"),await i(mt(r)).unwrap(),n(_e(l,"layout"),{state:{exhibitionId:r}})}catch{ee.error("Failed to save exhibition space")}},D=j=>{b(P=>({...P,...j})),$.setFieldsValue(j)};return e.jsxs("div",{style:{padding:"24px"},children:[e.jsx(Cu,{exhibitionId:r}),e.jsx(W,{title:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"Exhibition Space Setup"}),e.jsx(q,{type:"primary",icon:e.jsx(Is,{}),onClick:y,children:"Save and Continue"})]}),children:e.jsxs("div",{style:{display:"flex",gap:"24px",height:"calc(100vh - 200px)"},children:[e.jsx("div",{style:{flex:"0 0 300px"},children:e.jsxs(F,{form:$,layout:"vertical",initialValues:f,children:[e.jsx(F.Item,{name:"width",label:"Width (meters)",rules:[{required:!0,message:"Please enter width"},{type:"number",min:10,message:"Width must be at least 10 meters"}],children:e.jsx(ze,{min:10,max:1e3,style:{width:"100%"},onChange:j=>D({width:j||10})})}),e.jsx(F.Item,{name:"height",label:"Height (meters)",rules:[{required:!0,message:"Please enter height"},{type:"number",min:10,message:"Height must be at least 10 meters"}],children:e.jsx(ze,{min:10,max:1e3,style:{width:"100%"},onChange:j=>D({height:j||10})})})]})}),e.jsx("div",{ref:a,style:{flex:"1",border:"1px solid #d9d9d9",borderRadius:"8px",position:"relative",overflow:"hidden"},children:e.jsx(Zs,{children:e.jsx(Js,{width:h.width,height:h.height,exhibitionWidth:f.width,exhibitionHeight:f.height,onExhibitionChange:D})})})]})})]})},Eu=({exhibitionId:t})=>{const s=Se(),{currentExhibition:n}=ye(i=>i.exhibition);return e.jsxs("div",{style:{marginBottom:"24px",position:"sticky",top:"16px",zIndex:10},children:[e.jsx(q,{icon:e.jsx(Ot,{}),onClick:()=>s(_e(n),{state:{exhibitionId:t}}),type:"default",size:"large",style:{borderRadius:"8px",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",background:"white",borderColor:"transparent",fontWeight:500,padding:"0 16px",height:"42px",display:"flex",alignItems:"center",transition:"all 0.3s ease"},className:"back-button-hover",children:e.jsx("span",{style:{marginLeft:8},children:"Back to Exhibition"})}),e.jsx("style",{children:`
        .back-button-hover:hover {
          transform: translateX(-5px);
          box-shadow: 0 4px 12px rgba(0,0,0,0.1);
          background: #f0f5ff;
          border-color: #d6e4ff;
        }
      `})]})},Au=()=>{var f,b,h,N,$;const{id:t}=dt(),s=Vt(),n=Se(),i=Me(),r=((f=s.state)==null?void 0:f.exhibitionId)||t,{currentExhibition:l,halls:a}=ye(y=>y.exhibition);return c.useEffect(()=>{r&&(i(mt(r)),i(Pt(r)))},[r,i]),e.jsxs("div",{style:{padding:"24px"},children:[e.jsx(Eu,{exhibitionId:r}),e.jsxs(ne,{gutter:[24,24],children:[e.jsx(z,{xs:24,sm:12,md:8,children:e.jsxs(W,{hoverable:!0,style:{height:"100%",background:"#fff",borderRadius:"8px"},bodyStyle:{padding:"24px"},children:[e.jsx("div",{style:{height:140,background:"#f0f2f5",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"8px",marginBottom:"16px"},children:e.jsx(rs,{style:{fontSize:"48px",color:"#1890ff"}})}),e.jsx(W.Meta,{title:"Exhibition Space",description:"Set up and manage the exhibition space dimensions",style:{marginBottom:"16px"}}),e.jsx(q,{type:"primary",onClick:()=>n(_e(l,"space"),{state:{exhibitionId:r}}),style:{background:"#7828C8",borderColor:"#7828C8"},children:"Manage"})]})}),e.jsx(z,{xs:24,sm:12,md:8,children:e.jsxs(W,{hoverable:!0,style:{height:"100%",background:"#fff",borderRadius:"8px"},bodyStyle:{padding:"24px"},children:[e.jsx("div",{style:{height:140,background:"#f0f2f5",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"8px",marginBottom:"16px"},children:e.jsx(Ks,{style:{fontSize:"48px",color:"#1890ff"}})}),e.jsx(W.Meta,{title:"Hall Management",description:"Create and manage exhibition halls",style:{marginBottom:"16px"}}),e.jsx(q,{type:"primary",disabled:!((b=l==null?void 0:l.dimensions)!=null&&b.width)||!((h=l==null?void 0:l.dimensions)!=null&&h.height),onClick:()=>n(_e(l,"halls"),{state:{exhibitionId:r}}),style:{background:"#7828C8",borderColor:"#7828C8"},children:"Manage"})]})}),e.jsx(z,{xs:24,sm:12,md:8,children:e.jsxs(W,{hoverable:!0,style:{height:"100%",background:"#fff",borderRadius:"8px"},bodyStyle:{padding:"24px"},children:[e.jsx("div",{style:{height:140,background:"#f0f2f5",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"8px",marginBottom:"16px"},children:e.jsx(lt,{style:{fontSize:"48px",color:"#1890ff"}})}),e.jsx(W.Meta,{title:"Stall Management",description:"Create and manage stalls within halls",style:{marginBottom:"16px"}}),e.jsx(q,{type:"primary",disabled:!a.length,onClick:()=>n(_e(l,"stalls"),{state:{exhibitionId:r}}),style:{background:"#7828C8",borderColor:"#7828C8"},children:"Manage"})]})}),e.jsx(z,{xs:24,sm:12,md:8,children:e.jsxs(W,{hoverable:!0,style:{height:"100%",background:"#fff",borderRadius:"8px"},bodyStyle:{padding:"24px"},children:[e.jsx("div",{style:{height:140,background:"#f0f2f5",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"8px",marginBottom:"16px"},children:e.jsx(Rn,{style:{fontSize:"48px",color:"#1890ff"}})}),e.jsx(W.Meta,{title:"Fixture Management",description:"Add sofas, chairs, entrances and other fixtures to the layout",style:{marginBottom:"16px"}}),e.jsx(q,{type:"primary",disabled:!((N=l==null?void 0:l.dimensions)!=null&&N.width)||!(($=l==null?void 0:l.dimensions)!=null&&$.height),onClick:()=>n(_e(l,"fixtures"),{state:{exhibitionId:r}}),style:{background:"#7828C8",borderColor:"#7828C8"},children:"Manage"})]})})]})]})},Tu=({exhibitionId:t,destination:s="layout",label:n="Back to Layout"})=>{const i=Se(),{currentExhibition:r}=ye(l=>l.exhibition);return e.jsxs("div",{style:{marginBottom:"24px",position:"sticky",top:"16px",zIndex:10},children:[e.jsx(q,{icon:e.jsx(Ot,{}),onClick:()=>i(_e(r,s),{state:{exhibitionId:t}}),type:"default",size:"large",style:{borderRadius:"8px",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",background:"white",borderColor:"transparent",fontWeight:500,padding:"0 16px",height:"42px",display:"flex",alignItems:"center",transition:"all 0.3s ease"},className:"back-button-hover",children:e.jsx("span",{style:{marginLeft:8},children:n})}),e.jsx("style",{children:`
        .back-button-hover:hover {
          transform: translateX(-5px);
          box-shadow: 0 4px 12px rgba(0,0,0,0.1);
          background: #f0f5ff;
          border-color: #d6e4ff;
        }
      `})]})},Pu=()=>{var d,R,S;const{id:t}=dt(),s=Vt(),n=Se(),i=Me(),r=((d=s.state)==null?void 0:d.exhibitionId)||t,{currentExhibition:l,halls:a}=ye(E=>E.exhibition),f=c.useRef(null),[b,h]=ee.useMessage(),[N,$]=c.useState(!1),[y,D]=c.useState(null),[k,j]=c.useState({width:0,height:0});c.useEffect(()=>{const E=()=>{if(f.current){const{clientWidth:g,clientHeight:L}=f.current;j({width:Math.max(g||400,400),height:Math.max(L||400,400)})}};E();const v=new ResizeObserver(E);return f.current&&v.observe(f.current),window.addEventListener("resize",E),()=>{v.disconnect(),window.removeEventListener("resize",E)}},[]),c.useEffect(()=>{if(!r){b.error("Exhibition ID not found"),n("/exhibition");return}i(mt(r))},[r,i,n,b]),c.useEffect(()=>{var E,v;if(l){if(!((E=l.dimensions)!=null&&E.width)||!((v=l.dimensions)!=null&&v.height)){b.info("Please set up exhibition space first"),n(_e(l,"space"),{state:{exhibitionId:r}});return}i(Pt(r))}},[l,r,i,n,b]);const P=()=>{D(null),$(!0)},u=E=>{D(E),$(!!E)},x=async E=>{var v;try{E.id?(await Ne.updateHall(r,E.id,E),b.success("Hall updated successfully"),$(!1)):(await Ne.createHall(r,E),b.success("Hall created successfully"),$(!1)),i(Pt(r))}catch(g){console.error("Hall operation failed:",g),((v=g.response)==null?void 0:v.status)===409?b.warning({content:g.response.data.message,duration:6,style:{marginTop:"20vh"}}):(b.error(g.message||"Failed to save hall"),$(!1))}},I=async E=>{var v,g;try{const L=E._id||E.id;if(!L)throw new Error("Hall ID is required");await Ne.deleteHall(r,L),b.success("Hall deleted successfully"),$(!1),D(null),i(Pt(r))}catch(L){console.error("Failed to delete hall:",L),b.error(((g=(v=L.response)==null?void 0:v.data)==null?void 0:g.message)||"Failed to delete hall")}},o=async()=>{try{await Ne.saveLayout(r,a),b.success("Layout saved successfully")}catch{b.error("Failed to save layout")}};return e.jsxs("div",{style:{padding:"24px",height:"100vh",display:"flex",flexDirection:"column"},children:[e.jsx(Tu,{exhibitionId:r}),h,e.jsx(W,{title:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(X,{children:[e.jsx("span",{children:"Hall Management"}),e.jsx(q,{icon:e.jsx(ba,{}),onClick:()=>n(_e(l,"space"),{state:{exhibitionId:r}}),children:"Back to Space Setup"})]}),e.jsxs(X,{children:[e.jsx(q,{type:"primary",icon:e.jsx(st,{}),onClick:P,children:"Add Hall"}),e.jsx(q,{type:"primary",icon:e.jsx(Is,{}),onClick:o,disabled:!a.length,children:"Save Layout"})]})]}),styles:{body:{flex:1,padding:0,overflow:"hidden",minHeight:"400px",position:"relative",background:"#fafafa"}},style:{flex:1,display:"flex",flexDirection:"column",height:"100%",minHeight:"500px"},children:e.jsx("div",{ref:f,style:{position:"absolute",top:0,left:0,right:0,bottom:0,overflow:"hidden"},children:e.jsx(Zs,{children:k.width>0&&k.height>0&&(l==null?void 0:l.dimensions)&&e.jsx(Js,{width:k.width,height:k.height,exhibitionWidth:l.dimensions.width,exhibitionHeight:l.dimensions.height,halls:a,selectedHall:y,onSelectHall:u,onHallChange:x,onAddHall:P})})})}),e.jsx(bu,{visible:N,hall:y,onCancel:()=>$(!1),onSubmit:x,onDelete:I,exhibitionWidth:((R=l==null?void 0:l.dimensions)==null?void 0:R.width)||100,exhibitionHeight:((S=l==null?void 0:l.dimensions)==null?void 0:S.height)||100})]})},Du=Z(fe)`
  .ant-modal-content {
    padding: 0;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
  }
  .ant-modal-header {
    padding: 24px 32px;
    margin: 0;
    border-bottom: 1px solid rgba(0, 0, 0, 0.06);
    background: linear-gradient(to right, #4b47b9, #3f51b5);
    
    .ant-modal-title {
      color: white;
      font-weight: 600;
      font-size: 18px;
    }
  }
  .ant-modal-body {
    padding: 0;
  }
  .ant-modal-close {
    color: white;
  }
`,Ru=Z.div`
  display: flex;
  border-bottom: 1px solid #eee;
  background-color: #f9f9fa;
  margin-bottom: 24px;
  
  .step-item {
    padding: 16px 24px;
    position: relative;
    display: flex;
    align-items: center;
    font-size: 15px;
    color: #666;
    gap: 10px;
    
    &.active {
      color: #4b47b9;
      font-weight: 500;
      
      &:after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 2px;
        background-color: #4b47b9;
      }
      
      .step-icon {
        background-color: #4b47b9;
        color: white;
      }
    }
    
    &.completed {
      .step-icon {
        background-color: #52c41a;
        color: white;
      }
    }
    
    .step-icon {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background-color: #eee;
      display: flex;
      align-items: center;
      justify-content: center;
    }
  }
`,zs=Z.div`
  padding: 24px 32px 32px;
`,Lu=Z.h2`
  font-size: 24px;
  font-weight: 600;
  color: #1f1f1f;
  margin-bottom: 8px;
`,$u=Z.p`
  font-size: 14px;
  color: #666;
  margin-bottom: 24px;
`,Fu=Z.div`
  display: flex;
  gap: 12px;
  margin-bottom: 24px;
  
  .search-input {
    width: 240px;
    border-radius: 8px;
  }
  
  .filter-select {
    width: 160px;
    border-radius: 8px;
  }
`,Mu=Z.div`
  margin-bottom: 24px;
  
  .tab-header {
    display: flex;
    margin-bottom: 24px;
    border-bottom: 1px solid #f0f0f0;
    
    .tab-item {
      padding: 12px 24px;
      font-size: 15px;
      font-weight: 500;
      color: #666;
      cursor: pointer;
      position: relative;
      display: flex;
      align-items: center;
      gap: 8px;
      
      &.active {
        color: #4b47b9;
        
        &:after {
          content: '';
          position: absolute;
          bottom: -1px;
          left: 0;
          right: 0;
          height: 2px;
          background: #4b47b9;
          border-radius: 2px 2px 0 0;
        }
      }
      
      .badge {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        background: #f0f0f0;
        color: #666;
        font-size: 12px;
        height: 20px;
        min-width: 20px;
        padding: 0 8px;
        border-radius: 10px;
        margin-left: 8px;
        
        &.active {
          background: #4b47b9;
          color: white;
        }
      }
    }
  }
`,Wr=Z.div`
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 16px;
  margin-bottom: 24px;
`,Yr=Z.div`
  border: 1px solid ${t=>t.selected?"#4b47b9":"#e6e6f0"};
  background: ${t=>t.selected?"rgba(75, 71, 185, 0.05)":"white"};
  border-radius: 12px;
  padding: 20px;
  padding-left: 48px;
  position: relative;
  transition: all 0.2s ease;
  box-shadow: ${t=>t.selected?"0 4px 12px rgba(75, 71, 185, 0.15)":"0 2px 8px rgba(0, 0, 0, 0.04)"};
  cursor: pointer;
  
  &:hover {
    border-color: #4b47b9;
    box-shadow: 0 4px 12px rgba(75, 71, 185, 0.15);
    transform: translateY(-2px);
  }
  
  .stall-price {
    position: absolute;
    top: 16px;
    right: 16px;
    background: ${t=>t.selected?"#4b47b9":"#52c41a"};
    color: white;
    font-weight: 600;
    padding: 6px 14px;
    border-radius: 20px;
    font-size: 14px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
  }
  
  .stall-number {
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 8px;
    color: #1f1f1f;
    display: flex;
    align-items: center;
    
    .hall-label {
      font-size: 13px;
      color: #666;
      margin-left: 8px;
      font-weight: normal;
    }
  }
  
  .stall-details {
    display: flex;
    gap: 16px;
    margin-top: 16px;
    
    .detail-item {
      flex: 1;
      
      .label {
        font-size: 12px;
        color: #666;
        margin-bottom: 4px;
      }
      
      .value {
        font-size: 15px;
        font-weight: 500;
      }
    }
  }
  
  .selection-indicator {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 26px;
    height: 26px;
    border-radius: 50%;
    position: absolute;
    top: 50%;
    left: 12px;
    transform: translateY(-50%);
    background: ${t=>t.selected?"#4b47b9":"white"};
    border: 2px solid ${t=>t.selected?"#4b47b9":"#d9d9d9"};
    color: white;
    transition: all 0.2s ease;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }
`,Bu=Z(W)`
  background: #f9fafc;
  border-radius: 12px;
  margin-top: 24px;
  border: 1px solid #eaecf0;
  overflow: hidden;
  box-shadow: 0 1px 3px rgba(16, 24, 40, 0.1), 0 1px 2px rgba(16, 24, 40, 0.06);
  
  .ant-card-head {
    background: #f2f4f7;
    border-bottom-color: #eaecf0;
    padding: 16px 24px;
    min-height: 48px;
    
    .ant-card-head-title {
      padding: 0;
      font-size: 16px;
      font-weight: 600;
      color: #101828;
    }
  }
  
  .ant-card-body {
    padding: 16px 24px 24px;
  }
  
  .summary-row {
    display: flex;
    justify-content: space-between;
    padding: 12px 0;
    
    &:not(:last-child) {
      border-bottom: 1px solid #eaecf0;
    }
    
    .label {
      color: #475467;
      font-weight: 500;
    }
    
    .value {
      font-weight: 600;
      text-align: right;
      color: #1f2937;
    }
    
    &.discount {
      color: #ef4444;
      
      .value {
        color: #ef4444;
      }
    }
    
    &.total {
      font-weight: 600;
      font-size: 16px;
      color: #101828;
      border-top: 1px solid #eaecf0;
      margin-top: 8px;
      padding-top: 16px;
      
      .label, .value {
        font-size: 16px;
        font-weight: 700;
        color: #101828;
      }
    }
  }
`;Z(q)`
  &.ant-btn-primary {
    background: #4b47b9;
    border-color: #4b47b9;
    
    &:hover, &:focus {
      background: #3b37a9;
      border-color: #3b37a9;
    }
  }
  
  &.ant-btn-lg {
    height: 48px;
    padding: 0 24px;
    font-size: 16px;
    border-radius: 8px;
  }
`;Z.div`
  display: flex;
  justify-content: flex-end;
  margin-top: 24px;
  padding-top: 16px;
  border-top: 1px solid #f0f0f0;
`;Z(W)`
  background: #f8f8fc;
  border-radius: 12px;
  border: 1px solid #e6e6f0;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
  
  .ant-card-body {
    padding: 24px;
  }
  
  .ant-form-item:last-child {
    margin-bottom: 0;
  }
`;Z(G)`
  &.ant-input-lg {
    border-radius: 8px;
    border: 1px solid #e6e6f0;
    background: white;
    padding: 12px 16px;
    height: auto;
    
    &:hover, &:focus {
      border-color: #4b47b9;
      box-shadow: 0 0 0 2px rgba(75, 71, 185, 0.1);
    }
  }
  
  .anticon {
    color: #4b47b9;
  }
`;const hi=Z(q)`
  &.ant-btn-lg {
    height: 40px;
    padding: 0 24px;
    font-size: 14px;
    border-radius: 6px;
    font-weight: 500;
    
    &.ant-btn-primary {
      background: #4b47b9;
      border-color: #4b47b9;
      
      &:hover {
        background: #3f3fa0;
        border-color: #3f3fa0;
      }
    }

    &:not(.ant-btn-primary) {
      border-color: #d9d9d9;
      
      &:hover {
        color: #4b47b9;
        border-color: #4b47b9;
      }
    }
  }
`;Z(pe)`
  .ant-descriptions-item-label {
    background: #f8f8fc !important;
    font-weight: 600;
    color: #1f1f1f;
  }
  
  .ant-descriptions-item-content {
    background: white !important;
  }
`;Z.div`
  background: #f8f8fc;
  padding: 32px 0;
  border-bottom: 1px solid #e6e6f0;
  margin: -32px -32px 32px;
`;Z(zi)`
  max-width: 900px;
  margin: 0 auto;

  .ant-steps-item {
    padding: 0 12px;
    margin: 0;
    
    &:first-of-type {
      padding-left: 0;
    }
    
    &:last-of-type {
      padding-right: 0;
    }
  }

  .ant-steps-item-container {
    position: relative;
  }

  .ant-steps-item-tail {
    padding: 0;
    top: 13px;
    margin: 0;
    
    &::after {
      height: 1px;
      margin: 0;
      background: #e6e6f0;
    }
  }

  .ant-steps-item-icon {
    width: 28px;
    height: 28px;
    line-height: 28px;
    margin-right: 8px;
    font-size: 14px;
    border: none;
    background: #e6e6f0;
    
    .anticon {
      font-size: 14px;
      top: 0;
    }
  }

  .ant-steps-item-content {
    display: inline-block;
  }

  .ant-steps-item-title {
    font-size: 14px;
    line-height: 28px;
    padding-right: 8px;
    color: rgba(0, 0, 0, 0.45);
    font-weight: normal;
    
    &::after {
      height: 1px;
      top: 14px;
      background: #e6e6f0 !important;
    }
  }

  .ant-steps-item-description {
    max-width: 140px;
    font-size: 12px;
    color: rgba(0, 0, 0, 0.45);
  }

  .ant-steps-item-active {
    .ant-steps-item-icon {
      background: #4b47b9;
      border: none;
      
      .ant-steps-icon {
        color: white;
      }
    }
    
    .ant-steps-item-title {
      color: rgba(0, 0, 0, 0.85);
      font-weight: 500;
      
      &::after {
        background: #e6e6f0;
      }
    }
    
    .ant-steps-item-description {
      color: rgba(0, 0, 0, 0.65);
    }
  }

  .ant-steps-item-finish {
    .ant-steps-item-icon {
      background: #4b47b9;
      border: none;
      
      .ant-steps-icon {
        color: white;
      }
    }
    
    .ant-steps-item-title {
      color: rgba(0, 0, 0, 0.85);
      
      &::after {
        background: #4b47b9 !important;
      }
    }
    
    .ant-steps-item-tail::after {
      background: #4b47b9;
    }
  }

  .ant-steps-item-wait {
    .ant-steps-item-icon {
      background: #e6e6f0;
      border: none;
      
      .ant-steps-icon {
        color: rgba(0, 0, 0, 0.45);
      }
    }
  }
`;Z.div`
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 4px 0;

  .company-name {
    font-weight: 500;
    color: rgba(0, 0, 0, 0.85);
  }

  .contact-details {
    font-size: 12px;
    color: rgba(0, 0, 0, 0.45);
  }
`;Z.div`
  margin-bottom: 32px;

  &:last-child {
    margin-bottom: 0;
  }

  .section-title {
    margin-bottom: 16px;
    padding-bottom: 8px;
    border-bottom: 1px solid #e6e6f0;
  }
`;Z.div`
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
`;Z.div`
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: 24px;
  margin-top: 24px;
`;Z.div`
  display: flex;
  flex-direction: column;
  gap: 16px;
  max-height: 338px; /* Height for 3 cards: (102px Ã— 3) + (16px Ã— 2 gaps) */
  overflow-y: auto;
  padding-right: 8px;
  
  &::-webkit-scrollbar {
    width: 6px;
  }
  
  &::-webkit-scrollbar-track {
    background: #f0f0f0;
    border-radius: 3px;
  }
  
  &::-webkit-scrollbar-thumb {
    background: #ccc;
    border-radius: 3px;
    
    &:hover {
      background: #bbb;
    }
  }
`;Z(W)`
  &.ant-card {
    background: #f8f8fc;
    border: 1px solid #e6e6f0;
    border-radius: 8px;
    position: sticky;
    top: 24px;
  }

  .calculation-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 12px;
    
    &:last-child {
      margin-bottom: 0;
    }
  }

  .total-row {
    border-top: 1px solid #e6e6f0;
    margin-top: 16px;
    padding-top: 16px;
    font-weight: 600;
  }
`;const Qr=({form:t,stallDetails:s=[],selectedStallId:n,selectedStallIds:i=[],selectedStallsCount:r=0,exhibition:l})=>{const[a,f]=c.useState(""),[b,h]=c.useState(null),[N,$]=c.useState([]),[y,D]=c.useState("selected");c.useEffect(()=>{let R=[...(t.getFieldValue("selectedStalls")||[]).map(S=>String(S))];if(n){const S=String(n);R.some(E=>E===S)||R.push(S)}i.length>0&&i.forEach(S=>{const E=String(S);R.some(v=>v===E)||R.push(E)}),console.log("StallDetailsStep - Initial stalls after normalization:",R),t.setFieldsValue({selectedStalls:R}),$(R)},[t,n,i]),c.useEffect(()=>{if(N.length>0){const o=t.getFieldValue("selectedStalls")||[],d=new Set(o.map(E=>String(E))),R=new Set(N.map(E=>String(E)));let S=d.size!==R.size;if(!S){for(const E of R)if(!d.has(E)){S=!0;break}}if(S){console.log("Syncing form with selected stalls:",N);const E=N.map(v=>String(v));t.setFieldsValue({selectedStalls:E}),t.validateFields(["selectedStalls"]).catch(v=>{})}}},[N,t]);const k=c.useMemo(()=>{if(!s||s.length===0)return[];const o=new Set(s.map(d=>d.hallId));return Array.from(o).map(d=>{var R;return{value:d,label:((R=s.find(S=>S.hallId===d))==null?void 0:R.hallName)||`Hall - ${d}`}})},[s]),j=c.useMemo(()=>!s||s.length===0?[]:s.filter(o=>o.status==="available").filter(o=>{var d;return(!a||((d=o.number)==null?void 0:d.toLowerCase().includes(a.toLowerCase())))&&(!b||o.hallId===b)}),[s,a,b]),P=c.useMemo(()=>!s||s.length===0?[]:s.filter(o=>N.includes(o.id)),[s,N]),u=c.useMemo(()=>{var m,w,M;if(!s||s.length===0)return{baseAmount:0,discounts:[],totalDiscountAmount:0,amountAfterDiscount:0,taxes:[],totalTaxAmount:0,total:0,selectedStallNumbers:""};const o=s.filter(T=>N.includes(T.id)),d=o.reduce((T,p)=>T+(p.price||p.ratePerSqm*p.dimensions.width*p.dimensions.height),0),S=(((m=l==null?void 0:l.publicDiscountConfig)==null?void 0:m.filter(T=>T.isActive))||[]).map(T=>{const p=T.type==="percentage"?d*(Math.min(Math.max(0,T.value),100)/100):Math.min(T.value,d);return{name:T.name,type:T.type,value:T.value,amount:p}}),E=S.reduce((T,p)=>T+p.amount,0),v=d-E,g=((M=(w=l==null?void 0:l.taxConfig)==null?void 0:w.filter(T=>T.isActive))==null?void 0:M.map(T=>({name:T.name,rate:T.rate,amount:v*(T.rate/100)})))||[],L=g.reduce((T,p)=>T+p.amount,0),A=v+L;return{baseAmount:d,discounts:S,totalDiscountAmount:E,amountAfterDiscount:v,taxes:g,totalTaxAmount:L,total:A,selectedStallNumbers:o.map(T=>`${T.number} (${T.hallName||`Hall - ${T.hallId}`})`).join(", ")}},[s,N,l==null?void 0:l.taxConfig,l==null?void 0:l.publicDiscountConfig]),x=o=>{const d=String(o),R=N.some(E=>String(E)===d),S=R?N.filter(E=>String(E)!==d):[...N,d];$(S),t.setFieldsValue({selectedStalls:S}),R?ee.info("Stall removed from selection"):ee.success("Stall added to selection")},I=o=>`â‚¹${o.toLocaleString("en-IN")}`;return e.jsxs(zs,{children:[e.jsx(Lu,{children:"Select Your Stalls"}),e.jsx($u,{children:"Click on stalls to select or deselect them. You can select multiple stalls for booking."}),e.jsxs(Fu,{children:[e.jsx(G,{placeholder:"Search by stall number",prefix:e.jsx(bt,{}),value:a,onChange:o=>f(o.target.value),className:"search-input"}),e.jsx(oe,{placeholder:"Filter by hall",allowClear:!0,className:"filter-select",options:k,onChange:o=>h(o)})]}),e.jsx(F.Item,{name:"selectedStalls",rules:[{required:!0,message:"Please select at least one stall"}],style:{display:"none"},children:e.jsx(oe,{mode:"multiple"})}),e.jsxs(Mu,{children:[e.jsxs("div",{className:"tab-header",children:[e.jsxs("div",{className:`tab-item ${y==="selected"?"active":""}`,onClick:()=>D("selected"),children:[e.jsx(Te,{}),e.jsx("span",{children:"Selected Stalls"}),e.jsx("span",{className:`badge ${y==="selected"?"active":""}`,children:N.length})]}),e.jsxs("div",{className:`tab-item ${y==="available"?"active":""}`,onClick:()=>D("available"),children:[e.jsx($n,{}),e.jsx("span",{children:"Available Stalls"})]})]}),y==="selected"&&e.jsx(e.Fragment,{children:P.length>0?e.jsx(Wr,{children:P.map(o=>e.jsxs(Yr,{selected:!0,onClick:()=>x(o.id),children:[e.jsx("div",{className:"selection-indicator",children:e.jsx(Us,{})}),e.jsx("div",{className:"stall-price",children:I(o.price||o.ratePerSqm*o.dimensions.width*o.dimensions.height)}),e.jsxs("div",{className:"stall-number",children:["Stall ",o.number||o.stallNumber,e.jsxs("span",{className:"hall-label",children:["Hall - ",o.hallName||o.hallId]})]}),e.jsxs("div",{className:"stall-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("div",{className:"label",children:"Area"}),e.jsxs("div",{className:"value",children:[o.dimensions.width*o.dimensions.height," sq.m"]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("div",{className:"label",children:"Dimensions"}),e.jsxs("div",{className:"value",children:[o.dimensions.width,"m Ã— ",o.dimensions.height,"m"]})]})]})]},o.id))}):e.jsx(Tt,{description:"No stalls selected yet",image:Tt.PRESENTED_IMAGE_SIMPLE,style:{margin:"32px 0"}})}),y==="available"&&e.jsx(Wr,{children:j.map(o=>e.jsxs(Yr,{selected:N.includes(o.id),onClick:()=>x(o.id),children:[e.jsx("div",{className:"selection-indicator",children:N.includes(o.id)&&e.jsx(Us,{})}),e.jsx("div",{className:"stall-price",children:I(o.price||o.ratePerSqm*o.dimensions.width*o.dimensions.height)}),e.jsxs("div",{className:"stall-number",children:["Stall ",o.number||o.stallNumber,e.jsxs("span",{className:"hall-label",children:["Hall - ",o.hallName||o.hallId]})]}),e.jsxs("div",{className:"stall-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("div",{className:"label",children:"Area"}),e.jsxs("div",{className:"value",children:[o.dimensions.width*o.dimensions.height," sq.m"]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("div",{className:"label",children:"Dimensions"}),e.jsxs("div",{className:"value",children:[o.dimensions.width,"m Ã— ",o.dimensions.height,"m"]})]})]})]},o.id))}),N.length>0&&e.jsxs(Bu,{title:"Booking Summary",children:[e.jsxs("div",{className:"summary-row",children:[e.jsx("div",{className:"label",children:"Selected Stalls"}),e.jsxs("div",{className:"value",children:[N.length," stall(s) selected"]})]}),e.jsxs("div",{className:"summary-row",children:[e.jsx("div",{className:"label",children:"Stall Numbers"}),e.jsx("div",{className:"value",children:u.selectedStallNumbers})]}),e.jsxs("div",{className:"summary-row",children:[e.jsx("div",{className:"label",children:"Base Amount"}),e.jsx("div",{className:"value",children:I(u.baseAmount)})]}),u.discounts.map((o,d)=>e.jsxs("div",{className:"summary-row discount",children:[e.jsxs("div",{className:"label",children:["Discount (",o.name,")",o.type==="percentage"?` (${o.value}%)`:""]}),e.jsxs("div",{className:"value",children:["- ",I(o.amount)]})]},`discount-${d}`)),e.jsxs("div",{className:"summary-row",children:[e.jsx("div",{className:"label",children:"Amount after Discount"}),e.jsx("div",{className:"value",children:I(u.amountAfterDiscount)})]}),u.taxes.map((o,d)=>e.jsxs("div",{className:"summary-row",children:[e.jsxs("div",{className:"label",children:[o.name," (",o.rate,"%)"]}),e.jsx("div",{className:"value",children:I(o.amount)})]},`tax-${d}`)),e.jsxs("div",{className:"summary-row total",children:[e.jsx("div",{className:"label",children:"Total"}),e.jsx("div",{className:"value",children:I(u.total)})]})]})]})]})},{Title:zu,Paragraph:Gr,Text:Kr}=me,Xr=({form:t,formValues:s,selectedStallIds:n=[],exhibition:i})=>{const r=t.getFieldValue("selectedStalls")||n||[];return i&&i.amenities&&i.amenities.length>0,console.log("AmenitiesStep - Selected stalls:",r),e.jsxs(zs,{children:[e.jsx(zu,{level:4,children:"Additional Amenities"}),e.jsx(Gr,{type:"secondary",style:{marginBottom:24},children:"Select additional amenities for your exhibition stalls."}),e.jsx(Ge,{message:"Coming Soon",description:"The amenities selection feature is currently under development and will be available soon. You can continue to the next step without selecting amenities.",type:"info",showIcon:!0,icon:e.jsx(Co,{}),style:{marginBottom:24}}),e.jsx(W,{title:`Selected Stalls: ${r.length}`,children:r.length>0?e.jsxs(Gr,{children:["You've selected ",r.length," stall(s). Additional amenities will be available for these stalls in the next update."]}):e.jsx(Tt,{image:Tt.PRESENTED_IMAGE_SIMPLE,description:"No stalls selected"})}),e.jsx(Fe,{}),e.jsx(W,{title:"Available Amenities",style:{marginTop:24},children:e.jsx(Tt,{image:e.jsx(No,{style:{fontSize:60,color:"#cccccc"}}),description:e.jsxs("span",{children:[e.jsx(Kr,{strong:!0,children:"Amenities Coming Soon"}),e.jsx("br",{}),e.jsx(Kr,{type:"secondary",children:"Please check back later for available amenities."})]})})}),e.jsx(F.Item,{name:"amenities",hidden:!0,initialValue:[],children:e.jsx("input",{type:"hidden"})}),e.jsx(F.Item,{name:"selectedStalls",hidden:!0,children:e.jsx("input",{type:"hidden"})})]})},{Title:xi,Paragraph:Uu,Text:et}=me,Zr=({form:t,stallDetails:s=[],selectedStallId:n,selectedStallIds:i=[],selectedStalls:r=[],exhibition:l,onPrev:a,onFinish:f,loading:b=!1,formValues:h={}})=>{const[N,$]=c.useState([]),y=c.useMemo(()=>{const R=(t.getFieldValue("selectedStalls")||[]).map(E=>String(E));if(console.log("ReviewStep - Form has selectedStalls:",R),console.log("ReviewStep - Props selectedStallIds:",i),console.log("ReviewStep - Props selectedStalls:",r),R.length>0)return R;const S=[];if(n){const E=String(n);S.push(E)}return i&&i.length&&i.forEach(E=>{const v=String(E);S.includes(v)||S.push(v)}),r&&r.length&&r.forEach(E=>{const v=String(E);S.includes(v)||S.push(v)}),console.log("ReviewStep - Final consolidated stall IDs:",S),S},[t,n,i,r]);c.useEffect(()=>{if(console.log("ReviewStep - Processing stall details with IDs:",y),console.log("ReviewStep - Available stall details:",s),s&&s.length&&y.length){const d=s.filter(S=>y.includes(String(S.id)));console.log("ReviewStep - Matched stalls:",d.length);const R=d.map(S=>({key:S.id,id:S.id,number:S.number||S.stallNumber||`Stall ${S.id}`,hallName:S.hallName||`Hall ${S.hallId}`,size:`${S.dimensions.width}m Ã— ${S.dimensions.height}m`,area:S.dimensions.width*S.dimensions.height,rate:S.ratePerSqm,price:S.price||S.ratePerSqm*S.dimensions.width*S.dimensions.height}));$(R)}},[s,y]);const D=t.getFieldValue("amenities")||[],k=c.useMemo(()=>{var M,T,p;const d=N.reduce((C,B)=>C+B.price,0);let R=0;const S=D.map(C=>{var U;const B=(U=l==null?void 0:l.amenities)==null?void 0:U.find(Y=>Y.id===C||Y._id===C);return B?(R+=B.rate||0,{name:B.name,rate:B.rate,type:B.type}):null}).filter(Boolean),v=(((M=l==null?void 0:l.publicDiscountConfig)==null?void 0:M.filter(C=>C.isActive))||[]).map(C=>{const B=C.type==="percentage"?d*(Math.min(Math.max(0,C.value),100)/100):Math.min(C.value,d);return{name:C.name,type:C.type,value:C.value,amount:B}}),g=v.reduce((C,B)=>C+B.amount,0),L=d-g,A=L+R,m=((p=(T=l==null?void 0:l.taxConfig)==null?void 0:T.filter(C=>C.isActive))==null?void 0:p.map(C=>({name:C.name,rate:C.rate,amount:A*(C.rate/100)})))||[],w=m.reduce((C,B)=>C+B.amount,0);return{baseAmount:d,amenities:S,amenitiesTotal:R,discounts:v,totalDiscountAmount:g,amountAfterDiscount:L,subtotal:A,taxes:m,totalTaxAmount:w,total:A+w,stallCount:N.length}},[N,D,l]);c.useEffect(()=>{var R;const d=((R=l==null?void 0:l.publicDiscountConfig)==null?void 0:R.filter(S=>S.isActive))||[];if(d.length>0){const S=d[0];console.log("Setting discountId in form to:",S),t.setFieldsValue({discountId:{name:S.name,type:S.type,value:S.value}})}},[l,t]);const j=[{title:"Stall Number",dataIndex:"number",key:"number"},{title:"Hall",dataIndex:"hallName",key:"hallName"},{title:"Size",dataIndex:"size",key:"size"},{title:"Area",dataIndex:"area",key:"area",render:d=>`${d} sqm`},{title:"Rate",dataIndex:"rate",key:"rate",render:d=>`â‚¹${d}/sqm`},{title:"Price",dataIndex:"price",key:"price",render:d=>`â‚¹${d.toLocaleString()}`}],P=d=>`â‚¹${d.toLocaleString("en-IN")}`,u=h.customerName||t.getFieldValue("customerName"),x=h.customerPhone||t.getFieldValue("customerPhone"),I=h.email||t.getFieldValue("email"),o=h.companyName||t.getFieldValue("companyName");return console.log("ReviewStep - Exhibitor Info:",{customerName:u,companyName:o,customerPhone:x,customerEmail:I,formValues:h,formFieldValues:{customerName:t.getFieldValue("customerName"),companyName:t.getFieldValue("companyName"),customerPhone:t.getFieldValue("customerPhone"),email:t.getFieldValue("email")}}),b?e.jsx(zs,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"300px"},children:e.jsx(Dt,{size:"large",tip:"Processing your booking..."})}):y.length===0?e.jsxs(zs,{children:[e.jsx(Ge,{message:"No Stalls Selected",description:"Please go back and select at least one stall to book.",type:"warning",showIcon:!0}),e.jsx("div",{style:{marginTop:24,textAlign:"right"},children:e.jsx(q,{onClick:a,children:"Back to Stall Selection"})})]}):e.jsxs(zs,{children:[e.jsx(F.Item,{name:"discountId",hidden:!0,children:e.jsx(G,{})}),e.jsx(xi,{level:4,children:"Booking Summary"}),e.jsx(Uu,{type:"secondary",style:{marginBottom:24},children:"Please review your booking details before submitting."}),e.jsx(W,{title:"Exhibitor Information",style:{marginBottom:24},children:e.jsxs(pe,{column:2,children:[e.jsx(pe.Item,{label:"Name",children:u||"Not provided"}),e.jsx(pe.Item,{label:"Company",children:o||"Not provided"}),e.jsx(pe.Item,{label:"Phone",children:x||"Not provided"}),e.jsx(pe.Item,{label:"Email",children:I||"Not provided"})]})}),e.jsxs(W,{title:"Selected Stalls",className:"review-card",size:"small",children:[e.jsx($e,{dataSource:N,columns:j,pagination:!1,size:"small",style:{marginBottom:16}}),e.jsxs(et,{strong:!0,children:["Total Base Amount: ",P(k.baseAmount)]})]}),k.amenities&&k.amenities.length>0&&e.jsxs(W,{title:"Selected Amenities",style:{marginBottom:24},children:[k.amenities.map((d,R)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[e.jsxs("div",{children:[e.jsx(et,{children:d.name}),e.jsx(le,{color:"blue",style:{marginLeft:8},children:d.type})]}),e.jsx(et,{children:P(d.rate)})]},R)),e.jsx(Fe,{}),e.jsxs(et,{strong:!0,children:["Amenities Total: ",P(k.amenitiesTotal)]})]}),e.jsxs(W,{title:"Price Calculation",style:{marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[e.jsx(et,{children:"Base Amount:"}),e.jsx(et,{children:P(k.baseAmount)})]}),k.discounts.length>0&&e.jsx(e.Fragment,{children:k.discounts.map((d,R)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[e.jsxs(et,{children:[d.name," (",d.type==="percentage"?`${d.value}%`:P(d.value),"):"]}),e.jsxs(et,{type:"danger",children:["- ",P(d.amount)]})]},R))}),k.amenitiesTotal>0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[e.jsx(et,{children:"Amenities:"}),e.jsx(et,{children:P(k.amenitiesTotal)})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[e.jsx(et,{strong:!0,children:"Subtotal:"}),e.jsx(et,{strong:!0,children:P(k.subtotal)})]}),k.taxes.length>0&&e.jsx(e.Fragment,{children:k.taxes.map((d,R)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[e.jsxs(et,{children:[d.name," (",d.rate,"%):"]}),e.jsx(et,{children:P(d.amount)})]},R))}),e.jsx(Fe,{}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(xi,{level:5,children:"Total:"}),e.jsx(xi,{level:5,children:P(k.total)})]})]})]})},{confirm:qu}=fe,_u=({visible:t,stallDetails:s,selectedStallId:n,selectedStallIds:i,loading:r,exhibition:l,onCancel:a,onSubmit:f})=>{const[b]=F.useForm(),[h,N]=c.useState(0),[$]=c.useState(3),[y,D]=c.useState({}),[k,j]=c.useState(!1),[P,u]=c.useState(!1),x=ye(L=>L.exhibitorAuth.exhibitor);c.useEffect(()=>{if(t){N(0),j(!1),D({}),b.resetFields();const L=i.map(w=>String(w));n&&L.push(String(n));const A=[...new Set(L)],m={selectedStalls:A,exhibitionId:l==null?void 0:l._id};x&&(m.customerName=x.contactPerson||"",m.companyName=x.companyName||"",m.email=x.email||"",m.customerPhone=x.phone||""),b.setFieldsValue(m),D(m),console.log("Booking form initialized with stalls:",A),console.log("Exhibitor profile data:",x)}},[t,b,n,i,l,x]);const I=()=>{j(!0)},o=()=>{k?qu({title:"Discard changes?",icon:e.jsx(ss,{}),content:"You have unsaved changes. Are you sure you want to close this form?",onOk(){a()}}):a()},d=()=>{u(!0),b.validateFields().then(L=>{const A={...y,...L},m={customerName:b.getFieldValue("customerName"),companyName:b.getFieldValue("companyName"),email:b.getFieldValue("email"),customerPhone:b.getFieldValue("customerPhone")},w={...A,...m};D(w),console.log("Step completed, saving form values:",w),console.log("Selected stalls are:",w.selectedStalls||[]),console.log("Exhibitor info:",m),N(h+1),u(!1)}).catch(L=>{u(!1),console.error("Form validation failed:",L),ee.error("Please complete all required fields")})},R=()=>{N(h-1)},S=()=>{b.validateFields().then(L=>{const A={customerName:b.getFieldValue("customerName"),companyName:b.getFieldValue("companyName"),email:b.getFieldValue("email"),customerPhone:b.getFieldValue("customerPhone")},m={...y,...L,...A};console.log("Submitting booking with values:",m),f(m)}).catch(L=>{console.error("Form validation failed:",L),ee.error("Please complete all required fields")})},E=["Stall Details","Amenities","Review"],v=[{title:"Stall Details",icon:e.jsx(Eo,{}),content:e.jsx(Qr,{form:b,stallDetails:s,selectedStallId:n,selectedStallIds:i,exhibition:l})},{title:"Amenities",icon:e.jsx(Ks,{}),content:e.jsx(Xr,{form:b,stallDetails:s,selectedStallIds:b.getFieldValue("selectedStalls")||[],exhibition:l,formValues:y})},{title:"Review",icon:e.jsx(Te,{}),content:e.jsx(Zr,{form:b,formValues:y,loading:r,exhibition:l,selectedStalls:b.getFieldValue("selectedStalls")||[],selectedStallIds:b.getFieldValue("selectedStalls")||[],stallDetails:s})}];c.useEffect(()=>{const L=b.getFieldValue("selectedStalls");console.log(`Step ${h} - Form has selectedStalls:`,L)},[h,b]);const g=L=>{const A=b.getFieldValue("selectedStalls")||[],m={customerName:b.getFieldValue("customerName"),companyName:b.getFieldValue("companyName"),email:b.getFieldValue("email"),customerPhone:b.getFieldValue("customerPhone")},w={...y,...m};switch(console.log(`Rendering step ${L} with:`,{selectedStalls:A,exhibitorInfo:m}),L){case 0:return e.jsx(Qr,{form:b,stallDetails:s,selectedStallId:n,selectedStallIds:i,exhibition:l});case 1:return e.jsx(Xr,{form:b,stallDetails:s,selectedStallIds:A,exhibition:l,formValues:w});case 2:return e.jsx(Zr,{form:b,formValues:w,loading:r,exhibition:l,selectedStalls:A,selectedStallIds:A,stallDetails:s,onPrev:R,onFinish:S});default:return null}};return e.jsx(Du,{title:`Book Exhibition Stall - ${E[h]}`,open:t,onCancel:o,footer:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"12px 24px"},children:[h>0&&e.jsx(hi,{onClick:R,disabled:P||r,size:"large",children:"Back"}),e.jsx("div",{children:h<$-1?e.jsx(hi,{type:"primary",onClick:d,loading:P,disabled:r,size:"large",children:"Next"}):e.jsx(hi,{type:"primary",onClick:S,loading:r,disabled:P,size:"large",children:"Submit Booking"})})]}),width:900,destroyOnClose:!0,maskClosable:!1,className:"booking-modal",children:e.jsxs(Dt,{spinning:r||P,tip:r?"Processing your booking...":"Validating...",children:[e.jsx(Ru,{children:v.map((L,A)=>e.jsxs("div",{className:`step-item ${h===A?"active":""} ${h>A?"completed":""}`,onClick:()=>h>A?N(A):null,style:{cursor:h>A?"pointer":"default"},children:[e.jsx("span",{className:"step-icon",children:h>A?e.jsx(Us,{}):A+1}),L.title]},A))}),e.jsx(F,{form:b,layout:"vertical",preserve:!0,onFieldsChange:I,children:g(h)},`form-step-${h}`)]})})},{Header:Ou}=De,{Step:pi}=zi,{Title:Dx,Text:Vu}=me,Hu=Z(Ou)`
  background: #fff;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
  padding: 0 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: fixed;
  width: 100%;
  z-index: 1000;
  
  @media (max-width: 768px) {
    padding: 0 1rem;
  }
`,Wu=Z.div`
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  display: flex;
  justify-content: space-between;
  align-items: center;
  
  @media (max-width: 768px) {
    justify-content: space-between;
  }
`,Yu=Z.div`
  display: flex;
  align-items: center;
  justify-content: center;
  
  @media (max-width: 768px) {
    position: static;
    transform: none;
    justify-content: flex-start;
  }
`,Qu=Z.div`
  border-radius: 8px;
  padding: 10px;
  display: flex;
  justify-content: center;
  align-items: center;
  
  @media (max-width: 768px) {
    padding: 8px;
  }
`,Gu=Z.img`
  height: auto;
  width: 100%;
  max-width: 140px;
  max-height: auto;
  object-fit: contain;
  
  @media (max-width: 768px) {
    max-width: 120px;
  }
`;Z.span`
  font-size: 1.5rem;
  font-weight: bold;
  color: #1890ff;
`;const Jr=Z(yt)`
  background-color: #1890ff;
  cursor: pointer;
  transition: all 0.3s;
  border: 2px solid transparent;
  
  &:hover {
    background-color: #40a9ff;
    border-color: #e6f7ff;
    transform: scale(1.05);
    box-shadow: 0 0 10px rgba(24, 144, 255, 0.3);
  }
`,ea=Z(at)`
  background: white;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  padding: 8px 0;
  
  .ant-dropdown-menu-item {
    padding: 10px 16px;
    transition: all 0.2s;
    
    &:hover {
      background-color: #fafafa;
    }
  }
`,Ku=Z(at)`
  border: none;
  display: flex;
  justify-content: center;
  font-size: 15px;
  
  @media (max-width: 768px) {
    display: none !important;
  }
`,Xu=Z(q)`
  display: none;
  font-size: 18px;
  background: transparent;
  border: none;
  padding: 8px;
  transition: all 0.3s ease;
  
  @media (max-width: 768px) {
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 5;
  }
  
  &:hover {
    transform: rotate(90deg);
    color: #4158D0;
  }
  
  &:active {
    transform: scale(0.9) rotate(90deg);
  }
`,Zu=Z.div`
  .ant-drawer-header {
    padding: 16px 24px;
  }
  
  .ant-drawer-title {
    font-size: 16px;
    font-weight: 600;
  }
  
  .ant-drawer-body {
    padding: 24px 16px;
  }
  
  .ant-drawer-content-wrapper {
    max-width: 80%;
  }
`,Ju=Z(tt)`
  display: block;
  padding: 16px 8px;
  margin-bottom: 8px;
  color: #333;
  font-size: 16px;
  border-bottom: 1px solid #f0f0f0;
  
  &:hover {
    color: #1890ff;
  }
`,un=Z(q)`
  width: 100%;
  margin-bottom: 12px;
  height: auto;
  padding: 12px 16px;
  font-size: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  
  svg {
    margin-right: 10px;
    font-size: 18px;
  }
`,eh=Z.div`
  display: flex;
  align-items: center;
  
  @media (max-width: 768px) {
    display: none;
  }
`,th=Z.span`
  margin-right: 8px;
  display: none;
  
  @media (min-width: 768px) {
    display: inline;
  }
`,ft=()=>{var ae;const t=Se(),s=Me(),[n,i]=c.useState(!1),[r,l]=c.useState(!1),a=ye(re=>re.exhibitorAuth),[f,b]=c.useState("/logo.png"),[h,N]=c.useState("Exhibition Manager"),[$,y]=c.useState(!1),[D,k]=c.useState(!1),[j,P]=c.useState(!1),[u,x]=c.useState(null),[I]=F.useForm(),[o]=F.useForm(),[d]=F.useForm(),[R,S]=c.useState(0),[E,v]=c.useState(""),[g,L]=c.useState(!1),[A,m]=c.useState(!1),[w,M]=c.useState(0),[T,p]=c.useState({companyName:"",contactPerson:""}),C=c.useRef(null);c.useEffect(()=>{const re=localStorage.getItem("cachedLogoUrl"),he=localStorage.getItem("logoTimestamp"),J=new Date().getTime();if(re&&he&&J-parseInt(he)<36e5)b(re);else{const ie=`${se.defaults.baseURL}/public/logo`;b(ie),localStorage.setItem("cachedLogoUrl",ie),localStorage.setItem("logoTimestamp",J.toString());const xe=new Image;xe.src=ie}fetch(`${se.defaults.baseURL}/public/site-info`).then(ie=>ie.json()).then(ie=>{ie.siteName&&N(ie.siteName)}).catch(ie=>{console.error("Error fetching site info:",ie)})},[]),c.useEffect(()=>{y(a.showLoginModal)},[a.showLoginModal]),c.useEffect(()=>(ee.config({top:84,duration:3,maxCount:1}),()=>{ee.destroy()}),[]);const B=()=>{s(Da()),ee.success("Successfully logged out"),t("/"),i(!1),l(!1)},U=async re=>{var he,J,ie,xe,ge,Ie,Be,Ze,vt;try{x(null),P(!0);const nt=await rt.login(re),{exhibitor:Wt,token:Yt}=nt.data;if(!Wt||!Yt)throw new Error("Invalid response from server");s(Ei({exhibitor:Wt,token:Yt})),s(mr()),I.resetFields(),ee.success("Login successful!")}catch(nt){if(((he=nt.response)==null?void 0:he.status)===403){const Wt=(ie=(J=nt.response)==null?void 0:J.data)==null?void 0:ie.status;if(Wt==="pending")x("Your account is pending approval. You will be able to log in after admin approval.");else if(Wt==="rejected"){const Yt=(ge=(xe=nt.response)==null?void 0:xe.data)==null?void 0:ge.rejectionReason;x(Yt?`Your registration has been rejected. Reason: ${Yt}`:"Your registration has been rejected. Please contact the administrator for more details.")}else x(((Be=(Ie=nt.response)==null?void 0:Ie.data)==null?void 0:Be.message)||"Access denied. Please contact administrator.")}else x(((vt=(Ze=nt.response)==null?void 0:Ze.data)==null?void 0:vt.message)||"Login failed. Please try again.")}finally{P(!1)}},Y=async()=>{var re,he;try{const J=await o.validateFields(["email","companyName","contactPerson"]);P(!0),x(null),v(J.email),p({companyName:J.companyName,contactPerson:J.contactPerson}),await rt.sendRegistrationOTP(J.email),L(!0),ee.success("OTP sent to your email address"),M(60),Q(),S(1)}catch(J){if(J.name==="ValidationError")return;const ie=((he=(re=J.response)==null?void 0:re.data)==null?void 0:he.message)||"Failed to send OTP. Please try again.";x(ie),ee.error(ie)}finally{P(!1)}},Q=()=>{C.current&&clearInterval(C.current),C.current=setInterval(()=>{M(re=>re<=1?(C.current&&clearInterval(C.current),0):re-1)},1e3)},K=async()=>{var re,he;try{P(!0),x(null),await rt.sendRegistrationOTP(E),ee.success("New OTP sent to your email address"),M(60),Q()}catch(J){const ie=((he=(re=J.response)==null?void 0:re.data)==null?void 0:he.message)||"Failed to resend OTP. Please try again.";x(ie),ee.error(ie)}finally{P(!1)}},V=async re=>{var he,J;try{P(!0),x(null);const ie={email:E,otp:re.otp};await rt.verifyOTP(ie),m(!0),ee.success("Email verified successfully"),C.current&&clearInterval(C.current),S(2)}catch(ie){const xe=((J=(he=ie.response)==null?void 0:he.data)==null?void 0:J.message)||"Invalid OTP. Please try again.";x(xe),ee.error(xe)}finally{P(!1)}},_=()=>{L(!1),m(!1),v(""),M(0),S(0),p({companyName:"",contactPerson:""}),C.current&&clearInterval(C.current),d.resetFields()},H=async re=>{var he,J,ie;try{if(x(null),P(!0),!A){x("Email verification required");return}const{confirmPassword:xe,...ge}=re,Ie={...ge,email:E,companyName:T.companyName,contactPerson:T.contactPerson};console.log("Sending registration data:",Ie);const Be=await rt.register(Ie);ee.success("Registration successful! You can log in and book a stall only after admin approval."),k(!1),o.resetFields(),_(),setTimeout(()=>{y(!0),s(Bn(void 0))},500)}catch(xe){console.error("Registration error:",xe),console.error("Response data:",(he=xe.response)==null?void 0:he.data);const ge=((ie=(J=xe.response)==null?void 0:J.data)==null?void 0:ie.message)||"Registration failed. Please try again.";x(ge),ee.error(ge)}finally{P(!1)}};c.useEffect(()=>()=>{C.current&&clearInterval(C.current)},[]);const te=()=>{k(!1),x(null),o.resetFields(),_()},ue=()=>{s(Bn(void 0)),i(!1),l(!1)},ke=()=>{k(!0),i(!1),l(!1)},de=()=>{y(!1),k(!0),I.resetFields()},ce=()=>{k(!1),y(!0),o.resetFields()},be=[{key:"exhibitions",label:"Exhibitions",path:"/exhibitions"},{key:"about",label:"About",path:"/about"},{key:"contact",label:"Contact",path:"/contact"}],Je=e.jsx(ea,{items:[{key:"exhibitor-login",icon:e.jsx(nr,{}),label:e.jsx("a",{onClick:ue,children:"Exhibitor Login"})},{key:"exhibitor-register",icon:e.jsx(ws,{}),label:e.jsx("a",{onClick:ke,children:"Register as Exhibitor"})}]}),O=e.jsx(ea,{items:[{key:"exhibitor-dashboard",icon:e.jsx(Dn,{}),label:e.jsx(tt,{to:"/exhibitor/dashboard",children:"Dashboard"})},{key:"exhibitor-profile",icon:e.jsx(Ce,{}),label:e.jsx(tt,{to:"/exhibitor/profile",children:"My Profile"})},{key:"exhibitor-bookings",icon:e.jsx(lt,{}),label:e.jsx(tt,{to:"/exhibitor/bookings",children:"My Bookings"})},{key:"divider",type:"divider"},{key:"exhibitor-logout",icon:e.jsx(Ln,{}),label:e.jsx("a",{onClick:B,children:"Logout"})}]});return e.jsxs(e.Fragment,{children:[e.jsx(Hu,{children:e.jsxs(Wu,{children:[e.jsx(Yu,{children:e.jsx(tt,{to:"/",style:{display:"flex",alignItems:"center",textDecoration:"none"},children:e.jsx(Qu,{children:e.jsx(Gu,{src:f,alt:"Logo",onError:()=>b("/logo.png")})})})}),e.jsx(Ku,{mode:"horizontal",selectedKeys:[],style:{flex:1,display:"flex",justifyContent:"center"},items:be.map(re=>({key:re.key,label:e.jsx(tt,{to:re.path,children:re.label})}))}),e.jsx(eh,{children:e.jsx(_t,{overlay:a.isAuthenticated?O:Je,trigger:["click"],placement:"bottomRight",open:n,onOpenChange:i,overlayStyle:{minWidth:"150px",marginTop:"10px"},children:a.isAuthenticated?e.jsxs(X,{style:{cursor:"pointer"},children:[e.jsx(th,{children:((ae=a.exhibitor)==null?void 0:ae.companyName)||"Exhibitor"}),e.jsx(Jr,{icon:e.jsx(Ce,{}),size:"large"})]}):e.jsx(Jr,{icon:e.jsx(Ce,{}),size:"large"})})}),e.jsx(Xu,{icon:e.jsx(Ao,{}),onClick:()=>l(!0)})]})}),e.jsx(Zu,{children:e.jsxs(To,{title:"Exhibition Management System",placement:"right",onClose:()=>l(!1),open:r,width:280,closeIcon:e.jsx("span",{style:{fontSize:"16px"},children:"Ã—"}),children:[e.jsx("div",{style:{marginBottom:24},children:be.map(re=>e.jsx(Ju,{to:re.path,onClick:()=>l(!1),children:re.label},re.key))}),e.jsx("div",{style:{marginTop:40},children:a.isAuthenticated?e.jsxs(e.Fragment,{children:[e.jsx(un,{type:"primary",icon:e.jsx(Dn,{}),onClick:()=>{t("/exhibitor/dashboard"),l(!1)},children:"Dashboard"}),e.jsx(un,{type:"default",icon:e.jsx(Ln,{}),onClick:B,children:"Logout"})]}):e.jsxs(e.Fragment,{children:[e.jsx(un,{type:"primary",style:{background:"#7E57C2",borderColor:"#7E57C2"},icon:e.jsx(nr,{}),onClick:()=>{ue(),l(!1)},children:"Exhibitor Login"}),e.jsx(un,{type:"default",icon:e.jsx(ws,{}),onClick:()=>{ke(),l(!1)},children:"Register as Exhibitor"})]})})]})}),e.jsxs(fe,{title:"Exhibitor Login",open:$,onCancel:()=>{s(mr()),x(null),I.resetFields()},footer:null,width:400,children:[a.loginContext==="stall-booking"&&e.jsx(Ge,{message:"Login Required for Stall Booking",description:"Please log in to your exhibitor account to select and book stalls for this exhibition.",type:"info",showIcon:!0,style:{marginBottom:16}}),u&&e.jsx(Ge,{message:u,type:"error",showIcon:!0,style:{marginBottom:16}}),e.jsxs(F,{form:I,name:"exhibitor_login_modal",onFinish:U,layout:"vertical",children:[e.jsx(F.Item,{name:"email",rules:[{required:!0,message:"Please input your email!"},{type:"email",message:"Please enter a valid email address!"}],children:e.jsx(G,{prefix:e.jsx(qt,{}),placeholder:"Email",size:"large",disabled:j})}),e.jsx(F.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}],children:e.jsx(G.Password,{prefix:e.jsx(yn,{}),placeholder:"Password",size:"large",disabled:j})}),e.jsx(F.Item,{children:e.jsx(q,{type:"primary",htmlType:"submit",block:!0,size:"large",loading:j,children:"Login"})})]}),e.jsx(Fe,{children:e.jsx("span",{style:{fontSize:"14px",color:"#888"},children:"Don't have an account?"})}),e.jsx(q,{type:"default",block:!0,onClick:de,children:"Register as Exhibitor"})]}),e.jsxs(fe,{title:"Exhibitor Registration",open:D,onCancel:te,footer:null,width:500,children:[e.jsxs(zi,{current:R,style:{marginBottom:24},children:[e.jsx(pi,{title:"Basic Info"}),e.jsx(pi,{title:"Verify Email"}),e.jsx(pi,{title:"Complete"})]}),u&&e.jsx(Ge,{message:u,type:"error",showIcon:!0,style:{marginBottom:16}}),R===0&&e.jsxs(e.Fragment,{children:[e.jsx(Ge,{message:"Email Verification Required",description:"We'll send a one-time password (OTP) to verify your email before completing registration.",type:"info",showIcon:!0,style:{marginBottom:16}}),e.jsxs(F,{form:o,name:"exhibitor_register_step1",layout:"vertical",children:[e.jsx(F.Item,{name:"companyName",rules:[{required:!0,message:"Please input your company name!"}],children:e.jsx(G,{prefix:e.jsx($i,{}),placeholder:"Company Name",size:"large",disabled:j})}),e.jsx(F.Item,{name:"contactPerson",rules:[{required:!0,message:"Please input contact person name!"}],children:e.jsx(G,{prefix:e.jsx(Ce,{}),placeholder:"Contact Person",size:"large",disabled:j})}),e.jsx(F.Item,{name:"email",rules:[{required:!0,message:"Please input your email!"},{type:"email",message:"Please enter a valid email address!"}],children:e.jsx(G,{prefix:e.jsx(qt,{}),placeholder:"Email",size:"large",disabled:j})}),e.jsx(F.Item,{children:e.jsx(q,{type:"primary",onClick:Y,block:!0,size:"large",loading:j,children:"Continue & Verify Email"})})]}),e.jsx(Fe,{children:e.jsx("span",{style:{fontSize:"14px",color:"#888"},children:"Already have an account?"})}),e.jsx(q,{type:"default",block:!0,onClick:ce,children:"Login"})]}),R===1&&e.jsxs(e.Fragment,{children:[e.jsx(Ge,{message:"Email Verification",description:`We've sent a verification code to ${E}. Please enter it below to continue.`,type:"info",showIcon:!0,style:{marginBottom:16}}),e.jsxs(F,{form:d,name:"verify_otp",onFinish:V,layout:"vertical",children:[e.jsx(F.Item,{name:"otp",rules:[{required:!0,message:"Please enter the verification code!"}],children:e.jsx(G,{size:"large",placeholder:"Enter OTP",maxLength:6,style:{textAlign:"center",letterSpacing:"8px",fontSize:"20px"},disabled:j})}),e.jsx(F.Item,{children:e.jsx(q,{type:"primary",htmlType:"submit",block:!0,size:"large",loading:j,children:"Verify & Continue"})})]}),e.jsxs(ne,{justify:"space-between",align:"middle",style:{marginTop:16},children:[e.jsx(z,{children:e.jsx(q,{type:"link",disabled:w>0||j,onClick:K,children:"Resend Code"})}),e.jsx(z,{children:w>0&&e.jsxs(Vu,{type:"secondary",children:["Resend in ",w,"s"]})})]}),e.jsx(Fe,{}),e.jsx(q,{type:"default",block:!0,onClick:()=>S(0),children:"Back"})]}),R===2&&e.jsxs(e.Fragment,{children:[e.jsx(Ge,{message:"Email Verified Successfully",description:"Please complete your registration by providing the remaining details.",type:"success",showIcon:!0,style:{marginBottom:16}}),e.jsxs(F,{form:o,name:"exhibitor_register_step2",onFinish:H,layout:"vertical",children:[e.jsx(F.Item,{name:"phone",rules:[{required:!0,message:"Please input your phone number!"}],children:e.jsx(G,{prefix:e.jsx(Fi,{}),placeholder:"Phone Number",size:"large",disabled:j})}),e.jsx(F.Item,{name:"address",rules:[{required:!0,message:"Please input your address!"}],children:e.jsx(G.TextArea,{placeholder:"Address",rows:3,disabled:j})}),e.jsx(F.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"},{min:6,message:"Password must be at least 6 characters!"}],children:e.jsx(G.Password,{prefix:e.jsx(yn,{}),placeholder:"Password",size:"large",disabled:j})}),e.jsx(F.Item,{name:"confirmPassword",dependencies:["password"],rules:[{required:!0,message:"Please confirm your password!"},({getFieldValue:re})=>({validator(he,J){return!J||re("password")===J?Promise.resolve():Promise.reject(new Error("The two passwords do not match!"))}})],children:e.jsx(G.Password,{prefix:e.jsx(yn,{}),placeholder:"Confirm Password",size:"large",disabled:j})}),e.jsx(F.Item,{children:e.jsx(q,{type:"primary",htmlType:"submit",block:!0,size:"large",loading:j,children:"Complete Registration"})})]})]})]})]})},{Content:hn}=De,{Title:Rx}=me,sh=t=>{if(!t)return"";if(t.startsWith("http"))return t;const s=t.startsWith("/")?t.substring(1):t;if(s.includes("logos/"))return`${se.defaults.baseURL}/public/images/${s}`;const n=localStorage.getItem("token"),i=`uploads/${s}`;return n?`${se.defaults.baseURL}/${i}?token=${n}`:`${se.defaults.baseURL}/${i}`},nh=()=>{var C,B,U,Y;const{id:t}=dt(),s=Se(),n=Me(),[i,r]=c.useState(null),[l,a]=c.useState(null),[f,b]=c.useState(null),[h,N]=c.useState([]),[$,y]=c.useState(!1),[D,k]=c.useState(!0),[j,P]=c.useState(null),[u,x]=c.useState(!1),[I,o]=c.useState(null),d=c.useRef(null),[R,S]=c.useState({width:800,height:600}),[E,v]=c.useState(!1),[g]=F.useForm(),{isAuthenticated:L}=ye(Q=>Q.exhibitorAuth);c.useEffect(()=>{const Q=()=>{v(window.innerWidth<768)};return Q(),window.addEventListener("resize",Q),()=>{window.removeEventListener("resize",Q)}},[]);const A=c.useCallback(Q=>Q.status==="booked"||Q.status==="reserved",[]),m=c.useCallback(()=>{if(d.current){const{clientWidth:Q,clientHeight:K}=d.current,V=E?320:800,_=E?480:600,H=Math.max(Q||V,V),te=Math.max(K||_,_);(Math.abs(H-R.width)>5||Math.abs(te-R.height)>5)&&S({width:H,height:te})}},[R.width,R.height,E]);c.useEffect(()=>{let Q=null;const K=()=>{Q===null&&(Q=window.setTimeout(()=>{Q=null,m()},E?100:50))};m();const V=new ResizeObserver(K);return d.current&&V.observe(d.current),window.addEventListener("resize",K),()=>{Q!==null&&window.clearTimeout(Q),V.disconnect(),window.removeEventListener("resize",K)}},[m,E]),c.useEffect(()=>{(async()=>{try{if(!t){P("Exhibition ID is missing"),k(!1);return}k(!0),P(null);const K=await xt.getLayout(t);r(K.data)}catch(K){P(K.message||"Failed to fetch layout"),console.error("Error fetching exhibition:",K)}finally{k(!1)}})()},[t]),c.useEffect(()=>{i&&m()},[i]),c.useEffect(()=>{console.log("Authentication state changed:",L),L&&i&&(b(null),N([]),m(),ee.info("You can now select stalls to book.",3))},[L]);const w=c.useCallback(async Q=>{if(A(Q)){ee.info(`This stall (${Q.stallNumber}) is already booked.`);return}if(!L){n(Bn("stall-booking"));return}const V=Q._id||Q.id;N(_=>_.includes(V)?(ee.info(`Stall ${Q.stallNumber} removed from selection`),_.filter(H=>H!==V)):(ee.success(`Stall ${Q.stallNumber} added to selection`),[..._,V]))},[A,L,n]),M=async Q=>{try{x(!0),console.log("BOOKING - Form values:",JSON.stringify(Q,null,2)),console.log("BOOKING - DiscountId:",Q.discountId),console.log("BOOKING - Selected stalls:",Q.selectedStalls);const K={...Q,exhibitionId:i==null?void 0:i.exhibition._id,stallIds:Q.selectedStalls};if(console.log("BOOKING - Final data being sent:",JSON.stringify(K,null,2)),L){const V=await xt.exhibitorBookStalls(K);console.log("BOOKING - Response:",V.data),ee.success("Your booking request has been submitted successfully! It is pending review by the admin.")}else{const V=await xt.bookMultipleStalls(t,K);console.log("BOOKING - Response:",V.data),ee.success("Your booking request has been submitted successfully!")}if(y(!1),N([]),t)try{const V=await xt.getLayout(t);r(V.data),console.log("Layout refreshed with updated stall statuses")}catch(V){console.error("Error refreshing layout data:",V)}}catch(K){console.error("Error booking stall",K),ee.error("Failed to book stall. Please try again.")}finally{x(!1)}},T=async()=>{if(h.length===0){ee.warning("Please select at least one stall to book");return}try{x(!0),await xt.getStallDetails(t,h[0]);const Q=(i==null?void 0:i.layout.flatMap(K=>K.stalls.map(V=>{var _,H;return{id:V.id,number:V.stallNumber,stallNumber:V.stallNumber,price:V.price||0,ratePerSqm:(_=V.dimensions)!=null&&_.width&&((H=V.dimensions)!=null&&H.height)?(V.price||0)/(V.dimensions.width*V.dimensions.height):0,dimensions:V.dimensions,status:V.status,hallId:K.id,hallName:K.name}})))||[];o(Q),y(!0)}catch(Q){console.error("Error preparing booking modal",Q),ee.error("Failed to load stall details. Please try again.")}finally{x(!1)}};c.useCallback(Q=>{Q.cancelBubble=!0},[]);const p=c.useMemo(()=>{var Q;return i?{halls:i.layout.map(K=>e.jsx(Ga,{hall:{...K,exhibitionId:t||""},isSelected:!1,onSelect:()=>{},isStallMode:!0},K.id)),stalls:i.layout.flatMap(K=>K.stalls.map(V=>{var _,H,te,ue,ke,de,ce,be;return e.jsx(Xi,{stall:{...V,hallId:K.id,hallName:K.name,isSelected:h.includes(V.id),stallTypeId:"default",number:V.stallNumber,typeName:V.type||"Standard",ratePerSqm:V.price||0,rotation:0,dimensions:{x:((_=V.position)==null?void 0:_.x)||0,y:((H=V.position)==null?void 0:H.y)||0,width:((te=V.dimensions)==null?void 0:te.width)||0,height:((ue=V.dimensions)==null?void 0:ue.height)||0},status:V.status==="maintenance"?"booked":V.status},isSelected:f===V.id||h.includes(V.id),onSelect:V.status==="available"?()=>w(V):void 0,hallWidth:((ke=K.dimensions)==null?void 0:ke.width)||0,hallHeight:((de=K.dimensions)==null?void 0:de.height)||0,hallX:((ce=K.dimensions)==null?void 0:ce.x)||0,hallY:((be=K.dimensions)==null?void 0:be.y)||0},V.id)})),fixtures:(Q=i.fixtures)==null?void 0:Q.map(K=>{var V,_;return e.jsx(Ka,{fixture:{...K,id:K.id||K._id,_id:K._id||K.id,exhibitionId:t||"",isActive:!0,zIndex:5},scale:1,position:{x:0,y:0},exhibitionWidth:((V=i.exhibition.dimensions)==null?void 0:V.width)||0,exhibitionHeight:((_=i.exhibition.dimensions)==null?void 0:_.height)||0},K.id||K._id)})}:null},[i,t,f,h,w]);return D?e.jsxs(De,{children:[e.jsx(ft,{}),e.jsx(hn,{style:{paddingTop:"64px"},children:e.jsxs("div",{style:{textAlign:"center",padding:"48px"},children:[e.jsx(Dt,{size:"large"}),e.jsx("p",{style:{marginTop:16},children:"Loading exhibition layout..."})]})})]}):j||!i?e.jsxs(De,{children:[e.jsx(ft,{}),e.jsx(hn,{style:{paddingTop:"64px"},children:e.jsx(Os,{status:"error",title:"Failed to load exhibition layout",subTitle:j||"The exhibition layout couldn't be loaded.",extra:[e.jsx(q,{type:"primary",onClick:()=>s("/exhibitions"),children:"Back to Exhibitions"},"back")]})})]}):!((C=i.exhibition.dimensions)!=null&&C.width)||!((B=i.exhibition.dimensions)!=null&&B.height)?e.jsxs(De,{children:[e.jsx(ft,{}),e.jsx(hn,{style:{paddingTop:"64px"},children:e.jsx(W,{children:e.jsx(Os,{status:"error",title:"Invalid Exhibition Layout",subTitle:"Exhibition dimensions are not properly configured"})})})]}):e.jsxs(De,{children:[e.jsx(ft,{}),e.jsx(hn,{style:{paddingTop:"64px",background:"#f7f8fa"},children:e.jsxs(W,{className:"exhibition-card",style:{borderRadius:"8px",overflow:"hidden",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.08)",margin:"10px 0px",border:"none"},children:[e.jsxs(ne,{gutter:[24,24],style:{marginBottom:32},children:[e.jsx(z,{xs:24,md:12,children:e.jsxs("div",{style:{padding:"16px",background:"linear-gradient(145deg, #ffffff, #f8faff)",borderRadius:"8px",border:"1px solid rgba(230, 235, 245, 0.8)",height:"100%",display:"flex",flexDirection:"row",alignItems:"center",gap:"16px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.03)"},children:[e.jsx("div",{style:{flexShrink:0},children:i.exhibition.headerLogo?e.jsx(ya,{src:sh(i.exhibition.headerLogo),alt:`${i.exhibition.name} logo`,style:{maxHeight:90,maxWidth:250,objectFit:"contain"},preview:!1,fallback:"/exhibition-placeholder.jpg",placeholder:e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:250,height:90,backgroundColor:"#f5f5f5",borderRadius:"8px"},children:e.jsx(Dt,{size:"small"})})}):e.jsx("div",{style:{width:90,height:90,display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(145deg, #f0f0f0, #e6e6e6)",borderRadius:"8px",boxShadow:"inset 0 2px 4px rgba(0, 0, 0, 0.05)"},children:e.jsx(Et,{style:{fontSize:32,color:"#aaa"}})})}),e.jsx(Fe,{type:"vertical",style:{height:"90px",margin:"0 16px",opacity:.6}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"22px",fontWeight:600,background:"linear-gradient(90deg, #333, #666)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:i.exhibition.name}),e.jsxs("p",{style:{margin:"0 0 8px 0",display:"flex",alignItems:"center",gap:"8px",color:"#555",fontSize:"14px"},children:[e.jsx(Et,{style:{fontSize:"16px",color:"#1890ff"}}),e.jsxs("span",{children:[new Date(i.exhibition.startDate).toLocaleDateString()," -",new Date(i.exhibition.endDate).toLocaleDateString()]})]}),e.jsxs("p",{style:{margin:0,display:"flex",alignItems:"center",gap:"8px",color:"#555",fontSize:"14px"},children:[e.jsx(Qs,{style:{fontSize:"16px",color:"#1890ff"}}),e.jsx("span",{children:i.exhibition.venue})]})]})]})}),e.jsx(z,{xs:24,md:12,children:e.jsxs("div",{style:{padding:"24px",background:"linear-gradient(145deg, #ffffff, #f9fbfd)",borderRadius:"12px",border:"1px solid rgba(230, 235, 245, 0.8)",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.03)"},children:[e.jsx("div",{style:{marginBottom:"12px",fontSize:"16px",fontWeight:500,color:"#444"},children:"Stall Status:"}),e.jsxs(X,{size:"middle",wrap:!0,children:[e.jsx(le,{color:"#87d068",style:{padding:"6px 14px",borderRadius:"20px",fontSize:"13px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)"},children:e.jsx(Xe,{status:"success",text:"Available"})}),e.jsx(le,{color:"#ffd591",style:{padding:"6px 14px",borderRadius:"20px",fontSize:"13px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)"},children:e.jsx(Xe,{status:"warning",text:"Booked"})}),e.jsx(le,{color:"#ffadd2",style:{padding:"6px 14px",borderRadius:"20px",fontSize:"13px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)"},children:e.jsx(Xe,{status:"processing",text:"Reserved"})}),h.length>0&&e.jsx(le,{color:"#1890ff",style:{padding:"6px 14px",borderRadius:"20px",fontSize:"13px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:e.jsx(Xe,{status:"processing",color:"#1890ff",text:`Selected (${h.length})`})})]})]})})]}),e.jsxs("div",{ref:d,style:{width:"100%",height:"80vh",minHeight:"600px",background:"#ffffff",borderRadius:"12px",overflow:"hidden",position:"relative",border:"1px solid rgba(230, 235, 245, 0.8)",boxShadow:"inset 0 2px 6px rgba(0, 0, 0, 0.03)",willChange:"transform"},children:[e.jsx("style",{children:`
                /* Hide only canvas context menu in public view */
                .konvajs-content .ant-menu {
                  display: none !important;
                }
                
                /* Optimize rendering */
                .konvajs-content {
                  will-change: transform;
                }
              `}),e.jsxs(Js,{width:R.width,height:R.height,exhibitionWidth:((U=i==null?void 0:i.exhibition.dimensions)==null?void 0:U.width)||0,exhibitionHeight:((Y=i==null?void 0:i.exhibition.dimensions)==null?void 0:Y.height)||0,halls:(i==null?void 0:i.layout)||[],selectedHall:null,onSelectHall:()=>{},isStallMode:!0,onAddHall:()=>{},onAddStall:()=>{},onAddFixture:()=>{},onExhibitionChange:()=>{},children:[p==null?void 0:p.halls,p==null?void 0:p.stalls,p==null?void 0:p.fixtures]})]})]})}),h.length>0&&e.jsx(Po,{offsetBottom:20,children:e.jsx("div",{style:{position:"fixed",bottom:20,right:20,zIndex:1e3},children:e.jsxs(q,{type:"primary",size:"large",icon:e.jsx($n,{}),onClick:T,loading:u,style:{borderRadius:"30px",boxShadow:"0 6px 16px rgba(24, 144, 255, 0.25)",display:"flex",alignItems:"center",gap:"8px",padding:"0 22px",height:"48px",fontSize:"16px",fontWeight:500,background:"linear-gradient(145deg, #1890ff, #40a9ff)",border:"none",transition:"all 0.3s ease"},children:["Book Selected Stalls (",h.length,")"]})})}),e.jsx(_u,{visible:$,stallDetails:I,selectedStallId:f,selectedStallIds:h,loading:u,exhibition:i==null?void 0:i.exhibition,onCancel:()=>{y(!1)},onSubmit:M})]})},ih=Re.memo(nh),{Content:mi}=De,{Title:gi,Text:Xt,Paragraph:ta}=me,fi=t=>{if(!t)return"";if(t.startsWith("http"))return t;const s=t.startsWith("/")?t.substring(1):t;if(s.includes("logos/")||s.includes("sponsors/"))return`${se.defaults.baseURL}/public/images/${s}`;const n=localStorage.getItem("token"),i=`uploads/${s}`;return n?`${se.defaults.baseURL}/${i}?token=${n}`:`${se.defaults.baseURL}/${i}`},rh=(t,s)=>{const n=new Date,i=new Date(t),r=new Date(s);return n<i?{status:"Upcoming",color:"#722ED1"}:n>r?{status:"Completed",color:"#8C8C8C"}:{status:"Active",color:"#52C41A"}},xn=t=>{const s={year:"numeric",month:"long",day:"numeric"};return new Date(t).toLocaleDateString(void 0,s)},ah=(t,s)=>{const n=new Date,i=new Date(t),r=new Date(s);if(n<i){const l=i.getTime()-n.getTime(),a=Math.ceil(l/(1e3*60*60*24));return{text:`Day${a!==1?"s":""} until start`,count:a,isPast:!1}}else if(n>r){const l=n.getTime()-r.getTime(),a=Math.ceil(l/(1e3*60*60*24));return{text:`Day${a!==1?"s":""} since end`,count:a,isPast:!0}}else{const l=r.getTime()-n.getTime(),a=Math.ceil(l/(1e3*60*60*24));return{text:`Day${a!==1?"s":""} remaining`,count:a,isPast:!1}}},oh=()=>{const{id:t}=dt(),s=Se(),[n,i]=c.useState(null),[r,l]=c.useState(!0),[a,f]=c.useState(null),[b,h]=c.useState("https://images.unsplash.com/photo-1567419099214-0dd03b43e8de?q=80&w=1932&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D");if(c.useEffect(()=>{(async()=>{try{if(!t){f("Exhibition ID is missing");return}l(!0),f(null);const k=await xt.getExhibition(t);if(i(k.data),k.data.headerBackground){const j=fi(k.data.headerBackground);h(j);const P=new window.Image;P.src=j}else if(k.data.headerLogo){const j=fi(k.data.headerLogo),P=new window.Image;P.src=j}}catch(k){console.error("Error fetching exhibition:",k),f(k.message||"Error fetching exhibition")}finally{l(!1)}})()},[t]),r)return e.jsxs(De,{children:[e.jsx(ft,{}),e.jsx(mi,{style:{paddingTop:"64px"},children:e.jsxs("div",{style:{textAlign:"center",padding:"48px"},children:[e.jsx(Dt,{size:"large"}),e.jsx("p",{style:{marginTop:16},children:"Loading exhibition details..."})]})})]});if(a||!n)return e.jsxs(De,{children:[e.jsx(ft,{}),e.jsx(mi,{style:{paddingTop:"64px"},children:e.jsx(Os,{status:"404",title:"Exhibition not found",subTitle:a||"The exhibition you're looking for doesn't exist or has been removed.",extra:e.jsx(q,{type:"primary",onClick:()=>s("/exhibitions"),children:"Back to Exhibitions"})})})]});const{status:N,color:$}=rh(n.startDate,n.endDate),y=ah(n.startDate,n.endDate);return e.jsxs(De,{className:"exhibition-details-layout",children:[e.jsx(ft,{}),e.jsxs(mi,{className:"exhibition-content",children:[e.jsx("div",{className:"breadcrumb-container",children:e.jsx(Do,{items:[{title:e.jsx(tt,{to:"/",children:e.jsx($i,{})})},{title:e.jsx(tt,{to:"/exhibitions",children:"Exhibitions"})},{title:n.name}]})}),e.jsx("div",{className:"exhibition-hero",style:{backgroundImage:`url('${b}')`},children:e.jsx("div",{className:"hero-overlay",children:e.jsxs("div",{className:"hero-content",children:[e.jsxs("div",{className:"hero-main",children:[e.jsx(gi,{level:1,className:"exhibition-title",children:n.name}),e.jsxs(X,{size:24,className:"exhibition-meta",children:[e.jsxs("div",{className:"meta-item",children:[e.jsx(Et,{}),e.jsxs(Xt,{children:[xn(n.startDate)," - ",xn(n.endDate)]})]}),n.venue&&e.jsxs("div",{className:"meta-item",children:[e.jsx(ns,{}),e.jsx(Xt,{children:n.venue})]}),e.jsxs("div",{className:"meta-item",children:[e.jsx(Qe,{}),e.jsxs(Xt,{children:[y.text,": ",e.jsx("strong",{children:y.count})]})]})]})]}),e.jsxs("div",{className:"hero-actions",children:[e.jsx(q,{type:"primary",size:"large",icon:e.jsx(rs,{}),onClick:()=>s(`/exhibitions/${t}/layout`),className:"action-button layout-button",children:"View Exhibition Layout"}),e.jsx(q,{size:"large",icon:e.jsx(lt,{}),onClick:()=>s(`/exhibitions/${t}/layout`),className:"action-button book-button",children:"Book a Stall"}),y.isPast?null:e.jsx(q,{size:"large",icon:e.jsx(On,{}),onClick:()=>s("/exhibitor/login"),className:"action-button exhibitor-button",children:"Exhibitor Access"})]})]})})}),e.jsx("div",{className:"stats-container",children:e.jsxs(ne,{gutter:[16,16],className:"stats-row",children:[e.jsx(z,{xs:24,sm:8,children:e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon duration-icon",children:e.jsx(Et,{})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-value",children:Math.ceil((new Date(n.endDate).getTime()-new Date(n.startDate).getTime())/(1e3*60*60*24))}),e.jsx("div",{className:"stat-label",children:"Days Duration"})]})]})}),e.jsx(z,{xs:24,sm:8,children:e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon countdown-icon",children:e.jsx(Qe,{})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-value",children:y.count}),e.jsx("div",{className:"stat-label",children:y.text})]})]})}),e.jsx(z,{xs:24,sm:8,children:e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon status-icon",style:{backgroundColor:$+"20",color:$},children:e.jsx(Qs,{})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-value status-value",style:{color:$},children:N}),e.jsx("div",{className:"stat-label",children:"Status"})]})]})})]})}),n.sponsorLogos&&n.sponsorLogos.length>0&&e.jsxs("div",{className:"sponsors-section",children:[e.jsx("div",{className:"sponsors-header",children:e.jsx(Xt,{type:"secondary",children:"PROUDLY SPONSORED BY"})}),e.jsx("div",{className:"sponsors-container",children:n.sponsorLogos.map((D,k)=>e.jsx("div",{className:"sponsor-logo-wrapper",children:e.jsx("div",{className:"sponsor-logo",children:e.jsx("img",{src:fi(D),alt:`Sponsor ${k+1}`,className:"sponsor-logo-img",onError:j=>{j.target.src="/placeholder-logo.png"}})})},k))})]}),e.jsx("div",{className:"exhibition-details-container",children:e.jsxs(ne,{gutter:[24,24],children:[e.jsx(z,{xs:24,lg:16,children:e.jsxs(W,{className:"details-card about-card",bordered:!1,children:[e.jsx(gi,{level:3,className:"section-title",children:"About This Exhibition"}),e.jsx(ta,{className:"main-description",children:n.description}),n.headerDescription&&e.jsx(ta,{className:"extended-description",children:n.headerDescription}),n.headerSubtitle&&e.jsxs("div",{className:"subtitle-section",children:[e.jsx(gi,{level:4,children:n.headerSubtitle}),e.jsx(Fe,{})]})]})}),e.jsx(z,{xs:24,lg:8,children:e.jsx(X,{direction:"vertical",style:{width:"100%"},size:24,children:e.jsx(W,{title:"Key Information",className:"details-card info-card",bordered:!1,children:e.jsxs("div",{className:"info-grid",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("div",{className:"info-icon start-icon",children:e.jsx(Et,{})}),e.jsxs("div",{className:"info-content",children:[e.jsx(Xt,{type:"secondary",className:"info-label",children:"Start Date"}),e.jsx("div",{className:"info-value",children:xn(n.startDate)})]})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("div",{className:"info-icon end-icon",children:e.jsx(Et,{})}),e.jsxs("div",{className:"info-content",children:[e.jsx(Xt,{type:"secondary",className:"info-label",children:"End Date"}),e.jsx("div",{className:"info-value",children:xn(n.endDate)})]})]}),n.venue&&e.jsxs("div",{className:"info-item",children:[e.jsx("div",{className:"info-icon venue-icon",children:e.jsx(ns,{})}),e.jsxs("div",{className:"info-content",children:[e.jsx(Xt,{type:"secondary",className:"info-label",children:"Venue"}),e.jsx("div",{className:"info-value",children:n.venue})]})]})]})})})})]})})]}),e.jsx("style",{children:`
        .exhibition-details-layout {
          background-color: #f9fafc;
        }
        
        .exhibition-content {
          padding-top: 64px;
          min-height: calc(100vh - 64px);
        }
        
        .breadcrumb-container {
          max-width: 1280px;
          margin: 0 auto;
          padding: 16px 24px;
        }
        
        /* Hero Section */
        .exhibition-hero {
          height: 500px;
          background-size: cover;
          background-position: center;
          position: relative;
          color: white;
          margin-bottom: 0;
        }
        
        .hero-overlay {
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: linear-gradient(to bottom, rgba(20, 20, 40, 0.7), rgba(20, 20, 40, 0.9));
          display: flex;
          align-items: center;
        }
        
        .hero-content {
          max-width: 1280px;
          width: 100%;
          margin: 0 auto;
          padding: 40px 24px;
          display: flex;
          flex-direction: column;
          gap: 40px;
        }
        
        .hero-main {
          max-width: 800px;
        }
        
        .exhibition-title {
          color: #fff !important;
          margin-bottom: 32px !important;
          font-size: 3.5rem !important;
          font-weight: 700 !important;
          line-height: 1.2 !important;
          letter-spacing: -0.5px;
          text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .exhibition-meta {
          margin-bottom: 24px;
        }
        
        .meta-item {
          display: flex;
          align-items: center;
          gap: 8px;
        }
        
        .meta-item .anticon {
          font-size: 18px;
          color: rgba(255, 255, 255, 0.9);
        }
        
        .meta-item span {
          color: rgba(255, 255, 255, 0.9);
          font-size: 16px;
        }
        
        .hero-actions {
          display: flex;
          flex-wrap: wrap;
          gap: 16px;
        }
        
        .action-button {
          padding: 0 24px;
          height: 48px;
          font-weight: 500;
          border-radius: 8px;
          transition: all 0.3s ease;
        }
        
        .layout-button {
          background: #4361ee;
          border-color: #4361ee;
        }
        
        .layout-button:hover {
          background: #3a56d4;
          border-color: #3a56d4;
          transform: translateY(-2px);
          box-shadow: 0 6px 12px rgba(67, 97, 238, 0.25);
        }
        
        .book-button {
          background: white;
          color: #111;
          border-color: transparent;
        }
        
        .book-button:hover {
          background: #f8f9fa;
          color: #4361ee;
          transform: translateY(-2px);
          box-shadow: 0 6px 12px rgba(0, 0, 0, 0.08);
        }
        
        .exhibitor-button {
          border-color: rgba(255, 255, 255, 0.3);
          color: white;
          background: transparent;
        }
        
        .exhibitor-button:hover {
          border-color: white;
          color: white;
          background: rgba(255, 255, 255, 0.1);
          transform: translateY(-2px);
        }
        
        /* Stats Section */
        .stats-container {
          max-width: 1280px;
          margin: 0 auto;
          padding: 0 24px;
          margin-top: -50px;
          margin-bottom: 40px;
          position: relative;
          z-index: 5;
        }
        
        .stats-row {
          margin: 0;
        }
        
        .stat-card {
          background: white;
          padding: 24px;
          border-radius: 12px;
          display: flex;
          gap: 20px;
          align-items: center;
          box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
          height: 100%;
          transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .stat-card:hover {
          transform: translateY(-5px);
          box-shadow: 0 15px 35px rgba(0, 0, 0, 0.12);
        }
        
        .stat-icon {
          width: 60px;
          height: 60px;
          border-radius: 12px;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 24px;
        }
        
        .duration-icon {
          background-color: #4361ee20;
          color: #4361ee;
        }
        
        .countdown-icon {
          background-color: #f7257520;
          color: #f72575;
        }
        
        .stat-content {
          flex: 1;
        }
        
        .stat-value {
          font-size: 28px;
          font-weight: 700;
          line-height: 1.2;
          color: #111827;
        }
        
        .stat-label {
          font-size: 14px;
          color: #6b7280;
          margin-top: 4px;
        }
        
        /* Sponsor Logos Styles */
        .sponsors-section {
          max-width: 1280px;
          margin: 0 auto 40px;
          padding: 36px 24px;
          background: #fff;
          border-radius: 16px;
          box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
        }
        
        .sponsors-header {
          text-align: center;
          margin-bottom: 30px;
        }
        
        .sponsors-header .ant-typography {
          font-size: 14px;
          letter-spacing: 2px;
          font-weight: 600;
          color: #6b7280;
          position: relative;
          display: inline-block;
        }
        
        .sponsors-header .ant-typography:before,
        .sponsors-header .ant-typography:after {
          content: "";
          position: absolute;
          top: 50%;
          width: 40px;
          height: 1px;
          background: #e5e7eb;
        }
        
        .sponsors-header .ant-typography:before {
          right: 100%;
          margin-right: 15px;
        }
        
        .sponsors-header .ant-typography:after {
          left: 100%;
          margin-left: 15px;
        }
        
        .sponsors-container {
          display: flex;
          flex-wrap: wrap;
          gap: 30px;
          justify-content: center;
          align-items: center;
        }
        
        .sponsor-logo-wrapper {
          display: inline-flex;
          transition: transform 0.3s ease;
        }
        
        .sponsor-logo-wrapper:hover {
          transform: translateY(-5px);
        }
        
        .sponsor-logo {
          width: 190px;
          height: auto;
          border-radius: 8px;
          overflow: hidden;
          display: flex;
          align-items: center;
          justify-content: center;
          background-color: #ffffff;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
          padding: 20px;
          transition: box-shadow 0.3s ease;
        }
        
        .sponsor-logo:hover {
          box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
        }
        
        .sponsor-logo-img {
          max-width: 100%;
          max-height: 100%;
          object-fit: contain;
        }
        
        /* Details Section */
        .exhibition-details-container {
          max-width: 1280px;
          margin: 0 auto;
          padding: 0 24px 60px;
        }
        
        .details-card {
          border-radius: 16px;
          box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
          overflow: hidden;
          height: 100%;
        }
        
        .about-card .ant-card-body {
          padding: 32px;
        }
        
        .section-title {
          margin-bottom: 24px !important;
          font-weight: 700 !important;
          color: #111827 !important;
          font-size: 28px !important;
          position: relative;
        }
        
        .section-title:after {
          content: "";
          position: absolute;
          left: 0;
          bottom: -12px;
          width: 60px;
          height: 4px;
          background: #4361ee;
          border-radius: 2px;
        }
        
        .main-description {
          font-size: 16px !important;
          line-height: 1.7 !important;
          margin-bottom: 24px !important;
          color: #374151 !important;
        }
        
        .extended-description {
          font-size: 16px !important;
          line-height: 1.7 !important;
          margin-bottom: 24px !important;
          color: #6b7280 !important;
        }
        
        .subtitle-section {
          margin: 24px 0;
        }
        
        .subtitle-section .ant-typography {
          color: #111827;
          font-weight: 600;
        }
        
        .info-card .ant-card-head {
          border-bottom: none;
          padding: 20px 24px 0;
        }
        
        .info-card .ant-card-head-title {
          font-weight: 600;
          font-size: 18px;
          color: #111827;
        }
        
        .info-card .ant-card-body {
          padding: 16px 24px 24px;
        }
        
        .info-grid {
          display: flex;
          flex-direction: column;
          gap: 24px;
        }
        
        .info-item {
          display: flex;
          align-items: flex-start;
          gap: 16px;
        }
        
        .info-icon {
          width: 40px;
          height: 40px;
          border-radius: 8px;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 18px;
        }
        
        .start-icon {
          background-color: #4361ee20;
          color: #4361ee;
        }
        
        .end-icon {
          background-color: #f7257520;
          color: #f72575;
        }
        
        .venue-icon {
          background-color: #0ea5e920;
          color: #0ea5e9;
        }
        
        .info-content {
          flex: 1;
        }
        
        .info-label {
          display: block;
          margin-bottom: 4px;
          font-size: 14px;
        }
        
        .info-value {
          font-size: 16px;
          font-weight: 500;
          color: #111827;
        }
        
        @media (max-width: 991px) {
          .exhibition-hero {
            height: auto;
            min-height: 350px;
          }
          
          .hero-overlay {
            position: relative;
            padding: 50px 0;
          }
          
          .exhibition-title {
            font-size: 2.5rem !important;
          }
          
          .stats-container {
            margin-top: 0;
          }
          
          .stat-card {
            margin-bottom: 16px;
          }
        }
        
        @media (max-width: 768px) {
          .exhibition-title {
            font-size: 2rem !important;
            margin-bottom: 24px !important;
          }
          
          .hero-content {
            padding: 40px 20px;
          }
          
          .hero-actions {
            flex-direction: column;
            width: 100%;
          }
          
          .hero-actions button {
            width: 100%;
          }
          
          .sponsors-container {
            gap: 20px;
          }
          
          .sponsor-logo {
            width: 150px;
          }
          
          .stats-container {
            padding: 0 16px;
          }
          
          .stat-card {
            padding: 16px;
          }
          
          .stat-icon {
            width: 50px;
            height: 50px;
            font-size: 20px;
          }
          
          .stat-value {
            font-size: 22px;
          }
          
          .exhibition-details-container {
            padding: 0 16px 40px;
          }
          
          .about-card .ant-card-body {
            padding: 24px;
          }
          
          .section-title {
            font-size: 24px !important;
          }
        }
        
        @media (max-width: 480px) {
          .exhibition-title {
            font-size: 1.75rem !important;
          }
          
          .meta-item {
            flex-direction: column;
            align-items: flex-start;
            gap: 4px;
          }
        }
        `})]})},{Footer:lh}=De,{Title:ch,Paragraph:dh,Text:uh}=me,hh=Z(lh)`
  background: linear-gradient(to right, #242a38, #1a1f2c);
  padding: 60px 0 20px;
  color: rgba(255, 255, 255, 0.8);

  @media (max-width: 768px) {
    padding: 40px 0 20px;
  }
`,xh=Z.div`
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 24px;
`,pn=Z(ch)`
  color: white !important;
  font-size: 18px !important;
  margin-bottom: 20px !important;
  position: relative;
  
  &:after {
    content: '';
    position: absolute;
    left: 0;
    bottom: -8px;
    width: 40px;
    height: 3px;
    background: linear-gradient(90deg, #4158D0, #C850C0);
  }
`,ph=Z.div`
  margin-bottom: 20px;
`,mh=Z.img`
  height: auto;
  width: 100%;
  max-width: 160px;
  margin-bottom: 16px;
`,St=Z(tt)`
  color: rgba(255, 255, 255, 0.8);
  display: block;
  margin-bottom: 12px;
  transition: all 0.3s ease;
  
  &:hover {
    color: white;
    transform: translateX(5px);
  }
`,bi=Z.div`
  display: flex;
  margin-bottom: 16px;
  align-items: flex-start;
`,yi=Z.div`
  margin-right: 10px;
  color: #4158D0;
`,mn=Z.a`
  font-size: 24px;
  margin-right: 16px;
  color: rgba(255, 255, 255, 0.7);
  transition: all 0.3s ease;
  
  &:hover {
    color: white;
    transform: translateY(-3px);
  }
`,gh=Z(G)`
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: white;
  
  &::placeholder {
    color: rgba(255, 255, 255, 0.5);
  }
  
  &:focus {
    border-color: #4158D0;
    box-shadow: 0 0 0 2px rgba(65, 88, 208, 0.2);
  }
`,fh=Z(q)`
  background: linear-gradient(90deg, #4158D0, #C850C0);
  border: none;
  
  &:hover {
    opacity: 0.9;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  }
`,bh=Z(uh)`
  display: block;
  text-align: center;
  color: rgba(255, 255, 255, 0.6);
  margin-top: 20px;
  font-size: 14px;
`,yh=Z(Fe)`
  background: rgba(255, 255, 255, 0.1);
  margin: 30px 0;
`,Xa=()=>{const[t,s]=c.useState("/logo.png"),[n,i]=c.useState("Exhibition Manager"),r=new Date().getFullYear();return c.useEffect(()=>{const l=`${se.defaults.baseURL}/public/logo`;s(l),fetch(`${se.defaults.baseURL}/public/site-info`).then(a=>a.json()).then(a=>{a.siteName&&i(a.siteName)}).catch(a=>{console.error("Error fetching site info:",a)})},[]),e.jsx(hh,{children:e.jsxs(xh,{children:[e.jsxs(ne,{gutter:[48,40],children:[e.jsxs(z,{xs:24,sm:24,md:8,lg:7,children:[e.jsx(ph,{children:e.jsx(tt,{to:"/",children:e.jsx(mh,{src:t,alt:n,onError:()=>s("/logo.png")})})}),e.jsx(dh,{style:{color:"rgba(255, 255, 255, 0.7)",marginBottom:24},children:"The premier platform for exhibition stall booking. Connect exhibitors with event organizers and simplify the booking process."}),e.jsxs(X,{children:[e.jsx(mn,{href:"#",target:"_blank",rel:"noopener noreferrer",children:e.jsx(Ro,{})}),e.jsx(mn,{href:"#",target:"_blank",rel:"noopener noreferrer",children:e.jsx(Lo,{})}),e.jsx(mn,{href:"#",target:"_blank",rel:"noopener noreferrer",children:e.jsx($o,{})}),e.jsx(mn,{href:"#",target:"_blank",rel:"noopener noreferrer",children:e.jsx(Fo,{})})]})]}),e.jsxs(z,{xs:24,sm:12,md:5,lg:5,children:[e.jsx(pn,{level:4,children:"Quick Links"}),e.jsx(St,{to:"/exhibitions",children:"Exhibitions"}),e.jsx(St,{to:"/about",children:"About Us"}),e.jsx(St,{to:"/contact",children:"Contact Us"}),e.jsx(St,{to:"/privacy-policy",children:"Privacy Policy"}),e.jsx(St,{to:"/terms",children:"Terms & Conditions"})]}),e.jsxs(z,{xs:24,sm:12,md:5,lg:5,children:[e.jsx(pn,{level:4,children:"For Exhibitors"}),e.jsx(St,{to:"/exhibitor/login",children:"Login"}),e.jsx(St,{to:"/exhibitor/register",children:"Register"}),e.jsx(St,{to:"/exhibitor/dashboard",children:"Dashboard"}),e.jsx(St,{to:"/exhibitor/bookings",children:"My Bookings"}),e.jsx(St,{to:"/faq",children:"FAQ"})]}),e.jsxs(z,{xs:24,sm:24,md:6,lg:7,children:[e.jsx(pn,{level:4,children:"Contact Us"}),e.jsxs(bi,{children:[e.jsx(yi,{children:e.jsx(ns,{})}),e.jsx("div",{children:"123 Exhibition Street, New Delhi, India"})]}),e.jsxs(bi,{children:[e.jsx(yi,{children:e.jsx(Fi,{})}),e.jsx("div",{children:"+91 98765 43210"})]}),e.jsxs(bi,{children:[e.jsx(yi,{children:e.jsx(qt,{})}),e.jsx("div",{children:"info@exhibitionmanager.com"})]}),e.jsxs("div",{style:{marginTop:24},children:[e.jsx(pn,{level:4,children:"Newsletter"}),e.jsx(F,{children:e.jsxs(X.Compact,{style:{width:"100%"},children:[e.jsx(gh,{placeholder:"Your email address"}),e.jsx(fh,{type:"primary",icon:e.jsx(Mo,{}),children:"Subscribe"})]})})]})]})]}),e.jsx(yh,{}),e.jsxs(bh,{children:["Â© ",r," ",n,". All rights reserved."]})]})})},{Title:sa,Text:ji,Paragraph:na}=me,{Content:vi}=De,jh=(t,s)=>{const n=new Date,i=new Date(t),r=new Date(s);return n<i?{status:"Upcoming",color:"#722ED1"}:n>r?{status:"Completed",color:"#8C8C8C"}:{status:"Active",color:"#52C41A"}},ia=t=>{const s={year:"numeric",month:"short",day:"numeric"};return new Date(t).toLocaleDateString(void 0,s)},vh=t=>{const s=new Date,i=new Date(t).getTime()-s.getTime();return Math.ceil(i/(1e3*60*60*24))},ra=t=>{if(!t)return"/exhibition-placeholder.jpg";if(t.startsWith("/")||t.startsWith("http"))return t;const s=t.startsWith("/")?t.substring(1):t,n=s.includes("logos/")?s:`logos/${s}`;return`${se.defaults.baseURL}/public/images/${n}`},wh=()=>{const t=Se(),[s,n]=c.useState([]),[i,r]=c.useState(!0),[l,a]=c.useState(null),[f,b]=c.useState({});return c.useEffect(()=>{(async()=>{try{r(!0),a(null);const N=await xt.getExhibitions();n(N.data);const $={};N.data.forEach(y=>{if(y.headerLogo){const D=ra(y.headerLogo),k=new window.Image;k.onload=()=>{$[y._id]=!0,b(j=>({...j,[y._id]:!0}))},k.onerror=()=>{console.warn(`Failed to preload image: ${D}`),$[y._id]=!1,b(j=>({...j,[y._id]:!1}))},k.src=D}})}catch(N){a(N.message||"Failed to fetch exhibitions")}finally{r(!1)}})()},[]),i?e.jsxs(De,{children:[e.jsx(ft,{}),e.jsx(vi,{style:{paddingTop:"64px"},children:e.jsxs("div",{style:{textAlign:"center",padding:"48px"},children:[e.jsx(Dt,{size:"large"}),e.jsx("p",{style:{marginTop:16},children:"Loading exhibitions..."})]})})]}):l?e.jsxs(De,{children:[e.jsx(ft,{}),e.jsx(vi,{style:{paddingTop:"64px"},children:e.jsx(Os,{status:"error",title:"Failed to load exhibitions",subTitle:l,extra:[e.jsx(q,{type:"primary",onClick:()=>window.location.reload(),children:"Try Again"},"retry")]})})]}):e.jsxs(De,{children:[e.jsx(ft,{}),e.jsx(vi,{style:{paddingTop:"64px",background:"#f5f5f5"},children:e.jsxs("div",{style:{padding:"80px 16px"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:40},children:[e.jsx(sa,{level:2,style:{marginBottom:12,fontSize:36},children:"Upcoming & Current Exhibitions"}),e.jsx(na,{type:"secondary",style:{fontSize:16,maxWidth:600,margin:"0 auto"},children:"Discover and explore our exhibitions. Click on any card to view details and book stalls."})]}),s.length>0?e.jsx(ne,{gutter:[24,24],children:s.map(h=>{const{status:N,color:$}=jh(h.startDate,h.endDate),y=vh(h.startDate),D=h.headerLogo?ra(h.headerLogo):void 0;return e.jsx(z,{xs:24,sm:12,lg:8,children:e.jsxs(W,{hoverable:!0,onClick:()=>t(Kn(h)),className:"exhibition-card",styles:{body:{padding:"0",overflow:"hidden",display:"flex",flexDirection:"column"}},style:{borderRadius:"12px",overflow:"hidden",height:"100%",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.06), 0 2px 4px rgba(0, 0, 0, 0.06)"},children:[e.jsx(Xe.Ribbon,{text:N,color:$,style:{right:"-1px",top:"10px",zIndex:2}}),e.jsxs("div",{className:"exhibition-card-container",children:[e.jsx("div",{className:"exhibition-card-logo-container",children:D&&e.jsx("div",{className:"exhibition-logo",children:e.jsx(ya,{src:D,alt:`${h.name} logo`,preview:!1,fallback:"/exhibition-placeholder.jpg",placeholder:e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",backgroundColor:"#f0f0f0"},children:e.jsx(Dt,{size:"small"})}),style:{width:"100%",height:"100%",objectFit:"contain"}})})}),e.jsxs("div",{className:"exhibition-card-content",children:[e.jsx("div",{className:"exhibition-title",children:e.jsx(sa,{level:4,ellipsis:{rows:2},style:{marginBottom:8,fontSize:20,lineHeight:"28px"},children:h.name})}),e.jsx(na,{type:"secondary",ellipsis:{rows:2},style:{marginBottom:16,fontSize:14},children:h.description}),e.jsxs("div",{className:"exhibition-card-details",children:[e.jsxs("div",{className:"exhibition-card-detail-item",children:[e.jsx(Et,{style:{color:"#722ED1"}}),e.jsx(Ye,{title:"Exhibition Date Range",children:e.jsxs(ji,{style:{fontSize:14},children:[ia(h.startDate)," - ",ia(h.endDate)]})})]}),h.venue&&e.jsxs("div",{className:"exhibition-card-detail-item",children:[e.jsx(ns,{style:{color:"#F5222D"}}),e.jsx(Ye,{title:"Venue",children:e.jsx(ji,{style:{fontSize:14},ellipsis:!0,children:h.venue})})]}),N==="Upcoming"&&y>0&&e.jsxs("div",{className:"exhibition-card-detail-item",children:[e.jsx(Qe,{style:{color:"#1890FF"}}),e.jsx(Ye,{title:"Time Remaining",children:e.jsxs(ji,{style:{fontSize:14},children:["Starts in ",y," day",y!==1?"s":""]})})]})]}),e.jsx("div",{className:"exhibition-card-footer",children:e.jsxs(q,{type:"link",className:"view-details-btn",style:{padding:0,height:"auto",fontSize:14,fontWeight:500},children:["View Details ",e.jsx(Ci,{})]})})]})]})]})},h._id)})}):e.jsx(Tt,{description:"No exhibitions currently available",style:{background:"#fff",padding:"48px",borderRadius:"12px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.06), 0 2px 4px rgba(0, 0, 0, 0.06)"},image:Tt.PRESENTED_IMAGE_SIMPLE})]})}),e.jsx(Xa,{}),e.jsx("style",{children:`
        .exhibition-card {
          transition: all 0.3s ease;
        }
        
        .exhibition-card:hover {
          transform: translateY(-5px);
          box-shadow: 0 10px 20px rgba(0, 0, 0, 0.05), 0 6px 6px rgba(0, 0, 0, 0.06) !important;
        }
        
        .exhibition-card-container {
          display: flex;
          flex-direction: row;
          width: 100%;
          height: 100%;
        }
        
        .exhibition-card-logo-container {
          width: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 24px;
          background-color: #f9f9f9;
          border-right: 1px solid #eaeaea;
        }
        
        .exhibition-logo {
          position: relative;
          flex-shrink: 0;
          width: 100%;
          height: 172px;
          border-radius: 8px;
          overflow: hidden;
          display: flex;
          align-items: center;
          justify-content: center;
          background-color: #f0f0f0;
          border: 1px solid #e8e8e8;
        }
        
        .exhibition-card-content {
          width: 50%;
          padding: 24px;
          display: flex;
          flex-direction: column;
        }
        
        .exhibition-title {
          margin-right: 36px;
        }
        
        .exhibition-card-details {
          display: flex;
          flex-direction: column;
          gap: 8px;
          margin-bottom: 24px;
        }
        
        .exhibition-card-detail-item {
          display: flex;
          align-items: center;
          gap: 8px;
        }
        
        .exhibition-card-footer {
          margin-top: auto;
        }
        
        .view-details-btn {
          color: #722ED1;
        }
        
        .view-details-btn:hover {
          color: #9254DE;
        }
        
        .view-details-btn .anticon {
          transition: transform 0.3s ease;
        }
        
        .view-details-btn:hover .anticon {
          transform: translateX(4px);
        }
        
        @media (max-width: 575px) {
          .exhibition-card-container {
            flex-direction: column;
          }
          
          .exhibition-card-logo-container {
            width: 100%;
            border-right: none;
            border-bottom: 1px solid #eaeaea;
            padding: 20px;
          }
          
          .exhibition-logo {
            height: 140px;
          }
          
          .exhibition-card-content {
            width: 100%;
            padding: 20px;
          }
        }
        `})]})},Sh=({exhibitionId:t,destination:s="layout",label:n="Back to Layout"})=>{const i=Se(),{currentExhibition:r}=ye(l=>l.exhibition);return e.jsxs("div",{style:{marginBottom:"24px",position:"sticky",top:"16px",zIndex:10},children:[e.jsx(q,{icon:e.jsx(Ot,{}),onClick:()=>i(_e(r,s),{state:{exhibitionId:t}}),type:"default",size:"large",style:{borderRadius:"8px",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",background:"white",borderColor:"transparent",fontWeight:500,padding:"0 16px",height:"42px",display:"flex",alignItems:"center",transition:"all 0.3s ease"},className:"back-button-hover",children:e.jsx("span",{style:{marginLeft:8},children:n})}),e.jsx("style",{children:`
        .back-button-hover:hover {
          transform: translateX(-5px);
          box-shadow: 0 4px 12px rgba(0,0,0,0.1);
          background: #f0f5ff;
          border-color: #d6e4ff;
        }
      `})]})},kh=()=>{var M,T,p;const{message:t}=jt.useApp(),{id:s}=dt(),n=Vt(),i=Se(),r=Me(),[l,a]=Ko(),f=((M=n.state)==null?void 0:M.exhibitionId)||s,{currentExhibition:b,halls:h,stalls:N,loading:$}=ye(C=>C.exhibition),y=c.useRef(null),[D,k]=c.useState(!1),[j,P]=c.useState(null),[u,x]=c.useState(null),[I,o]=c.useState({width:0,height:0}),[d,R]=c.useState(!1);c.useEffect(()=>{if(!f){t.error("Exhibition ID not found"),i("/exhibitions");return}},[f,i,t]),c.useEffect(()=>{if(!f){t.error("Exhibition ID not found"),i("/exhibition");return}(async()=>{try{await r(mt(f)).unwrap(),await r(Pt(f)).unwrap(),R(!0)}catch{t.error("Failed to load data")}})()},[f,r,i]),c.useEffect(()=>{var C,B;!d||!b||(!((C=b.dimensions)!=null&&C.width)||!((B=b.dimensions)!=null&&B.height))&&(t.info("Please set up exhibition space first"),i(_e(b,"space"),{state:{exhibitionId:f}}))},[b,f,i,d]),c.useEffect(()=>{!d||$||h.length===0&&(t.info("Please create halls first"),i(_e(b,"halls"),{state:{exhibitionId:f}}))},[h,f,i,$,d]),c.useEffect(()=>{d&&b&&h.length>0&&(async()=>{try{const B=h.map(U=>r(At({exhibitionId:f,hallId:U.id})).unwrap());await Promise.all(B)}catch(B){console.error("Error fetching stalls:",B),t.error("Failed to load stalls")}})()},[b,f,h,r,d]);const S=N.filter(C=>C.hallId===((j==null?void 0:j.id)||(j==null?void 0:j._id)));c.useEffect(()=>{if(!d||h.length===0)return;const C=l.get("hallId");if(C){const B=h.find(U=>U.id===C||U._id===C);if(B)P(B);else if(h.length>0){P(h[0]);const U=h[0].id||h[0]._id;U&&a({hallId:U.toString()})}}else if(h.length>0){P(h[0]);const B=h[0].id||h[0]._id;B&&a({hallId:B.toString()})}},[h,l,d,a]),c.useEffect(()=>{const C=()=>{if(y.current){const{clientWidth:U,clientHeight:Y}=y.current;o({width:Math.max(U||400,400),height:Math.max(Y||400,400)})}};C();const B=new ResizeObserver(C);return y.current&&B.observe(y.current),window.addEventListener("resize",C),()=>{B.disconnect(),window.removeEventListener("resize",C)}},[]);const E=()=>{if(!j){t.warning("Please select a hall first");return}x(null),k(!0)},v=C=>{if(P(C),x(null),C){const B=C.id||C._id;a(B?{hallId:B.toString()}:{})}else a({})},g=C=>{var U;const B=C?{...C,id:C.id||C._id,_id:C._id||C.id,stallTypeId:typeof C.stallTypeId=="string"?C.stallTypeId:((U=C.stallTypeId)==null?void 0:U._id)||C.stallTypeId,stallType:C.stallType}:null;console.log("Selected stall data:",B),x(B),k(!!B)},L=async C=>{var B,U;try{if(!(j!=null&&j.id)&&!(j!=null&&j._id)){t.error("No hall selected");return}const Y=j.id,Q=j._id||j.id;if(C.hallId&&C.hallId!==Q){t.error("Cannot move stall to a different hall");return}if(console.log("Submitting stall data:",C),C.id||C._id){const K={...C,id:C.id,_id:C._id,hallId:Q,stallTypeId:C.stallTypeId};console.log("Update data:",K);const V=C.id||C._id;if(!V)throw new Error("Stall ID is missing");await Ne.updateStall(f,V,K),t.success("Stall updated successfully")}else{const{id:K,_id:V,..._}=C,H={..._,hallId:Q,stallTypeId:C.stallTypeId};console.log("Creating new stall with data:",H),await Ne.createStall(f,H),t.success("Stall created successfully")}k(!1),r(At({exhibitionId:f,hallId:Y}))}catch(Y){console.error("Error saving stall:",Y),t.error(((U=(B=Y.response)==null?void 0:B.data)==null?void 0:U.message)||"Failed to save stall")}},A=async C=>{var B,U;try{if(!f){t.error("Exhibition ID not found");return}const Y=j;if(!Y){t.error("No hall selected");return}const Q=Y.id||Y._id;if(!Q){t.error("Invalid hall ID");return}await Ne.deleteStall(f,C),k(!1),x(null),await r(At({exhibitionId:f,hallId:Q})).unwrap(),t.success("Stall deleted successfully")}catch(Y){console.error("Error deleting stall:",Y),t.error(((U=(B=Y.response)==null?void 0:B.data)==null?void 0:U.message)||"Failed to delete stall")}},m=async C=>{var Q,K;if(!f){t.error("Exhibition ID not found");return}const B=C.id||C._id;if(!B){console.error("Stall data:",C),t.error("Stall ID not found");return}if(!(j!=null&&j.id)&&!(j!=null&&j._id)){t.error("No hall selected");return}const U=j.id,Y=j._id||j.id;try{await Ne.updateStall(f,B,{...C,id:B,hallId:Y}),r(At({exhibitionId:f,hallId:U}))}catch(V){console.error("Stall update error:",V),t.error(((K=(Q=V.response)==null?void 0:Q.data)==null?void 0:K.message)||"Failed to update stall position")}},w=()=>{k(!1),x(null)};return e.jsx(Zs,{children:e.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{padding:"24px 24px 0"},children:e.jsx(Sh,{exhibitionId:f})}),e.jsx(W,{title:"Stall Manager",extra:e.jsxs(X,{children:[e.jsx(q,{icon:e.jsx(ba,{}),onClick:()=>i(`/exhibition/${f}`,{state:{exhibitionId:f}}),children:"Back to Exhibition"}),e.jsx(q,{type:"primary",icon:e.jsx(st,{}),onClick:E,disabled:!j,children:"Add Stall"})]}),style:{flex:1},bodyStyle:{height:"calc(100% - 57px)"},children:e.jsx("div",{ref:y,style:{width:"100%",height:"100%",minHeight:"400px",background:"#f0f2f5",borderRadius:"8px",overflow:"hidden"},children:b&&e.jsx(Js,{width:I.width,height:I.height,exhibitionWidth:((T=b.dimensions)==null?void 0:T.width)||100,exhibitionHeight:((p=b.dimensions)==null?void 0:p.height)||100,halls:h,selectedHall:j,onSelectHall:v,isStallMode:!0,children:j&&S.map(C=>e.jsx(Xi,{stall:C,isSelected:(u==null?void 0:u.id)===C.id||(u==null?void 0:u._id)===C._id,onSelect:()=>g(C),onChange:m,hallWidth:j.dimensions.width,hallHeight:j.dimensions.height,hallX:j.dimensions.x,hallY:j.dimensions.y},C.id||C._id))})})}),b&&e.jsx(ju,{visible:D,stall:u,hall:j,exhibition:b,onCancel:w,onSubmit:L,onDelete:u?()=>A(u.id||u._id):void 0})]})})},Ih=({exhibitionId:t,destination:s="layout",label:n="Back to Layout"})=>{const i=Se(),{currentExhibition:r}=ye(l=>l.exhibition);return e.jsxs("div",{style:{marginBottom:"24px",position:"sticky",top:"16px",zIndex:10},children:[e.jsx(q,{icon:e.jsx(Ot,{}),onClick:()=>i(_e(r,s),{state:{exhibitionId:t}}),type:"default",size:"large",style:{borderRadius:"8px",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",background:"white",borderColor:"transparent",fontWeight:500,padding:"0 16px",height:"42px",display:"flex",alignItems:"center",transition:"all 0.3s ease"},className:"back-button-hover",children:e.jsx("span",{style:{marginLeft:8},children:n})}),e.jsx("style",{children:`
        .back-button-hover:hover {
          transform: translateX(-5px);
          box-shadow: 0 4px 12px rgba(0,0,0,0.1);
          background: #f0f5ff;
          border-color: #d6e4ff;
        }
      `})]})},Ch=[{value:"all",label:"All Types"},{value:"sofa",label:"Sofas"},{value:"chair",label:"Chairs"},{value:"table",label:"Tables"},{value:"desk",label:"Desks"},{value:"plant",label:"Plants"},{value:"entrance",label:"Entrances"},{value:"exit",label:"Exits"},{value:"info",label:"Information"},{value:"restroom",label:"Restrooms"},{value:"food",label:"Food Areas"},{value:"custom",label:"Custom"}],Nh=()=>{var L,A,m;const{message:t}=jt.useApp(),{id:s}=dt(),n=Vt(),i=Se(),r=Me(),l=((L=n.state)==null?void 0:L.exhibitionId)||s,{currentExhibition:a,fixtures:f,halls:b,stalls:h,loading:N}=ye(w=>w.exhibition),$=c.useRef(null),[y,D]=c.useState(!1),[k,j]=c.useState(null),[P,u]=c.useState({width:0,height:0}),[x,I]=c.useState("all"),[o,d]=c.useState([]);c.useEffect(()=>{if(!l){t.error("Exhibition ID not found"),i("/exhibitions");return}},[l,i,t]),c.useEffect(()=>{(async()=>{try{await r(mt(l)).unwrap(),await r(Bs({exhibitionId:l})).unwrap(),await r(Pt(l)).unwrap(),await r(At({exhibitionId:l})).unwrap()}catch{t.error("Failed to load data")}})()},[l,r,t]),c.useEffect(()=>{d(x==="all"?f:f.filter(w=>w.type===x))},[f,x]),c.useEffect(()=>{const w=()=>{if($.current){const{clientWidth:T,clientHeight:p}=$.current;u({width:Math.max(T||400,400),height:Math.max(p||400,400)})}};w();const M=new ResizeObserver(w);return $.current&&M.observe($.current),window.addEventListener("resize",w),()=>{M.disconnect(),window.removeEventListener("resize",w)}},[]);const R=()=>{j(null),D(!0)},S=w=>{j(w),D(!!w)},E=async w=>{try{w.id||w._id?(await r(In({exhibitionId:l,id:w.id||w._id||"",data:w})).unwrap(),t.success("Fixture updated successfully")):(await r(kn({exhibitionId:l,data:w})).unwrap(),t.success("Fixture created successfully")),await r(Bs({exhibitionId:l})).unwrap(),D(!1)}catch(M){console.error("Failed to save fixture:",M),t.error(M.message||"Failed to save fixture")}},v=async w=>{try{const M=w.id||w._id;if(!M)throw new Error("Fixture ID is required");await r(Cn({exhibitionId:l,id:M})).unwrap(),t.success("Fixture deleted successfully"),D(!1),j(null)}catch(M){console.error("Failed to delete fixture:",M),t.error(M.message||"Failed to delete fixture")}},g=w=>{I(w)};return e.jsxs("div",{style:{padding:"24px",height:"100vh",display:"flex",flexDirection:"column"},children:[e.jsx(Ih,{exhibitionId:l}),e.jsxs(W,{title:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(X,{children:e.jsx("span",{children:"Fixture Management"})}),e.jsxs(X,{children:[e.jsx(oe,{style:{width:180},value:x,onChange:g,options:Ch}),e.jsx(q,{type:"primary",icon:e.jsx(st,{}),onClick:R,children:"Add Fixture"})]})]}),styles:{body:{flex:1,padding:0,overflow:"hidden",minHeight:"400px",position:"relative",background:"#fafafa"}},style:{flex:1,display:"flex",flexDirection:"column",height:"100%",minHeight:"500px"},children:[e.jsx("div",{style:{padding:"8px 16px",background:"#f0f7ff",borderBottom:"1px solid #d6e8ff",color:"#0050b3",fontSize:"14px"},children:"Halls and stalls are shown for reference. Place fixtures relative to these elements to enhance visitor navigation."}),e.jsx("div",{ref:$,style:{position:"absolute",top:33,left:0,right:0,bottom:0,overflow:"hidden"},children:e.jsx(Zs,{children:P.width>0&&P.height>0&&(a==null?void 0:a.dimensions)&&e.jsx(Js,{width:P.width,height:P.height,exhibitionWidth:a.dimensions.width,exhibitionHeight:a.dimensions.height,halls:b,stalls:h,fixtures:o,selectedFixture:k,onSelectFixture:S,onFixtureChange:E,onAddFixture:R,isFixtureMode:!0})})})]}),e.jsx(Iu,{visible:y,fixture:k,onCancel:()=>D(!1),onSubmit:E,onDelete:v,exhibitionWidth:((A=a==null?void 0:a.dimensions)==null?void 0:A.width)||100,exhibitionHeight:((m=a==null?void 0:a.dimensions)==null?void 0:m.height)||100})]})},{Title:Eh,Text:Ah}=me,{Option:ms}=oe,Th=()=>{const t=Se(),s=Me(),{stalls:n,loading:i}=ye(T=>T.exhibition),[r,l]=c.useState([]),[a,f]=c.useState([]),[b,h]=c.useState(null),[N,$]=c.useState(null),[y,D]=c.useState(!1),k=Re.useMemo(()=>Math.max(...n.map(T=>T.ratePerSqm*T.dimensions.width*T.dimensions.height),1e6),[n]),j=Re.useMemo(()=>{const T=Math.pow(10,Math.floor(Math.log10(k)));return Math.ceil(k/T)*T},[k]),[P,u]=c.useState(""),[x,I]=c.useState(null),[o,d]=c.useState([0,j]),[R,S]=c.useState("number"),[E,v]=c.useState("ascend"),g=T=>{h(T),$(null),s({type:"exhibition/clearStalls"})},L=T=>{$(T),s(b&&T?At({exhibitionId:b,hallId:T}):{type:"exhibition/clearStalls"})};c.useEffect(()=>{(async()=>{try{D(!0),console.log("Fetching exhibitions...");const p=await Ne.getActiveExhibitions();console.log("Exhibitions response:",p.data),l(p.data)}catch(p){console.error("Failed to fetch exhibitions:",p)}finally{D(!1)}})()},[]),c.useEffect(()=>{b?(async()=>{try{D(!0),console.log("Fetching halls for exhibition:",b);const p=await Ne.getHalls(b);console.log("Halls response:",p.data),f(p.data)}catch(p){console.error("Failed to fetch halls:",p)}finally{D(!1)}})():f([])},[b]);const A=Re.useMemo(()=>{console.log("Filtering stalls from Redux:",n);const T=n.filter(p=>{const C=!P||p.number.toLowerCase().includes(P.toLowerCase()),B=!x||p.status===x,U=!N||p.hallId===N,Y=p.ratePerSqm*p.dimensions.width*p.dimensions.height,Q=Y>=o[0]&&Y<=o[1];return C&&B&&U&&Q}).sort((p,C)=>R==="number"?E==="ascend"?p.number.localeCompare(C.number):C.number.localeCompare(p.number):0);return console.log("Filtered stalls:",T),T},[n,P,x,N,o,R,E]),m=T=>{switch(T){case"available":return"success";case"booked":return"warning";case"reserved":return"processing";case"sold":return"error";default:return"default"}},M=(T=>{const p=T.reduce((C,B)=>{var U,Y;return(U=B==null?void 0:B.dimensions)!=null&&U.width&&((Y=B==null?void 0:B.dimensions)!=null&&Y.height)?C+B.dimensions.width*B.dimensions.height:C},0);return{totalStalls:T.length,totalSize:p}})(A);return e.jsx("div",{className:"dashboard-container",children:e.jsx("div",{style:{marginBottom:"24px"},children:e.jsxs(ne,{gutter:[24,24],children:[e.jsx(z,{span:24,children:e.jsxs(X,{direction:"vertical",size:4,style:{width:"100%"},children:[e.jsx(Eh,{level:4,style:{margin:0},children:"Stalls"}),e.jsx(Ah,{type:"secondary",children:"Manage your exhibition stalls"})]})}),e.jsx(z,{span:24,children:e.jsxs(ne,{gutter:[16,16],align:"middle",children:[e.jsx(z,{xs:24,sm:12,md:6,children:e.jsx(oe,{style:{width:"100%"},placeholder:"Select Exhibition",value:b,onChange:g,allowClear:!0,children:r.map(T=>e.jsx(ms,{value:T._id||T.id,children:T.name},T._id||T.id))})}),e.jsx(z,{xs:24,sm:12,md:6,children:e.jsx(oe,{style:{width:"100%"},placeholder:"Select Hall",value:N,onChange:L,disabled:!b||a.length===0,allowClear:!0,children:a.map(T=>e.jsx(ms,{value:T._id||T.id,children:T.name},T._id||T.id))})}),e.jsx(z,{xs:24,sm:12,md:6,children:e.jsx(G,{placeholder:"Search by stall number",prefix:e.jsx(bt,{}),value:P,onChange:T=>u(T.target.value),allowClear:!0})}),e.jsx(z,{xs:24,sm:12,md:6,children:e.jsxs(oe,{style:{width:"100%"},placeholder:"Filter by status",value:x,onChange:I,allowClear:!0,children:[e.jsx(ms,{value:"available",children:"Available"}),e.jsx(ms,{value:"booked",children:"Booked"}),e.jsx(ms,{value:"reserved",children:"Reserved"}),e.jsx(ms,{value:"sold",children:"Sold"})]})})]})}),e.jsx(z,{span:24,children:e.jsx(W,{size:"small",children:e.jsxs(ne,{gutter:16,children:[e.jsx(z,{xs:12,sm:12,md:6,children:e.jsx(ve,{title:"Total Stalls",value:M.totalStalls,prefix:e.jsx(Bo,{})})}),e.jsx(z,{xs:12,sm:12,md:6,children:e.jsx(ve,{title:"Total Area",value:M.totalSize,suffix:"sqm",prefix:e.jsx(rs,{}),precision:2})})]})})}),e.jsx(z,{span:24,children:e.jsx(W,{size:"small",title:"Price Range Filter",children:e.jsxs(ne,{gutter:16,children:[e.jsx(z,{span:24,style:{marginBottom:16},children:e.jsxs(X,{children:[e.jsx(q,{size:"small",onClick:()=>d([0,5e5]),children:"Under â‚¹5L"}),e.jsx(q,{size:"small",onClick:()=>d([5e5,1e6]),children:"â‚¹5L - â‚¹10L"}),e.jsx(q,{size:"small",onClick:()=>d([1e6,2e6]),children:"â‚¹10L - â‚¹20L"}),e.jsx(q,{size:"small",onClick:()=>d([2e6,j]),children:"Above â‚¹20L"}),e.jsx(q,{size:"small",onClick:()=>d([0,j]),children:"All"})]})}),e.jsx(z,{span:16,children:e.jsx(fa,{range:!0,min:0,max:j,value:o,onChange:T=>d(T),step:Math.max(1e3,Math.floor(j/1e3)),tooltip:{formatter:T=>`â‚¹${(T||0).toLocaleString()}`}})}),e.jsx(z,{span:4,children:e.jsx(ze,{style:{width:"100%"},min:0,max:o[1],value:o[0],onChange:T=>d([T||0,o[1]]),formatter:T=>`â‚¹ ${T}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:T=>T?Number(T.replace(/[^\d.-]/g,"")):0,step:1e3})}),e.jsx(z,{span:4,children:e.jsx(ze,{style:{width:"100%"},min:o[0],max:j,value:o[1],onChange:T=>d([o[0],T||j]),formatter:T=>`â‚¹ ${T}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:T=>T?Number(T.replace(/[^\d.-]/g,"")):0,step:1e3})})]})})}),e.jsx(z,{span:24,children:e.jsx($e,{columns:[{title:"Stall Number",dataIndex:"number",key:"number",sorter:(T,p)=>T.number.localeCompare(p.number),defaultSortOrder:"ascend"},{title:"Type",dataIndex:["stallType","name"],key:"type",render:(T,p)=>{var C;return((C=p.stallType)==null?void 0:C.name)||"N/A"}},{title:"Rate (per sqm)",dataIndex:"ratePerSqm",key:"ratePerSqm",render:T=>T?`â‚¹${T.toLocaleString()}`:"N/A",sorter:(T,p)=>(T.ratePerSqm||0)-(p.ratePerSqm||0)},{title:"Area (sqm)",key:"area",render:(T,p)=>{var C,B;return(C=p==null?void 0:p.dimensions)!=null&&C.width&&((B=p==null?void 0:p.dimensions)!=null&&B.height)?`${p.dimensions.width*p.dimensions.height} sqm`:"N/A"},sorter:(T,p)=>{var U,Y,Q,K;const C=(((U=T.dimensions)==null?void 0:U.width)||0)*(((Y=T.dimensions)==null?void 0:Y.height)||0),B=(((Q=p.dimensions)==null?void 0:Q.width)||0)*(((K=p.dimensions)==null?void 0:K.height)||0);return C-B}},{title:"Dimensions",key:"dimensions",render:(T,p)=>{var C,B;return(C=p==null?void 0:p.dimensions)!=null&&C.width&&((B=p==null?void 0:p.dimensions)!=null&&B.height)?`${p.dimensions.width}m Ã— ${p.dimensions.height}m`:"N/A"}},{title:"Total Price",key:"totalPrice",render:(T,p)=>{var C,B;return(C=p==null?void 0:p.dimensions)!=null&&C.width&&((B=p==null?void 0:p.dimensions)!=null&&B.height)&&p.ratePerSqm?`â‚¹${(p.ratePerSqm*p.dimensions.width*p.dimensions.height).toLocaleString()}`:"N/A"},sorter:(T,p)=>{var U,Y,Q,K;const C=(T.ratePerSqm||0)*(((U=T.dimensions)==null?void 0:U.width)||0)*(((Y=T.dimensions)==null?void 0:Y.height)||0),B=(p.ratePerSqm||0)*(((Q=p.dimensions)==null?void 0:Q.width)||0)*(((K=p.dimensions)==null?void 0:K.height)||0);return C-B}},{title:"Status",dataIndex:"status",key:"status",render:T=>e.jsx(le,{color:m(T),style:{textTransform:"capitalize"},children:T||"N/A"}),filters:[{text:"Available",value:"available"},{text:"Booked",value:"booked"},{text:"Reserved",value:"reserved"},{text:"Sold",value:"sold"}],onFilter:(T,p)=>p.status===T},{title:"Actions",key:"actions",render:(T,p)=>e.jsxs(X,{children:[e.jsx("a",{onClick:()=>t(`/stall/edit/${p._id||p.id}`),children:"Edit"}),e.jsx("a",{onClick:()=>t(`/stall/view/${p._id||p.id}`),children:"View"})]})}],dataSource:A,rowKey:T=>T._id||T.id,loading:y||i,pagination:{total:A.length,pageSize:10,showSizeChanger:!0,showTotal:T=>`Total ${T} stalls`},onChange:(T,p,C)=>{C.field&&(S(C.field),v(C.order))}})})]})})})},{Title:Ph,Text:Dh}=me,{TextArea:Rh}=G,{Search:Lh}=G,{Option:aa}=oe,$h=()=>{Se();const{message:t}=jt.useApp(),[s,n]=c.useState(!1),[i]=F.useForm(),[r,l]=c.useState(!1),[a,f]=c.useState([]),[b,h]=c.useState(!1),[N,$]=c.useState(null);c.useEffect(()=>{y()},[]),c.useEffect(()=>{var x;if(console.log("Modal visibility changed:",s),console.log("Editing stall type:",N),s&&N){const I=((x=N.features)==null?void 0:x.map(o=>o.feature).join(", "))||"";console.log("Setting form values:",{name:N.name,description:N.description,features:I,status:N.status}),setTimeout(()=>{i.setFieldsValue({name:N.name,description:N.description,features:I,status:N.status})},0)}else s&&(i.resetFields(),i.setFieldsValue({status:"active"}))},[N,i,s]);const y=async()=>{try{h(!0);const x=await js.getStallTypes();f(x.data)}catch(x){t.error("Failed to fetch stall types: "+x.message)}finally{h(!1)}},D=async x=>{try{l(!0),console.log("Form values:",x);const I={name:x.name,description:x.description,status:x.status,features:x.features?x.features.split(",").map(o=>({feature:o.trim()})):[]};console.log("Submitting data:",I),N?(await js.updateStallType(N._id,I),t.success("Stall type updated successfully")):(await js.createStallType(I),t.success("Stall type created successfully")),n(!1),$(null),i.resetFields(),y()}catch(I){t.error(`Failed to ${N?"update":"create"} stall type: `+I.message)}finally{l(!1)}},k=x=>{console.log("Editing stall type:",x),$(x),n(!0)},j=async x=>{try{await js.deleteStallType(x._id),t.success("Stall type deleted successfully"),y()}catch(I){t.error("Failed to delete stall type: "+I.message)}},P=[{title:"Type Name",dataIndex:"name",key:"name",sorter:(x,I)=>x.name.localeCompare(I.name)},{title:"Description",dataIndex:"description",key:"description",ellipsis:!0},{title:"Features",dataIndex:"features",key:"features",render:x=>e.jsx(X,{wrap:!0,children:x==null?void 0:x.map(({feature:I})=>e.jsx(le,{children:I},I))})},{title:"Status",dataIndex:"status",key:"status",render:x=>e.jsx(le,{color:x==="active"?"success":"default",children:x.toUpperCase()})},{title:"Actions",key:"actions",render:(x,I)=>e.jsxs(X,{children:[e.jsx(q,{type:"link",onClick:()=>k(I),children:"Edit"}),e.jsx(q,{type:"link",danger:!0,onClick:()=>j(I),children:"Delete"})]})}],u=()=>{n(!1),$(null),i.resetFields()};return e.jsxs("div",{className:"dashboard-container",children:[e.jsx("div",{style:{marginBottom:"24px"},children:e.jsxs(ne,{justify:"space-between",align:"middle",children:[e.jsx(z,{children:e.jsxs(X,{direction:"vertical",size:4,children:[e.jsx(Ph,{level:4,style:{margin:0},children:"Stall Types"}),e.jsx(Dh,{type:"secondary",children:"Manage your stall types and configurations"})]})}),e.jsx(z,{children:e.jsxs(X,{children:[e.jsx(Lh,{placeholder:"Search stall types",style:{width:200},onSearch:x=>console.log(x)}),e.jsx(q,{type:"primary",icon:e.jsx(st,{}),onClick:()=>n(!0),children:"Add Stall Type"})]})})]})}),e.jsx(W,{className:"info-card",children:e.jsx($e,{columns:P,dataSource:a,rowKey:x=>x._id,loading:b})}),e.jsx(fe,{title:N?"Edit Stall Type":"Add Stall Type",open:s,onCancel:u,footer:null,destroyOnClose:!1,children:e.jsxs(F,{form:i,layout:"vertical",onFinish:D,initialValues:{status:"active"},preserve:!0,children:[e.jsx(F.Item,{name:"name",label:"Type Name",rules:[{required:!0,message:"Please enter stall type name"}],children:e.jsx(G,{placeholder:"e.g., 1 Side Open"})}),e.jsx(F.Item,{name:"description",label:"Description",rules:[{required:!0,message:"Please enter description"}],children:e.jsx(Rh,{rows:4,placeholder:"Enter description"})}),e.jsx(F.Item,{name:"features",label:"Features",children:e.jsx(G,{placeholder:"Enter features (comma-separated)",allowClear:!0})}),e.jsx(F.Item,{name:"status",label:"Status",rules:[{required:!0,message:"Please select status"}],children:e.jsxs(oe,{children:[e.jsx(aa,{value:"active",children:"Active"}),e.jsx(aa,{value:"inactive",children:"Inactive"})]})}),e.jsx(F.Item,{children:e.jsxs(q,{type:"primary",htmlType:"submit",loading:r,block:!0,children:[N?"Update":"Create"," Stall Type"]})})]})})]})},Fh={bookings:[],currentBooking:null,loading:!1,error:null},Jt=Le("booking/fetchBookings",async()=>(await se.get("/bookings")).data),wi=Le("booking/fetchBooking",async t=>(await se.get(`/bookings/${t}`)).data),Nn=Le("booking/createBooking",async t=>(await se.post("/bookings",t)).data),En=Le("booking/updateStatus",async({id:t,status:s,rejectionReason:n})=>(await se.patch(`/bookings/${t}`,{status:s,...n&&{rejectionReason:n}})).data),Si=Le("booking/updatePaymentStatus",async({id:t,paymentStatus:s,paymentDetails:n})=>(await se.patch(`/bookings/${t}/payment`,{paymentStatus:s,paymentDetails:n})).data),An=Le("booking/deleteBooking",async t=>(await se.delete(`/bookings/${t}`),t)),Za=ht({name:"booking",initialState:Fh,reducers:{clearCurrentBooking:t=>{t.currentBooking=null},clearBookingError:t=>{t.error=null}},extraReducers:t=>{t.addCase(Jt.pending,s=>{s.loading=!0,s.error=null}).addCase(Jt.fulfilled,(s,n)=>{s.loading=!1,s.bookings=n.payload}).addCase(Jt.rejected,(s,n)=>{s.loading=!1,s.error=n.error.message||"Failed to fetch bookings"}).addCase(wi.pending,s=>{s.loading=!0,s.error=null}).addCase(wi.fulfilled,(s,n)=>{s.loading=!1,s.currentBooking=n.payload}).addCase(wi.rejected,(s,n)=>{s.loading=!1,s.error=n.error.message||"Failed to fetch booking"}).addCase(Nn.pending,s=>{s.loading=!0,s.error=null}).addCase(Nn.fulfilled,(s,n)=>{s.loading=!1,s.bookings.unshift(n.payload),s.currentBooking=n.payload}).addCase(Nn.rejected,(s,n)=>{s.loading=!1,s.error=n.error.message||"Failed to create booking"}).addCase(En.pending,s=>{s.loading=!0,s.error=null}).addCase(En.fulfilled,(s,n)=>{var r;s.loading=!1;const i=s.bookings.findIndex(l=>l._id===n.payload._id);i!==-1&&(s.bookings[i]=n.payload),((r=s.currentBooking)==null?void 0:r._id)===n.payload._id&&(s.currentBooking=n.payload)}).addCase(En.rejected,(s,n)=>{s.loading=!1,s.error=n.error.message||"Failed to update booking status"}).addCase(Si.pending,s=>{s.loading=!0,s.error=null}).addCase(Si.fulfilled,(s,n)=>{var r;s.loading=!1;const i=s.bookings.findIndex(l=>l._id===n.payload._id);i!==-1&&(s.bookings[i]=n.payload),((r=s.currentBooking)==null?void 0:r._id)===n.payload._id&&(s.currentBooking=n.payload)}).addCase(Si.rejected,(s,n)=>{s.loading=!1,s.error=n.error.message||"Failed to update payment status"}).addCase(An.pending,s=>{s.loading=!0,s.error=null}).addCase(An.fulfilled,(s,n)=>{var i;s.loading=!1,s.bookings=s.bookings.filter(r=>r._id!==n.payload),((i=s.currentBooking)==null?void 0:i._id)===n.payload&&(s.currentBooking=null)}).addCase(An.rejected,(s,n)=>{s.loading=!1,s.error=n.error.message||"Failed to delete booking"})}}),{clearCurrentBooking:Lx,clearBookingError:$x}=Za.actions,Mh=Za.reducer,Bh="/api",Tn=Ki({reducerPath:"invoiceApi",baseQuery:Wi({baseUrl:Bh,credentials:"include",prepareHeaders:t=>{const s=localStorage.getItem("token");return s&&t.set("authorization",`Bearer ${s}`),t.set("Content-Type","application/json"),t.set("Accept","application/json"),t}}),tagTypes:["Invoice"],endpoints:t=>({getInvoices:t.query({query:(s={page:1,limit:10})=>({url:"/invoices",method:"GET",params:s}),transformResponse:s=>(console.log("Raw invoice response:",s),typeof s=="object"&&s!==null&&"data"in s?s:Array.isArray(s)?{success:!0,data:s,pagination:{total:s.length,page:1,limit:s.length,pages:1}}:(console.error("Invalid invoice response:",s),{success:!1,data:[],pagination:{total:0,page:1,limit:10,pages:0}})),transformErrorResponse:s=>(console.error("Invoice API Error:",s),s),providesTags:["Invoice"]}),getInvoice:t.query({query:s=>({url:`/invoices/${s}`,method:"GET"}),transformErrorResponse:s=>(console.error("Get Invoice Error:",s),s),providesTags:(s,n,i)=>[{type:"Invoice",id:i}]}),downloadInvoice:t.mutation({query:s=>({url:`/invoices/${s}/download`,method:"GET",responseHandler:n=>n.blob()})}),shareViaEmail:t.mutation({query:({id:s,...n})=>({url:`/invoices/${s}/share/email`,method:"POST",body:n})}),shareViaWhatsApp:t.mutation({query:({id:s,...n})=>({url:`/invoices/${s}/share/whatsapp`,method:"POST",body:n})})})}),{useGetInvoicesQuery:zh,useGetInvoiceQuery:Uh}=Tn,qh=({bookings:t})=>{const n={total:t.length,pending:t.filter(r=>r.status==="pending").length,approved:t.filter(r=>r.status==="approved").length,rejected:t.filter(r=>r.status==="rejected").length,confirmed:t.filter(r=>r.status==="confirmed").length,cancelled:t.filter(r=>r.status==="cancelled").length,totalRevenue:t.filter(r=>r.status==="confirmed"||r.status==="approved").reduce((r,l)=>r+l.amount,0),totalActiveBookings:t.filter(r=>r.status==="confirmed"||r.status==="approved").length,totalDeclinedBookings:t.filter(r=>r.status==="cancelled"||r.status==="rejected").length};return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{gutter:[16,16],style:{marginBottom:"24px"},children:[e.jsx(z,{xs:24,sm:12,md:6,children:e.jsx(W,{children:e.jsx(ve,{title:"Total Bookings",value:n.total,prefix:e.jsx(Bi,{})})})}),e.jsx(z,{xs:24,sm:12,md:6,children:e.jsx(W,{children:e.jsx(ve,{title:"Pending Bookings",value:n.pending,prefix:e.jsx(Qe,{style:{color:"#faad14"}})})})}),e.jsx(z,{xs:24,sm:12,md:6,children:e.jsx(W,{children:e.jsx(ve,{title:"Approved Bookings",value:n.approved,prefix:e.jsx(Te,{style:{color:"#52c41a"}})})})}),e.jsx(z,{xs:24,sm:12,md:6,children:e.jsx(W,{children:e.jsx(ve,{title:"Confirmed Bookings",value:n.confirmed,prefix:e.jsx(Te,{style:{color:"#52c41a"}})})})})]}),e.jsxs(ne,{gutter:[16,16],style:{marginBottom:"24px"},children:[e.jsx(z,{xs:24,sm:12,md:6,children:e.jsx(W,{children:e.jsx(ve,{title:"Rejected Bookings",value:n.rejected,prefix:e.jsx(ts,{style:{color:"#f5222d"}})})})}),e.jsx(z,{xs:24,sm:12,md:6,children:e.jsx(W,{children:e.jsx(ve,{title:"Cancelled Bookings",value:n.cancelled,prefix:e.jsx(ts,{style:{color:"#f5222d"}})})})}),e.jsx(z,{xs:24,sm:12,md:6,children:e.jsx(W,{children:e.jsx(ve,{title:"Total Revenue",value:n.totalRevenue,prefix:"â‚¹",precision:2})})}),e.jsx(z,{xs:24,sm:12,md:6})]})]})},{RangePicker:_h}=Gs,Oh=({filters:t,exhibitions:s,onFilterChange:n,onRefresh:i})=>e.jsx(W,{style:{marginBottom:"24px"},children:e.jsxs(X,{wrap:!0,children:[e.jsx(G,{placeholder:"Search by company name",prefix:e.jsx(bt,{}),value:t.search,onChange:r=>n({...t,search:r.target.value}),style:{width:200},allowClear:!0}),e.jsx(oe,{placeholder:"Filter by exhibition",value:t.exhibition,onChange:r=>n({...t,exhibition:r}),style:{minWidth:200},allowClear:!0,options:s.map(r=>({label:r.name,value:r._id}))}),e.jsx(oe,{mode:"multiple",placeholder:"Filter by status",value:t.status,onChange:r=>n({...t,status:r}),style:{minWidth:200},options:[{label:"Pending",value:"pending"},{label:"Approved",value:"approved"},{label:"Rejected",value:"rejected"},{label:"Confirmed",value:"confirmed"},{label:"Cancelled",value:"cancelled"}]}),e.jsx(_h,{onChange:r=>{var l,a;return n({...t,dateRange:r?[((l=r[0])==null?void 0:l.toISOString())||"",((a=r[1])==null?void 0:a.toISOString())||""]:null})}}),e.jsx(q,{icon:e.jsx(Ri,{}),onClick:i,children:"Refresh"})]})}),{Title:Vh,Text:Pe}=me,{RangePicker:Fx}=Gs,Hh=()=>{const t=Me(),{bookings:s,loading:n}=ye(M=>M.booking),{exhibitions:i}=ye(M=>M.exhibition),[r,l]=c.useState(null),[a,f]=c.useState(!1),[b,h]=c.useState({search:"",status:[],dateRange:null,exhibition:null}),N=Se(),{data:$,isLoading:y,error:D,refetch:k}=zh({page:1,limit:100}),[j,P]=c.useState(!1),[u,x]=c.useState("pending"),[I,o]=c.useState(""),[d,R]=c.useState(!1);c.useEffect(()=>{t(Jt())},[t]),c.useEffect(()=>{t(Ct())},[t]),c.useEffect(()=>{s.length>0&&[...new Set(s.map(T=>T.exhibitionId._id))].forEach(T=>{t(mt(T))})},[s,t]);const S=async(M,T,p)=>{try{R(!0),await t(En({id:M,status:T,...p&&{rejectionReason:p}})).unwrap(),ee.success(`Booking ${T} successfully`),t(Jt()),f(!1),P(!1),l(null)}catch{ee.error("Failed to update booking status")}finally{R(!1)}},E=async M=>{try{await t(An(M)).unwrap(),ee.success("Booking deleted successfully"),t(Jt())}catch(T){ee.error((T==null?void 0:T.message)||"Failed to delete booking")}},v=M=>{h(M)},g=s.filter(M=>{var T;if(b.search&&!((T=M.companyName)!=null&&T.toLowerCase().includes(b.search.toLowerCase()))||b.status.length>0&&!b.status.includes(M.status)||b.exhibition&&M.exhibitionId._id!==b.exhibition)return!1;if(b.dateRange){const[p,C]=b.dateRange,B=new Date(M.createdAt);if(B<new Date(p)||B>new Date(C))return!1}return!0}),L=(M,T)=>{const p=new Date(T).getFullYear(),C=s.find(V=>V._id===M);if(!C)return`--/${p}/--`;const Y=(s.filter(V=>V.exhibitionId._id===C.exhibitionId._id).sort((V,_)=>new Date(V.createdAt).getTime()-new Date(_.createdAt).getTime()).findIndex(V=>V._id===M)+1).toString().padStart(2,"0"),Q=i.find(V=>V._id===C.exhibitionId._id);return`${(Q==null?void 0:Q.invoicePrefix)||C.exhibitionId.invoicePrefix||"BK"}/${p}/${Y}`},A=M=>{if(y)return console.log("Loading invoices..."),null;if(D)return console.error("Error loading invoices:",D),null;if(!$)return console.log("No invoices available"),null;const T=$.data||[];console.log("Looking for invoice with booking ID:",M);const p=T.find(C=>C.bookingId&&typeof C.bookingId=="object"&&C.bookingId._id===M);return console.log("Found invoice:",p),p==null?void 0:p._id},m=async M=>{if(y){ee.loading("Loading invoice data...");return}let T=A(M._id);if(T||(ee.loading("Checking for invoice..."),await k(),T=A(M._id)),T)N(`/invoice/${T}`);else{const p=new Date(M.createdAt),C=new Date(Date.now()-5*60*1e3);p>C?(ee.info("Invoice is still being generated. Checking again in 5 seconds..."),setTimeout(async()=>{await k();const B=A(M._id);B?N(`/invoice/${B}`):ee.warning("Invoice is not ready yet. Please try again in a few moments.")},5e3)):ee.error("No invoice found for this booking. Please contact support if this persists.")}},w=[{title:"Booking Number",dataIndex:"_id",key:"_id",fixed:"left",width:200,render:(M,T)=>e.jsx(q,{type:"link",onClick:()=>{l(s.find(p=>p._id===M)||null),f(!0)},children:L(M,T.createdAt)})},{title:"Exhibition",dataIndex:["exhibitionId","name"],key:"exhibition",width:250,render:(M,T)=>T.exhibitionId.name},{title:"Company Name",dataIndex:"companyName",key:"company",width:250,render:M=>M||"N/A"},{title:"Stalls",key:"stalls",width:150,render:(M,T)=>T.stallIds.map(p=>p.number).join(", ")},{title:"Base Amount",dataIndex:["calculations","totalBaseAmount"],key:"baseAmount",width:150,render:M=>`â‚¹${M.toLocaleString()}`},{title:"Discount",key:"discount",width:150,render:(M,T)=>{const p=T.calculations.totalDiscountAmount;if(!p||p===0)return"-";const C=T.calculations.stalls.filter(U=>U.discount).map(U=>U.discount);if(C.length===0)return"-";const B=C[0];return e.jsx(Ye,{title:e.jsx("div",{children:C.map((U,Y)=>e.jsxs("div",{children:[U==null?void 0:U.name,": ",(U==null?void 0:U.type)==="percentage"?`${U==null?void 0:U.value}%`:`â‚¹${U==null?void 0:U.value}`,e.jsx("br",{}),"Amount: â‚¹",U==null?void 0:U.amount.toLocaleString()]},Y))}),children:e.jsxs(le,{color:"red",children:["-â‚¹",p.toLocaleString(),(B==null?void 0:B.type)==="percentage"&&` (${B.value}%)`,C.length>1&&" +"]})})}},{title:"Total Amount",dataIndex:"amount",key:"amount",width:150,render:M=>`â‚¹${M.toLocaleString()}`},{title:"Status",dataIndex:"status",key:"status",width:120,render:M=>e.jsx(le,{color:M==="confirmed"?"success":M==="approved"?"blue":M==="pending"?"warning":M==="rejected"?"error":"default",children:M.toUpperCase()})},{title:"Created At",dataIndex:"createdAt",key:"createdAt",width:200,render:M=>Ae(M).format("MMM D, YYYY HH:mm")},{title:"Actions",key:"actions",fixed:"right",width:220,render:(M,T)=>e.jsxs(X,{children:[e.jsx(Ye,{title:"View Details",children:e.jsx(q,{icon:e.jsx(Mt,{}),onClick:()=>{l(T),f(!0)}})}),e.jsx(_t,{overlay:e.jsxs(at,{children:[T.status!=="cancelled"&&e.jsx(at.Item,{icon:e.jsx(Ut,{}),disabled:y,onClick:()=>m(T),children:"View Invoice"},"invoice"),e.jsx(at.Item,{icon:e.jsx(Te,{}),onClick:()=>{l(T),x(T.status),o(T.rejectionReason||""),P(!0)},children:"Update Status"},"updateStatus"),e.jsx(at.Item,{icon:e.jsx(pt,{}),danger:!0,onClick:()=>{fe.confirm({title:"Delete Booking",content:"Are you sure you want to delete this booking? This action cannot be undone.",okText:"Yes",okType:"danger",cancelText:"No",onOk:()=>E(T._id)})},children:"Delete"},"delete")]}),trigger:["click"],children:e.jsx(q,{icon:e.jsx(Vn,{})})})]})}];return e.jsxs("div",{className:"dashboard-container",children:[e.jsx("div",{style:{marginBottom:"24px"},children:e.jsxs(ne,{gutter:[24,24],align:"middle",children:[e.jsx(z,{flex:"auto",children:e.jsxs(X,{direction:"vertical",size:4,children:[e.jsx(Vh,{level:4,style:{margin:0},children:"Stall Bookings"}),e.jsx(Pe,{type:"secondary",children:"Manage exhibition stall bookings"})]})}),e.jsx(z,{children:e.jsx(q,{type:"primary",size:"large",icon:e.jsx(st,{}),onClick:()=>N("/bookings/create"),children:"Create Booking"})})]})}),e.jsx(qh,{bookings:s}),e.jsx(Oh,{filters:b,exhibitions:i,onFilterChange:v,onRefresh:()=>t(Jt())}),e.jsx(W,{className:"info-card",styles:{body:{padding:0,overflow:"auto"}},children:e.jsx($e,{columns:w,dataSource:g,loading:n,rowKey:"_id",scroll:{x:1500},pagination:{total:g.length,pageSize:10,showSizeChanger:!0,showTotal:M=>`Total ${M} items`,position:["bottomRight"]}})}),e.jsx(fe,{title:"Booking Details",open:a,onCancel:()=>{f(!1),l(null)},footer:[e.jsx(q,{type:"primary",disabled:!r,onClick:()=>{r&&(x(r.status),o(r.rejectionReason||""),P(!0))},children:"Update Status"},"updateStatus"),e.jsx(q,{onClick:()=>{f(!1),l(null)},children:"Close"},"close")],width:800,children:r&&e.jsxs(X,{direction:"vertical",size:"large",style:{width:"100%"},children:[e.jsxs(pe,{bordered:!0,column:2,children:[e.jsxs(pe.Item,{label:"Booking Number",span:2,children:[L(r._id,r.createdAt),e.jsxs(Pe,{type:"secondary",style:{marginLeft:8,fontSize:"12px"},children:["(ID: ",r._id,")"]})]}),e.jsx(pe.Item,{label:"Exhibition",span:2,children:r.exhibitionId.name}),e.jsxs(pe.Item,{label:"Status",span:2,children:[e.jsx(le,{color:r.status==="confirmed"?"success":r.status==="approved"?"blue":r.status==="pending"?"warning":r.status==="rejected"?"error":"default",children:r.status.toUpperCase()}),r.rejectionReason&&e.jsxs("div",{style:{marginTop:8},children:[e.jsx(Pe,{type:"secondary",children:"Rejection Reason:"}),e.jsx("br",{}),e.jsx(Pe,{children:r.rejectionReason})]})]}),e.jsx(pe.Item,{label:"Customer Name",children:r.customerName}),e.jsx(pe.Item,{label:"Customer Email",children:r.customerEmail}),e.jsx(pe.Item,{label:"Customer Phone",children:r.customerPhone}),e.jsx(pe.Item,{label:"Company Name",children:r.companyName})]}),e.jsx(W,{title:"Stall Details",size:"small",children:e.jsx($e,{dataSource:r.stallIds,pagination:!1,rowKey:"_id",columns:[{title:"Stall Number",dataIndex:"number",key:"number"},{title:"Dimensions",key:"dimensions",render:M=>e.jsxs(le,{color:"blue",children:[M.dimensions.width,"x",M.dimensions.height,"m"]})},{title:"Rate (per sqm)",dataIndex:"ratePerSqm",key:"rate",render:M=>`â‚¹${M.toLocaleString()}`},{title:"Base Amount",key:"baseAmount",render:M=>{const T=r.calculations.stalls.find(p=>p.stallId===M._id);return T?`â‚¹${T.baseAmount.toLocaleString()}`:"-"}},{title:"Discount",key:"discount",render:M=>{const T=r.calculations.stalls.find(p=>p.stallId===M._id);return T!=null&&T.discount?e.jsxs(le,{color:"red",children:["-â‚¹",T.discount.amount.toLocaleString(),T.discount.type==="percentage"&&` (${T.discount.value}%)`]}):"-"}}]})}),e.jsx(W,{title:"Financial Summary",size:"small",children:e.jsxs(X,{direction:"vertical",style:{width:"100%"},size:"small",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(Pe,{children:"Total Base Amount:"}),e.jsxs(Pe,{children:["â‚¹",r.calculations.totalBaseAmount.toLocaleString()]})]}),r.calculations.totalDiscountAmount>0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(Pe,{children:"Total Discount:"}),e.jsxs(Pe,{type:"danger",children:["-â‚¹",r.calculations.totalDiscountAmount.toLocaleString()]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(Pe,{children:"Amount after Discount:"}),e.jsxs(Pe,{children:["â‚¹",r.calculations.totalAmountAfterDiscount.toLocaleString()]})]}),e.jsx(Fe,{style:{margin:"8px 0"}}),r.calculations.taxes.map(M=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(Pe,{children:[M.name," (",M.rate,"%):"]}),e.jsxs(Pe,{children:["â‚¹",M.amount.toLocaleString()]})]},M.name)),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"8px"},children:[e.jsx(Pe,{strong:!0,children:"Total Amount (incl. Taxes):"}),e.jsxs(Pe,{strong:!0,children:["â‚¹",r.amount.toLocaleString()]})]})]})})]})}),e.jsx(fe,{title:"Update Booking Status",open:j,onCancel:()=>{P(!1),o("")},footer:null,width:600,children:r&&e.jsxs("div",{children:[e.jsx(W,{title:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(Ut,{style:{fontSize:"18px"}}),e.jsx("span",{children:"Booking Information"})]}),style:{marginBottom:16},bordered:!1,size:"small",children:e.jsxs(ne,{gutter:[16,8],children:[e.jsx(z,{span:8,children:e.jsx(Pe,{strong:!0,children:"Booking Number:"})}),e.jsx(z,{span:16,children:e.jsx(Pe,{children:L(r._id,r.createdAt)})}),e.jsx(z,{span:8,children:e.jsx(Pe,{strong:!0,children:"Company:"})}),e.jsx(z,{span:16,children:e.jsx(Pe,{children:r.companyName})}),e.jsx(z,{span:8,children:e.jsx(Pe,{strong:!0,children:"Exhibition:"})}),e.jsx(z,{span:16,children:e.jsx(Pe,{children:r.exhibitionId.name})}),e.jsx(z,{span:8,children:e.jsx(Pe,{strong:!0,children:"Current Status:"})}),e.jsx(z,{span:16,children:e.jsx(le,{color:r.status==="confirmed"?"success":r.status==="approved"?"blue":r.status==="pending"?"warning":r.status==="rejected"?"error":"default",children:r.status.toUpperCase()})})]})}),e.jsxs(W,{title:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(ss,{style:{fontSize:"18px"}}),e.jsx("span",{children:"Update Status"})]}),bordered:!1,size:"small",children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx(Pe,{strong:!0,children:"Select New Status:"}),e.jsx("div",{style:{marginTop:"16px"},children:e.jsxs(It.Group,{value:u,onChange:M=>x(M.target.value),buttonStyle:"solid",style:{display:"flex",flexWrap:"nowrap",overflowX:"auto"},children:[e.jsx(It.Button,{value:"pending",style:{flex:"0 0 auto"},children:e.jsxs(X,{children:[e.jsx(Qe,{style:{color:"#faad14"}}),"Pending"]})}),e.jsx(It.Button,{value:"approved",style:{flex:"0 0 auto"},children:e.jsxs(X,{children:[e.jsx(Te,{style:{color:"#52c41a"}}),"Approved"]})}),e.jsx(It.Button,{value:"rejected",style:{flex:"0 0 auto"},children:e.jsxs(X,{children:[e.jsx(ts,{style:{color:"#f5222d"}}),"Rejected"]})}),e.jsx(It.Button,{value:"confirmed",style:{flex:"0 0 auto"},children:e.jsxs(X,{children:[e.jsx(Te,{style:{color:"#1890ff"}}),"Confirmed"]})}),e.jsx(It.Button,{value:"cancelled",style:{flex:"0 0 auto"},children:e.jsxs(X,{children:[e.jsx(ts,{style:{color:"#ff7875"}}),"Cancelled"]})})]})})]}),u==="rejected"&&e.jsx("div",{children:e.jsx(F.Item,{label:e.jsx(Pe,{strong:!0,children:"Rejection Reason:"}),required:u==="rejected",rules:[{required:!0,message:"Please provide a reason for rejection"}],help:"This will be visible to the customer",children:e.jsx(G.TextArea,{rows:4,value:I,onChange:M=>o(M.target.value),placeholder:"Provide a reason for rejection",style:{marginTop:8}})})}),u==="approved"&&e.jsx(Ge,{message:"Approval Confirmation",description:"By approving this booking, the stalls will be reserved but not yet confirmed. Customer will be notified.",type:"success",showIcon:!0,style:{marginTop:8}}),u==="confirmed"&&e.jsx(Ge,{message:"Confirmation Notice",description:"By confirming this booking, the stalls will be marked as booked. This should be done after payment is received.",type:"info",showIcon:!0,style:{marginTop:8}}),u==="cancelled"&&e.jsx(Ge,{message:"Cancellation Warning",description:"By cancelling this booking, all stalls will be marked as available again.",type:"warning",showIcon:!0,style:{marginTop:8}}),u==="pending"&&e.jsx(Ge,{message:"Return to Pending",description:"This booking will be moved back to pending status.",type:"warning",showIcon:!0,style:{marginTop:8}})]}),e.jsxs("div",{style:{marginTop:24,display:"flex",justifyContent:"flex-end",gap:"8px"},children:[e.jsx(q,{onClick:()=>{P(!1),o("")},children:"Cancel"}),e.jsx(q,{type:"primary",onClick:()=>{if(u==="rejected"&&!I.trim()){ee.error("Rejection reason is required when rejecting a booking");return}S(r._id,u,u==="rejected"?I:void 0)},loading:d,disabled:u==="rejected"&&!I.trim(),children:"Update Status"})]})]})]})})]})},Wh={exhibitors:[],loading:!1,error:null},Nt=Le("exhibitors/fetchAll",async(t,{rejectWithValue:s})=>{var n,i;try{return(await rt.getExhibitors()).data}catch(r){return s(((i=(n=r.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to fetch exhibitors")}}),Yh=ht({name:"exhibitor",initialState:Wh,reducers:{},extraReducers:t=>{t.addCase(Nt.pending,s=>{s.loading=!0,s.error=null}).addCase(Nt.fulfilled,(s,n)=>{s.exhibitors=n.payload,s.loading=!1}).addCase(Nt.rejected,(s,n)=>{s.loading=!1,s.error=n.payload})}}),Qh=Yh.reducer,{Title:Gh,Text:kt}=me,Kh=()=>{var T;const[t]=F.useForm(),[s]=F.useForm(),[n,i]=c.useState(!1),[r,l]=c.useState([]),[a,f]=c.useState(!1),[b,h]=c.useState([]),[N,$]=c.useState(null),[y,D]=c.useState(),k=Se(),j=Me(),{loading:P}=ye(p=>p.booking),{exhibitions:u=[],loading:x}=ye(p=>p.exhibition),{exhibitors:I=[],loading:o}=ye(p=>p.exhibitor),{isAuthenticated:d}=ye(p=>p.auth);c.useEffect(()=>{if(!d){ee.error("Please login to create a booking"),k("/login");return}j(Ct()),j(Nt())},[j,d,k]);const R=async p=>{try{f(!0),t.setFieldValue("stallIds",[]),t.setFieldValue("discountId",void 0),h([]);const C=await Ne.getExhibition(p);$(C.data);const U=(await Ne.getStalls(p)).data.filter(Y=>Y.status==="available");l(U)}catch(C){console.error("Failed to fetch exhibition data:",C),ee.error("Failed to fetch exhibition data")}finally{f(!1)}},S=p=>Math.round(p.ratePerSqm*p.dimensions.width*p.dimensions.height*100)/100,E=p=>{const C=r.filter(B=>{const U=B._id||B.id;return U&&p.includes(U)});h(C)},v=(p,C,B)=>{if(!(B!=null&&B.isActive))return 0;let U=0;if(B.type==="percentage")U=p*(Math.max(0,Math.min(100,B.value))/100);else{const Y=p/C*B.value;U=Math.min(Y,p)}return Math.round(U*100)/100},g=async p=>{var C,B;try{const U=I.find(O=>O._id===p.exhibitorId);if(!U)throw new Error("Selected exhibitor not found");const[Y,Q,K]=p.discountId?p.discountId.split("-"):[],V=(C=N==null?void 0:N.discountConfig)==null?void 0:C.find(O=>`${O.name}-${O.value}-${O.type}`===p.discountId),_=b.map(O=>{const ae=O._id||O.id;if(!ae)throw new Error(`Invalid stall ID for stall number ${O.number}`);return{stall:O,stallId:ae,baseAmount:S(O)}}),H=_.reduce((O,{baseAmount:ae})=>O+ae,0),te=_.map(({stall:O,stallId:ae,baseAmount:re})=>{const he=V?v(re,H,V):0;return{stallId:ae,number:O.number,baseAmount:re,discount:V?{name:V.name,type:V.type,value:V.value,amount:he}:void 0,amountAfterDiscount:Math.round((re-he)*100)/100}}),ue=te.reduce((O,ae)=>{var re;return O+(((re=ae.discount)==null?void 0:re.amount)||0)},0),ke=Math.round((H-ue)*100)/100,de=((B=N==null?void 0:N.taxConfig)==null?void 0:B.filter(O=>O.isActive).map(O=>({name:O.name,rate:O.rate,amount:Math.round(ke*O.rate/100*100)/100})))||[],ce=de.reduce((O,ae)=>O+ae.amount,0),be=Math.round((ke+ce)*100)/100,Je={exhibitionId:p.exhibitionId,exhibitorId:p.exhibitorId,stallIds:te.map(O=>O.stallId),customerName:U.contactPerson,customerEmail:U.email,customerPhone:U.phone,customerAddress:U.address||"N/A",companyName:U.companyName,discount:V?{name:V.name,type:V.type,value:V.value}:void 0,amount:be,calculations:{stalls:te,totalBaseAmount:H,totalDiscountAmount:ue,totalAmountAfterDiscount:ke,taxes:de,totalTaxAmount:ce,totalAmount:be}};await j(Nn(Je)).unwrap(),ee.success("Booking created successfully"),k("/bookings")}catch(U){console.error("Error creating booking:",U),ee.error("Failed to create booking")}},L=async p=>{try{const C=await rt.createExhibitor(p);ee.success("Exhibitor added successfully"),j(Nt()),t.setFieldsValue({exhibitorId:C.data._id}),i(!1),s.resetFields()}catch(C){const B=(C==null?void 0:C.message)||"Failed to add exhibitor";ee.error(B),B==="User with this email already exists"&&s.setFields([{name:"contactEmail",errors:["This email is already registered"]}])}},A=u.map(p=>({label:p.name,value:p._id||p.id})),m=I.map(p=>({label:p.companyName,value:p._id}));r.map(p=>({label:`Stall ${p.number} (${p.dimensions.width}m Ã— ${p.dimensions.height}m = ${(p.dimensions.width*p.dimensions.height).toFixed(2)} sqm) - â‚¹${p.ratePerSqm.toLocaleString()}/sq.m`,value:p._id||p.id}));const w=p=>{D(p),t.setFieldValue("discountId",p)},M=()=>{var V,_;const p=b.reduce((H,te)=>H+S(te),0),C=(V=N==null?void 0:N.discountConfig)==null?void 0:V.find(H=>`${H.name}-${H.value}-${H.type}`===y&&H.isActive),B=C?C.type==="percentage"?Math.round(p*C.value/100*100)/100:Math.min(C.value,p):0,U=Math.round((p-B)*100)/100,Y=((_=N==null?void 0:N.taxConfig)==null?void 0:_.filter(H=>H.isActive).map(H=>({name:H.name,rate:H.rate,amount:Math.round(U*H.rate/100*100)/100})))||[],Q=Y.reduce((H,te)=>H+te.amount,0),K=Math.round((U+Q)*100)/100;return{baseAmount:p,selectedDiscount:C,discountAmount:B,amountAfterDiscount:U,taxes:Y,totalTaxAmount:Q,totalAmount:K}};return e.jsxs("div",{style:{padding:"24px"},children:[e.jsxs(ne,{gutter:[24,24],children:[e.jsx(z,{span:24,children:e.jsxs(X,{direction:"vertical",size:4,children:[e.jsx(Gh,{level:2,style:{margin:0},children:"Create Booking"}),e.jsx(me.Text,{type:"secondary",children:"Create a new stall booking"})]})}),e.jsx(z,{span:24,children:e.jsx(W,{children:e.jsx(F,{form:t,layout:"vertical",onFinish:g,style:{maxWidth:800},children:e.jsxs(ne,{gutter:16,children:[e.jsx(z,{span:12,children:e.jsx(F.Item,{name:"exhibitionId",label:"Exhibition",rules:[{required:!0,message:"Please select an exhibition"}],children:e.jsx(oe,{placeholder:"Select exhibition",loading:x,options:A,onChange:R})})}),e.jsx(z,{span:12,children:e.jsx(F.Item,{name:"exhibitorId",label:e.jsxs(X,{children:[e.jsx("span",{children:"Exhibitor"}),e.jsx(q,{type:"link",icon:e.jsx(st,{}),onClick:()=>i(!0),style:{padding:0},children:"Add Exhibitor"})]}),rules:[{required:!0,message:"Please select an exhibitor"}],children:e.jsx(oe,{showSearch:!0,placeholder:"Select exhibitor",loading:o,options:m,filterOption:(p,C)=>{var B;return(((B=C==null?void 0:C.label)==null?void 0:B.toString())??"").toLowerCase().includes(p.toLowerCase())}})})}),e.jsx(z,{span:24,children:e.jsx(F.Item,{name:"stallIds",label:"Select Stalls",rules:[{required:!0,message:"Please select at least one stall"}],children:e.jsx(oe,{mode:"multiple",placeholder:a?"Loading stalls...":"Select stalls",loading:a,onChange:E,options:r.map(p=>({label:`Stall ${p.number} (${p.dimensions.width}m Ã— ${p.dimensions.height}m = ${(p.dimensions.width*p.dimensions.height).toFixed(2)} sqm) - â‚¹${p.ratePerSqm.toLocaleString()}/sq.m`,value:p._id||p.id}))})})}),b.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(z,{span:24,children:e.jsx(W,{title:"Selected Stalls Summary",size:"small",children:e.jsx($e,{dataSource:b.map(p=>({...p,key:p._id||p.id})),pagination:!1,size:"small",columns:[{title:"Stall Number",dataIndex:"number",key:"number"},{title:"Stall Type",key:"type",render:(p,C)=>{var B,U;return((B=C.stallType)==null?void 0:B.name)||(typeof C.stallTypeId=="object"?(U=C.stallTypeId)==null?void 0:U.name:"Not specified")}},{title:"Dimensions",key:"dimensions",render:(p,C)=>`${C.dimensions.width}m Ã— ${C.dimensions.height}m`},{title:"Area (sqm)",key:"area",render:(p,C)=>(C.dimensions.width*C.dimensions.height).toFixed(2)},{title:"Rate/sq.m",dataIndex:"ratePerSqm",key:"rate",render:p=>`â‚¹${p.toLocaleString()}`},{title:"Base Amount",key:"baseAmount",render:(p,C)=>`â‚¹${S(C).toLocaleString()}`}],summary:()=>{const p=b.reduce((C,B)=>C+S(B),0);return e.jsxs($e.Summary.Row,{children:[e.jsx($e.Summary.Cell,{index:0,colSpan:5,children:e.jsx("strong",{children:"Total Base Amount"})}),e.jsx($e.Summary.Cell,{index:1,children:e.jsxs("strong",{children:["â‚¹",p.toLocaleString()]})})]},"summary")}})})}),e.jsx(z,{span:24,children:e.jsxs(W,{title:"Price Calculations",size:"small",children:[e.jsx(ne,{gutter:[16,16],children:e.jsx(z,{span:12,children:e.jsx(F.Item,{name:"discountId",label:"Available Discounts",children:e.jsx(oe,{placeholder:"Select discount",allowClear:!0,onChange:w,options:(T=N==null?void 0:N.discountConfig)==null?void 0:T.map(p=>({label:`${p.name} (${p.type==="percentage"?p.value+"%":"â‚¹"+p.value})${p.isActive?"":" - Inactive"}`,value:`${p.name}-${p.value}-${p.type}`,disabled:!p.isActive}))})})})}),e.jsx("div",{style:{background:"#fafafa",padding:"16px",borderRadius:"8px",marginTop:"16px"},children:e.jsx(X,{direction:"vertical",style:{width:"100%"},size:"small",children:(()=>{const{baseAmount:p,selectedDiscount:C,discountAmount:B,amountAfterDiscount:U,taxes:Y,totalAmount:Q}=M();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(kt,{children:"Total Base Amount:"}),e.jsxs(kt,{children:["â‚¹",p.toLocaleString()]})]}),C&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(kt,{children:["Discount (",C.type==="percentage"?`${C.value}%`:`â‚¹${C.value.toLocaleString()}`,"):"]}),e.jsxs(kt,{type:"danger",children:["-â‚¹",B.toLocaleString()]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(kt,{children:"Amount after Discount:"}),e.jsxs(kt,{children:["â‚¹",U.toLocaleString()]})]}),e.jsx(Fe,{style:{margin:"8px 0"}}),Y.map(K=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(kt,{children:[K.name," (",K.rate,"%):"]}),e.jsxs(kt,{children:["â‚¹",K.amount.toLocaleString()]})]},`tax-${K.name}`)),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"8px"},children:[e.jsx(kt,{strong:!0,children:"Total Amount (incl. Taxes):"}),e.jsxs(kt,{strong:!0,children:["â‚¹",Q.toLocaleString()]})]})]})})()})})]})})]}),e.jsx(z,{span:24,children:e.jsx(F.Item,{children:e.jsxs(X,{children:[e.jsx(q,{type:"primary",htmlType:"submit",loading:P,children:"Create Booking"}),e.jsx(q,{onClick:()=>k("/bookings"),children:"Cancel"})]})})})]})})})})]}),e.jsx(fe,{title:e.jsx("span",{style:{fontSize:"18px",fontWeight:600,color:"#101828"},children:"Add Exhibitor"}),open:n,onCancel:()=>{i(!1),s.resetFields()},width:800,footer:e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-start",padding:"20px 24px"},children:[e.jsx(q,{onClick:()=>{i(!1),s.resetFields()},style:{height:"40px",padding:"10px 16px",borderRadius:"8px",border:"1px solid #D0D5DD",color:"#344054",fontWeight:500,fontSize:"14px",backgroundColor:"white"},children:"Cancel"}),e.jsx(q,{type:"primary",onClick:s.submit,style:{height:"40px",padding:"10px 16px",borderRadius:"8px",border:"none",backgroundColor:"#6941C6",color:"white",fontWeight:500,fontSize:"14px",boxShadow:"0px 1px 2px rgba(16, 24, 40, 0.05)"},children:"Add Exhibitor"})]}),styles:{body:{padding:"24px",maxHeight:"calc(100vh - 200px)",overflowY:"auto"},header:{borderBottom:"1px solid #E5E7EB",padding:"24px"},footer:{borderTop:"1px solid #E5E7EB",padding:0}},style:{top:20},children:e.jsx(F,{form:s,layout:"vertical",onFinish:L,requiredMark:!1,children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"32px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#101828",marginBottom:"24px"},children:"Company Information"}),e.jsx(F.Item,{name:"companyName",label:"Company Name",rules:[{required:!0,message:"Please enter company name"}],children:e.jsx(G,{})}),e.jsx(F.Item,{name:"address",label:"Address",rules:[{required:!0,message:"Please enter address"}],children:e.jsx(G.TextArea,{rows:3})}),e.jsx(F.Item,{name:"city",label:"City",rules:[{required:!0,message:"Please enter city"}],children:e.jsx(G,{})}),e.jsx(F.Item,{name:"state",label:"State",rules:[{required:!0,message:"Please enter state"}],children:e.jsx(G,{})}),e.jsx(F.Item,{name:"pinCode",label:"PIN Code",rules:[{required:!0,message:"Please enter PIN code"},{pattern:/^\d{6}$/,message:"Please enter a valid 6-digit PIN code"}],children:e.jsx(G,{})}),e.jsx(F.Item,{name:"status",label:"Status",initialValue:"active",children:e.jsxs(oe,{children:[e.jsx(oe.Option,{value:"active",children:e.jsx("div",{style:{display:"inline-flex",padding:"2px 8px",borderRadius:"16px",fontSize:"12px",fontWeight:500,backgroundColor:"#F6FEF9",color:"#039855",border:"1px solid #ABEFC6",alignItems:"center",height:"22px"},children:"ACTIVE"})}),e.jsx(oe.Option,{value:"inactive",children:e.jsx("div",{style:{display:"inline-flex",padding:"2px 8px",borderRadius:"16px",fontSize:"12px",fontWeight:500,backgroundColor:"#FEF3F2",color:"#D92D20",border:"1px solid #FDA29B",alignItems:"center",height:"22px"},children:"INACTIVE"})})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#101828",marginBottom:"24px"},children:"Contact & Legal Information"}),e.jsx(F.Item,{name:"contactPerson",label:"Contact Person",rules:[{required:!0,message:"Please enter contact person"}],children:e.jsx(G,{})}),e.jsx(F.Item,{name:"contactEmail",label:"Email",rules:[{required:!0,message:"Please enter email"},{type:"email",message:"Please enter a valid email"}],children:e.jsx(G,{})}),e.jsx(F.Item,{name:"contactPhone",label:"Phone",rules:[{required:!0,message:"Please enter phone number"},{pattern:/^\d{10}$/,message:"Please enter a valid 10-digit phone number"}],children:e.jsx(G,{})}),e.jsx(F.Item,{name:"panNumber",label:"PAN Number",rules:[{pattern:/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/,message:"Please enter a valid PAN number"}],children:e.jsx(G,{placeholder:"ABCDE1234F"})}),e.jsx(F.Item,{name:"gstNumber",label:"GST Number",rules:[{pattern:/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/,message:"Please enter a valid GST number"}],children:e.jsx(G,{placeholder:"27AAPFU0939F1ZV"})})]})]})})})]})};da.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${ca}/pdf.worker.min.js`;const Xh=()=>{const{id:t}=dt(),s=Se(),{data:n,isLoading:i}=Uh(t||""),[r,l]=c.useState(!1),[a,f]=c.useState(!1),[b,h]=c.useState(!1),[N,$]=c.useState(null),[y,D]=c.useState(null),[k]=F.useForm(),j=async()=>{try{const o=await xr(`/invoices/${t}/download?force=true`),d=window.URL.createObjectURL(new Blob([o.data]));$(d),h(!0)}catch(o){console.error("Preview error:",o),ee.error("Failed to preview invoice")}},P=async()=>{try{const o=await xr(`/invoices/${t}/download?force=true`),d=window.URL.createObjectURL(new Blob([o.data])),R=document.createElement("a");R.href=d,R.setAttribute("download",`invoice-${t}.pdf`),document.body.appendChild(R),R.click(),R.remove(),window.URL.revokeObjectURL(d)}catch(o){console.error("Download error:",o),ee.error("Failed to download invoice")}},u=async o=>{try{await se.post(`/invoices/${t}/share/email`,o),ee.success("Invoice shared via email successfully"),l(!1),k.resetFields()}catch(d){console.error("Email sharing error:",d),ee.error("Failed to share invoice via email")}},x=async o=>{try{await se.post(`/invoices/${t}/share/whatsapp`,o),ee.success("Invoice shared via WhatsApp successfully"),f(!1),k.resetFields()}catch(d){console.error("WhatsApp sharing error:",d),ee.error("Failed to share invoice via WhatsApp")}},I=({numPages:o})=>{D(o)};return i||!n?e.jsx("div",{children:"Loading..."}):(console.log("Invoice data:",n),e.jsxs("div",{style:{padding:"24px"},children:[e.jsx(W,{title:"Invoice Details",extra:e.jsxs(X,{children:[e.jsx(q,{icon:e.jsx(Ot,{}),onClick:()=>s(-1),children:"Back"}),e.jsx(q,{icon:e.jsx(Mt,{}),onClick:j,children:"Preview"}),e.jsx(q,{type:"primary",icon:e.jsx(Mi,{}),onClick:P,children:"Download"}),e.jsx(q,{icon:e.jsx(qt,{}),onClick:()=>l(!0),children:"Share via Email"}),e.jsx(q,{icon:e.jsx(ma,{}),onClick:()=>f(!0),children:"Share via WhatsApp"})]}),children:e.jsx(Wa,{booking:{...n.bookingId,customerGSTIN:n.bookingId.customerGSTIN||"",invoiceNumber:n.invoiceNumber,exhibitionId:{...n.bookingId.exhibitionId,companyName:n.bookingId.exhibitionId.companyName||"Company Name",bankName:n.bookingId.exhibitionId.bankName||"",bankAccount:n.bookingId.exhibitionId.bankAccount||"",bankAccountName:n.bookingId.exhibitionId.bankAccountName||"",bankBranch:n.bookingId.exhibitionId.bankBranch||"",bankIFSC:n.bookingId.exhibitionId.bankIFSC||"",companyCIN:n.bookingId.exhibitionId.companyCIN||"",companyPAN:n.bookingId.exhibitionId.companyPAN||"",companySAC:n.bookingId.exhibitionId.companySAC||"",companyGST:n.bookingId.exhibitionId.companyGST||"",companyEmail:n.bookingId.exhibitionId.companyEmail||"",companyWebsite:n.bookingId.exhibitionId.companyWebsite||"",companyAddress:n.bookingId.exhibitionId.companyAddress||""},calculations:{...n.bookingId.calculations,stalls:n.bookingId.calculations.stalls.map(o=>({discount:o.discount?{value:o.discount.value}:void 0}))}}})}),e.jsx(fe,{title:"Preview Invoice",open:b,onCancel:()=>{h(!1),N&&(window.URL.revokeObjectURL(N),$(null))},width:1e3,footer:null,children:N&&e.jsx("div",{style:{height:"80vh",overflow:"auto"},children:e.jsx(ua,{file:N,onLoadSuccess:I,loading:e.jsx("div",{children:"Loading PDF..."}),children:Array.from(new Array(y||0),(o,d)=>e.jsx(ha,{pageNumber:d+1,width:900,renderTextLayer:!1,renderAnnotationLayer:!1},`page_${d+1}`))})})}),e.jsx(fe,{title:"Share Invoice via Email",open:r,onCancel:()=>l(!1),footer:null,children:e.jsxs(F,{form:k,onFinish:u,layout:"vertical",children:[e.jsx(F.Item,{name:"email",label:"Email Address",rules:[{required:!0,message:"Please enter email address"},{type:"email",message:"Please enter a valid email address"}],children:e.jsx(G,{placeholder:"Enter email address"})}),e.jsx(F.Item,{name:"message",label:"Message (Optional)",children:e.jsx(G.TextArea,{placeholder:"Enter optional message"})}),e.jsx(F.Item,{children:e.jsx(q,{type:"primary",htmlType:"submit",children:"Send"})})]})}),e.jsx(fe,{title:"Share Invoice via WhatsApp",open:a,onCancel:()=>f(!1),footer:null,children:e.jsxs(F,{form:k,onFinish:x,layout:"vertical",children:[e.jsx(F.Item,{name:"phoneNumber",label:"Phone Number",rules:[{required:!0,message:"Please enter phone number"},{pattern:/^\+?[1-9]\d{9,14}$/,message:"Please enter a valid phone number"}],children:e.jsx(G,{placeholder:"Enter phone number with country code"})}),e.jsx(F.Item,{children:e.jsx(q,{type:"primary",htmlType:"submit",children:"Send"})})]})})]}))},{Title:He,Paragraph:Ve,Text:gn}=me,{Content:Zh}=De,Jh=t=>{if(!t)return"/exhibition-placeholder.jpg";if(t.startsWith("/")||t.startsWith("http"))return t;const s=t.startsWith("/")?t.substring(1):t;return s.includes("logos/")||s.includes("sponsors/")?`${se.defaults.baseURL}/public/images/${s}`:"/exhibition-placeholder.jpg"},ex=Z(Zh)`
  padding-top: 64px;
`,tx=Z.div`
  background: linear-gradient(135deg, #4158D0 0%, #C850C0 46%, #FFCC70 100%);
  padding: 80px 0;
  color: white;
  position: relative;
  overflow: hidden;
  
  @media (max-width: 768px) {
    padding: 60px 0;
  }
`,sx=Z.div`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.2);
  z-index: 1;
`,nx=Z.div`
  position: relative;
  z-index: 2;
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 24px;
`,gs=Z(W)`
  height: 100%;
  border-radius: 12px;
  overflow: hidden;
  transition: all 0.3s ease;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  border: none;
  
  &:hover {
    transform: translateY(-8px);
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.12);
  }
`,ix=Z(W)`
  border-radius: 12px;
  overflow: hidden;
  transition: all 0.3s ease;
  margin-bottom: 16px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  border: none;
  
  &:hover {
    transform: translateY(-8px);
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.12);
  }
`,Ps=Z(He)`
  position: relative;
  display: inline-block;
  margin-bottom: 48px !important;
  
  &:after {
    content: "";
    position: absolute;
    bottom: -12px;
    left: 0;
    width: 60px;
    height: 4px;
    border-radius: 2px;
    background: linear-gradient(90deg, #4158D0, #C850C0);
  }
`,fs=Z.div`
  width: 60px;
  height: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  margin-bottom: 24px;
  font-size: 24px;
  
  & svg {
    font-size: 28px;
  }
`,fn=Z.div`
  background: white;
  border-radius: 12px;
  padding: 30px;
  height: 100%;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  transition: all 0.3s ease;
  
  &:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.12);
  }
`,oa=Z.div`
  background: white;
  border-radius: 12px;
  padding: 30px;
  margin: 10px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
`,rx=Z(le)`
  position: absolute;
  top: 12px;
  right: 12px;
  z-index: 10;
  font-weight: 500;
  padding: 4px 12px;
  border-radius: 50px;
`,ki=Z(q)`
  height: 50px;
  font-weight: 500;
  border-radius: 8px;
  padding: 0 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  
  &.ant-btn-primary {
    background: linear-gradient(90deg, #4158D0, #C850C0);
    border: none;
    
    &:hover {
      background: linear-gradient(90deg, #3a4ec0, #b745af);
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
    }
  }
  
  &.secondary-btn {
    background: rgba(255, 255, 255, 0.9);
    color: #4158D0;
    border: none;
    
    &:hover {
      background: white;
      color: #C850C0;
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
    }
  }
`,Ds=Z.div`
  padding: 80px 0;
  
  @media (max-width: 768px) {
    padding: 60px 0;
  }
  
  &.gray-bg {
    background: #f9fafb;
  }
  
  &.how-it-works {
    background: linear-gradient(135deg, #f6f9fc 0%, #f1f4f9 100%);
  }
`;Z.div`
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: linear-gradient(135deg, #4158D0, #C850C0);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  margin-right: 16px;
  font-size: 18px;
  flex-shrink: 0;
`;const ax=()=>{const t=Se(),s=Me(),[n,i]=c.useState([]),[r,l]=c.useState(!0);c.useEffect(()=>{(async()=>{try{l(!0);const N=await xt.getExhibitions();i(N.data.slice(0,4))}catch(N){console.error("Failed to fetch exhibitions:",N)}finally{l(!1)}})()},[]);const a=h=>{const N={year:"numeric",month:"short",day:"numeric"};return new Date(h).toLocaleDateString(void 0,N)},f=(h,N)=>{const $=new Date,y=new Date(h),D=new Date(N);return $<y?{status:"Upcoming",color:"#722ED1"}:$>D?{status:"Completed",color:"#8C8C8C"}:{status:"Active",color:"#52C41A"}},b=()=>{s(Bn(void 0))};return e.jsxs(De,{children:[e.jsx(ft,{}),e.jsxs(ex,{children:[e.jsxs(tx,{children:[e.jsx(sx,{}),e.jsx(nx,{children:e.jsxs(ne,{gutter:[48,48],align:"middle",children:[e.jsxs(z,{xs:24,lg:14,children:[e.jsx(He,{level:1,style:{fontSize:"3.5rem",marginBottom:24,color:"white",fontWeight:700},children:"Book Your Exhibition Space with Ease"}),e.jsx(Ve,{style:{fontSize:"1.2rem",marginBottom:40,color:"rgba(255, 255, 255, 0.9)"},children:"Explore upcoming exhibitions, select your perfect stall, and secure your spot all in one place. Manage your exhibition presence effortlessly."}),e.jsxs(X,{size:16,wrap:!0,children:[e.jsx(ki,{type:"primary",size:"large",onClick:()=>t("/exhibitions"),icon:e.jsx(Ci,{}),children:"Explore Exhibitions"}),e.jsx(ki,{className:"secondary-btn",size:"large",onClick:()=>t("/exhibitor/login"),icon:e.jsx(Ce,{}),children:"Exhibitor Portal"})]})]}),e.jsx(z,{xs:24,lg:10,children:e.jsx("img",{src:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?auto=format&fit=crop&q=80&w=1000&ixlib=rb-4.0.3",alt:"Exhibition Space",style:{width:"100%",borderRadius:"12px",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.2)",border:"4px solid rgba(255, 255, 255, 0.2)",objectFit:"cover",height:"300px"},onError:h=>{const N=h.target;N.src="https://images.unsplash.com/photo-1559223607-a43f990c43d5?auto=format&fit=crop&q=80&w=1000&ixlib=rb-4.0.3",N.onerror=()=>{N.style.height="300px",N.style.background="linear-gradient(135deg, #4158D0 0%, #C850C0 100%)",N.onerror=null;const $=N.parentElement;if($){const y=document.createElement("div");y.style.position="absolute",y.style.top="50%",y.style.left="50%",y.style.transform="translate(-50%, -50%)",y.style.color="white",y.style.fontSize="18px",y.style.fontWeight="bold",y.style.textAlign="center",y.textContent="Exhibition Venue",$.appendChild(y)}}}})})]})})]}),e.jsx(Ds,{children:e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 24px"},children:[e.jsx(Ps,{level:2,children:"Featured Exhibitions"}),r?e.jsx(ne,{gutter:[24,24],children:[1,2,3,4].map(h=>e.jsx(z,{xs:24,sm:12,lg:6,children:e.jsx(W,{style:{borderRadius:"12px"},children:e.jsx(ga,{active:!0,avatar:!0,paragraph:{rows:3}})})},h))}):n.length>0?e.jsx(ne,{gutter:[24,24],children:n.map((h,N)=>{const{status:$,color:y}=f(h.startDate,h.endDate);return e.jsx(z,{xs:24,sm:12,lg:6,children:e.jsxs(ix,{onClick:()=>t(Kn(h)),cover:e.jsxs("div",{style:{height:200,overflow:"hidden",position:"relative"},children:[e.jsx("img",{alt:h.name,src:h.headerLogo?Jh(h.headerLogo):"/exhibition-placeholder.jpg",style:{width:"100%",height:"100%",objectFit:"cover",filter:"brightness(0.95)"}}),e.jsx(le,{color:y,style:{position:"absolute",top:12,left:12,borderRadius:"50px",padding:"2px 12px"},children:$}),N===0&&e.jsx(rx,{color:"#f50",children:"Featured"})]}),hoverable:!0,children:[e.jsx(He,{level:5,ellipsis:{rows:1},style:{marginBottom:8},children:h.name}),e.jsxs("div",{style:{marginBottom:12,display:"flex",alignItems:"center",gap:8},children:[e.jsx(Et,{style:{color:"#4158D0"}}),e.jsxs(gn,{type:"secondary",style:{fontSize:13},children:[a(h.startDate)," - ",a(h.endDate)]})]}),h.venue&&e.jsxs("div",{style:{marginBottom:16,display:"flex",alignItems:"center",gap:8},children:[e.jsx(ns,{style:{color:"#C850C0"}}),e.jsx(gn,{type:"secondary",style:{fontSize:13},ellipsis:!0,children:h.venue})]}),e.jsx(q,{type:"link",style:{padding:0,height:"auto"},icon:e.jsx(Ci,{}),children:"View Details"})]})},h._id)})}):e.jsx("div",{style:{textAlign:"center",padding:40},children:e.jsx(Ve,{children:"No exhibitions available at the moment. Check back soon!"})}),e.jsx("div",{style:{textAlign:"center",marginTop:40},children:e.jsx(q,{type:"primary",size:"large",onClick:()=>t("/exhibitions"),icon:e.jsx(zo,{}),children:"View All Exhibitions"})})]})}),e.jsx(Ds,{className:"how-it-works",children:e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 24px"},children:[e.jsx(Ps,{level:2,children:"How to Book Stall"}),e.jsx("div",{style:{textAlign:"center",maxWidth:"800px",margin:"0 auto 40px"},children:e.jsx(Ve,{style:{fontSize:"18px",color:"#666",fontWeight:500},children:"Secure your exhibition space in just a few simple steps. Our streamlined booking process makes it easy to showcase your business at premier events."})}),e.jsxs("div",{className:"booking-steps",children:[e.jsx("div",{className:"step-indicator",children:e.jsxs("div",{className:"step-dots",children:[[1,2,3,4,5,6,7].map(h=>e.jsxs("div",{className:"step-dot-container",children:[e.jsx("div",{className:"step-dot",children:h}),e.jsx("div",{className:"step-label",children:`Step ${h}`})]},h)),e.jsx("div",{className:"step-progress-line"})]})}),e.jsxs(ne,{gutter:[24,24],style:{marginTop:40},children:[e.jsx(z,{xs:24,md:12,lg:8,xl:6,children:e.jsxs("div",{className:"step-card",children:[e.jsxs("div",{className:"step-card-header",children:[e.jsx("div",{className:"step-number",children:"1"}),e.jsx("div",{className:"step-icon",children:e.jsx(Ce,{})})]}),e.jsxs("div",{className:"step-card-body",children:[e.jsx(He,{level:5,children:"Register"}),e.jsx(Ve,{children:"The exhibitor must first register on the platform with company details and contact information."})]})]})}),e.jsx(z,{xs:24,md:12,lg:8,xl:6,children:e.jsxs("div",{className:"step-card",children:[e.jsxs("div",{className:"step-card-header",children:[e.jsx("div",{className:"step-number",children:"2"}),e.jsx("div",{className:"step-icon",children:e.jsx(Te,{})})]}),e.jsxs("div",{className:"step-card-body",children:[e.jsx(He,{level:5,children:"Admin Approval"}),e.jsx(Ve,{children:"After registration, the admin will review and approve your account. You'll receive a notification."})]})]})}),e.jsx(z,{xs:24,md:12,lg:8,xl:6,children:e.jsxs("div",{className:"step-card",children:[e.jsxs("div",{className:"step-card-header",children:[e.jsx("div",{className:"step-number",children:"3"}),e.jsx("div",{className:"step-icon",children:e.jsx(lt,{})})]}),e.jsxs("div",{className:"step-card-body",children:[e.jsx(He,{level:5,children:"Login & Book Stall"}),e.jsx(Ve,{children:"Once approved, log in and select a stall from the interactive layout map."})]})]})}),e.jsx(z,{xs:24,md:12,lg:8,xl:6,children:e.jsxs("div",{className:"step-card",children:[e.jsxs("div",{className:"step-card-header",children:[e.jsx("div",{className:"step-number",children:"4"}),e.jsx("div",{className:"step-icon",children:e.jsx(Qe,{})})]}),e.jsxs("div",{className:"step-card-body",children:[e.jsx(He,{level:5,children:"Stall Goes to Reserved"}),e.jsx(Ve,{children:'After booking, the stall status changes to "Reserved" and will be temporarily held for you.'})]})]})}),e.jsx(z,{xs:24,md:12,lg:8,xl:6,children:e.jsxs("div",{className:"step-card",children:[e.jsxs("div",{className:"step-card-header",children:[e.jsx("div",{className:"step-number",children:"5"}),e.jsx("div",{className:"step-icon",children:e.jsx(Te,{})})]}),e.jsxs("div",{className:"step-card-body",children:[e.jsx(He,{level:5,children:"Admin Final Approval"}),e.jsx(Ve,{children:"The admin will review your reservation request and approve it based on availability."})]})]})}),e.jsx(z,{xs:24,md:12,lg:8,xl:6,children:e.jsxs("div",{className:"step-card",children:[e.jsxs("div",{className:"step-card-header",children:[e.jsx("div",{className:"step-number",children:"6"}),e.jsx("div",{className:"step-icon",children:e.jsx(Te,{})})]}),e.jsxs("div",{className:"step-card-body",children:[e.jsx(He,{level:5,children:"Stall Becomes Booked"}),e.jsx(Ve,{children:'After admin approval, the stall status changes to "Booked" and an invoice is generated.'})]})]})}),e.jsx(z,{xs:24,md:12,lg:8,xl:6,children:e.jsxs("div",{className:"step-card",children:[e.jsxs("div",{className:"step-card-header",children:[e.jsx("div",{className:"step-number",children:"7"}),e.jsx("div",{className:"step-icon",children:e.jsx(ir,{})})]}),e.jsxs("div",{className:"step-card-body",children:[e.jsx(He,{level:5,children:"Make Payment in 3 Days"}),e.jsx(Ve,{children:"Complete your payment within 3 days of booking to confirm your stall reservation."})]})]})})]}),e.jsx("style",{children:`
                  .booking-steps {
                    margin-top: 20px;
                  }
                  
                  .step-indicator {
                    margin-bottom: 30px;
                    padding: 0 40px;
                  }
                  
                  .step-dots {
                    display: flex;
                    justify-content: space-between;
                    position: relative;
                    max-width: 800px;
                    margin: 0 auto;
                  }
                  
                  .step-progress-line {
                    position: absolute;
                    top: 25px;
                    left: 50px;
                    right: 50px;
                    height: 3px;
                    background: linear-gradient(90deg, #4158D0, #C850C0);
                    z-index: 0;
                  }
                  
                  .step-dot-container {
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    position: relative;
                    z-index: 1;
                  }
                  
                  .step-dot {
                    width: 50px;
                    height: 50px;
                    border-radius: 50%;
                    background: linear-gradient(135deg, #4158D0, #C850C0);
                    color: white;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-weight: bold;
                    font-size: 20px;
                    margin-bottom: 8px;
                    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
                  }
                  
                  .step-label {
                    font-size: 14px;
                    font-weight: 500;
                    color: #666;
                  }
                  
                  .step-card {
                    background: white;
                    border-radius: 12px;
                    overflow: hidden;
                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
                    height: 100%;
                    transition: all 0.3s ease;
                    display: flex;
                    flex-direction: column;
                    border: 1px solid #f0f0f0;
                  }
                  
                  .step-card:hover {
                    transform: translateY(-5px);
                    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.12);
                  }
                  
                  .step-card-header {
                    background: linear-gradient(135deg, #f6f9fc 0%, #f1f4f9 100%);
                    padding: 16px;
                    display: flex;
                    align-items: center;
                    gap: 16px;
                    border-bottom: 1px solid #f0f0f0;
                  }
                  
                  .step-number {
                    width: 36px;
                    height: 36px;
                    border-radius: 50%;
                    background: linear-gradient(135deg, #4158D0, #C850C0);
                    color: white;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-weight: bold;
                    font-size: 16px;
                  }
                  
                  .step-icon {
                    width: 36px;
                    height: 36px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 20px;
                    color: #4158D0;
                  }
                  
                  .step-card-body {
                    padding: 16px;
                    flex: 1;
                  }
                  
                  .step-card-body h5 {
                    margin-bottom: 8px;
                  }
                  
                  .step-card-body p {
                    margin-bottom: 0;
                    color: #666;
                  }
                  
                  @media (max-width: 768px) {
                    .step-progress-line {
                      display: none;
                    }
                    
                    .step-dots {
                      display: none;
                    }
                  }
                `})]}),e.jsx("div",{style:{textAlign:"center",marginTop:60},children:e.jsx(ki,{type:"primary",size:"large",onClick:b,icon:e.jsx(Ce,{}),children:"Register as Exhibitor"})})]})}),e.jsx(Ds,{children:e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 24px"},children:[e.jsx(Ps,{level:2,children:"Why Choose Us"}),e.jsxs(ne,{gutter:[24,24],children:[e.jsx(z,{xs:24,sm:12,lg:8,children:e.jsxs(gs,{children:[e.jsx(fs,{style:{background:"rgba(65, 88, 208, 0.1)",color:"#4158D0"},children:e.jsx(rs,{})}),e.jsx(He,{level:4,children:"Interactive Layouts"}),e.jsx(Ve,{style:{fontSize:16},children:"Explore detailed exhibition floor plans with interactive maps to find your perfect spot."})]})}),e.jsx(z,{xs:24,sm:12,lg:8,children:e.jsxs(gs,{children:[e.jsx(fs,{style:{background:"rgba(200, 80, 192, 0.1)",color:"#C850C0"},children:e.jsx(lt,{})}),e.jsx(He,{level:4,children:"Real-time Availability"}),e.jsx(Ve,{style:{fontSize:16},children:"See stall availability in real-time and book instantly without any delays or confusion."})]})}),e.jsx(z,{xs:24,sm:12,lg:8,children:e.jsxs(gs,{children:[e.jsx(fs,{style:{background:"rgba(255, 204, 112, 0.1)",color:"#FFCC70"},children:e.jsx(ir,{})}),e.jsx(He,{level:4,children:"Secure Payments"}),e.jsx(Ve,{style:{fontSize:16},children:"Complete your bookings with our secure payment gateway and receive instant confirmation."})]})}),e.jsx(z,{xs:24,sm:12,lg:8,children:e.jsxs(gs,{children:[e.jsx(fs,{style:{background:"rgba(82, 196, 26, 0.1)",color:"#52c41a"},children:e.jsx(On,{})}),e.jsx(He,{level:4,children:"Exhibitor Dashboard"}),e.jsx(Ve,{style:{fontSize:16},children:"Manage all your bookings, payments, and exhibition details through our user-friendly dashboard."})]})}),e.jsx(z,{xs:24,sm:12,lg:8,children:e.jsxs(gs,{children:[e.jsx(fs,{style:{background:"rgba(250, 140, 22, 0.1)",color:"#fa8c16"},children:e.jsx(Et,{})}),e.jsx(He,{level:4,children:"Schedule Management"}),e.jsx(Ve,{style:{fontSize:16},children:"Keep track of important dates, setup times, and exhibition schedules all in one place."})]})}),e.jsx(z,{xs:24,sm:12,lg:8,children:e.jsxs(gs,{children:[e.jsx(fs,{style:{background:"rgba(24, 144, 255, 0.1)",color:"#1890ff"},children:e.jsx(Te,{})}),e.jsx(He,{level:4,children:"Support & Assistance"}),e.jsx(Ve,{style:{fontSize:16},children:"Get expert assistance throughout the booking process and during the exhibition."})]})})]})]})}),e.jsx(Ds,{className:"gray-bg",children:e.jsx("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 24px"},children:e.jsxs(ne,{gutter:[48,48],children:[e.jsxs(z,{xs:24,lg:12,children:[e.jsx(Ps,{level:2,children:"Our Impact"}),e.jsxs(ne,{gutter:[24,24],children:[e.jsx(z,{xs:12,children:e.jsx(fn,{children:e.jsx(ve,{title:"Exhibitions",value:100,suffix:"+",valueStyle:{color:"#4158D0",fontWeight:"bold"}})})}),e.jsx(z,{xs:12,children:e.jsx(fn,{children:e.jsx(ve,{title:"Exhibitors",value:5e3,suffix:"+",valueStyle:{color:"#C850C0",fontWeight:"bold"}})})}),e.jsx(z,{xs:12,children:e.jsx(fn,{children:e.jsx(ve,{title:"Stalls Booked",value:12e3,suffix:"+",valueStyle:{color:"#FFCC70",fontWeight:"bold"}})})}),e.jsx(z,{xs:12,children:e.jsx(fn,{children:e.jsx(ve,{title:"Cities",value:25,suffix:"+",valueStyle:{color:"#52c41a",fontWeight:"bold"}})})})]})]}),e.jsxs(z,{xs:24,lg:12,children:[e.jsx(Ps,{level:2,children:"What Exhibitors Say"}),e.jsxs(Uo,{autoplay:!0,dots:{className:"custom-carousel-dots"},children:[e.jsx("div",{children:e.jsxs(oa,{children:[e.jsxs("div",{style:{display:"flex",gap:16,marginBottom:20},children:[e.jsx(yt,{size:64,icon:e.jsx(Ce,{}),style:{backgroundColor:"#4158D0"}}),e.jsxs("div",{children:[e.jsx(He,{level:5,style:{margin:0},children:"Sarah Johnson"}),e.jsx(gn,{type:"secondary",children:"Tech Innovations Inc."})]})]}),e.jsx(Ve,{style:{fontSize:16},children:'"The booking process was seamless! I could view the layout, select my preferred spot, and complete payment all in one go. Will definitely use again for our next exhibition."'})]})}),e.jsx("div",{children:e.jsxs(oa,{children:[e.jsxs("div",{style:{display:"flex",gap:16,marginBottom:20},children:[e.jsx(yt,{size:64,icon:e.jsx(Ce,{}),style:{backgroundColor:"#C850C0"}}),e.jsxs("div",{children:[e.jsx(He,{level:5,style:{margin:0},children:"Michael Chen"}),e.jsx(gn,{type:"secondary",children:"Global Exhibits Ltd"})]})]}),e.jsx(Ve,{style:{fontSize:16},children:'"As a regular exhibitor, this platform has made my life so much easier. I love how I can see all my bookings and manage everything from one dashboard."'})]})})]})]})]})})}),e.jsx(Ds,{style:{padding:"60px 0"},children:e.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",padding:"40px 24px",background:"linear-gradient(135deg, #4158D0 0%, #C850C0 100%)",borderRadius:"16px",color:"white",textAlign:"center",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.1)"},children:[e.jsx(He,{level:2,style:{color:"white",marginBottom:16},children:"Ready to Showcase Your Business?"}),e.jsx(Ve,{style:{fontSize:"1.2rem",marginBottom:32,color:"rgba(255, 255, 255, 0.9)"},children:"Join thousands of successful exhibitors and book your perfect stall today"}),e.jsxs(X,{size:16,wrap:!0,style:{justifyContent:"center"},children:[e.jsx(q,{size:"large",style:{height:"50px",background:"white",color:"#4158D0",border:"none",borderRadius:"8px",fontWeight:500,paddingLeft:24,paddingRight:24,display:"flex",alignItems:"center"},onClick:()=>t("/exhibitions"),icon:e.jsx(lt,{}),children:"Browse Exhibitions"}),e.jsx(q,{size:"large",style:{height:"50px",background:"rgba(255, 255, 255, 0.2)",color:"white",border:"2px solid white",borderRadius:"8px",fontWeight:500,paddingLeft:24,paddingRight:24,display:"flex",alignItems:"center"},onClick:b,icon:e.jsx(Ce,{}),children:"Register as Exhibitor"})]})]})})]}),e.jsx(Xa,{})]})},{Title:ox,Text:je,Paragraph:lx}=me,{Option:bn}=oe,{TextArea:la,Search:cx}=G,{RangePicker:dx}=Gs,ux=()=>{const t=Me(),{exhibitors:s,loading:n}=ye(_=>_.exhibitor),[i,r]=c.useState(null),[l,a]=c.useState(!1),[f,b]=c.useState(!1),[h,N]=c.useState(!1),[$,y]=c.useState("approved"),[D,k]=c.useState(""),[j,P]=c.useState(!1),[u,x]=c.useState(!1),[I,o]=c.useState(!1),[d,R]=c.useState(""),[S,E]=c.useState([]),[v]=F.useForm(),[g,L]=c.useState([]);g.length>0;const[A,m]=c.useState({total:0,pending:0,approved:0,rejected:0});c.useEffect(()=>{t(Nt())},[t]),c.useEffect(()=>{if(s!=null&&s.length){E(s);const _={total:s.length,pending:s.filter(H=>H.status==="pending").length,approved:s.filter(H=>H.status==="approved").length,rejected:s.filter(H=>H.status==="rejected").length};m(_)}},[s]),c.useEffect(()=>{i&&f&&v.setFieldsValue({companyName:i.companyName,contactPerson:i.contactPerson,email:i.email,phone:i.phone,address:i.address||"",website:i.website||"",description:i.description||"",isActive:i.isActive})},[i,f,v]);const w=_=>{switch(_){case"approved":return e.jsx(le,{color:"success",children:"Approved"});case"pending":return e.jsx(le,{color:"warning",children:"Pending"});case"rejected":return e.jsx(le,{color:"error",children:"Rejected"});default:return e.jsx(le,{children:"Unknown"})}},M=async()=>{var _,H;if(i)try{P(!0),await rt.updateStatus(i._id,$,$==="rejected"?D:void 0),ee.success(`Exhibitor status updated to ${$}`),a(!1),t(Nt())}catch(te){ee.error(((H=(_=te.response)==null?void 0:_.data)==null?void 0:H.message)||"Failed to update exhibitor status")}finally{P(!1)}},T=async _=>{var H,te;if(i)try{x(!0),await rt.updateExhibitor(i._id,_),ee.success("Exhibitor details updated successfully"),b(!1),t(Nt())}catch(ue){ee.error(((te=(H=ue.response)==null?void 0:H.data)==null?void 0:te.message)||"Failed to update exhibitor details")}finally{x(!1)}},p=async _=>{var H,te;try{o(!0),await rt.deleteExhibitor(_),ee.success("Exhibitor deleted successfully"),t(Nt())}catch(ue){ee.error(((te=(H=ue.response)==null?void 0:H.data)==null?void 0:te.message)||"Failed to delete exhibitor")}finally{o(!1)}},C=_=>{if(R(_),!_){E(s);return}const H=_.toLowerCase(),te=s.filter(ue=>ue.companyName.toLowerCase().includes(H)||ue.contactPerson.toLowerCase().includes(H)||ue.email.toLowerCase().includes(H)||ue.phone.toLowerCase().includes(H));E(te)},B=_=>{if(_==="all"){E(s);return}const H=s.filter(te=>te.status===_);E(H)},U=_=>{if(!_||_.length!==2){E(s);return}const H=_[0].startOf("day").toISOString(),te=_[1].endOf("day").toISOString(),ue=s.filter(ke=>{const de=new Date(ke.createdAt).toISOString();return de>=H&&de<=te});E(ue)},Y=()=>{const _=["Company Name","Contact Person","Email","Phone","Status","Active","Registration Date","Address","Website"],H=S.map(ce=>[ce.companyName,ce.contactPerson,ce.email,ce.phone,ce.status,ce.isActive?"Yes":"No",new Date(ce.createdAt).toLocaleDateString(),ce.address||"",ce.website||""]);H.unshift(_);const te=H.map(ce=>ce.map(be=>typeof be=="string"&&(be.includes(",")||be.includes('"')||be.includes(`
`))?`"${be.replace(/"/g,'""')}"`:be).join(",")).join(`
`),ue=new Blob([te],{type:"text/csv;charset=utf-8;"}),ke=URL.createObjectURL(ue),de=document.createElement("a");de.setAttribute("href",ke),de.setAttribute("download",`exhibitors-${new Date().toISOString().split("T")[0]}.csv`),de.style.visibility="hidden",document.body.appendChild(de),de.click(),document.body.removeChild(de),ee.success("Exhibitor data exported successfully")},Q=()=>{fe.confirm({title:"Delete Selected Exhibitors",content:`Are you sure you want to delete ${g.length} exhibitors? This action cannot be undone.`,okText:"Yes",okType:"danger",cancelText:"No",onOk:async()=>{try{o(!0);const _=g.map(H=>rt.deleteExhibitor(H.toString()));await Promise.all(_),ee.success(`${g.length} exhibitors deleted successfully`),L([]),t(Nt())}catch{ee.error("Failed to delete some exhibitors")}finally{o(!1)}}})},K={selectedRowKeys:g,onChange:_=>{L(_)}},V=[{title:"Company",dataIndex:"companyName",key:"companyName",width:220,fixed:"left",sorter:(_,H)=>_.companyName.localeCompare(H.companyName),filterDropdown:({setSelectedKeys:_,selectedKeys:H,confirm:te,clearFilters:ue})=>e.jsxs("div",{style:{padding:8},children:[e.jsx(G,{placeholder:"Search company or contact",value:H[0],onChange:ke=>_(ke.target.value?[ke.target.value]:[]),onPressEnter:()=>te(),style:{width:188,marginBottom:8,display:"block"}}),e.jsxs(X,{children:[e.jsx(q,{type:"primary",onClick:()=>te(),icon:e.jsx(bt,{}),size:"small",style:{width:90},children:"Filter"}),e.jsx(q,{onClick:()=>{ue&&ue(),te()},size:"small",style:{width:90},children:"Reset"})]})]}),filterIcon:_=>e.jsx(bt,{style:{color:_?"#1890ff":void 0}}),onFilter:(_,H)=>{const te=String(_).toLowerCase();return H.companyName.toLowerCase().includes(te)||H.contactPerson.toLowerCase().includes(te)},render:(_,H)=>e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:_}),e.jsxs("div",{style:{fontSize:"12px",color:"#888"},children:["Contact: ",H.contactPerson]})]})},{title:"Contact",dataIndex:"email",key:"email",width:220,render:(_,H)=>e.jsxs("div",{children:[e.jsx("div",{children:_}),e.jsx("div",{style:{fontSize:"12px"},children:H.phone})]})},{title:"Status",dataIndex:"status",key:"status",width:120,filters:[{text:"Pending",value:"pending"},{text:"Approved",value:"approved"},{text:"Rejected",value:"rejected"}],onFilter:(_,H)=>H.status===_,render:_=>w(_)},{title:"Active",dataIndex:"isActive",key:"isActive",width:100,filters:[{text:"Active",value:!0},{text:"Inactive",value:!1}],onFilter:(_,H)=>H.isActive===_,render:_=>e.jsx(le,{color:_?"green":"red",children:_?"Active":"Inactive"})},{title:"Registration Date",dataIndex:"createdAt",key:"createdAt",width:160,sorter:(_,H)=>new Date(_.createdAt).getTime()-new Date(H.createdAt).getTime(),render:_=>e.jsx(Ye,{title:new Date(_).toLocaleString(),children:new Date(_).toLocaleDateString()})},{title:"Address",dataIndex:"address",key:"address",width:200,ellipsis:!0},{title:"Website",dataIndex:"website",key:"website",width:180,render:_=>_?e.jsx("a",{href:_,target:"_blank",rel:"noopener noreferrer",children:_.replace(/^https?:\/\/(www\.)?/i,"")}):"-"},{title:"Actions",key:"actions",fixed:"right",width:220,render:(_,H)=>e.jsxs(X,{children:[e.jsx(Ye,{title:"View Details",children:e.jsx(q,{icon:e.jsx(Mt,{}),onClick:()=>{r(H),N(!0)}})}),e.jsx(q,{type:"primary",onClick:()=>{r(H),y(H.status),k(H.rejectionReason||""),a(!0)},children:"Update Status"}),e.jsx(_t,{overlay:e.jsxs(at,{children:[e.jsx(at.Item,{icon:e.jsx(Ss,{}),onClick:()=>{r(H),b(!0)},children:"Edit"},"edit"),e.jsx(at.Item,{icon:e.jsx(pt,{}),danger:!0,onClick:te=>{te.domEvent.stopPropagation(),fe.confirm({title:"Delete Exhibitor",content:"Are you sure you want to delete this exhibitor? This action cannot be undone.",okText:"Yes",okType:"danger",cancelText:"No",onOk:()=>p(H._id)})},children:"Delete"},"delete")]}),trigger:["click"],children:e.jsx(q,{icon:e.jsx(Vn,{})})})]})}];return e.jsxs("div",{className:"dashboard-container",children:[e.jsx("div",{style:{marginBottom:"24px"},children:e.jsxs(ne,{gutter:[24,24],align:"middle",children:[e.jsx(z,{flex:"auto",children:e.jsxs(X,{direction:"vertical",size:4,children:[e.jsx(ox,{level:4,style:{margin:0},children:"Exhibitors"}),e.jsx(je,{type:"secondary",children:"Manage exhibitors and their information"})]})}),e.jsx(z,{children:e.jsx(q,{type:"primary",icon:e.jsx(ws,{}),onClick:()=>b(!0),size:"large",children:"Add Exhibitor"})})]})}),e.jsxs(ne,{gutter:[16,24],style:{marginBottom:"24px"},children:[e.jsx(z,{xs:24,sm:12,md:6,children:e.jsx(W,{children:e.jsx(ve,{title:"Total Exhibitors",value:A.total,prefix:e.jsx(Ce,{})})})}),e.jsx(z,{xs:24,sm:12,md:6,children:e.jsx(W,{children:e.jsx(ve,{title:"Pending",value:A.pending,prefix:e.jsx(Qe,{style:{color:"#faad14"}})})})}),e.jsx(z,{xs:24,sm:12,md:6,children:e.jsx(W,{children:e.jsx(ve,{title:"Approved",value:A.approved,prefix:e.jsx(Te,{style:{color:"#52c41a"}})})})}),e.jsx(z,{xs:24,sm:12,md:6,children:e.jsx(W,{children:e.jsx(ve,{title:"Rejected",value:A.rejected,prefix:e.jsx(ts,{style:{color:"#ff4d4f"}})})})})]}),e.jsx(W,{className:"info-card",style:{marginBottom:"24px"},children:e.jsxs(X,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxs(ne,{gutter:[16,16],align:"middle",children:[e.jsx(z,{xs:24,sm:8,md:6,lg:4,children:e.jsx(cx,{placeholder:"Search exhibitors",allowClear:!0,onSearch:C,style:{width:"100%"}})}),e.jsx(z,{xs:24,sm:8,md:6,lg:4,children:e.jsxs(oe,{placeholder:"Filter by status",style:{width:"100%"},onChange:B,allowClear:!0,children:[e.jsx(bn,{value:"all",children:"All Status"}),e.jsx(bn,{value:"pending",children:"Pending"}),e.jsx(bn,{value:"approved",children:"Approved"}),e.jsx(bn,{value:"rejected",children:"Rejected"})]})}),e.jsx(z,{xs:24,sm:8,md:6,lg:6,children:e.jsx(dx,{style:{width:"100%"},onChange:U})})]}),g.length>0&&e.jsx(ne,{children:e.jsxs(X,{children:[e.jsxs(je,{children:["Selected ",g.length," items"]}),e.jsx(q,{danger:!0,onClick:Q,children:"Delete Selected"}),e.jsx(q,{type:"primary",onClick:Y,children:"Export Selected"})]})})]})}),e.jsx(W,{className:"info-card",children:e.jsx($e,{rowSelection:K,dataSource:S,columns:V,rowKey:"_id",loading:n,pagination:{pageSize:10,showSizeChanger:!0,showTotal:(_,H)=>`${H[0]}-${H[1]} of ${_} items`},scroll:{x:1500}})}),e.jsx(fe,{title:"Exhibitor Details",open:h,onCancel:()=>N(!1),footer:[e.jsx(q,{onClick:()=>N(!1),children:"Close"},"close")],width:600,children:i&&e.jsx("div",{children:e.jsxs(ne,{gutter:[16,16],children:[e.jsx(z,{span:24,children:e.jsx(W,{title:"Company Information",children:e.jsxs(ne,{gutter:[16,8],children:[e.jsx(z,{span:12,children:e.jsx(je,{strong:!0,children:"Company Name:"})}),e.jsx(z,{span:12,children:e.jsx(je,{children:i.companyName})}),e.jsx(z,{span:12,children:e.jsx(je,{strong:!0,children:"Contact Person:"})}),e.jsx(z,{span:12,children:e.jsx(je,{children:i.contactPerson})}),e.jsx(z,{span:12,children:e.jsx(je,{strong:!0,children:"Email:"})}),e.jsx(z,{span:12,children:e.jsx(je,{children:i.email})}),e.jsx(z,{span:12,children:e.jsx(je,{strong:!0,children:"Phone:"})}),e.jsx(z,{span:12,children:e.jsx(je,{children:i.phone})}),e.jsx(z,{span:12,children:e.jsx(je,{strong:!0,children:"Address:"})}),e.jsx(z,{span:12,children:e.jsx(je,{children:i.address||"Not provided"})}),e.jsx(z,{span:12,children:e.jsx(je,{strong:!0,children:"Status:"})}),e.jsx(z,{span:12,children:w(i.status)}),e.jsx(z,{span:12,children:e.jsx(je,{strong:!0,children:"Active:"})}),e.jsx(z,{span:12,children:e.jsx(Xe,{status:i.isActive?"success":"error",text:i.isActive?"Yes":"No"})}),e.jsx(z,{span:12,children:e.jsx(je,{strong:!0,children:"Registration Date:"})}),e.jsx(z,{span:12,children:e.jsx(je,{children:new Date(i.createdAt).toLocaleString()})})]})})}),e.jsx(z,{span:24,children:e.jsxs(W,{title:"Additional Information",children:[e.jsxs(ne,{gutter:[16,8],children:[e.jsx(z,{span:12,children:e.jsx(je,{strong:!0,children:"Address:"})}),e.jsx(z,{span:12,children:e.jsx(je,{children:i.address||"Not provided"})}),e.jsx(z,{span:12,children:e.jsx(je,{strong:!0,children:"Website:"})}),e.jsx(z,{span:12,children:i.website?e.jsx("a",{href:i.website,target:"_blank",rel:"noopener noreferrer",children:i.website}):"Not provided"}),i.status==="rejected"&&e.jsxs(e.Fragment,{children:[e.jsx(z,{span:12,children:e.jsx(je,{strong:!0,children:"Rejection Reason:"})}),e.jsx(z,{span:12,children:e.jsx(je,{type:"danger",children:i.rejectionReason||"No reason provided"})})]})]}),i.description&&e.jsxs(e.Fragment,{children:[e.jsx(Fe,{}),e.jsx(je,{strong:!0,children:"Description:"}),e.jsx(lx,{style:{marginTop:8},children:i.description})]})]})})]})})}),e.jsx(fe,{title:"Update Exhibitor Status",open:l,onCancel:()=>a(!1),footer:null,width:600,children:i&&e.jsxs("div",{children:[e.jsx(W,{title:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(Ce,{style:{fontSize:"18px"}}),e.jsx("span",{children:"Exhibitor Information"})]}),style:{marginBottom:16},bordered:!1,size:"small",children:e.jsxs(ne,{gutter:[16,8],children:[e.jsx(z,{span:8,children:e.jsx(je,{strong:!0,children:"Company:"})}),e.jsx(z,{span:16,children:e.jsx(je,{children:i.companyName})}),e.jsx(z,{span:8,children:e.jsx(je,{strong:!0,children:"Contact Person:"})}),e.jsx(z,{span:16,children:e.jsx(je,{children:i.contactPerson})}),e.jsx(z,{span:8,children:e.jsx(je,{strong:!0,children:"Email:"})}),e.jsx(z,{span:16,children:e.jsx(je,{children:i.email})}),e.jsx(z,{span:8,children:e.jsx(je,{strong:!0,children:"Address:"})}),e.jsx(z,{span:16,children:e.jsx(je,{children:i.address||"Not provided"})}),e.jsx(z,{span:8,children:e.jsx(je,{strong:!0,children:"Current Status:"})}),e.jsx(z,{span:16,children:w(i.status)})]})}),e.jsxs(W,{title:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(ss,{style:{fontSize:"18px"}}),e.jsx("span",{children:"Update Status"})]}),bordered:!1,size:"small",children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx(je,{strong:!0,children:"Select New Status:"}),e.jsx("div",{style:{marginTop:"16px"},children:e.jsxs(It.Group,{value:$,onChange:_=>y(_.target.value),buttonStyle:"solid",children:[e.jsx(It.Button,{value:"pending",children:e.jsxs(X,{children:[e.jsx(Qe,{style:{color:"#faad14"}}),"Pending"]})}),e.jsx(It.Button,{value:"approved",children:e.jsxs(X,{children:[e.jsx(Te,{style:{color:"#52c41a"}}),"Approved"]})}),e.jsx(It.Button,{value:"rejected",children:e.jsxs(X,{children:[e.jsx(ts,{style:{color:"#f5222d"}}),"Rejected"]})})]})})]}),$==="rejected"&&e.jsx("div",{children:e.jsx(F.Item,{label:e.jsx(je,{strong:!0,children:"Rejection Reason:"}),required:$==="rejected",rules:[{required:!0,message:"Please provide a reason for rejection"}],help:"This will be visible to the exhibitor",children:e.jsx(la,{rows:4,value:D,onChange:_=>k(_.target.value),placeholder:"Provide a reason for rejection",style:{marginTop:8}})})}),$==="approved"&&e.jsx(Ge,{message:"Approval Confirmation",description:"By approving this exhibitor, they will be able to log in and manage their exhibition space.",type:"success",showIcon:!0,style:{marginTop:8}}),$==="pending"&&e.jsx(Ge,{message:"Return to Pending",description:"This exhibitor will be moved back to pending status and will not be able to log in.",type:"warning",showIcon:!0,style:{marginTop:8}})]}),e.jsxs("div",{style:{marginTop:24,display:"flex",justifyContent:"flex-end",gap:"8px"},children:[e.jsx(q,{onClick:()=>a(!1),children:"Cancel"}),e.jsx(q,{type:"primary",onClick:M,loading:j,disabled:$==="rejected"&&!D.trim(),children:"Update Status"})]})]})]})}),e.jsx(fe,{title:"Edit Exhibitor Details",open:f,onCancel:()=>b(!1),footer:null,width:600,children:e.jsxs(F,{form:v,layout:"vertical",onFinish:T,children:[e.jsx(F.Item,{name:"companyName",label:"Company Name",rules:[{required:!0,message:"Please enter company name"}],children:e.jsx(G,{})}),e.jsx(F.Item,{name:"contactPerson",label:"Contact Person",rules:[{required:!0,message:"Please enter contact person"}],children:e.jsx(G,{})}),e.jsx(F.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please enter email"},{type:"email",message:"Please enter a valid email"}],children:e.jsx(G,{})}),e.jsx(F.Item,{name:"phone",label:"Phone",rules:[{required:!0,message:"Please enter phone number"}],children:e.jsx(G,{})}),e.jsx(F.Item,{name:"address",label:"Address",children:e.jsx(G,{})}),e.jsx(F.Item,{name:"website",label:"Website",children:e.jsx(G,{})}),e.jsx(F.Item,{name:"description",label:"Description",children:e.jsx(la,{rows:4})}),e.jsx(F.Item,{name:"isActive",label:"Active Status",valuePropName:"checked",children:e.jsx(ot,{checkedChildren:"Active",unCheckedChildren:"Inactive"})}),e.jsx(F.Item,{children:e.jsxs(X,{children:[e.jsx(q,{type:"primary",htmlType:"submit",loading:u,children:"Save Changes"}),e.jsx(q,{onClick:()=>b(!1),children:"Cancel"})]})})]})})]})},qe=({children:t})=>ye(n=>n.auth.isAuthenticated)?t:e.jsx(Hn,{to:"/login"}),bs=({children:t})=>ye(n=>n.exhibitorAuth.isAuthenticated)?t:e.jsx(Hn,{to:"/"});function hx(){return e.jsx(jt,{children:e.jsx(Zs,{children:e.jsx(Xo,{children:e.jsxs(Zo,{children:[e.jsx(we,{path:"/",element:e.jsx(ax,{})}),e.jsx(we,{path:"/login",element:e.jsx(Sc,{})}),e.jsx(we,{path:"/exhibitions",element:e.jsx(wh,{})}),e.jsx(we,{path:"/exhibitions/:id",element:e.jsx(oh,{})}),e.jsx(we,{path:"/exhibitions/:id/layout",element:e.jsx(ih,{})}),e.jsx(we,{path:"/exhibitor/dashboard",element:e.jsx(bs,{children:e.jsx(os,{children:e.jsx(Ec,{})})})}),e.jsx(we,{path:"/exhibitor/profile",element:e.jsx(bs,{children:e.jsx(os,{children:e.jsx(Fc,{})})})}),e.jsx(we,{path:"/exhibitor/bookings",element:e.jsx(bs,{children:e.jsx(os,{children:e.jsx(Dc,{})})})}),e.jsx(we,{path:"/exhibitor/bookings/:id",element:e.jsx(bs,{children:e.jsx(os,{children:e.jsx(Rc,{})})})}),e.jsx(we,{path:"/exhibitor/support",element:e.jsx(bs,{children:e.jsx(os,{children:e.jsx("div",{children:"Help & Support"})})})}),e.jsx(we,{path:"/exhibitor/invoice/:id",element:e.jsx(bs,{children:e.jsx(os,{children:e.jsx(Ad,{})})})}),e.jsx(we,{path:"/dashboard",element:e.jsx(qe,{children:e.jsx(Ue,{children:e.jsx(Cc,{})})})}),e.jsx(we,{path:"/exhibition",element:e.jsx(qe,{children:e.jsx(Ue,{children:e.jsx(iu,{})})})}),e.jsx(we,{path:"/exhibition/create",element:e.jsx(qe,{children:e.jsx(Ue,{children:e.jsx(du,{})})})}),e.jsx(we,{path:"/exhibition/:id",element:e.jsx(qe,{children:e.jsx(Ue,{children:e.jsx(uu,{})})})}),e.jsx(we,{path:"/exhibition/:id/space",element:e.jsx(qe,{children:e.jsx(Ue,{children:e.jsx(Nu,{})})})}),e.jsx(we,{path:"/exhibition/:id/layout",element:e.jsx(qe,{children:e.jsx(Ue,{children:e.jsx(Au,{})})})}),e.jsx(we,{path:"/exhibition/:id/halls",element:e.jsx(qe,{children:e.jsx(Ue,{children:e.jsx(Pu,{})})})}),e.jsx(we,{path:"/exhibition/:id/stalls",element:e.jsx(qe,{children:e.jsx(Ue,{children:e.jsx(kh,{})})})}),e.jsx(we,{path:"/exhibition/:id/fixtures",element:e.jsx(qe,{children:e.jsx(Ue,{children:e.jsx(Nh,{})})})}),e.jsx(we,{path:"/exhibition/:id/edit",element:e.jsx(qe,{children:e.jsx(Ue,{children:e.jsx(hu,{})})})}),e.jsx(we,{path:"/stall/list",element:e.jsx(qe,{children:e.jsx(Ue,{children:e.jsx(Th,{})})})}),e.jsx(we,{path:"/stall-types",element:e.jsx(qe,{children:e.jsx(Ue,{children:e.jsx($h,{})})})}),e.jsx(we,{path:"/bookings",element:e.jsx(qe,{children:e.jsx(Ue,{children:e.jsx(Hh,{})})})}),e.jsx(we,{path:"/bookings/create",element:e.jsx(qe,{children:e.jsx(Ue,{children:e.jsx(Kh,{})})})}),e.jsx(we,{path:"/invoice/:id",element:e.jsx(qe,{children:e.jsx(Ue,{children:e.jsx(Xh,{})})})}),e.jsx(we,{path:"/index",element:e.jsx(qe,{children:e.jsx(Ue,{children:e.jsx(Gd,{})})})}),e.jsx(we,{path:"/settings",element:e.jsx(qe,{children:e.jsx(Ue,{children:e.jsx(Dd,{})})})}),e.jsx(we,{path:"/roles",element:e.jsx(qe,{children:e.jsx(Ue,{children:e.jsx($d,{})})})}),e.jsx(we,{path:"/notifications",element:e.jsx(qe,{children:e.jsx(Ue,{children:e.jsx(Jd,{})})})}),e.jsx(we,{path:"/exhibitors",element:e.jsx(qe,{children:e.jsx(Ue,{children:e.jsx(ux,{})})})}),e.jsx(we,{path:"*",element:e.jsx(Hn,{to:"/",replace:!0})})]})})})})}const Ii=Ki({reducerPath:"bookingApi",baseQuery:Wi({baseUrl:"/api"}),endpoints:t=>({getBookings:t.query({query:()=>"/bookings"}),getBooking:t.query({query:s=>`/bookings/${s}`}),createBooking:t.mutation({query:s=>({url:"/bookings",method:"POST",body:s})}),updateBookingStatus:t.mutation({query:({id:s,status:n})=>({url:`/bookings/${s}/status`,method:"PATCH",body:{status:n}})})})}),xx=Jo({reducer:{auth:pl,exhibitorAuth:Ml,exhibition:tu,booking:Mh,exhibitor:Qh,settings:El,[Ii.reducerPath]:Ii.reducer,[Tn.reducerPath]:Tn.reducer,[vn.reducerPath]:vn.reducer},middleware:t=>t().concat(Ii.middleware).concat(Tn.middleware).concat(vn.middleware)}),px={token:{colorPrimary:"#7C3AED",borderRadius:8,colorBgContainer:"#FFFFFF",colorBgLayout:"#F9FAFB",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif"},components:{Layout:{siderBg:"#FFFFFF",headerBg:"#FFFFFF"},Menu:{itemBg:"transparent",itemSelectedBg:"#F3F4F6",itemHoverBg:"#F3F4F6",itemSelectedColor:"#7C3AED",itemColor:"#6B7280"},Card:{boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)"},Button:{borderRadius:8,primaryShadow:"0 1px 2px 0 rgb(124 58 237 / 0.05)"},Table:{borderRadius:8,headerBg:"#F9FAFB"}}};Ni.createRoot(document.getElementById("root")).render(e.jsx(Re.StrictMode,{children:e.jsx(el,{store:xx,children:e.jsx(qo,{theme:px,children:e.jsx(jt,{children:e.jsx(hx,{})})})})}));
