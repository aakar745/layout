import{j as e,d as ue,g as je,h as Ie,i as Re,k as H,l as X,n as Ee}from"./index-DoSueJxk.js";import{l as ce,r as f,k as T}from"./vendor-react-dkbxt9Jf.js";import{ag as ne,A as Q,f as p,T as ie,b as z,D as ze,am as _,S as l,Y as de,K as c,a1 as b,$ as B,a0 as v,J as U,z as pe,P as ee,V as oe,Q as fe,an as Ue,ab as V,ao as M,G as se,a as D,I as ge,ac as ye,ap as $e,x as te,c as E,aj as be,i as ve,aq as le,O as ke,ar as xe,as as _e,n as we,ai as Le,B as he,h as Te,at as Pe,R as Ne,al as Fe}from"./vendor-antd-mFVHvrVJ.js";import{u as De}from"./reduxHooks-Be1Cl4uN.js";import"./vendor-utils-ngrFHoWO.js";import"./vendor-styling-CQa69cNz.js";const{Text:me}=ie,Me=({visible:m,user:t,onClose:d})=>{if(!t)return null;const o=r=>typeof r=="string"?r:r&&typeof r=="object"&&r.name?r.name:"Unknown",x=r=>o(r.role).toLowerCase().includes("admin");return e.jsxs(ne,{title:"User Details",open:m,onCancel:d,footer:null,width:600,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:20},children:[e.jsx(Q,{size:64,icon:e.jsx(p,{}),style:{backgroundColor:"#1677ff"}}),e.jsxs("div",{style:{marginLeft:20},children:[e.jsx(me,{style:{fontSize:20,fontWeight:"bold"},children:t.name||t.username}),e.jsxs("div",{children:[e.jsx(z,{color:t.isActive?"success":"default",children:t.isActive?"Active":"Inactive"}),e.jsx(z,{color:"blue",children:o(t.role)})]})]})]}),e.jsx(ze,{}),e.jsxs(_,{bordered:!0,column:1,children:[e.jsx(_.Item,{label:"Username",children:t.username}),e.jsx(_.Item,{label:"Email",children:t.email}),e.jsx(_.Item,{label:"Role",children:o(t.role)}),e.jsx(_.Item,{label:"Assigned Exhibitions",children:x(t)?e.jsxs("div",{style:{padding:"6px 10px",backgroundColor:"#f6ffed",border:"1px solid #b7eb8f",borderRadius:"4px",color:"#52c41a",fontSize:"14px"},children:["âœ… ",e.jsx("strong",{children:"Admin - Access to all exhibitions"})]}):t.assignedExhibitions&&t.assignedExhibitions.length>0?e.jsx(l,{wrap:!0,children:t.assignedExhibitions.map((r,u)=>{const S=typeof r=="string"?`Exhibition ${r.slice(-4)}...`:r?.name?`${r.name}`:`Exhibition ${(r?._id||r).toString().slice(-4)}...`;return e.jsx(z,{color:"blue",children:S},u)})}):e.jsx(me,{type:"secondary",children:"No exhibitions assigned"})}),e.jsx(_.Item,{label:"Status",children:e.jsx(z,{color:t.isActive?"success":"default",children:t.isActive?"Active":"Inactive"})}),e.jsx(_.Item,{label:"Created At",children:new Date(t.createdAt).toLocaleString()}),e.jsx(_.Item,{label:"Updated At",children:new Date(t.updatedAt).toLocaleString()})]})]})},{Option:K}=V,{Text:Y,Title:Be}=ie,Ve=({visible:m,user:t,onClose:d,onSuccess:o})=>{const{message:x}=de.useApp(),[r]=c.useForm(),u=ce(),[S,I]=f.useState(""),{roles:w,loading:q}=T(n=>n.role),{exhibitions:O,loading:P}=T(n=>n.exhibition),{loading:$}=T(n=>n.user),R=n=>w.find(y=>y._id===n)?.name?.toLowerCase().includes("admin")||!1;f.useEffect(()=>{if(m&&t){const n=t.assignedExhibitions?.map(y=>typeof y=="string"?y:y._id)||[],h=typeof t.role=="object"?t.role._id:t.role;I(h),r.setFieldsValue({username:t.username,name:t.name||"",email:t.email,role:h,isActive:t.isActive,assignedExhibitions:n})}},[m,t,r,w]),f.useEffect(()=>{m&&(u(ue()),u(je()))},[m,u]);const W=n=>{I(n),R(n)&&r.setFieldsValue({assignedExhibitions:[]})},N=async()=>{if(t)try{const n=await r.validateFields(),h={username:n.username,name:n.name,email:n.email,role:n.role,isActive:n.isActive,assignedExhibitions:R(n.role)?[]:n.assignedExhibitions||[]};n.password&&n.password.trim()!==""&&(h.password=n.password),u(Ie({id:t._id,userData:h})).unwrap().then(()=>{x.success("User updated successfully"),o(),d()}).catch(y=>{x.error(`Failed to update user: ${y}`)})}catch(n){console.error("Validation error:",n)}},a=n=>typeof n=="string"?n:n&&typeof n=="object"&&n.name?n.name:"Unknown",j=n=>{const h=w.find(Z=>Z._id===n);if(!h)return null;const y=h.name.toLowerCase().includes("admin"),C=h.name.toLowerCase().includes("manager");return{...h,isAdmin:y,isManager:C,icon:y?e.jsx(M,{}):C?e.jsx(se,{}):e.jsx(p,{}),color:y?"#722ed1":C?"#1890ff":"#52c41a"}},g=t?j(typeof t.role=="object"?t.role._id:t.role):null,k=c.useWatch([],r),F=k?.isActive!==void 0?k.isActive:t?.isActive;return t?e.jsx(ne,{title:e.jsxs(l,{children:[e.jsx(Q,{icon:e.jsx(be,{}),style:{backgroundColor:"#52c41a",color:"white"},size:"small"}),e.jsx("span",{style:{fontSize:"16px",fontWeight:600},children:"Edit User"})]}),open:m,onCancel:d,width:700,footer:e.jsxs("div",{style:{textAlign:"right",display:"flex",justifyContent:"flex-end",gap:"8px",padding:"16px 24px"},children:[e.jsx(E,{onClick:d,size:"large",children:"Cancel"},"cancel"),e.jsx(E,{type:"primary",loading:$,onClick:N,size:"large",icon:e.jsx(te,{}),children:"Update User"},"submit")]}),children:e.jsxs("div",{style:{padding:"24px"},children:[e.jsx(b,{style:{marginBottom:"24px",background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)",border:"1px solid #bae6fd"},children:e.jsxs(B,{align:"middle",gutter:16,children:[e.jsx(v,{children:e.jsx(Q,{size:64,icon:e.jsx(p,{}),style:{backgroundColor:"#0ea5e9"}})}),e.jsx(v,{flex:"auto",children:e.jsxs(l,{direction:"vertical",size:4,children:[e.jsx(Be,{level:4,style:{margin:0,color:"#0c4a6e"},children:t.name||t.username}),e.jsx(Y,{type:"secondary",children:t.email}),e.jsxs(l,{children:[e.jsx(z,{color:g?.color,icon:g?.icon,style:{borderRadius:"12px"},children:a(t.role)}),e.jsx(z,{color:F?"success":"default",style:{borderRadius:"12px"},children:F?"Active":"Inactive"})]})]})})]})}),e.jsxs(c,{form:r,layout:"vertical",size:"large",children:[e.jsxs(b,{title:e.jsxs(l,{children:[e.jsx(p,{style:{color:"#1890ff"}}),e.jsx("span",{children:"Basic Information"})]}),style:{marginBottom:"24px"},children:[e.jsxs(B,{gutter:16,children:[e.jsx(v,{span:12,children:e.jsx(c.Item,{name:"username",label:"Username",rules:[{required:!0,message:"Please enter a username"},{min:3,message:"Username must be at least 3 characters"}],children:e.jsx(U,{prefix:e.jsx(p,{style:{color:"#bfbfbf"}}),placeholder:"Enter username"})})}),e.jsx(v,{span:12,children:e.jsx(c.Item,{name:"name",label:"Full Name",rules:[{required:!0,message:"Please enter the full name"}],children:e.jsx(U,{prefix:e.jsx(p,{style:{color:"#bfbfbf"}}),placeholder:"Enter full name"})})})]}),e.jsx(c.Item,{name:"email",label:"Email Address",rules:[{required:!0,message:"Please enter email address"},{type:"email",message:"Please enter a valid email address"}],children:e.jsx(U,{prefix:e.jsx(pe,{style:{color:"#bfbfbf"}}),placeholder:"Enter email address"})})]}),e.jsxs(b,{title:e.jsxs(l,{children:[e.jsx(Ue,{style:{color:"#fa8c16"}}),e.jsx("span",{children:"Password Management"})]}),style:{marginBottom:"24px"},children:[e.jsx(ee,{type:"info",icon:e.jsx(oe,{}),message:"Password Change",description:"Leave the password field empty to keep the current password unchanged.",showIcon:!0,style:{marginBottom:"16px",borderRadius:"8px"}}),e.jsx(c.Item,{name:"password",label:"New Password (Optional)",rules:[{min:6,message:"Password must be at least 6 characters"}],children:e.jsx(U.Password,{prefix:e.jsx(fe,{style:{color:"#bfbfbf"}}),placeholder:"Enter new password (leave blank to keep current)"})})]}),e.jsxs(b,{title:e.jsxs(l,{children:[e.jsx(ge,{style:{color:"#722ed1"}}),e.jsx("span",{children:"Role & Permissions"})]}),style:{marginBottom:"24px"},children:[e.jsx(c.Item,{name:"role",label:"Select Role",rules:[{required:!0,message:"Please select a role"}],children:e.jsx(V,{placeholder:"Choose a role for this user",loading:q,value:S,onChange:W,children:w.length>0?w.map(n=>{const h=j(n._id);return e.jsx(K,{value:n._id,children:e.jsxs(l,{children:[e.jsx("span",{style:{color:h?.color},children:h?.icon}),e.jsx("span",{children:n.name})]})},n._id)}):e.jsxs(e.Fragment,{children:[e.jsx(K,{value:"admin",children:e.jsxs(l,{children:[e.jsx(M,{style:{color:"#722ed1"}}),e.jsx("span",{children:"Admin"})]})}),e.jsx(K,{value:"manager",children:e.jsxs(l,{children:[e.jsx(se,{style:{color:"#1890ff"}}),e.jsx("span",{children:"Manager"})]})}),e.jsx(K,{value:"agent",children:e.jsxs(l,{children:[e.jsx(p,{style:{color:"#52c41a"}}),e.jsx("span",{children:"Agent"})]})})]})})}),!R(S)&&e.jsx(c.Item,{name:"assignedExhibitions",label:e.jsxs(l,{children:[e.jsx("span",{children:"Assigned Exhibitions"}),e.jsx(D,{title:"Select exhibitions this user can manage. If none selected, user won't have access to any exhibition data.",children:e.jsx(oe,{style:{color:"#bfbfbf"}})})]}),children:e.jsx(V,{mode:"multiple",placeholder:"Select exhibitions to assign to this user",loading:P,allowClear:!0,optionLabelProp:"label",children:O.map(n=>e.jsx(K,{value:n._id,label:n.name,children:e.jsxs(l,{direction:"vertical",size:0,children:[e.jsx(Y,{strong:!0,children:n.name}),e.jsx(Y,{type:"secondary",style:{fontSize:"12px"},children:n.venue})]})},n._id))})}),R(S)&&e.jsx(ee,{type:"success",icon:e.jsx(M,{}),message:"Administrator Access",description:e.jsxs(l,{direction:"vertical",size:4,children:[e.jsx(Y,{children:"This user will have access to all exhibitions in the system."}),e.jsx(Y,{type:"secondary",style:{fontSize:"12px"},children:"No specific exhibition assignment is required for administrators."})]}),showIcon:!0,style:{borderRadius:"8px"}})]}),e.jsxs(b,{title:e.jsxs(l,{children:[e.jsx(te,{style:{color:"#52c41a"}}),e.jsx("span",{children:"Account Status"})]}),children:[e.jsx(c.Item,{name:"isActive",label:"Account Status",valuePropName:"checked",children:e.jsx(ye,{checkedChildren:"Active",unCheckedChildren:"Inactive",size:"default"})}),e.jsx(ee,{type:"warning",icon:e.jsx($e,{}),message:"Important",description:"Deactivating a user will immediately log them out and prevent them from accessing the system.",showIcon:!0,style:{borderRadius:"8px",marginTop:"8px"}})]})]})]})}):null},{Option:G}=V,{Text:J}=ie,qe=({visible:m,onClose:t,onSuccess:d})=>{const{message:o}=de.useApp(),[x]=c.useForm(),r=ce(),[u,S]=f.useState(""),{roles:I,loading:w}=T(a=>a.role),{exhibitions:q,loading:O}=T(a=>a.exhibition),{loading:P}=T(a=>a.user),$=a=>I.find(g=>g._id===a)?.name?.toLowerCase().includes("admin")||!1,R=a=>{const j=I.find(F=>F._id===a);if(!j)return null;const g=j.name.toLowerCase().includes("admin"),k=j.name.toLowerCase().includes("manager");return{...j,isAdmin:g,isManager:k,icon:g?e.jsx(M,{}):k?e.jsx(se,{}):e.jsx(p,{}),color:g?"#722ed1":k?"#1890ff":"#52c41a"}};f.useEffect(()=>{m&&(r(ue()),r(je()))},[m,r]),f.useEffect(()=>{m&&(x.resetFields(),S(""))},[m,x]);const W=a=>{S(a),$(a)&&x.setFieldsValue({assignedExhibitions:[]})},N=async()=>{try{const a=await x.validateFields(),j={username:a.username,name:a.name,email:a.email,password:a.password,role:a.role,isActive:a.isActive,assignedExhibitions:$(a.role)?[]:a.assignedExhibitions||[]};r(Re(j)).unwrap().then(g=>{o.success("User created successfully"),x.resetFields(),d(),t()}).catch(g=>{o.error(`Failed to create user: ${g}`)})}catch(a){console.error("Validation error:",a)}};return e.jsx(ne,{title:e.jsxs(l,{children:[e.jsx(Q,{icon:e.jsx(ve,{}),style:{backgroundColor:"#1890ff",color:"white"},size:"small"}),e.jsx("span",{style:{fontSize:"16px",fontWeight:600},children:"Create New User"})]}),open:m,onCancel:t,width:700,footer:e.jsxs("div",{style:{textAlign:"right",display:"flex",justifyContent:"flex-end",gap:"8px",padding:"16px 24px"},children:[e.jsx(E,{onClick:t,size:"large",children:"Cancel"},"cancel"),e.jsx(E,{type:"primary",loading:P,onClick:N,size:"large",icon:e.jsx(te,{}),children:"Create User"},"submit")]}),children:e.jsx("div",{style:{padding:"24px"},children:e.jsxs(c,{form:x,layout:"vertical",requiredMark:!1,size:"large",children:[e.jsxs(b,{title:e.jsxs(l,{children:[e.jsx(p,{style:{color:"#1890ff"}}),e.jsx("span",{children:"Basic Information"})]}),style:{marginBottom:"24px"},children:[e.jsxs(B,{gutter:16,children:[e.jsx(v,{span:12,children:e.jsx(c.Item,{name:"username",label:"Username",rules:[{required:!0,message:"Please enter a username"},{min:3,message:"Username must be at least 3 characters"},{pattern:/^[a-zA-Z0-9_]+$/,message:"Username can only contain letters, numbers, and underscores"}],children:e.jsx(U,{prefix:e.jsx(p,{style:{color:"#bfbfbf"}}),placeholder:"Enter username"})})}),e.jsx(v,{span:12,children:e.jsx(c.Item,{name:"name",label:"Full Name",rules:[{required:!0,message:"Please enter the full name"}],children:e.jsx(U,{prefix:e.jsx(p,{style:{color:"#bfbfbf"}}),placeholder:"Enter full name"})})})]}),e.jsxs(B,{gutter:16,children:[e.jsx(v,{span:12,children:e.jsx(c.Item,{name:"email",label:"Email Address",rules:[{required:!0,message:"Please enter email address"},{type:"email",message:"Please enter a valid email address"}],children:e.jsx(U,{prefix:e.jsx(pe,{style:{color:"#bfbfbf"}}),placeholder:"Enter email address"})})}),e.jsx(v,{span:12,children:e.jsx(c.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please enter password"},{min:6,message:"Password must be at least 6 characters"}],children:e.jsx(U.Password,{prefix:e.jsx(fe,{style:{color:"#bfbfbf"}}),placeholder:"Enter password"})})})]})]}),e.jsxs(b,{title:e.jsxs(l,{children:[e.jsx(ge,{style:{color:"#722ed1"}}),e.jsx("span",{children:"Role & Permissions"})]}),style:{marginBottom:"24px"},children:[e.jsx(c.Item,{name:"role",label:"Select Role",rules:[{required:!0,message:"Please select a role"}],children:e.jsx(V,{placeholder:"Choose a role for this user",loading:w,value:u,onChange:W,children:I.length>0?I.map(a=>{const j=R(a._id);return e.jsx(G,{value:a._id,children:e.jsxs(l,{children:[e.jsx("span",{style:{color:j?.color},children:j?.icon}),e.jsx("span",{children:a.name})]})},a._id)}):e.jsxs(e.Fragment,{children:[e.jsx(G,{value:"admin",children:e.jsxs(l,{children:[e.jsx(M,{style:{color:"#722ed1"}}),e.jsx("span",{children:"Admin"})]})}),e.jsx(G,{value:"manager",children:e.jsxs(l,{children:[e.jsx(se,{style:{color:"#1890ff"}}),e.jsx("span",{children:"Manager"})]})}),e.jsx(G,{value:"agent",children:e.jsxs(l,{children:[e.jsx(p,{style:{color:"#52c41a"}}),e.jsx("span",{children:"Agent"})]})})]})})}),!$(u)&&e.jsx(c.Item,{name:"assignedExhibitions",label:e.jsxs(l,{children:[e.jsx("span",{children:"Assigned Exhibitions"}),e.jsx(D,{title:"Select exhibitions this user can manage. If none selected, user won't have access to any exhibition data.",children:e.jsx(oe,{style:{color:"#bfbfbf"}})})]}),children:e.jsx(V,{mode:"multiple",placeholder:"Select exhibitions to assign to this user",loading:O,allowClear:!0,optionLabelProp:"label",children:q.map(a=>e.jsx(G,{value:a._id,label:a.name,children:e.jsxs(l,{direction:"vertical",size:0,children:[e.jsx(J,{strong:!0,children:a.name}),e.jsx(J,{type:"secondary",style:{fontSize:"12px"},children:a.venue})]})},a._id))})}),$(u)&&e.jsx(ee,{type:"success",icon:e.jsx(M,{}),message:"Administrator Access",description:e.jsxs(l,{direction:"vertical",size:4,children:[e.jsx(J,{children:"This user will have access to all exhibitions in the system."}),e.jsx(J,{type:"secondary",style:{fontSize:"12px"},children:"No specific exhibition assignment is required for administrators."})]}),showIcon:!0,style:{borderRadius:"8px"}})]}),e.jsxs(b,{title:e.jsxs(l,{children:[e.jsx(te,{style:{color:"#52c41a"}}),e.jsx("span",{children:"Account Status"})]}),children:[e.jsx(c.Item,{name:"isActive",label:"Account Status",valuePropName:"checked",initialValue:!0,children:e.jsx(ye,{checkedChildren:"Active",unCheckedChildren:"Inactive",size:"default"})}),e.jsx(J,{type:"secondary",style:{fontSize:"12px",marginTop:"8px",display:"block"},children:"Active users can log in and access the system. Inactive users are blocked from logging in."})]})]})})})},{Title:Oe,Paragraph:We,Text:L}=ie,{TabPane:re}=we,{confirm:Ke}=ne;function Xe(){const{message:m,notification:t}=de.useApp(),d=ce(),{users:o,loading:x,error:r,selectedUser:u}=T(s=>s.user),[S,I]=f.useState(""),[w,q]=f.useState("all"),[O,P]=f.useState(!1),[$,R]=f.useState(!1),[W,N]=f.useState(!1),{hasPermission:a}=De();f.useEffect(()=>{d(H())},[d]),f.useEffect(()=>{r&&t.error({message:"Error",description:r})},[r,t]),f.useEffect(()=>{u||(P(!1),R(!1))},[u]);const j=(s,i)=>{Ke({title:"Are you sure you want to delete this user?",icon:e.jsx(Fe,{}),content:`This will permanently delete ${i}'s account. This action cannot be undone.`,okText:"Yes, delete",okType:"danger",cancelText:"Cancel",onOk:()=>{d(Ee(s)).unwrap().then(()=>{m.success(`${i} has been deleted successfully.`)}).catch(A=>{m.error(`Failed to delete user: ${A}`)})}})},g=s=>{d(X(s)),P(!0)},k=s=>{d(X(s)),R(!0)},F=()=>{N(!0)},n=[{title:"User",key:"user",render:(s,i)=>e.jsxs(l,{children:[e.jsx(Q,{icon:e.jsx(p,{}),size:"large"}),e.jsxs(l,{direction:"vertical",size:0,children:[e.jsx(L,{strong:!0,children:i.name||i.username}),e.jsx(L,{type:"secondary",style:{fontSize:"12px"},children:i.email})]})]})},{title:"Role",dataIndex:"role",key:"role",render:s=>{const i=C(s);let A=i.toLowerCase()==="admin"||i.toLowerCase()==="administrator"?"#1677ff":i.toLowerCase()==="manager"?"#52c41a":"#faad14";return e.jsx(z,{color:A,style:{fontWeight:500,borderRadius:"4px"},children:i.toUpperCase()})},filters:[{text:"Admin",value:"admin"},{text:"Manager",value:"manager"},{text:"Agent",value:"agent"}],onFilter:(s,i)=>C(i.role).toLowerCase().indexOf(s.toLowerCase())===0},{title:"Assigned Exhibitions",key:"assignedExhibitions",render:(s,i)=>e.jsxs(l,{direction:"vertical",size:2,children:[Z(i)?e.jsx(z,{color:"green",style:{fontSize:"12px"},children:"âœ… All exhibitions"}):i.assignedExhibitions&&i.assignedExhibitions.length>0?i.assignedExhibitions.slice(0,2).map((A,Se)=>{const Ce=typeof A=="string"?`Exhibition ${A.slice(-4)}...`:A?.name?`${A.name}`:`Exhibition ${(A?._id||A).toString().slice(-4)}...`;return e.jsx(z,{color:"blue",style:{fontSize:"12px"},children:Ce},Se)}):e.jsx(L,{type:"secondary",style:{fontSize:"12px"},children:"No assignments"}),!Z(i)&&i.assignedExhibitions&&i.assignedExhibitions.length>2&&e.jsxs(L,{type:"secondary",style:{fontSize:"11px"},children:["+",i.assignedExhibitions.length-2," more"]})]})},{title:"Status",key:"status",render:(s,i)=>e.jsx(l,{children:i.isActive?e.jsx(he,{status:"success",text:e.jsx(L,{style:{color:"#52c41a"},children:"Active"})}):e.jsx(he,{status:"default",text:e.jsx(L,{type:"secondary",children:"Inactive"})})}),filters:[{text:"Active",value:!0},{text:"Inactive",value:!1}],onFilter:(s,i)=>i.isActive===s},{title:"Last Active",key:"lastLogin",render:(s,i)=>e.jsxs(l,{children:[e.jsx(Te,{style:{color:"#8c8c8c"}}),e.jsx(L,{type:"secondary",children:i.lastLogin||"Never"})]})},{title:"Action",key:"action",render:(s,i)=>e.jsxs(l,{size:"small",children:[a("users_view")&&e.jsx(D,{title:"View details",children:e.jsx(E,{type:"text",icon:e.jsx(Pe,{}),size:"small",onClick:()=>g(i)})}),a("users_edit")&&e.jsx(D,{title:"Edit user",children:e.jsx(E,{type:"text",icon:e.jsx(be,{}),size:"small",onClick:()=>k(i)})}),a("users_delete")&&e.jsx(D,{title:"Delete user",children:e.jsx(E,{type:"text",danger:!0,icon:e.jsx(Ne,{}),size:"small",onClick:()=>j(i._id,i.name||i.username)})})]})}],h=s=>s.isActive?"active":"inactive",y=o.filter(s=>(w==="all"||w==="active"&&h(s)==="active"||w==="inactive"&&h(s)==="inactive")&&Object.values(s).some(i=>typeof i=="string"&&i.toLowerCase().includes(S.toLowerCase()))),C=s=>typeof s=="string"?s:s&&typeof s=="object"&&s.name?s.name:"Unknown",Z=s=>C(s.role).toLowerCase().includes("admin"),Ae={admin:o.filter(s=>{const i=C(s.role).toLowerCase();return i==="admin"||i==="administrator"}).length,manager:o.filter(s=>C(s.role).toLowerCase()==="manager").length,agent:o.filter(s=>C(s.role).toLowerCase()==="agent").length},ae={active:o.filter(s=>s.isActive).length,inactive:o.filter(s=>!s.isActive).length};return e.jsxs("div",{style:{padding:"12px 0"},children:[e.jsxs("div",{style:{marginBottom:24},children:[e.jsx(Oe,{level:2,children:"User Management"}),e.jsx(We,{children:"Manage user accounts, permissions, and access control."})]}),e.jsxs(B,{gutter:[16,16],style:{marginBottom:24},children:[e.jsx(v,{xs:24,sm:8,children:e.jsx(b,{style:{borderRadius:8,boxShadow:"0 2px 8px rgba(0,0,0,0.09)"},children:e.jsx(le,{title:"Total Users",value:o.length,prefix:e.jsx(p,{}),valueStyle:{color:"#1677ff"},loading:x})})}),e.jsx(v,{xs:24,sm:8,children:e.jsx(b,{style:{borderRadius:8,boxShadow:"0 2px 8px rgba(0,0,0,0.09)"},children:e.jsx(le,{title:"Active Users",value:ae.active,prefix:e.jsx(ke,{}),valueStyle:{color:"#52c41a"},loading:x})})}),e.jsx(v,{xs:24,sm:8,children:e.jsx(b,{style:{borderRadius:8,boxShadow:"0 2px 8px rgba(0,0,0,0.09)"},children:e.jsx(le,{title:"Admin Users",value:Ae.admin,prefix:e.jsx(p,{}),valueStyle:{color:"#faad14"},loading:x})})})]}),e.jsx(b,{style:{marginBottom:24,borderRadius:8,boxShadow:"0 2px 8px rgba(0,0,0,0.09)"},children:e.jsxs(B,{gutter:[16,16],justify:"space-between",align:"middle",children:[e.jsx(v,{xs:24,md:12,children:e.jsx(U,{placeholder:"Search users...",prefix:e.jsx(xe,{style:{color:"rgba(0,0,0,.45)"}}),onChange:s=>I(s.target.value),allowClear:!0,size:"middle"})}),e.jsx(v,{xs:24,md:12,style:{textAlign:"right"},children:e.jsxs(l,{wrap:!0,children:[e.jsx(D,{title:"Refresh data",children:e.jsx(E,{icon:x?e.jsx(_e,{}):e.jsx(xe,{}),onClick:()=>d(H()),disabled:x,children:"Refresh"})}),e.jsx(E,{type:"primary",icon:e.jsx(ve,{}),onClick:F,children:"Add User"})]})})]})}),e.jsxs(b,{style:{borderRadius:8,boxShadow:"0 2px 8px rgba(0,0,0,0.09)"},children:[e.jsxs(we,{defaultActiveKey:"all",onChange:q,tabBarStyle:{marginBottom:24},children:[e.jsx(re,{tab:`All Users (${o.length})`},"all"),e.jsx(re,{tab:`Active (${ae.active})`},"active"),e.jsx(re,{tab:`Inactive (${ae.inactive})`},"inactive")]}),e.jsx(Le,{columns:n,dataSource:y,rowKey:"_id",pagination:{pageSize:10,showSizeChanger:!0,showTotal:(s,i)=>`${i[0]}-${i[1]} of ${s} users`},loading:x})]}),e.jsx(Me,{user:o.find(s=>s._id===u?._id)||null,visible:O,onClose:()=>d(X(null))}),e.jsx(Ve,{user:o.find(s=>s._id===u?._id)||null,visible:$,onClose:()=>d(X(null)),onSuccess:()=>d(H())}),e.jsx(qe,{visible:W,onClose:()=>N(!1),onSuccess:()=>d(H())})]})}export{Xe as default};
