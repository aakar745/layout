const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-Cr1qrR-P.js","assets/vendor-react-BNeW3y6d.js","assets/vendor-antd-DmzwxccF.js","assets/vendor-utils-D9BQhWAM.js","assets/vendor-styling-C4kvkEn0.js","assets/vendor-canvas-BRbMLhVA.js","assets/Dashboard-CUgo7HtP.css","assets/Dashboard-Dl6Abs_k.js","assets/Bookings-CvR98Ryl.js","assets/BookingDetails-DemNncs0.js","assets/Profile-CyyR8MH_.js","assets/InvoiceDetails-BCZl8ujc.js","assets/InvoiceTemplate-CfX1eUeg.js","assets/InvoiceTemplate-BaZgAriD.css","assets/Profile-Ca1xBZFz.js","assets/Settings-C1E7uH_V.js","assets/index-C-hK8LEZ.js","assets/reduxHooks-D3iepLCM.js","assets/index-DjsFNMUa.js","assets/index-BeL5Xxxt.js","assets/index-DP8nC8VT.js","assets/index-D3x-xepx.js","assets/ExhibitionForm-CKjK2C8Y.js","assets/index-BwvGwAB6.js","assets/edit-DRGSyYT-.js","assets/index-CTn8UePu.js","assets/index-ClJdD571.js","assets/index-CzM7W17T.js","assets/index-CfGTOeS3.js","assets/index-nA_CX28j.js","assets/index-C_kQRXaZ.js","assets/vendor-export-CrAKd1if.js","assets/index-CWHDgcX9.js","assets/index-D7CHrjyX.js","assets/index-BfyEZPt7.js","assets/index-DVSwLU5t.js","assets/index-f_XpeFrr.css","assets/index-DysEZhLM.js","assets/index-DU2wTeXd.js","assets/index-Cy-hEcde.js","assets/index-XVcQs4cz.css"])))=>i.map(i=>d[i]);
var sa=Object.defineProperty;var na=(t,e,n)=>e in t?sa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Hr=(t,e,n)=>na(t,typeof e!="symbol"?e+"":e,n);import{r as u,c as ra,f as ne,h as Le,e as ia,g as oa,u as dt,i as Me,j as ut,k as Oi,R as Ie,L as Ze,l as qi,B as aa,m as la,n as re,N as Sr,w as Wr,o as Ui,p as Vi,q as is,s as ca,t as Vt,v as Qi,x as kr,y as Kt,z as zs,A as Er,C as Et,D as Yr,E as da,S as Hi,F as sn,G as Cr,H as Wi,I as ua,J as Yi,K as ha,M as Kr,O as pa,P as fa,Q as ga,T as ma,U as ns,V as xa,W as ya}from"./vendor-react-BNeW3y6d.js";import{a as ze}from"./vendor-utils-D9BQhWAM.js";import{d as Ir,T as Pe,L as or,a as xt,S as ue,b as Fe,B as lt,A as zt,c as X,R as Ot,e as Ki,f as Ae,g as ba,h as os,i as ar,j as wa,k as Gi,l as lr,m as va,n as _r,o as ct,E as qe,D as De,p as Ys,q as be,M as ds,r as Xi,s as Ji,t as Os,u as qs,v as Zi,w as tt,x as $t,y as ja,z as eo,C as Rr,F as Sa,G as ka,I as ge,H as W,J as Ea,K as Ca,N as We,O as Lt,P as Ia,Q as Qt,U as le,V as as,W as st,X as Ye,Y as Tr,Z as Ar,$ as _a,a0 as Ra,a1 as Je,a2 as qt,a3 as Ta,a4 as Aa,a5 as ye,a6 as Ne,a7 as se,a8 as Pa,a9 as Na,aa as Gr,ab as Da,ac as $a,ad as La,ae as Pr,af as Fa,ag as Ma,ah as Dt,ai as us,aj as Ft,ak as Ba,al as Xr,am as za,an as Oa,ao as Us,ap as to,aq as so,ar as qa,as as Ua,at as Jr,au as no,av as at,aw as Va,ax as Qa,ay as Ha,az as Wa,aA as Ya,aB as Ka,aC as Ga,aD as Xa,aE as cr,aF as Ja,aG as Za,aH as Zr,aI as ps,aJ as el,aK as tl}from"./vendor-antd-DmzwxccF.js";import{n as Q,k as bt}from"./vendor-styling-C4kvkEn0.js";import{L as Vs,G as Ut,R as Ks,T as kt,u as sl,a as nl,I as rl,C as il,b as ol,c as al,K as nn,S as ll,F as cl,d as dl}from"./vendor-canvas-BRbMLhVA.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var ro={exports:{}},Gs={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ul=u,hl=Symbol.for("react.element"),pl=Symbol.for("react.fragment"),fl=Object.prototype.hasOwnProperty,gl=ul.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ml={key:!0,ref:!0,__self:!0,__source:!0};function io(t,e,n){var r,i={},o=null,d=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(d=e.ref);for(r in e)fl.call(e,r)&&!ml.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:hl,type:t,key:o,ref:d,props:i,_owner:gl.current}}Gs.Fragment=pl;Gs.jsx=io;Gs.jsxs=io;ro.exports=Gs;var s=ro.exports,dr={},ei=ra;dr.createRoot=ei.createRoot,dr.hydrateRoot=ei.hydrateRoot;const xl="modulepreload",yl=function(t){return"/"+t},ti={},ce=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));i=Promise.allSettled(n.map(m=>{if(m=yl(m),m in ti)return;ti[m]=!0;const h=m.endsWith(".css"),_=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${_}`))return;const j=document.createElement("link");if(j.rel=h?"stylesheet":xl,h||(j.as="script"),j.crossOrigin="",j.href=m,p&&j.setAttribute("nonce",p),document.head.appendChild(j),h)return new Promise((f,w)=>{j.addEventListener("load",f),j.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${m}`)))})}))}function o(d){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=d,window.dispatchEvent(p),!p.defaultPrevented)throw d}return i.then(d=>{for(const p of d||[])p.status==="rejected"&&o(p.reason);return e().catch(o)})},Xs="/api",H=ze.create({baseURL:Xs,headers:{"Content-Type":"application/json",Accept:"application/json"}}),ft=ze.create({baseURL:Xs,headers:{"Content-Type":"application/json",Accept:"application/json"}}),Nr=ze.create({baseURL:Xs,headers:{"Content-Type":"application/json",Accept:"application/json"}});H.interceptors.request.use(t=>{var o,d,p,m,h,_,j,f,w;const e=localStorage.getItem("token"),n=localStorage.getItem("exhibitor_token"),r=((o=t.url)==null?void 0:o.startsWith("/bookings/"))&&t.method==="patch"||((d=t.url)==null?void 0:d.includes("/exhibition/"))||((p=t.url)==null?void 0:p.includes("/stalls/"))||((m=t.url)==null?void 0:m.includes("/halls/"))||((h=t.url)==null?void 0:h.includes("/users/"))||((_=t.url)==null?void 0:_.includes("/roles/")),i=((j=t.url)==null?void 0:j.includes("/test-booking"))||((f=t.url)==null?void 0:f.includes("/exhibitor-bookings"))||((w=t.url)==null?void 0:w.startsWith("/exhibitors/"));return r?e?t.headers.Authorization=`Bearer ${e}`:console.warn("Admin token required but not found for:",t.url):i&&n?t.headers.Authorization=`Bearer ${n}`:e?t.headers.Authorization=`Bearer ${e}`:n&&(t.headers.Authorization=`Bearer ${n}`),t},t=>Promise.reject(t));Nr.interceptors.request.use(t=>{const e=localStorage.getItem("exhibitor_token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));H.interceptors.response.use(t=>t,t=>{var n,r,i,o,d,p;((n=t.response)==null?void 0:n.status)===401?(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.pathname!=="/login"&&(window.location.href="/login")):((r=t.response)==null?void 0:r.status)===403&&((o=(i=t.response)==null?void 0:i.data)==null?void 0:o.code)==="ACCOUNT_INACTIVE"&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.pathname!=="/login"&&(localStorage.setItem("loginMessage",t.response.data.message),window.location.href="/login"));const e=((p=(d=t.response)==null?void 0:d.data)==null?void 0:p.message)||t.message;return Promise.reject(new Error(e))});Nr.interceptors.response.use(t=>t,t=>{var n,r,i;((n=t.response)==null?void 0:n.status)===401&&localStorage.removeItem("exhibitor_token");const e=((i=(r=t.response)==null?void 0:r.data)==null?void 0:i.message)||t.message;return Promise.reject(new Error(e))});const bl=async(t,e=!1,n)=>{const r=e?localStorage.getItem("exhibitor_token"):localStorage.getItem("token");return ze.get(`${Xs}${t}`,{responseType:"blob",headers:{Authorization:`Bearer ${r}`},onDownloadProgress:n})},Ap=Object.freeze(Object.defineProperty({__proto__:null,default:H,downloadFile:bl,exhibitorApi:Nr,publicApi:ft},Symbol.toStringTag,{value:"Module"})),oo={login:async t=>await H.post("/auth/login",t),getProfile:async()=>await H.get("/auth/me"),changePassword:async t=>await H.post("/auth/change-password",t)},si=localStorage.getItem("token"),rn=localStorage.getItem("user");let ao=null;try{ao=rn&&rn!=="undefined"?JSON.parse(rn):null}catch(t){console.error("Failed to parse user data from localStorage",t),localStorage.removeItem("user")}const wl={isAuthenticated:!!si,user:ao,token:si,loading:!1,error:null},Ts=ne("auth/refreshUser",async(t,{rejectWithValue:e})=>{var n,r;try{return(await oo.getProfile()).data}catch(i){return e(((r=(n=i.response)==null?void 0:n.data)==null?void 0:r.message)||"Failed to refresh user data")}}),lo=Le({name:"auth",initialState:wl,reducers:{setCredentials:(t,e)=>{t.user=e.payload.user,t.token=e.payload.token,t.isAuthenticated=!0,localStorage.setItem("token",e.payload.token),localStorage.setItem("user",JSON.stringify(e.payload.user))},logout:t=>{t.user=null,t.token=null,t.isAuthenticated=!1,localStorage.removeItem("token"),localStorage.removeItem("user")}},extraReducers:t=>{t.addCase(Ts.pending,e=>{e.loading=!0,e.error=null}).addCase(Ts.fulfilled,(e,n)=>{e.loading=!1,e.user=n.payload,localStorage.setItem("user",JSON.stringify(n.payload))}).addCase(Ts.rejected,(e,n)=>{e.loading=!1,e.error=n.payload})}}),{setCredentials:vl,logout:on}=lo.actions,jl=lo.reducer,nt=Object.create(null);nt.open="0";nt.close="1";nt.ping="2";nt.pong="3";nt.message="4";nt.upgrade="5";nt.noop="6";const As=Object.create(null);Object.keys(nt).forEach(t=>{As[nt[t]]=t});const ur={type:"error",data:"parser error"},co=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",uo=typeof ArrayBuffer=="function",ho=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Dr=({type:t,data:e},n,r)=>co&&e instanceof Blob?n?r(e):ni(e,r):uo&&(e instanceof ArrayBuffer||ho(e))?n?r(e):ni(new Blob([e]),r):r(nt[t]+(e||"")),ni=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function ri(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let an;function Sl(t,e){if(co&&t.data instanceof Blob)return t.data.arrayBuffer().then(ri).then(e);if(uo&&(t.data instanceof ArrayBuffer||ho(t.data)))return e(ri(t.data));Dr(t,!1,n=>{an||(an=new TextEncoder),e(an.encode(n))})}const ii="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ss=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<ii.length;t++)ss[ii.charCodeAt(t)]=t;const kl=t=>{let e=t.length*.75,n=t.length,r,i=0,o,d,p,m;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const h=new ArrayBuffer(e),_=new Uint8Array(h);for(r=0;r<n;r+=4)o=ss[t.charCodeAt(r)],d=ss[t.charCodeAt(r+1)],p=ss[t.charCodeAt(r+2)],m=ss[t.charCodeAt(r+3)],_[i++]=o<<2|d>>4,_[i++]=(d&15)<<4|p>>2,_[i++]=(p&3)<<6|m&63;return h},El=typeof ArrayBuffer=="function",$r=(t,e)=>{if(typeof t!="string")return{type:"message",data:po(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:Cl(t.substring(1),e)}:As[n]?t.length>1?{type:As[n],data:t.substring(1)}:{type:As[n]}:ur},Cl=(t,e)=>{if(El){const n=kl(t);return po(n,e)}else return{base64:!0,data:t}},po=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},fo="",Il=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((o,d)=>{Dr(o,!1,p=>{r[d]=p,++i===n&&e(r.join(fo))})})},_l=(t,e)=>{const n=t.split(fo),r=[];for(let i=0;i<n.length;i++){const o=$r(n[i],e);if(r.push(o),o.type==="error")break}return r};function Rl(){return new TransformStream({transform(t,e){Sl(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const o=new DataView(i.buffer);o.setUint8(0,126),o.setUint16(1,r)}else{i=new Uint8Array(9);const o=new DataView(i.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let ln;function fs(t){return t.reduce((e,n)=>e+n.length,0)}function gs(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function Tl(t,e){ln||(ln=new TextDecoder);const n=[];let r=0,i=-1,o=!1;return new TransformStream({transform(d,p){for(n.push(d);;){if(r===0){if(fs(n)<1)break;const m=gs(n,1);o=(m[0]&128)===128,i=m[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(fs(n)<2)break;const m=gs(n,2);i=new DataView(m.buffer,m.byteOffset,m.length).getUint16(0),r=3}else if(r===2){if(fs(n)<8)break;const m=gs(n,8),h=new DataView(m.buffer,m.byteOffset,m.length),_=h.getUint32(0);if(_>Math.pow(2,21)-1){p.enqueue(ur);break}i=_*Math.pow(2,32)+h.getUint32(4),r=3}else{if(fs(n)<i)break;const m=gs(n,i);p.enqueue($r(o?m:ln.decode(m),e)),r=0}if(i===0||i>t){p.enqueue(ur);break}}}})}const go=4;function Se(t){if(t)return Al(t)}function Al(t){for(var e in Se.prototype)t[e]=Se.prototype[e];return t}Se.prototype.on=Se.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Se.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Se.prototype.off=Se.prototype.removeListener=Se.prototype.removeAllListeners=Se.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Se.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};Se.prototype.emitReserved=Se.prototype.emit;Se.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Se.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Js=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),Ue=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Pl="arraybuffer";function mo(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const Nl=Ue.setTimeout,Dl=Ue.clearTimeout;function Zs(t,e){e.useNativeTimers?(t.setTimeoutFn=Nl.bind(Ue),t.clearTimeoutFn=Dl.bind(Ue)):(t.setTimeoutFn=Ue.setTimeout.bind(Ue),t.clearTimeoutFn=Ue.clearTimeout.bind(Ue))}const $l=1.33;function Ll(t){return typeof t=="string"?Fl(t):Math.ceil((t.byteLength||t.size)*$l)}function Fl(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function xo(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Ml(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function Bl(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let o=n[r].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}class zl extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class Lr extends Se{constructor(e){super(),this.writable=!1,Zs(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new zl(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=$r(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=Ml(e);return n.length?"?"+n:""}}class Ol extends Lr{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};_l(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Il(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=xo()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let yo=!1;try{yo=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const ql=yo;function Ul(){}class Vl extends Ol{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,o)=>{this.onError("xhr post error",i,o)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}let Mt=class Ps extends Se{constructor(e,n,r){super(),this.createRequest=e,Zs(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=mo(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=Ps.requestsCount++,Ps.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Ul,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ps.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Mt.requestsCount=0;Mt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",oi);else if(typeof addEventListener=="function"){const t="onpagehide"in Ue?"pagehide":"unload";addEventListener(t,oi,!1)}}function oi(){for(let t in Mt.requests)Mt.requests.hasOwnProperty(t)&&Mt.requests[t].abort()}const Ql=function(){const t=bo({xdomain:!1});return t&&t.responseType!==null}();class Hl extends Vl{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=Ql&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Mt(bo,this.uri(),e)}}function bo(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||ql))return new XMLHttpRequest}catch{}if(!e)try{return new Ue[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const wo=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Wl extends Lr{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=wo?{}:mo(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;Dr(r,this.supportsBinary,o=>{try{this.doWrite(r,o)}catch{}i&&Js(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=xo()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const cn=Ue.WebSocket||Ue.MozWebSocket;class Yl extends Wl{createSocket(e,n,r){return wo?new cn(e,n,r):n?new cn(e,n):new cn(e)}doWrite(e,n){this.ws.send(n)}}class Kl extends Lr{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=Tl(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=Rl();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const o=()=>{r.read().then(({done:p,value:m})=>{p||(this.onPacket(m),o())}).catch(p=>{})};o();const d={type:"open"};this.query.sid&&(d.data=`{"sid":"${this.query.sid}"}`),this._writer.write(d).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this._writer.write(r).then(()=>{i&&Js(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Gl={websocket:Yl,webtransport:Kl,polling:Hl},Xl=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Jl=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function hr(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=Xl.exec(t||""),o={},d=14;for(;d--;)o[Jl[d]]=i[d]||"";return n!=-1&&r!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=Zl(o,o.path),o.queryKey=ec(o,o.query),o}function Zl(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function ec(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,o){i&&(n[i]=o)}),n}const pr=typeof addEventListener=="function"&&typeof removeEventListener=="function",Ns=[];pr&&addEventListener("offline",()=>{Ns.forEach(t=>t())},!1);class yt extends Se{constructor(e,n){if(super(),this.binaryType=Pl,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=hr(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=hr(n.host).host);Zs(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Bl(this.opts.query)),pr&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Ns.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=go,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&yt.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",yt.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=Ll(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Js(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const o={type:e,data:n,options:r};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(yt.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),pr&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Ns.indexOf(this._offlineEventListener);r!==-1&&Ns.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}yt.protocol=go;class tc extends yt{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;yt.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",j=>{if(!r)if(j.type==="pong"&&j.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;yt.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(_(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=n.name,this.emitReserved("upgradeError",f)}}))};function o(){r||(r=!0,_(),n.close(),n=null)}const d=j=>{const f=new Error("probe error: "+j);f.transport=n.name,o(),this.emitReserved("upgradeError",f)};function p(){d("transport closed")}function m(){d("socket closed")}function h(j){n&&j.name!==n.name&&o()}const _=()=>{n.removeListener("open",i),n.removeListener("error",d),n.removeListener("close",p),this.off("close",m),this.off("upgrading",h)};n.once("open",i),n.once("error",d),n.once("close",p),this.once("close",m),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let sc=class extends tc{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>Gl[i]).filter(i=>!!i)),super(e,r)}};function nc(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=hr(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+e,r.href=r.protocol+"://"+o+(n&&n.port===r.port?"":":"+r.port),r}const rc=typeof ArrayBuffer=="function",ic=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,vo=Object.prototype.toString,oc=typeof Blob=="function"||typeof Blob<"u"&&vo.call(Blob)==="[object BlobConstructor]",ac=typeof File=="function"||typeof File<"u"&&vo.call(File)==="[object FileConstructor]";function Fr(t){return rc&&(t instanceof ArrayBuffer||ic(t))||oc&&t instanceof Blob||ac&&t instanceof File}function Ds(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Ds(t[n]))return!0;return!1}if(Fr(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Ds(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Ds(t[n]))return!0;return!1}function lc(t){const e=[],n=t.data,r=t;return r.data=fr(n,e),r.attachments=e.length,{packet:r,buffers:e}}function fr(t,e){if(!t)return t;if(Fr(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=fr(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=fr(t[r],e));return n}return t}function cc(t,e){return t.data=gr(t.data,e),delete t.attachments,t}function gr(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=gr(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=gr(t[n],e));return t}const dc=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],uc=5;var ie;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(ie||(ie={}));class hc{constructor(e){this.replacer=e}encode(e){return(e.type===ie.EVENT||e.type===ie.ACK)&&Ds(e)?this.encodeAsBinary({type:e.type===ie.EVENT?ie.BINARY_EVENT:ie.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===ie.BINARY_EVENT||e.type===ie.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=lc(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function ai(t){return Object.prototype.toString.call(t)==="[object Object]"}class Mr extends Se{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===ie.BINARY_EVENT;r||n.type===ie.BINARY_ACK?(n.type=r?ie.EVENT:ie.ACK,this.reconstructor=new pc(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Fr(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(ie[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===ie.BINARY_EVENT||r.type===ie.BINARY_ACK){const o=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const d=e.substring(o,n);if(d!=Number(d)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(d)}if(e.charAt(n+1)==="/"){const o=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(o,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const o=n+1;for(;++n;){const d=e.charAt(n);if(d==null||Number(d)!=d){--n;break}if(n===e.length)break}r.id=Number(e.substring(o,n+1))}if(e.charAt(++n)){const o=this.tryParse(e.substr(n));if(Mr.isPayloadValid(r.type,o))r.data=o;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case ie.CONNECT:return ai(n);case ie.DISCONNECT:return n===void 0;case ie.CONNECT_ERROR:return typeof n=="string"||ai(n);case ie.EVENT:case ie.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&dc.indexOf(n[0])===-1);case ie.ACK:case ie.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class pc{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=cc(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const fc=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Mr,Encoder:hc,get PacketType(){return ie},protocol:uc},Symbol.toStringTag,{value:"Module"}));function He(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const gc=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class jo extends Se{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[He(e,"open",this.onopen.bind(this)),He(e,"packet",this.onpacket.bind(this)),He(e,"error",this.onerror.bind(this)),He(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,i,o;if(gc.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const d={type:ie.EVENT,data:n};if(d.options={},d.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const _=this.ids++,j=n.pop();this._registerAckCallback(_,j),d.id=_}const p=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,m=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!p||(m?(this.notifyOutgoingListeners(d),this.packet(d)):this.sendBuffer.push(d)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let p=0;p<this.sendBuffer.length;p++)this.sendBuffer[p].id===e&&this.sendBuffer.splice(p,1);n.call(this,new Error("operation has timed out"))},i),d=(...p)=>{this.io.clearTimeoutFn(o),n.apply(this,p)};d.withError=!0,this.acks[e]=d}emitWithAck(e,...n){return new Promise((r,i)=>{const o=(d,p)=>d?i(d):r(p);o.withError=!0,n.push(o),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...o)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...o)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:ie.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case ie.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ie.EVENT:case ie.BINARY_EVENT:this.onevent(e);break;case ie.ACK:case ie.BINARY_ACK:this.onack(e);break;case ie.DISCONNECT:this.ondisconnect();break;case ie.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:ie.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ie.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function Ht(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Ht.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};Ht.prototype.reset=function(){this.attempts=0};Ht.prototype.setMin=function(t){this.ms=t};Ht.prototype.setMax=function(t){this.max=t};Ht.prototype.setJitter=function(t){this.jitter=t};class mr extends Se{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Zs(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Ht({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||fc;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new sc(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=He(n,"open",function(){r.onopen(),e&&e()}),o=p=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",p),e?e(p):this.maybeReconnectOnOpen()},d=He(n,"error",o);if(this._timeout!==!1){const p=this._timeout,m=this.setTimeoutFn(()=>{i(),o(new Error("timeout")),n.close()},p);this.opts.autoUnref&&m.unref(),this.subs.push(()=>{this.clearTimeoutFn(m)})}return this.subs.push(i),this.subs.push(d),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(He(e,"ping",this.onping.bind(this)),He(e,"data",this.ondata.bind(this)),He(e,"error",this.onerror.bind(this)),He(e,"close",this.onclose.bind(this)),He(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Js(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new jo(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Gt={};function $s(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=nc(t,e.path||"/socket.io"),r=n.source,i=n.id,o=n.path,d=Gt[i]&&o in Gt[i].nsps,p=e.forceNew||e["force new connection"]||e.multiplex===!1||d;let m;return p?m=new mr(r,e):(Gt[i]||(Gt[i]=new mr(r,e)),m=Gt[i]),n.query&&!e.query&&(e.query=n.queryKey),m.socket(n.path,e)}Object.assign($s,{Manager:mr,Socket:jo,io:$s,connect:$s});const mc=window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1",Xe=mc?"https://aakardata.in/api":"http://localhost:5000/api",Np="ma7o6bmjpok2nhnhq6jgcwrlg446a2hnyxqih70ni695pvm5";class xc{constructor(){this.socket=null,this.subscribedToNotifications=!1,this.reconnectTimer=null,this.listeners={},this.unreadCount=0,this.isExhibitor=!1,this.lastToken="",this.handleConnect=()=>{setTimeout(()=>{this.subscribedToNotifications&&this.socket&&this.socket.emit("subscribe_notifications"),this.fetchUnreadCount(),this.triggerEvent("connected",!0)},500)},this.handleDisconnect=e=>{this.triggerEvent("disconnected",e),e!=="io client disconnect"&&e!=="transport close"&&this.scheduleReconnect()},this.handleConnectError=e=>{console.error("Notification socket connection error:",e),this.scheduleReconnect()},this.handleError=e=>{console.error("Notification socket error:",e),this.scheduleReconnect()},this.scheduleReconnect=()=>{this.reconnectTimer||(this.reconnectTimer=setTimeout(()=>{this.refreshAndReconnect(),this.reconnectTimer=null},5e3))},this.refreshAndReconnect=async()=>{try{const e=this.isExhibitor?"exhibitor_token":"token",n=localStorage.getItem(e);n?this.init(n,this.isExhibitor):console.error(`No ${this.isExhibitor?"exhibitor":"admin"} token found for reconnection`)}catch(e){console.error("Error refreshing token for socket reconnection:",e)}},this.handleNewNotification=e=>{this.unreadCount=e.unreadCount,this.triggerEvent("notification",e.notification),this.triggerEvent("unreadCount",this.unreadCount)},this.handleNotificationUpdate=e=>{this.unreadCount=e.unreadCount,this.triggerEvent("unreadCount",this.unreadCount),e.newNotifications&&e.newNotifications.length>0&&e.newNotifications.forEach(n=>{this.triggerEvent("notification",n)})},this.handleUserDeactivated=e=>{console.warn("User deactivated event received:",e.message),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("exhibitor_token"),localStorage.removeItem("exhibitor"),localStorage.setItem("loginMessage",e.message||"Your account has been deactivated. Please contact the administrator."),this.disconnect(),this.triggerEvent("user_deactivated",e),window.location.pathname!=="/login"&&(window.location.href="/login")}}init(e,n=!1){var r;if(!((r=this.socket)!=null&&r.connected&&this.lastToken===e&&this.isExhibitor===n)){this.isExhibitor=n,this.lastToken=e,this.socket&&(this.socket.disconnect(),this.socket=null),this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null);try{if(!e||typeof e!="string")throw new Error("Invalid token provided for socket connection");const i=Xe.replace("/api",""),o=e.startsWith("Bearer ")?e.substring(7):e;this.socket=$s(i,{auth:{token:o,type:n?"exhibitor":"admin"},forceNew:!0,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:3e3,timeout:2e4,autoConnect:!0,transports:["polling","websocket"]}),this.socket.on("connect",this.handleConnect),this.socket.on("disconnect",this.handleDisconnect),this.socket.on("connect_error",this.handleConnectError),this.socket.on("error",this.handleError),this.socket.on("new_notification",this.handleNewNotification),this.socket.on("notification_update",this.handleNotificationUpdate),this.socket.on("user_deactivated",this.handleUserDeactivated)}catch(i){console.error("Error initializing notification socket:",i),this.scheduleReconnect()}}}subscribeToNotifications(){this.subscribedToNotifications=!0,this.socket&&this.socket.connected&&this.socket.emit("subscribe_notifications")}unsubscribeFromNotifications(){this.subscribedToNotifications=!1,this.socket&&this.socket.connected&&this.socket.emit("unsubscribe_notifications")}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null),this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.unreadCount=0,this.subscribedToNotifications=!1}addEventListener(e,n){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(n)}removeEventListener(e,n){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter(r=>r!==n))}triggerEvent(e,n){this.listeners[e]&&this.listeners[e].forEach(r=>{try{r(n)}catch(i){console.error(`Error in notification ${e} listener:`,i)}})}getUnreadCount(){return this.unreadCount}async fetchUnreadCount(){try{const e=this.isExhibitor?"notifications/exhibitor":"notifications/admin",n={limit:1,page:1,unreadOnly:!0},r=this.isExhibitor?"exhibitor_token":"token",i=localStorage.getItem(r);if(!i)return console.error(`No ${this.isExhibitor?"exhibitor":"admin"} token available for notification requests`),0;const o=await ze.get(e,{baseURL:Xe,params:n,headers:{Authorization:`Bearer ${i}`}});return o.data&&o.data.success?(this.unreadCount=o.data.data.unreadCount,this.triggerEvent("unreadCount",this.unreadCount),this.unreadCount):0}catch(e){return console.error("Error fetching unread count:",e),0}}async getNotifications(e=1,n=10,r=!1){try{const i=this.isExhibitor?"notifications/exhibitor":"notifications/admin",o={page:e,limit:n,unreadOnly:r},d=this.isExhibitor?"exhibitor_token":"token",p=localStorage.getItem(d);if(!p)throw new Error(`No ${this.isExhibitor?"exhibitor":"admin"} token available for notification requests`);return(await ze.get(i,{baseURL:Xe,params:o,headers:{Authorization:`Bearer ${p}`}})).data}catch(i){return console.error("Error fetching notifications:",i),{success:!1,data:{notifications:[],pagination:{total:0,page:1,limit:10,pages:0},unreadCount:0}}}}async markAsRead(e){try{const n=this.isExhibitor?`notifications/exhibitor/mark-read/${e}`:`notifications/admin/mark-read/${e}`,r=this.isExhibitor?"exhibitor_token":"token",i=localStorage.getItem(r);if(!i)throw new Error(`No ${this.isExhibitor?"exhibitor":"admin"} token available for notification requests`);const o=await ze.put(n,{},{baseURL:Xe,headers:{Authorization:`Bearer ${i}`}});return o.data&&o.data.success&&(this.unreadCount=o.data.data.unreadCount,this.triggerEvent("unreadCount",this.unreadCount)),o.data}catch(n){throw console.error("Error marking notification as read:",n),n}}async markAllAsRead(){try{const e=this.isExhibitor?"notifications/exhibitor/mark-all-read":"notifications/admin/mark-all-read",n=this.isExhibitor?"exhibitor_token":"token",r=localStorage.getItem(n);if(!r)throw new Error(`No ${this.isExhibitor?"exhibitor":"admin"} token available for notification requests`);const i=await ze.put(e,{},{baseURL:Xe,headers:{Authorization:`Bearer ${r}`}});return i.data&&i.data.success&&(this.unreadCount=0,this.triggerEvent("unreadCount",this.unreadCount)),i.data}catch(e){throw console.error("Error marking all notifications as read:",e),e}}async deleteNotification(e){try{const n=this.isExhibitor?`notifications/exhibitor/${e}`:`notifications/admin/${e}`,r=await ze.delete(n,{baseURL:Xe,headers:{Authorization:`Bearer ${localStorage.getItem(this.isExhibitor?"exhibitor_token":"token")}`}});if(r.data.success)return r.data.data.unreadCount!==void 0&&(this.unreadCount=r.data.data.unreadCount,this.triggerEvent("unreadCount",this.unreadCount)),r.data;throw new Error("Failed to delete notification")}catch(n){throw console.error("Error deleting notification:",n),n}}async deleteAllNotifications(){try{const e=this.isExhibitor?"notifications/exhibitor/delete-all":"notifications/admin/delete-all",n=await ze.delete(e,{baseURL:Xe,headers:{Authorization:`Bearer ${localStorage.getItem(this.isExhibitor?"exhibitor_token":"token")}`}});if(n.data.success)return this.unreadCount=0,this.triggerEvent("unreadCount",this.unreadCount),n.data;throw new Error("Failed to delete all notifications")}catch(e){throw console.error("Error deleting all notifications:",e),e}}}const _e=new xc;var et=(t=>(t.NEW_LEAD="New Lead",t.FOLLOWUP_DUE="Follow-up Due",t.STATUS_CHANGE="Status Changed",t.ASSIGNMENT="Lead Assigned",t.NEW_BOOKING="NEW_BOOKING",t.BOOKING_CONFIRMED="BOOKING_CONFIRMED",t.BOOKING_CANCELLED="BOOKING_CANCELLED",t.PAYMENT_RECEIVED="PAYMENT_RECEIVED",t.INVOICE_GENERATED="INVOICE_GENERATED",t.EXHIBITION_UPDATE="EXHIBITION_UPDATE",t.SYSTEM_MESSAGE="SYSTEM_MESSAGE",t.EXHIBITOR_MESSAGE="EXHIBITOR_MESSAGE",t.EXHIBITOR_REGISTERED="EXHIBITOR_REGISTERED",t))(et||{}),mt=(t=>(t.HIGH="HIGH",t.MEDIUM="MEDIUM",t.LOW="LOW",t))(mt||{}),xr=(t=>(t.READ="Read",t.UNREAD="Unread",t))(xr||{}),So={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(ia,function(){return function(n,r,i){n=n||{};var o=r.prototype,d={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function p(h,_,j,f){return o.fromToBase(h,_,j,f)}i.en.relativeTime=d,o.fromToBase=function(h,_,j,f,w){for(var A,T,P,S=j.$locale().relativeTime||d,N=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],C=N.length,a=0;a<C;a+=1){var l=N[a];l.d&&(A=f?i(h).diff(j,l.d,!0):j.diff(h,l.d,!0));var c=(n.rounding||Math.round)(Math.abs(A));if(P=A>0,c<=l.r||!l.r){c<=1&&a>0&&(l=N[a-1]);var g=S[l.l];w&&(c=w(""+c)),T=typeof g=="string"?g.replace("%d",c):g(c,_,l.l,P);break}}if(_)return T;var x=P?S.future:S.past;return typeof x=="function"?x(T):x.replace("%s",T)},o.to=function(h,_){return p(h,_,this,!0)},o.from=function(h,_){return p(h,_,this)};var m=function(h){return h.$u?i.utc():i()};o.toNow=function(h){return this.to(m(this),h)},o.fromNow=function(h){return this.from(m(this),h)}}})})(So);var yc=So.exports;const bc=oa(yc);Ir.extend(bc);const li=t=>{switch(t){case mt.HIGH:return"#f5222d";case mt.MEDIUM:return"#faad14";case mt.LOW:return"#52c41a";default:return"#1677ff"}},wc=t=>Ir(t).fromNow(),vc=t=>Ir(t).format("YYYY-MM-DD HH:mm"),Dp=t=>t.filter(e=>e.isRead===!1).length,$p=t=>{if(!t.entityId||!t.entityType)return"/notifications";switch(t.entityType){case"lead":return`/leads/${t.entityId}`;case"followup":return`/followups/${t.entityId}`;case"Booking":return"/bookings";case"Invoice":return`/invoice/${t.entityId}`;case"Exhibition":return`/exhibition/${t.entityId}`;case"Exhibitor":return`/exhibitors?id=${t.entityId}`;default:return"/notifications"}},{Text:ci,Paragraph:jc}=Pe,Sc=({notification:t,onView:e,onMarkAsRead:n,onDelete:r})=>{const i=()=>{switch(t.type){case et.NEW_LEAD:return s.jsx(ar,{style:{color:"#1677ff"}});case et.FOLLOWUP_DUE:return s.jsx(os,{style:{color:"#faad14"}});case et.STATUS_CHANGE:return s.jsx(ba,{style:{color:"#722ed1"}});case et.ASSIGNMENT:return s.jsx(Ae,{style:{color:"#52c41a"}});default:return s.jsx(Ki,{style:{color:"#1677ff"}})}},o=()=>{t.isRead||n(t),e(t)},d=p=>{p.stopPropagation(),r(t)};return s.jsx(or.Item,{onClick:o,className:t.isRead?"":"notification-unread",style:{cursor:"pointer",backgroundColor:t.isRead?"transparent":"#f0f5ff",padding:"16px",borderRadius:"4px",transition:"background-color 0.3s"},actions:[s.jsx(xt,{title:"Delete notification",children:s.jsx(X,{type:"text",danger:!0,icon:s.jsx(Ot,{}),onClick:d,"aria-label":"Delete notification"})})],children:s.jsx(or.Item.Meta,{avatar:s.jsx(lt,{dot:!t.isRead,color:li(t.priority),children:s.jsx(zt,{icon:i(),size:"large",style:{backgroundColor:"white",border:`1px solid ${li(t.priority)}`}})}),title:s.jsxs(ue,{children:[s.jsx(ci,{strong:!0,children:t.title}),!t.isRead&&s.jsx(Fe,{color:"blue",children:"New"})]}),description:s.jsxs("div",{children:[s.jsx(jc,{ellipsis:{rows:2},style:{marginBottom:4},children:t.message}),s.jsx(xt,{title:vc(t.createdAt),children:s.jsx(ci,{type:"secondary",style:{fontSize:12},children:wc(t.createdAt)})})]})})})},{Title:kc,Text:Lp}=Pe,Ec=t=>{switch(t){case"NEW_BOOKING":return et.NEW_LEAD;case"BOOKING_CONFIRMED":case"INVOICE_GENERATED":case"PAYMENT_RECEIVED":return et.STATUS_CHANGE;case"EXHIBITOR_MESSAGE":return et.FOLLOWUP_DUE;case"EXHIBITOR_REGISTERED":return et.NEW_LEAD;default:return et.STATUS_CHANGE}},Cc=t=>{switch(t){case"HIGH":return mt.HIGH;case"MEDIUM":return mt.MEDIUM;case"LOW":return mt.LOW;default:return mt.MEDIUM}},Ic=({isExhibitor:t=!1})=>{const e=dt(),[n,r]=u.useState([]),[i,o]=u.useState(!1),[d,p]=u.useState(!1),[m,h]=u.useState(0),[_,j]=u.useState(!1),[f,w]=u.useState("all"),A=u.useRef(null),{isAuthenticated:T,user:P}=Me(v=>v.auth),{isAuthenticated:S}=Me(v=>v.exhibitorAuth||{isAuthenticated:!1}),N=t?S:T,[C,a]=u.useState(!1);u.useEffect(()=>{if(N){const v=t?"exhibitor_token":"token",$=localStorage.getItem(v);if($){_e.init($,t),_e.subscribeToNotifications();const z=U=>{h(U),U>0&&!d&&(j(!0),setTimeout(()=>{j(!1)},2e3))},V=U=>{r(O=>[U,...O])},L=()=>{a(!0),l()},F=()=>{a(!1)};return _e.addEventListener("unreadCount",z),_e.addEventListener("notification",V),_e.addEventListener("connected",L),_e.addEventListener("disconnected",F),l(),()=>{_e.removeEventListener("unreadCount",z),_e.removeEventListener("notification",V),_e.removeEventListener("connected",L),_e.removeEventListener("disconnected",F),_e.unsubscribeFromNotifications()}}else console.error(`No ${t?"exhibitor":"admin"} token found in localStorage`)}},[N,t]);const l=async()=>{if(N){o(!0);try{const v=await _e.getNotifications(1,10);v.success&&(r(v.data.notifications),h(v.data.unreadCount))}catch(v){console.error("Error fetching notifications:",v)}finally{o(!1)}}},c=v=>{p(v),v&&(A.current&&A.current.classList.remove("bell-animate"),l())},g=async v=>{if(v.isRead||await x(v),p(!1),v.entityId&&v.entityType){let $="";switch(v.entityType){case"Booking":$=t?`/exhibitor/bookings/${v.entityId}`:"/bookings";break;case"Invoice":$=t?`/exhibitor/invoice/${v.entityId}`:`/invoice/${v.entityId}`;break;case"Exhibition":$=`/exhibition/${v.entityId}`;break;case"Exhibitor":$=`/exhibitors?id=${v.entityId}`;break;default:$=""}e($||"/notifications")}else e("/notifications")},x=async v=>{try{await _e.markAsRead(v._id),r(n.map($=>$._id===v._id?{...$,isRead:!0}:$))}catch($){console.error("Error marking notification as read:",$)}},E=async v=>{try{await _e.deleteNotification(v._id),r(n.filter($=>$._id!==v._id)),v.isRead||h($=>Math.max(0,$-1))}catch($){console.error("Error deleting notification:",$)}},b=()=>{p(!1),e("/notifications")},y=async()=>{try{await _e.markAllAsRead(),r(n.map(v=>({...v,isRead:!0}))),h(0)}catch(v){console.error("Error marking all notifications as read:",v)}},k=async()=>{try{await _e.deleteAllNotifications(),r([]),h(0)}catch(v){console.error("Error deleting all notifications:",v)}},I=()=>f==="unread"?n.filter(v=>!v.isRead):n.slice(0,10),R=v=>{w(v)},B=v=>{var $;return{_id:v._id,recipient:v.recipient,recipientType:v.recipientType||"admin",title:v.title,message:v.message,type:Ec(v.type),priority:Cc(v.priority),isRead:v.isRead,readAt:v.readAt,entityId:v.entityId,entityType:v.entityType,data:v.data,createdAt:v.createdAt,updatedAt:v.updatedAt||v.createdAt,id:v._id,userId:v.recipient,source:($=v.data)==null?void 0:$.source,status:v.isRead?xr.READ:xr.UNREAD}},D=s.jsxs("div",{className:"notification-dropdown",children:[s.jsxs("div",{className:"notification-header",children:[s.jsx(kc,{level:5,style:{margin:0},children:"Notifications"}),s.jsxs(ue,{children:[s.jsx(X,{type:"text",size:"small",icon:s.jsx(wa,{}),onClick:l,loading:i,className:"header-btn",title:"Refresh notifications"}),s.jsx(X,{type:"text",size:"small",icon:s.jsx(Gi,{}),onClick:y,disabled:m===0,className:"header-btn",title:"Mark all as read"}),s.jsx(X,{type:"text",size:"small",danger:!0,icon:s.jsx(Ot,{}),onClick:k,disabled:n.length===0,className:"header-btn",title:"Clear all notifications"}),s.jsx(X,{type:"text",size:"small",icon:s.jsx(lr,{}),onClick:()=>e("/notifications"),className:"header-btn",title:"Notification Settings"}),s.jsx(X,{type:"text",size:"small",icon:s.jsx(va,{}),onClick:()=>p(!1),className:"header-btn",title:"Close"})]})]}),s.jsx(_r,{activeKey:f,onChange:R,size:"small",className:"notification-tabs",items:[{key:"all",label:s.jsx("span",{children:"All"})},{key:"unread",label:s.jsxs("span",{className:"tab-label",children:["Unread",s.jsx(lt,{count:m,size:"small",offset:[5,-3],style:{backgroundColor:"#1677ff"}})]})}]}),s.jsx("div",{className:"notification-list",children:s.jsx(ct,{spinning:i,children:I().length===0?s.jsx(qe,{image:qe.PRESENTED_IMAGE_SIMPLE,description:f==="unread"?"No unread notifications":"No notifications",style:{padding:"20px 0"}}):s.jsx(or,{dataSource:I(),renderItem:v=>s.jsx(Sc,{notification:B(v),onView:()=>g(v),onMarkAsRead:()=>x(v),onDelete:E})})})}),s.jsx(De,{style:{margin:"0"}}),s.jsx("div",{className:"notification-footer",children:s.jsx(X,{type:"link",onClick:b,children:"View All Notifications"})})]});return s.jsx("div",{ref:A,className:`bell-container ${_?"bell-animate":""}`,children:s.jsx(Ys,{overlay:D,trigger:["click"],open:d,onOpenChange:c,placement:"bottomRight",getPopupContainer:v=>v.parentNode,overlayClassName:"notification-dropdown-overlay",children:s.jsx("div",{className:"bell-trigger",children:s.jsx(lt,{count:m,className:"notification-badge",size:"default",overflowCount:99,children:s.jsx(Ki,{className:"notification-bell-icon"})})})})})};class _c{async getSettings(){return(await H.get("/settings")).data}async updateSettings(e){return(await H.put("/settings",e)).data}async uploadLogo(e){const n=new FormData;return n.append("file",e),(await H.post("/settings/upload/logo",n,{headers:{"Content-Type":"multipart/form-data"}})).data}}const Br=new _c,Rc={settings:null,loading:!1,error:null},Ls=ne("settings/fetchSettings",async(t,{rejectWithValue:e})=>{var n,r;try{return await Br.getSettings()}catch(i){return e(((r=(n=i.response)==null?void 0:n.data)==null?void 0:r.message)||"Failed to fetch settings")}}),Fs=ne("settings/updateSettings",async(t,{rejectWithValue:e})=>{var n,r;try{return await Br.updateSettings(t)}catch(i){return e(((r=(n=i.response)==null?void 0:n.data)==null?void 0:r.message)||"Failed to update settings")}}),dn=ne("settings/uploadLogo",async(t,{dispatch:e,rejectWithValue:n})=>{var r,i;try{const o=await Br.uploadLogo(t);return o.path&&await e(Fs({logo:o.path})),o}catch(o){return n(((i=(r=o.response)==null?void 0:r.data)==null?void 0:i.message)||"Failed to upload logo")}}),Tc=Le({name:"settings",initialState:Rc,reducers:{},extraReducers:t=>{t.addCase(Ls.pending,e=>{e.loading=!0,e.error=null}).addCase(Ls.fulfilled,(e,n)=>{e.settings=n.payload,e.loading=!1}).addCase(Ls.rejected,(e,n)=>{e.loading=!1,e.error=n.payload}).addCase(Fs.pending,e=>{e.loading=!0,e.error=null}).addCase(Fs.fulfilled,(e,n)=>{e.settings=n.payload,e.loading=!1}).addCase(Fs.rejected,(e,n)=>{e.loading=!1,e.error=n.payload}).addCase(dn.pending,e=>{e.loading=!0,e.error=null}).addCase(dn.fulfilled,e=>{e.loading=!1}).addCase(dn.rejected,(e,n)=>{e.loading=!1,e.error=n.payload})}}),Ac=Tc.reducer,Pc=()=>{const{user:t}=Me(n=>n.auth),e=n=>{if(!t||!t.role||!t.role.permissions)return!1;const r=t.role.permissions;if(r.includes(n)||r.includes("*")||r.includes("all")||r.includes("admin")||r.includes("superadmin")||r.includes("full_access")||r.includes("manage_all"))return!0;const i=n.split("_");if(i.length===2){const o=i[0],d=i[1],p=[`${o}.*`,`*.${d}`,`view_${o}`,`${o}_view`,`${o}s_${d}`,`${d}_${o}`,`${o}`,`${d}`,o.endsWith("s")?`${o.slice(0,-1)}_${d}`:`${o}s_${d}`,`${o}_${d==="view"?"read":d}`,`${d==="view"?"read":d}_${o}`];for(const m of p)if(r.includes(m))return!0}return!1};return{hasPermission:e,hasAnyPermission:n=>n.some(r=>e(r)),hasAllPermissions:n=>n.every(r=>e(r))}},{Header:Nc,Sider:Dc,Content:$c}=be,Lc=Q.div`
  height: 65px;
  padding: 0 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-bottom: 1px solid #E5E7EB;
  transition: all 0.3s;
`,Fc=Q.div`
  border-radius: 8px;
  padding: 10px;
  display: flex;
  justify-content: center;
  align-items: center;
  transition: all 0.2s ease;
`,Mc=Q.img`
  height: auto;
  width: 100%;
  max-width: 150px;
  max-height: auto;
  object-fit: contain;
`;Q.span`
  margin-left: 12px;
  font-size: 18px;
  font-weight: 600;
  color: #111827;
  white-space: nowrap;
  transition: opacity 0.3s, margin-left 0.3s;
`;const me=({children:t})=>{const[e,n]=u.useState(!1),r=dt(),i=ut(),o=Oi(),d=Me(l=>l.auth.user),{settings:p}=Me(l=>l.settings),[m,h]=u.useState("/logo.png"),[_,j]=u.useState(!1),{hasPermission:f}=Pc(),w=u.useCallback(async()=>{try{j(!0),await i(Ts()).unwrap()}catch{}finally{j(!1)}},[i]);u.useEffect(()=>{const l=setInterval(()=>{w()},3e5);return()=>clearInterval(l)},[w]),u.useEffect(()=>{w()},[o.pathname,w]),u.useEffect(()=>{},[d,f]),u.useEffect(()=>{i(Ls())},[i]),u.useEffect(()=>{const l=()=>{i(on())};return _e.addEventListener("user_deactivated",l),()=>{_e.removeEventListener("user_deactivated",l)}},[i]);const A=[{key:"dashboard",icon:s.jsx(qs,{}),label:"Dashboard",requiredPermission:"dashboard_view",onClick:()=>r("/dashboard")},{key:"exhibition",icon:s.jsx(Zi,{}),label:"Exhibitions",requiredPermission:"exhibitions_view",onClick:()=>r("/exhibition")},{key:"stalls",icon:s.jsx(tt,{}),label:"Stalls",requiredPermission:"view_stalls",children:[{key:"stall/list",label:"Stall List",requiredPermission:"view_stalls",onClick:()=>r("/stall/list")},{key:"stall-types",label:"Stall Types",requiredPermission:"view_stall_types",onClick:()=>r("/stall-types")}]},{key:"bookings",icon:s.jsx($t,{}),label:"Stall Bookings",requiredPermission:"view_bookings",onClick:()=>r("/bookings")},{key:"amenities",icon:s.jsx(ja,{}),label:"Amenities",requiredPermission:"view_amenities",onClick:()=>r("/amenities")},{key:"invoices",icon:s.jsx(eo,{}),label:"Invoices",requiredPermission:"view_invoices",onClick:()=>r("/invoices")},{key:"exhibitors",icon:s.jsx(Rr,{}),label:"Exhibitors",requiredPermission:"view_exhibitors",onClick:()=>r("/exhibitors")},{key:"index",icon:s.jsx(Ae,{}),label:"Users",requiredPermission:"users_view",onClick:()=>r("/index")},{key:"roles",icon:s.jsx(Sa,{}),label:"Roles",requiredPermission:"roles_view",onClick:()=>r("/roles")},{key:"settings",icon:s.jsx(lr,{}),label:"Settings",requiredPermission:"settings_view",onClick:()=>r("/settings")}],T=l=>l.filter(c=>{if(c.requiredPermission&&!f(c.requiredPermission))return!1;if(c.children){const g=T(c.children);if(g.length===0)return!1;c.children=g}return!0}),P=T(A),S=l=>l.map(c=>{const{requiredPermission:g,...x}=c;return x.children&&(x.children=S(x.children)),x}),N=S(P);u.useEffect(()=>{const l={dashboard:"dashboard_view",exhibition:"exhibitions_view","stall/list":"view_stalls","stall-types":"view_stall_types",bookings:"view_bookings",amenities:"view_amenities",invoices:"view_invoices",exhibitors:"view_exhibitors",index:"users_view",roles:"roles_view",settings:"settings_view"},c=o.pathname.substring(1)||"dashboard",g=l[c];if(g&&!f(g)){const x=P.length>0?P[0]:null;x?r(`/${x.key}`):(i(on()),r("/login"))}},[o.pathname,f,P,r,i]),u.useEffect(()=>{const l=localStorage.getItem("cachedLogoUrl"),c=localStorage.getItem("logoTimestamp"),g=new Date().getTime();if(l&&c&&g-parseInt(c)<36e5)h(l);else if(p!=null&&p.logo){const x=`${H.defaults.baseURL}/public/logo`;h(x),localStorage.setItem("cachedLogoUrl",x),localStorage.setItem("logoTimestamp",g.toString());const E=new Image;E.src=x}},[p]);const C=[{key:"profile",label:"Profile",icon:s.jsx(Ae,{}),onClick:()=>r("/account")},{key:"settings",label:"Settings",icon:s.jsx(lr,{}),onClick:()=>r("/settings")},{key:"divider",type:"divider"},{key:"logout",label:"Logout",icon:s.jsx(Os,{}),onClick:()=>{i(on()),r("/login")}}],a=()=>{const l=o.pathname.substring(1);return l.charAt(0).toUpperCase()+l.slice(1)};return s.jsxs(be,{style:{minHeight:"100vh"},children:[s.jsxs(Dc,{trigger:null,collapsible:!0,collapsed:e,style:{background:"#fff",borderRight:"1px solid #E5E7EB",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1)",position:"fixed",left:0,top:0,bottom:0,zIndex:100,overflow:"hidden"},width:256,collapsedWidth:80,children:[s.jsx(Lc,{children:s.jsx(Fc,{children:s.jsx(Mc,{src:m,alt:"Logo",onError:()=>h("/logo.png")})})}),s.jsx(ds,{mode:"inline",selectedKeys:[o.pathname.substring(1)||"dashboard"],items:N,style:{border:"none",padding:"16px 0",background:"transparent"},className:"main-nav-menu",inlineCollapsed:e})]}),s.jsxs(be,{style:{marginLeft:e?80:256,transition:"all 0.2s"},children:[s.jsxs(Nc,{style:{padding:"0 24px",background:"#fff",display:"flex",alignItems:"center",justifyContent:"space-between",boxShadow:"0 1px 0 0 rgb(0 0 0 / 0.05)",zIndex:99},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[s.jsx(X,{type:"text",icon:e?s.jsx(Xi,{}):s.jsx(Ji,{}),onClick:()=>n(!e),style:{fontSize:16}}),s.jsx("span",{style:{marginLeft:24,fontSize:20,fontWeight:600,color:"#111827"},children:a()})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[s.jsx("div",{style:{marginRight:20},children:s.jsx(Ic,{isExhibitor:!1})}),s.jsx(Ys,{menu:{items:C},placement:"bottomRight",children:s.jsxs(ue,{align:"center",style:{cursor:"pointer"},children:[s.jsx(zt,{size:"small",icon:s.jsx(Ae,{}),style:{backgroundColor:"#5046e5"}}),s.jsx("span",{style:{maxWidth:120,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(d==null?void 0:d.username)||"User"})]})})]})]}),s.jsx($c,{style:{margin:"24px 16px",padding:24,minHeight:280,background:"#fff",borderRadius:8,boxShadow:"0 1px 2px 0 rgb(0 0 0 / 0.05)"},children:t})]})]})},di=localStorage.getItem("exhibitor_token"),Bc=localStorage.getItem("exhibitor")?JSON.parse(localStorage.getItem("exhibitor")):null,zc={isAuthenticated:!!di,exhibitor:Bc,token:di,showLoginModal:!1,showForgotPasswordModal:!1,loginContext:null},ko=Le({name:"exhibitorAuth",initialState:zc,reducers:{setExhibitorCredentials:(t,e)=>{t.exhibitor=e.payload.exhibitor,t.token=e.payload.token,t.isAuthenticated=!0,localStorage.setItem("exhibitor_token",e.payload.token),localStorage.setItem("exhibitor",JSON.stringify(e.payload.exhibitor))},exhibitorLogout:t=>{t.exhibitor=null,t.token=null,t.isAuthenticated=!1,localStorage.removeItem("exhibitor_token"),localStorage.removeItem("exhibitor")},showLoginModal:(t,e)=>{t.showLoginModal=!0,t.showForgotPasswordModal=!1,t.loginContext=e.payload||null},hideLoginModal:t=>{t.showLoginModal=!1,t.loginContext=null},showForgotPasswordModal:t=>{t.showForgotPasswordModal=!0,t.showLoginModal=!1},hideForgotPasswordModal:t=>{t.showForgotPasswordModal=!1}}}),{setExhibitorCredentials:Oc,exhibitorLogout:Eo,showLoginModal:Ct,hideLoginModal:ms,showForgotPasswordModal:qc,hideForgotPasswordModal:un}=ko.actions,Uc=ko.reducer,{Header:Vc,Sider:Qc,Content:Hc}=be,_t=({children:t})=>{var j;const[e,n]=u.useState(!1),r=dt(),i=ut(),o=Oi(),d=Me(f=>f.exhibitorAuth.exhibitor),p=()=>{const f=o.pathname;return f.includes("/exhibitor/dashboard")?"dashboard":f.includes("/exhibitor/bookings")?"bookings":f.includes("/exhibitor/profile")?"profile":f.includes("/exhibitions")?"exhibitions":f.includes("/exhibitor/support")?"help":"dashboard"},m=[{key:"dashboard",icon:s.jsx(qs,{}),label:"Dashboard",onClick:()=>r("/exhibitor/dashboard")},{key:"bookings",icon:s.jsx(tt,{}),label:"My Bookings",onClick:()=>r("/exhibitor/bookings")},{key:"profile",icon:s.jsx(Ae,{}),label:"My Profile",onClick:()=>r("/exhibitor/profile")},{key:"exhibitions",icon:s.jsx(eo,{}),label:"Exhibitions",onClick:()=>r("/exhibitions")},{key:"help",icon:s.jsx(ka,{}),label:"Help & Support",onClick:()=>r("/exhibitor/support")}],h=[{key:"profile",label:"My Profile",icon:s.jsx(Ae,{}),onClick:()=>r("/exhibitor/profile")},{key:"bookings",label:"My Bookings",icon:s.jsx(tt,{}),onClick:()=>r("/exhibitor/bookings")},{key:"divider",type:"divider"},{key:"logout",label:"Logout",icon:s.jsx(Os,{}),onClick:()=>{i(Eo()),r("/")}}],_=()=>{const f=o.pathname.replace("/exhibitor/","");return f==="dashboard"?"Dashboard":f.startsWith("bookings")?f.includes("/")?"Booking Details":"My Bookings":f==="profile"?"My Profile":f==="support"?"Help & Support":f.charAt(0).toUpperCase()+f.slice(1)};return s.jsxs(be,{style:{minHeight:"100vh"},children:[s.jsxs(Qc,{trigger:null,collapsible:!0,collapsed:e,style:{background:"#fff",borderRight:"1px solid #E5E7EB",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1)",position:"fixed",left:0,top:0,bottom:0,zIndex:100,overflow:"hidden"},width:256,collapsedWidth:80,children:[s.jsxs("div",{style:{height:65,padding:"0 24px",display:"flex",alignItems:"center",justifyContent:e?"center":"flex-start",borderBottom:"1px solid #E5E7EB"},children:[s.jsx("img",{src:"/logo.svg",alt:"Logo",style:{height:32,width:"auto"}}),!e&&s.jsx("span",{style:{marginLeft:12,fontSize:18,fontWeight:600,color:"#1890ff",whiteSpace:"nowrap"},children:"Exhibitor Portal"})]}),s.jsx(ds,{mode:"inline",selectedKeys:[p()],items:m,style:{border:"none",padding:e?"16px 0":"16px 8px",background:"transparent"},className:"main-nav-menu",inlineCollapsed:e})]}),s.jsxs(be,{style:{marginLeft:e?80:256,transition:"all 0.2s"},children:[s.jsxs(Vc,{style:{padding:"0 24px",background:"#fff",display:"flex",alignItems:"center",justifyContent:"space-between",boxShadow:"0 1px 0 0 rgb(0 0 0 / 0.05)",zIndex:99},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[s.jsx(X,{type:"text",icon:e?s.jsx(Xi,{}):s.jsx(Ji,{}),onClick:()=>n(!e),style:{fontSize:16}}),s.jsx("span",{style:{marginLeft:24,fontSize:20,fontWeight:600,color:"#111827"},children:_()})]}),s.jsx(Ys,{menu:{items:h},placement:"bottomRight",children:s.jsxs(ue,{align:"center",style:{cursor:"pointer"},children:[s.jsx(zt,{size:"small",style:{backgroundColor:"#5046e5"},children:((j=d==null?void 0:d.companyName)==null?void 0:j.charAt(0).toUpperCase())||"E"}),s.jsx("span",{style:{maxWidth:120,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(d==null?void 0:d.companyName)||"Exhibitor"})]})})]}),s.jsx(Hc,{style:{margin:"24px 16px",padding:24,minHeight:280,background:"#fff",borderRadius:8,boxShadow:"0 1px 2px 0 rgb(0 0 0 / 0.05)"},children:t})]})]})},{Title:Co,Text:Xt,Paragraph:Wc}=Pe,hs=bt`
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
`,Yc=bt`
  from { opacity: 0; transform: translateX(-30px); }
  to { opacity: 1; transform: translateX(0); }
`,Kc=bt`
  from { opacity: 0; transform: translateX(30px); }
  to { opacity: 1; transform: translateX(0); }
`,zr=bt`
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
`,Io=bt`
  0% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0px); }
`,Gc=bt`
  0% { transform: rotate(0deg) translateY(0) scaleY(1); opacity: 0; }
  20% { opacity: 0.5; }
  100% { transform: rotate(25deg) translateY(-260px) scaleY(1.2); opacity: 0; }
`,Xc=bt`
  0% { transform: rotate(-25deg) translateY(260px) scaleY(1.2); opacity: 0; }
  20% { opacity: 0.5; }
  100% { transform: rotate(0deg) translateY(0) scaleY(1); opacity: 0; }
`,Jc=bt`
  0% { stroke-dashoffset: 1000; }
  100% { stroke-dashoffset: 0; }
`,Zc=Q.div`
  min-height: 100vh;
  display: flex;
  overflow: hidden;
  
  @media (max-width: 768px) {
    flex-direction: column;
  }
`,ed=Q.div`
  flex: 1;
  background-image: linear-gradient(135deg, rgba(35, 92, 169, 0.85), rgba(13, 71, 161, 0.9)), url('/exhibition-background.jpg');
  background-size: cover;
  background-position: center;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  color: white;
  padding: 2rem;
  position: relative;
  overflow: hidden;
  animation: ${Yc} 0.8s ease-out forwards;
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);
  
  @media (max-width: 768px) {
    min-height: 200px;
  }
`,td=Q.div`
  position: absolute;
  width: 2px;
  height: 600px;
  background: linear-gradient(to bottom, transparent, rgba(255, 255, 255, ${t=>.1+t.index%3*.05}), transparent);
  left: ${t=>20+t.index*10}%;
  top: 0;
  z-index: 1;
  opacity: 0;
  transform-origin: top;
  animation: ${t=>t.isHovered?Gc:Xc} ${t=>1.5+t.index*.2}s ease-out;
  animation-delay: ${t=>t.index*.1}s;
  animation-fill-mode: forwards;
`,sd=Q.div`
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 2rem;
  background-color: #ffffff;
  animation: ${Kc} 0.8s ease-out forwards;
`,nd=Q.div`
  position: relative;
  width: 100%;
  height: 50px;
  display: flex;
  justify-content: center;
  align-items: center;
`,rd=Q.svg`
  width: 40px;
  height: 40px;
  
  .path {
    stroke: #1890ff;
    stroke-width: 2;
    fill: none;
    stroke-dasharray: 1000;
    stroke-dashoffset: 0;
    animation: ${Jc} 2s linear infinite;
  }
  
  .dot {
    fill: #1890ff;
    animation: ${zr} 2s ease-in-out infinite;
  }
`,id=Q.span`
  margin-left: 10px;
  animation: ${hs} 0.5s ease-out;
`,od=Q.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1;
`,ad=Q.div`
  position: relative;
  z-index: 2;
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
  max-width: 600px;
`,ld=Q.div`
  position: absolute;
  top: 25px;
  left: 30px;
  z-index: 10;
  display: flex;
  align-items: center;
  animation: ${hs} 0.8s ease-out forwards;
`,cd=Q.div`
  background-color: rgba(255, 255, 255, 0.9);
  border-radius: 8px;
  padding: 12px;
  display: flex;
  justify-content: center;
  align-items: center;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
  transition: all 0.3s ease;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
  }
`,dd=Q.img`
  width: 140px;
  height: auto;
  animation: ${Io} 6s ease-in-out infinite;
  filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.4));
`;Q.div({fontSize:"1.25rem",fontWeight:600,marginLeft:"14px",color:"#1a3e72",letterSpacing:"0.5px"});const ud=Q.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-bottom: 2.5rem;
  animation: ${hs} 0.8s ease-out forwards;
`,hd=Q.div`
  font-size: 2.5rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
  color: #ffffff;
  letter-spacing: 1px;
`,pd=Q(Co)`
  color: #ffffff !important;
  font-weight: 400 !important;
  text-align: center;
  margin-top: 0 !important;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
`,fd=Q(Wc)`
  color: rgba(255, 255, 255, 0.9) !important;
  font-size: 16px;
  line-height: 1.6;
  text-align: center;
  max-width: 500px;
  margin: 1.5rem auto 0;
`,gd=Q.div`
  width: 100%;
  max-width: 400px;
  animation: ${hs} 0.6s ease-out;
`,md=Q(ge)`
  height: 50px;
  border-radius: 8px;
  border: 1px solid #d9d9d9;
  background-color: #f8f8f8;
  transition: all 0.3s;
  
  &:hover, &:focus {
    background-color: white;
    border-color: #40a9ff;
    box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);
    transform: translateY(-2px);
  }
`,xd=Q(ge.Password)`
  height: 50px;
  border-radius: 8px;
  border: 1px solid #d9d9d9;
  background-color: #f8f8f8;
  transition: all 0.3s;
  
  &:hover, &:focus {
    background-color: white;
    border-color: #40a9ff;
    box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);
    transform: translateY(-2px);
  }
`,yd=Q(X)`
  height: 50px;
  border-radius: 8px;
  font-weight: 600;
  box-shadow: 0 2px 0 rgba(0, 0, 0, 0.045);
  transition: all 0.3s;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }
  
  &.success {
    animation: ${zr} 0.5s ease-in-out;
  }
`,bd=Q.div`
  margin-bottom: 2rem;
  text-align: center;
`,xs=Q(W.Item)`
  margin-bottom: 24px;
`,wd=Q.div`
  margin-top: 8px;
`,vd=Q.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
`,jd=Q(Ea)`
  .ant-checkbox-checked .ant-checkbox-inner {
    background-color: #1890ff;
    border-color: #1890ff;
  }
  
  .ant-checkbox-inner:hover {
    border-color: #1890ff;
  }
  
  .ant-checkbox-wrapper:hover .ant-checkbox-inner {
    border-color: #1890ff;
  }
`,Sd=Q.div`
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(82, 196, 26, 0.1);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 100;
  animation: ${hs} 0.3s ease-out;
  
  svg {
    font-size: 80px;
    color: #52c41a;
    animation: ${zr} 0.5s ease-in-out;
  }
`,ui=()=>s.jsxs(nd,{children:[s.jsxs(rd,{viewBox:"0 0 50 50",children:[s.jsx("path",{className:"path",d:"M10,10 L40,10 L40,40 L10,40 L10,10 Z M10,25 L40,25 M20,10 L20,40 M30,10 L30,40"}),s.jsx("circle",{className:"dot",cx:"15",cy:"15",r:"2"}),s.jsx("circle",{className:"dot",cx:"25",cy:"15",r:"2"}),s.jsx("circle",{className:"dot",cx:"35",cy:"15",r:"2"}),s.jsx("circle",{className:"dot",cx:"15",cy:"35",r:"2"}),s.jsx("circle",{className:"dot",cx:"25",cy:"35",r:"2"}),s.jsx("circle",{className:"dot",cx:"35",cy:"35",r:"2"})]}),s.jsx(id,{children:"Signing in..."})]}),kd=Q.div`
  position: absolute;
  width: ${t=>t.size}px;
  height: ${t=>t.size}px;
  background-color: rgba(255, 255, 255, 0.07);
  border-radius: 50%;
  animation: ${Io} ${t=>t.duration}s ease-in-out infinite;
  animation-delay: ${t=>t.delay}s;
  top: ${t=>t.top}%;
  left: ${t=>t.left}%;
  z-index: 1;
`,Ed=t=>{if(!t)return 0;const e=t.length>=8,n=/[A-Z]/.test(t),r=/[a-z]/.test(t),i=/\d/.test(t),o=/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/.test(t),d=[e,n,r,i,o];return d.filter(m=>m).length/d.length*100},Cd=t=>t<30?"#ff4d4f":t<60?"#faad14":t<80?"#1890ff":"#52c41a",Id=t=>t<30?"Weak":t<60?"Fair":t<80?"Good":"Strong",_d=["At least 8 characters long","Contains uppercase letters","Contains lowercase letters","Contains numbers","Contains special characters"],Rd=()=>{const t=dt(),e=ut(),[n,r]=u.useState(null),[i,o]=u.useState(!1),[d,p]=u.useState(!1),[m,h]=u.useState(""),[_,j]=u.useState(!1),f=Me(v=>v.auth.isAuthenticated),w=u.useRef(null),[A,T]=u.useState({x:0,y:0}),[P,S]=u.useState(!1),[N,C]=u.useState(!1),[a]=W.useForm(),[l,c]=u.useState("/logo.png"),[g,x]=u.useState("EXHIBITION MANAGER");u.useEffect(()=>{const v=localStorage.getItem("cachedLogoUrl"),$=localStorage.getItem("logoTimestamp"),z=new Date().getTime();if(v&&$&&z-parseInt($)<36e5)c(v);else{const V=`${H.defaults.baseURL}/public/logo`;c(V),localStorage.setItem("cachedLogoUrl",V),localStorage.setItem("logoTimestamp",z.toString());const L=new Image;L.src=V}fetch(`${H.defaults.baseURL}/public/site-info`).then(V=>V.json()).then(V=>{V.siteName&&x(V.siteName)}).catch(V=>{console.error("Error fetching site info:",V)})},[]),u.useEffect(()=>{const v=localStorage.getItem("rememberedUser");if(v)try{const z=JSON.parse(v);a.setFieldsValue({username:z.username,password:z.password,remember:!0})}catch{localStorage.removeItem("rememberedUser")}const $=localStorage.getItem("loginMessage");$&&(r({title:"Account Inactive",message:$}),localStorage.removeItem("loginMessage"))},[a]),u.useEffect(()=>{const v=setTimeout(()=>{S(!0)},100);return()=>clearTimeout(v)},[]),u.useEffect(()=>{f&&t("/dashboard")},[f,t]),u.useEffect(()=>{const v=$=>{if(w.current){const z=w.current.getBoundingClientRect(),V=$.clientX-z.left,L=$.clientY-z.top;V>=0&&V<=z.width&&L>=0&&L<=z.height&&T({x:V,y:L})}};return window.addEventListener("mousemove",v),()=>{window.removeEventListener("mousemove",v)}},[]);const E=async v=>{var $;try{r(null),o(!0);const z=await oo.login({username:v.username,password:v.password}),{user:V,token:L}=z.data;if(!V||!L)throw new Error("Invalid response from server");v.remember?(localStorage.setItem("rememberedUser",JSON.stringify({username:v.username,password:v.password})),localStorage.setItem("rememberUser","true")):(localStorage.removeItem("rememberedUser"),localStorage.removeItem("rememberUser")),p(!0),setTimeout(()=>{e(vl({user:V,token:L})),le.success("Login successful!"),t("/dashboard")},1200)}catch(z){console.error("Login Error:",z),console.error("Response Data:",($=z.response)==null?void 0:$.data);let V="Authentication Error",L="Invalid username or password.";if(z.response&&typeof z.response=="object"){const{status:F,data:U}=z.response;F===401?(V="Invalid Credentials",L="The username or password you entered is incorrect."):F===403?(V="Access Denied",L="You do not have permission to access this resource."):F===400?(V="Invalid Request",L="Please check your input and try again."):F===500&&(V="Server Error",L="A server error occurred. Please try again later."),U&&typeof U=="object"&&U.message&&(L=U.message)}else z.request?(V="Connection Error",L="Unable to connect to the server. Please check your internet connection."):z.message&&(L=z.message);r({title:V,message:L})}finally{o(!1)}},b=Ed(m),y=Cd(b),k=Id(b),I=localStorage.getItem("rememberUser")==="true";if(f)return s.jsxs("div",{style:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",background:"#f0f5ff"},children:[s.jsx(ui,{}),s.jsx(Xt,{style:{marginTop:16},children:"Redirecting to dashboard..."})]});const R=v=>{const $=[];for(let z=0;z<v;z++){const V=Math.random()*20+8,L=Math.random()*3,F=Math.random()*10+6,U=Math.random()*100,O=Math.random()*100;$.push(s.jsx(kd,{size:V,delay:L,duration:F,top:U,left:O,style:{transform:`translate(${A.x/50*(z%5-2)}px, ${A.y/50*(z%5-2)}px)`,opacity:N?0:1,transition:"opacity 0.5s ease-out",backgroundColor:"rgba(255, 255, 255, 0.07)"}},z))}return $},B=v=>{const $=[];for(let z=0;z<v;z++)$.push(s.jsx(td,{index:z,isHovered:N},z));return $},D=v=>{C(v)};return s.jsxs(Zc,{style:{opacity:P?1:0,transition:"opacity 0.3s ease-out"},children:[d&&s.jsx(Sd,{children:s.jsx(Ca,{})}),s.jsxs(ed,{onMouseEnter:()=>D(!0),onMouseLeave:()=>D(!1),children:[s.jsx(ld,{children:s.jsx(cd,{children:s.jsx(dd,{src:l,alt:"Exhibition Manager Logo",onError:()=>c("/logo.png")})})}),s.jsxs(od,{ref:w,children:[R(12),B(8)]}),s.jsxs(ad,{children:[s.jsx(ud,{children:s.jsx(hd,{children:g})}),s.jsx(pd,{level:4,children:"Your complete solution for managing exhibitions, stalls, and exhibitors"}),s.jsx(fd,{children:"Create floor plans, manage exhibitors, handle bookings, and generate invoices - all in one platform."})]})]}),s.jsx(sd,{children:s.jsxs(gd,{children:[s.jsxs(bd,{children:[s.jsx(Co,{level:2,style:{marginBottom:"0.5rem"},children:"Admin Login"}),s.jsx(Xt,{type:"secondary",children:"Enter your credentials to access the admin dashboard"})]}),n&&s.jsx(We,{message:n.title,description:n.message,type:"error",showIcon:!0,style:{marginBottom:24,borderRadius:8,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.05)"},action:s.jsx(X,{size:"small",type:"text",onClick:()=>r(null),children:"Dismiss"})}),s.jsxs(W,{form:a,name:"login",initialValues:{remember:I},onFinish:E,layout:"vertical",children:[s.jsx(xs,{name:"username",rules:[{required:!0,message:"Please input your username!"}],label:"Username",children:s.jsx(md,{prefix:s.jsx(Ae,{style:{color:"#bfbfbf"}}),placeholder:"Enter your username",disabled:i,autoComplete:"username"})}),s.jsx(xs,{name:"password",rules:[{required:!0,message:"Please input your password!"}],label:"Password",help:_&&s.jsxs(wd,{children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[s.jsx(Xt,{type:"secondary",children:"Password Strength:"}),s.jsx(Xt,{strong:!0,style:{color:y},children:k})]}),s.jsx(Ia,{percent:b,showInfo:!1,strokeColor:y,size:"small"}),s.jsx("div",{style:{marginTop:"8px"},children:s.jsx(xt,{title:s.jsx("ul",{style:{paddingLeft:"20px",margin:"0"},children:_d.map((v,$)=>s.jsx("li",{children:v},$))}),children:s.jsxs(Xt,{type:"secondary",style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[s.jsx(Qt,{style:{marginRight:"4px"}}),"Password requirements"]})})})]}),children:s.jsx(xd,{prefix:s.jsx(Lt,{style:{color:"#bfbfbf"}}),placeholder:"Enter your password",disabled:i,autoComplete:"current-password",onChange:v=>h(v.target.value),onFocus:()=>j(!0),onBlur:()=>j(!1)})}),s.jsx(vd,{children:s.jsx(xs,{name:"remember",valuePropName:"checked",noStyle:!0,children:s.jsx(jd,{children:"Remember me"})})}),s.jsx(xs,{children:i?s.jsx(ui,{}):s.jsx(yd,{type:"primary",htmlType:"submit",block:!0,className:d?"success":"",children:"Sign in"})})]})]})})]})};class yr extends Ie.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Error caught by boundary:",e,n)}render(){var e;return this.state.hasError?s.jsx(as,{status:"error",title:"Something went wrong",subTitle:((e=this.state.error)==null?void 0:e.message)||"An unexpected error occurred",extra:[s.jsx(X,{type:"primary",onClick:()=>window.location.href="/dashboard",children:"Go to Dashboard"},"home"),s.jsx(X,{onClick:()=>window.location.reload(),children:"Reload Page"},"reload")]}):this.props.children}}const gt={getExhibitions:()=>ft.get("/public/exhibitions"),getExhibition:t=>ft.get(`/public/exhibitions/${t}`),getLayout:t=>ft.get(`/public/exhibitions/${t}/layout`),getStallDetails:(t,e)=>ft.get(`/public/exhibitions/${t}/stalls/${e}`),bookStall:(t,e,n)=>ft.post(`/public/exhibitions/${t}/stalls/${e}/book`,n),bookMultipleStalls:(t,e)=>ft.post(`/public/exhibitions/${t}/stalls/book-multiple`,e),searchExhibitors:t=>ft.get("/public/exhibitors/search",{params:{query:t}}),exhibitorBookStalls:t=>H.post(`/exhibitor-bookings/${t.exhibitionId}`,t),getExhibitorBookings:()=>H.get("/exhibitor-bookings/my-bookings"),getExhibitorBooking:t=>H.get(`/exhibitor-bookings/${t}`),cancelExhibitorBooking:t=>H.patch(`/exhibitor-bookings/${t}/cancel`),getExhibitorBookingInvoice:t=>H.get(`/exhibitor-bookings/${t}/invoice`)},hi=({width:t,height:e,scale:n=1,position:r={x:0,y:0},isSelected:i=!1,onSelect:o=()=>{},onChange:d=()=>{},children:p,isEditable:m=!0})=>{const h=j=>{m&&(o(),j.cancelBubble=!0)},_=Ie.useMemo(()=>{const j=[];for(let w=0;w<=t;w+=5)j.push(s.jsx(Vs,{points:[w,0,w,e],stroke:"#e8e8e8",strokeWidth:1/n,dash:[5/n]},`v${w}`));for(let w=0;w<=e;w+=5)j.push(s.jsx(Vs,{points:[0,w,t,w],stroke:"#e8e8e8",strokeWidth:1/n,dash:[5/n]},`h${w}`));return j},[t,e,n]);return s.jsxs(Ut,{x:r.x,y:r.y,width:t,height:e,onClick:h,children:[s.jsx(Ks,{width:t,height:e,fill:"#ffffff",stroke:i&&m?"#1890ff":"#d9d9d9",strokeWidth:i&&m?2/n:1/n,shadowColor:"rgba(0,0,0,0.1)",shadowBlur:10/n,shadowOffset:{x:0,y:0},shadowOpacity:.5,cornerRadius:4/n}),s.jsx(Ut,{children:_}),s.jsx(kt,{text:`${t}m  ${e}m`,fontSize:14/n,fill:"#666666",x:5,y:5}),p]})},Td=({visible:t,width:e,height:n,onCancel:r,onSubmit:i})=>{const[o]=W.useForm();Ie.useEffect(()=>{t&&o.setFieldsValue({width:e,height:n})},[t,e,n,o]);const d=()=>{o.validateFields().then(p=>{i(p),o.resetFields()})};return s.jsx(st,{title:"Edit Exhibition Space",open:t,onCancel:()=>{o.resetFields(),r()},onOk:d,destroyOnClose:!0,children:s.jsxs(W,{form:o,layout:"vertical",initialValues:{width:e,height:n},children:[s.jsx(W.Item,{name:"width",label:"Width (meters)",rules:[{required:!0,message:"Please enter width"},{type:"number",min:10,message:"Width must be at least 10 meters"}],children:s.jsx(Ye,{min:10,max:1e3,style:{width:"100%"},placeholder:"Enter width in meters"})}),s.jsx(W.Item,{name:"height",label:"Height (meters)",rules:[{required:!0,message:"Please enter height"},{type:"number",min:10,message:"Height must be at least 10 meters"}],children:s.jsx(Ye,{min:10,max:1e3,style:{width:"100%"},placeholder:"Enter height in meters"})})]})})},_o=({hall:t,isSelected:e=!1,onSelect:n,onChange:r,scale:i=1,position:o={x:0,y:0},exhibitionWidth:d=100,exhibitionHeight:p=100,isStallMode:m=!1})=>{const h=Ie.useRef(null),_=Ie.useRef(null),j=Ie.useMemo(()=>{const S=[],{width:N,height:C}=t.dimensions,a=1;for(let l=0;l<=N;l+=a)S.push(s.jsx(Vs,{points:[l,0,l,C],stroke:"#ddd",strokeWidth:1/i,dash:[2/i,2/i],listening:!1},`v${l}`));for(let l=0;l<=C;l+=a)S.push(s.jsx(Vs,{points:[0,l,N,l],stroke:"#ddd",strokeWidth:1/i,dash:[2/i,2/i],listening:!1},`h${l}`));return S},[t.dimensions.width,t.dimensions.height,i]);Ie.useEffect(()=>{var S;e&&_.current&&h.current&&(_.current.nodes([h.current]),(S=_.current.getLayer())==null||S.batchDraw())},[e]);const f=S=>{S.cancelBubble=!0;const N=S.target,C=N.x(),a=N.y(),l=Math.max(0,Math.min(C,d-t.dimensions.width)),c=Math.max(0,Math.min(a,p-t.dimensions.height));N.x(Math.round(l)),N.y(Math.round(c))},w=S=>{S.cancelBubble=!0;const N=S.target,C=Math.max(0,Math.min(N.x(),d-t.dimensions.width)),a=Math.max(0,Math.min(N.y(),p-t.dimensions.height));r==null||r({...t,_id:t._id,id:t.id||t._id,exhibitionId:t.exhibitionId,dimensions:{...t.dimensions,x:Math.round(C),y:Math.round(a)}})},A=S=>{S.cancelBubble=!0},T=S=>{if(!h.current)return;const N=h.current,C=N.scaleX(),a=N.scaleY();N.scaleX(1),N.scaleY(1);const l=Math.round(N.width()*C),c=Math.round(N.height()*a),g=N.x(),x=N.y(),E=Math.max(0,Math.min(g,d-l)),b=Math.max(0,Math.min(x,p-c));r==null||r({...t,_id:t._id,id:t.id||t._id,exhibitionId:t.exhibitionId,dimensions:{x:E,y:b,width:Math.max(5,Math.min(l,d-E)),height:Math.max(5,Math.min(c,p-b))}})},P=S=>{S.cancelBubble=!0,n==null||n(t)};return s.jsxs(Ut,{ref:h,x:t.dimensions.x,y:t.dimensions.y,width:t.dimensions.width,height:t.dimensions.height,draggable:!m&&!!r,onClick:P,onTap:P,onDragStart:A,onDragMove:f,onDragEnd:w,onTransformEnd:T,children:[s.jsx(Ks,{width:t.dimensions.width,height:t.dimensions.height,fill:"#ffffff",stroke:e?"#1890ff":"#d9d9d9",strokeWidth:e?2/i:1/i,shadowColor:"rgba(0,0,0,0.1)",shadowBlur:5/i,shadowOffset:{x:2/i,y:2/i},shadowOpacity:.5}),s.jsx(Ut,{children:j}),s.jsx(kt,{text:t.name,fontSize:14/i,fill:"#000000",width:t.dimensions.width,align:"center",y:t.dimensions.height/2-7/i})]})},Ad=t=>{if(!t)return"";const e=window.location.origin,n=t.replace(/^\/?(api\/uploads\/)?/,"");if(n.includes("fixtures/"))return`${e}/api/uploads/${n}`;const r=localStorage.getItem("token");return r?`${e}/api/uploads/${n}?token=${r}`:""},Ro=({fixture:t,isSelected:e=!1,onSelect:n,onChange:r,scale:i=1,position:o={x:0,y:0},exhibitionWidth:d=100,exhibitionHeight:p=100,isEditable:m=!0})=>{const h=Ie.useRef(null),_=Ie.useRef(null),[j,f]=u.useState("");u.useEffect(()=>{if(t.icon){const c=Ad(t.icon);f(c)}else f("")},[t.icon]);const[w]=sl(j);Ie.useEffect(()=>{var c;e&&_.current&&h.current&&(_.current.nodes([h.current]),(c=_.current.getLayer())==null||c.batchDraw())},[e]);const A=c=>{c.cancelBubble=!0},T=c=>{c.cancelBubble=!0;const g=c.target,x=g.x(),E=g.y(),b=Math.max(0,Math.min(x,d-t.dimensions.width)),y=Math.max(0,Math.min(E,p-t.dimensions.height));g.x(Math.round(b)),g.y(Math.round(y))},P=c=>{c.cancelBubble=!0;const g=c.target,x=g.x(),E=g.y(),b=Math.max(0,Math.min(x,d-t.dimensions.width)),y=Math.max(0,Math.min(E,p-t.dimensions.height)),k=t._id||t.id;r==null||r({...t,_id:k,id:k,exhibitionId:t.exhibitionId,position:{x:Math.round(b),y:Math.round(y)}})},S=c=>{if(!h.current)return;const g=h.current,x=g.scaleX(),E=g.scaleY(),b=g.rotation();g.scaleX(1),g.scaleY(1);const y=Math.round(t.dimensions.width*x),k=Math.round(t.dimensions.height*E),I=g.x(),R=g.y(),B=Math.max(0,Math.min(I,d-y)),D=Math.max(0,Math.min(R,p-k)),v=t._id||t.id;r==null||r({...t,_id:v,id:v,exhibitionId:t.exhibitionId,position:{x:B,y:D},dimensions:{width:Math.max(.5,Math.min(y,d-B)),height:Math.max(.5,Math.min(k,p-D))},rotation:b})},N=c=>{c.cancelBubble=!0,n==null||n(t)},C=()=>{const c=t.borderColor||(e?"#1890ff":"#d9d9d9"),g=t.borderRadius!==void 0?t.borderRadius/i:3/i;return w?s.jsx(rl,{image:w,width:t.dimensions.width,height:t.dimensions.height,fill:t.color||"#ffffff",stroke:c,strokeWidth:e?2/i:1/i,cornerRadius:g,shadowColor:"rgba(0,0,0,0.1)",shadowBlur:5/i,shadowOffset:{x:2/i,y:2/i},shadowOpacity:.5}):s.jsx(Ks,{width:t.dimensions.width,height:t.dimensions.height,fill:t.color||"#f0f2f5",stroke:c,strokeWidth:e?2/i:1/i,cornerRadius:g,shadowColor:"rgba(0,0,0,0.1)",shadowBlur:5/i,shadowOffset:{x:2/i,y:2/i},shadowOpacity:.5})},a=(c,g)=>`${Math.round(c)} m x ${Math.round(g)} m`,l=(c,g)=>{const x=Math.min(c,g)*.12,E=8/i,b=16/i;return Math.max(E,Math.min(b,x))};return s.jsxs(s.Fragment,{children:[s.jsxs(Ut,{ref:h,x:t.position.x,y:t.position.y,width:t.dimensions.width,height:t.dimensions.height,rotation:t.rotation||0,draggable:m&&!!r,onClick:N,onTap:N,onDragStart:A,onDragMove:T,onDragEnd:P,onTransformEnd:S,children:[C(),w&&t.name&&t.showName!==!1&&s.jsx(kt,{text:t.name,fontSize:12/i,fill:"#000000",width:t.dimensions.width,align:"center",y:-16/i}),!w&&s.jsxs(s.Fragment,{children:[t.name&&s.jsx(kt,{text:t.name,fontSize:l(t.dimensions.width,t.dimensions.height),fill:"#333333",fontStyle:"bold",width:t.dimensions.width,height:t.dimensions.height*.6,align:"center",verticalAlign:"middle",wrap:"word",x:0,y:t.dimensions.height*.2}),s.jsx(kt,{text:a(t.dimensions.width,t.dimensions.height),fontSize:l(t.dimensions.width,t.dimensions.height)*.8,fill:"#666666",width:t.dimensions.width,align:"center",x:0,y:t.dimensions.height*.75})]})]}),e&&m&&s.jsx(nl,{ref:_,rotateEnabled:!0,enabledAnchors:["top-left","top-right","bottom-left","bottom-right"],boundBoxFunc:(c,g)=>g.width<.5||g.height<.5?c:g})]})},Pd=({visible:t,x:e,y:n,onExhibitionClick:r,onHallClick:i,onStallClick:o,onFixtureClick:d,onClose:p})=>{if(!t)return null;const m=[{key:"exhibition",icon:s.jsx(Tr,{}),label:"Exhibition Space",onClick:()=>{r(),p()}},{key:"hall",icon:s.jsx(Ar,{}),label:"Add Hall",onClick:()=>{i(),p()}}];return o&&m.push({key:"stall",icon:s.jsx(tt,{}),label:"Add Stall",onClick:()=>{o(),p()}}),d&&m.push({key:"fixture",icon:s.jsx(Zi,{}),label:"Add Fixture",onClick:()=>{d(),p()}}),s.jsx("div",{style:{position:"fixed",top:n,left:e,zIndex:1e3,boxShadow:"0 2px 8px rgba(0,0,0,0.15)",borderRadius:"4px",backgroundColor:"#fff",width:"200px"},children:s.jsx(ds,{items:m})})},Nd=({stall:t,isSelected:e=!1,onSelect:n,onChange:r,hallWidth:i=0,hallHeight:o=0,hallX:d=0,hallY:p=0,scale:m=1,isDragging:h=!1})=>{var B,D;const _=u.useRef(null),[j,f]=u.useState(!1),[w,A]=u.useState(!1),[T,P]=u.useState(!1);u.useEffect(()=>{P(window.innerWidth<768);const v=()=>{P(window.innerWidth<768)};return window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]),u.useEffect(()=>{if(j&&!h)A(!0);else if(h)A(!1);else{const v=setTimeout(()=>{A(!1)},100);return()=>clearTimeout(v)}},[j,h]),u.useEffect(()=>{if(j&&_.current&&!h){if(T&&!e)return;_.current.getStage()&&_.current.moveToTop()}},[j,e,T,h]);const S=e||t.isSelected,N=u.useCallback(v=>{switch(v){case"available":return"#52c41a";case"booked":return"#faad14";case"reserved":return"#1890ff";default:return"#d9d9d9"}},[]),C=u.useCallback(v=>{switch(v){case"available":return"rgba(82, 196, 26, 0.2)";case"booked":return"rgba(250, 173, 20, 0.2)";case"reserved":return"rgba(24, 144, 255, 0.2)";default:return"rgba(217, 217, 217, 0.2)"}},[]),a=u.useCallback(v=>{v.cancelBubble=!0;const $=v.target,z=$.x()-d,V=$.y()-p,L=Math.max(0,Math.min(z,i-t.dimensions.width)),F=Math.max(0,Math.min(V,o-t.dimensions.height));$.x(Math.round(L+d)),$.y(Math.round(F+p))},[d,p,i,o,t.dimensions.width,t.dimensions.height]),l=u.useCallback(v=>{if(v.cancelBubble=!0,!r)return;const $=v.target,z=$.x()-d,V=$.y()-p,L=Math.max(0,Math.min(z,i-t.dimensions.width)),F=Math.max(0,Math.min(V,o-t.dimensions.height));r({...t,id:t.id||t._id,_id:t._id||t.id,dimensions:{...t.dimensions,x:Math.round(L),y:Math.round(F)}})},[r,d,p,i,o,t]),c=u.useCallback(v=>{v.cancelBubble=!0},[]),g=u.useCallback(v=>{v.cancelBubble=!0,n&&!h&&n()},[n,h]),x=u.useCallback(()=>{T&&!S||h||f(!0)},[T,S,h]),E=u.useCallback(()=>{f(!1)},[]),b={x:0,y:0,width:10,height:10},y=t.dimensions||b,k=t.typeName||((B=t.stallType)==null?void 0:B.name)||(typeof t.stallTypeId=="object"?(D=t.stallTypeId)==null?void 0:D.name:null)||"Standard";t.ratePerSqm*y.width*y.height;const I=0,R=u.useMemo(()=>t.status!=="available"&&t.companyName?`${k} - ${y.width}${y.height}m - ${t.companyName}`:`${k} - ${y.width}${y.height}m`,[k,y.width,y.height,t.status,t.companyName]);return s.jsxs(Ut,{ref:_,x:y.x+d,y:y.y+p,width:y.width,height:y.height,draggable:!!r,onClick:g,onTap:g,onDragStart:c,onDragMove:a,onDragEnd:l,opacity:t.status==="available"?1:.7,cursor:t.status==="available"?"pointer":"default",onMouseEnter:x,onMouseLeave:E,listening:h?!1:!T||t.status==="available",transformsEnabled:h||T?"position":"all",children:[s.jsx(Ks,{width:y.width,height:y.height,fill:S?"rgba(24, 144, 255, 0.1)":C(t.status),stroke:S?"#1890ff":N(t.status),strokeWidth:S?2/m:1/m,shadowColor:"rgba(0,0,0,0.1)",shadowBlur:h?0:T?2:3,shadowOffset:{x:1,y:1},shadowOpacity:h?0:.3,rotation:I,perfectDrawEnabled:!h,transformsEnabled:h?"position":"all",cornerRadius:.05}),s.jsx(kt,{text:t.number,fontSize:Math.min(y.width,y.height)*.25,fill:"#000000",width:y.width,height:y.height,align:"center",verticalAlign:"middle",transformsEnabled:"position",perfectDrawEnabled:!h,fontStyle:"bold",listening:!1}),S&&!h&&s.jsx(il,{x:y.width-2,y:2,radius:Math.min(.8,y.width*.05),fill:"#1890ff",stroke:"#ffffff",strokeWidth:.2/m,transformsEnabled:"position",listening:!1}),w&&!h&&s.jsxs(ol,{x:y.width/2,y:0,opacity:1,listening:!1,children:[s.jsx(al,{fill:"rgba(0, 0, 0, 1.0)",cornerRadius:.5,pointerDirection:"down",pointerWidth:4,pointerHeight:2,lineJoin:"round",y:-7,listening:!1}),s.jsx(kt,{text:R,fontSize:1.2,fill:"#ffffff",align:"center",padding:2,y:-7,offsetY:0,width:Math.max(R.length*.7,25),height:3,verticalAlign:"middle",listening:!1})]})]})},To=u.memo(Nd),Dd=({width:t,height:e,exhibitionWidth:n=100,exhibitionHeight:r=100,halls:i=[],stalls:o=[],fixtures:d=[],selectedHall:p=null,selectedFixture:m=null,onSelectHall:h=()=>{},onSelectFixture:_=()=>{},onHallChange:j=()=>{},onFixtureChange:f=()=>{},onExhibitionChange:w=()=>{},onAddHall:A=()=>{},onAddStall:T=()=>{},onAddFixture:P=()=>{},children:S,isStallMode:N=!1,isFixtureMode:C=!1,isPublicView:a=!1})=>{const l=u.useRef(null),c=u.useRef(null),g=u.useRef(null),[x,E]=u.useState(1),[b,y]=u.useState({x:0,y:0}),[k,I]=u.useState(!1),[R,B]=u.useState(!1),[D,v]=u.useState({visible:!1,x:0,y:0}),[$,z]=u.useState(!1),[V,L]=u.useState(!1),[F,U]=u.useState(!1),[O,q]=u.useState(void 0);u.useEffect(()=>{const K=()=>{U(window.innerWidth<768)};return K(),window.addEventListener("resize",K),()=>{window.removeEventListener("resize",K)}},[]);const G=u.useCallback(K=>{if(K.evt.preventDefault(),!l.current)return;const te=l.current,he=x,Z=te.getPointerPosition(),Re={x:(Z.x-te.x())/he,y:(Z.y-te.y())/he},$e=1.15,Oe=K.evt.deltaY<0?he*$e:he/$e,wt=Math.min(Math.max(.1,Oe),20),Yt={x:Z.x-Re.x*wt,y:Z.y-Re.y*wt};E(wt),y(Yt)},[x]),Y=u.useCallback(()=>{if(!l.current)return;const K=l.current,te=Math.min(x*1.15,20),he=K.width()/2,Z=K.height()/2,Re={x:(he-b.x)/x,y:(Z-b.y)/x},$e={x:he-Re.x*te,y:Z-Re.y*te};E(te),y($e)},[x,b]),pe=u.useCallback(()=>{if(!l.current)return;const K=l.current,te=Math.max(x/1.15,.1),he=K.width()/2,Z=K.height()/2,Re={x:(he-b.x)/x,y:(Z-b.y)/x},$e={x:he-Re.x*te,y:Z-Re.y*te};E(te),y($e)},[x,b]),we=u.useCallback(K=>{K?(q(nn.pixelRatio),nn.pixelRatio=F?.8:1):O&&(nn.pixelRatio=O)},[O,F]),oe=u.useCallback(K=>{if(K.target===l.current&&(v({...D,visible:!1}),B(!0),we(!0),c.current)){if(a){const te=F?{x:-10,y:-10,width:t+20,height:e+20}:void 0;c.current.cache(te)}if(c.current.hitGraphEnabled(!1),a&&l.current){const te=l.current.container();te.style.cursor="grabbing",te.classList.add("dragging"),l.current.batchDraw(),c.current.getChildren().forEach(Z=>{if(Z.shadowForStrokeEnabled&&(Z._savedShadowForStroke=Z.shadowForStrokeEnabled(),Z.shadowForStrokeEnabled(!1)),Z.perfectDrawEnabled&&(Z._savedPerfectDraw=Z.perfectDrawEnabled(),Z.perfectDrawEnabled(!1)),Z.cache&&!Z.isCached&&Z.width&&Z.height){Z._dragCached=!0;try{F?Z.cache({offset:10,pixelRatio:.8}):Z.cache()}catch{Z._dragCached=!1}}})}}},[D,a,we,F,t,e]),ee=u.useCallback(K=>{if(a&&K.target===l.current){if(K.evt&&K.evt._dragSkipUpdate)return;if(K.evt&&(K.evt._dragSkipUpdate=!0),l.current&&c.current){const te=F?.85:.7;Math.random()>te&&l.current.batchDraw()}return}K.target===l.current&&F&&c.current&&(K.cancelBubble=!0)},[F,a]),de=u.useCallback(K=>{if(K.target===l.current){if(y({x:K.target.x(),y:K.target.y()}),we(!1),c.current&&(c.current.hitGraphEnabled(!0),a&&c.current.clearCache(),a&&l.current)){const te=l.current.container();te.style.cursor="",te.classList.remove("dragging"),c.current.getChildren().forEach(Z=>{Z._savedShadowForStroke!==void 0&&(Z.shadowForStrokeEnabled(Z._savedShadowForStroke),delete Z._savedShadowForStroke),Z._savedPerfectDraw!==void 0&&(Z.perfectDrawEnabled(Z._savedPerfectDraw),delete Z._savedPerfectDraw),Z._dragCached&&(Z.clearCache(),delete Z._dragCached)})}setTimeout(()=>{l.current&&l.current.batchDraw()},50),B(!1)}},[a,we]),Te=u.useCallback(()=>{I(!0),document.body.style.cursor=R?"grabbing":"grab"},[R]),M=u.useCallback(()=>{I(!1),document.body.style.cursor="default"},[]),J=K=>{var he,Z,Re;const te=K.target.getClassName();if(te==="Stage"||te==="Layer"){v({...D,visible:!1});return}if(te==="Group"||te==="Rect"){if(h(null),_(null),C){v({...D,visible:!1});return}const $e=(he=l.current)==null?void 0:he.getPointerPosition();if($e&&ae($e)){const{x:Oe,y:wt}=$e,{x:Yt,y:Xo}=((Z=l.current)==null?void 0:Z.position())||{x:0,y:0},{x:Jo,y:Zo}=((Re=l.current)==null?void 0:Re.scale())||{x:1,y:1},ea=(Oe-Yt)/Jo,ta=(wt-Xo)/Zo;v({x:ea,y:ta,visible:!0})}else v({...D,visible:!1})}else v({...D,visible:!1})},ae=K=>{if(!n||!r||!l.current)return!1;const{x:te,y:he}=K,{x:Z,y:Re}=l.current.position(),{x:$e}=l.current.scale(),Oe={x:(te-Z)/$e,y:(he-Re)/$e};return Oe.x>=0&&Oe.x<=n&&Oe.y>=0&&Oe.y<=r},je=u.useCallback(()=>{h(null),_(null),z(!0),L(!0),v({...D,visible:!1})},[h,_,D]),ke=u.useCallback(K=>{w(K),L(!1)},[w]),Be=()=>{z(!0),L(!0),v({...D,visible:!1})},Wt=()=>{A(),v({...D,visible:!1})},It=()=>{T(),v({...D,visible:!1})};u.useEffect(()=>{if(t>0&&e>0&&n>0&&r>0){const K=N?20:40,te=t-K*2,he=e-K*2,Z=te/n,Re=he/r,Oe=Math.min(Z,Re),wt=(t-n*Oe)/2,Yt=(e-r*Oe)/2;E(Oe),y({x:wt,y:Yt}),l.current&&l.current.batchDraw()}},[t,e,n,r,N]);const ht=Ie.Children.map(S,K=>Ie.isValidElement(K)?Ie.cloneElement(K,{scale:x,position:b}):K),Go=s.jsx(hi,{width:n,height:r,scale:x,position:{x:0,y:0},isSelected:!1,onSelect:void 0,onChange:void 0,isEditable:!1});return t<=0||e<=0||n<=0||r<=0?s.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"#fafafa"},children:"Loading..."}):s.jsxs("div",{style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",background:"#fafafa",cursor:k?R?"grabbing":"grab":"default"},children:[s.jsx("div",{style:{position:"absolute",top:16,right:16,zIndex:1,display:"flex",gap:"8px"},children:s.jsxs(ue,{style:{background:"rgba(255, 255, 255, 0.9)",padding:"8px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",backdropFilter:"blur(8px)"},children:[s.jsx(X,{icon:s.jsx(_a,{}),onClick:pe,disabled:x<=.1,style:{borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center"}}),s.jsxs("div",{style:{padding:"0 8px",fontSize:"14px",color:"#666",userSelect:"none"},children:[Math.round(x*100),"%"]}),s.jsx(X,{icon:s.jsx(Ra,{}),onClick:Y,disabled:x>=20,style:{borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center"}})]})}),s.jsxs(ll,{ref:l,width:t,height:e,onClick:J,draggable:!0,onDragStart:oe,onDragMove:ee,onDragEnd:de,onMouseEnter:Te,onMouseLeave:M,onWheel:G,x:b.x,y:b.y,scaleX:x,scaleY:x,perfectDrawEnabled:!R&&!a,hitGraphEnabled:!R,pixelRatio:R?F?.8:1:Math.min(1.5,window.devicePixelRatio||1),dragDistance:a?F?5:3:0,children:[a&&s.jsx(cl,{ref:g,listening:!1,children:Go}),s.jsxs(dl,{ref:c,imageSmoothingEnabled:!R||!a,children:[!a&&s.jsx(hi,{width:n,height:r,scale:x,position:{x:0,y:0},isSelected:$,onSelect:C?void 0:je,onChange:N||C?void 0:w,isEditable:!N&&!C}),i.map(K=>s.jsx(_o,{hall:K,isSelected:(p==null?void 0:p.id)===K.id,onSelect:()=>h(K),onChange:N||C?void 0:j,scale:x,position:{x:0,y:0},exhibitionWidth:n,exhibitionHeight:r,isStallMode:N||C},K._id||K.id)),o.map(K=>{const te=K._id||K.id,he=i.find(Z=>Z.id===K.hallId||Z._id===K.hallId);return he?s.jsx(To,{stall:{...K,_id:te,id:te},hallX:he.dimensions.x,hallY:he.dimensions.y,hallWidth:he.dimensions.width,hallHeight:he.dimensions.height,scale:x,isDragging:R&&a},te):null}),[...d].sort((K,te)=>(K.zIndex||1)-(te.zIndex||1)).map(K=>{const te=K._id||K.id,Z=((m==null?void 0:m._id)||(m==null?void 0:m.id))===te;return s.jsx(Ro,{fixture:{...K,_id:te,id:te},isSelected:Z,onSelect:()=>_(K),onChange:C?f:void 0,scale:x,position:{x:0,y:0},exhibitionWidth:n,exhibitionHeight:r,isEditable:C},te)}),ht]})]}),s.jsx(Pd,{visible:D.visible,x:D.x,y:D.y,onExhibitionClick:Be,onHallClick:Wt,onStallClick:It,onClose:()=>v({...D,visible:!1})}),s.jsx(Td,{visible:V,width:n,height:r,onCancel:()=>L(!1),onSubmit:ke})]})},Ao={getStallTypes:async()=>H.get("/stall-types"),createStallType:async t=>H.post("/stall-types",t),updateStallType:async(t,e)=>H.put(`/stall-types/${t}`,e),deleteStallType:async t=>H.delete(`/stall-types/${t}`)},Fp=Object.freeze(Object.defineProperty({__proto__:null,default:Ao},Symbol.toStringTag,{value:"Module"})),{Title:$d}=Pe,Mp=({visible:t,stall:e,hall:n,exhibition:r,onCancel:i,onSubmit:o,onDelete:d})=>{const[p]=W.useForm(),[m,h]=u.useState([]),[_,j]=u.useState(!1),f=(S,N,C,a,l)=>{const g=[...C].sort((E,b)=>{const y=Math.floor(E.dimensions.y/5),k=Math.floor(b.dimensions.y/5);return y===k?E.dimensions.x-b.dimensions.x:E.dimensions.y-b.dimensions.y}),x=(E,b)=>E+S>a||b+N>l?!1:!g.some(y=>{const k=y.dimensions.x,I=y.dimensions.y,R=y.dimensions.width,B=y.dimensions.height,D=1;return!(E+S+D<=k||E>=k+R+D||b+N+D<=I||b>=I+B+D)});for(const E of g){const b=E.dimensions.x+E.dimensions.width+1,y=E.dimensions.y;if(x(b,y))return{x:b,y};const k=E.dimensions.x,I=E.dimensions.y+E.dimensions.height+1;if(x(k,I))return{x:k,y:I}}for(let E=0;E<l;E+=5)for(let b=0;b<a;b+=5)if(x(b,E))return{x:b,y:E};return{x:0,y:0}};u.useEffect(()=>{if(e){console.log("Setting form values for stall:",e);const S={number:e.number,stallTypeId:e.stallTypeId,width:e.dimensions.width,height:e.dimensions.height,ratePerSqm:e.ratePerSqm,status:e.status};console.log("Form values to set:",S),p.setFieldsValue(S)}else n&&!p.getFieldValue("status")&&p.setFieldsValue({status:"available",width:Math.min(20,n.dimensions.width/4),height:Math.min(20,n.dimensions.height/4),ratePerSqm:0})},[e,n,p]),u.useEffect(()=>{t&&(async()=>{var N;try{j(!0);const C=await Ao.getStallTypes();console.log("Fetched stall types:",C.data);const a=((N=r.stallRates)==null?void 0:N.map(c=>c.stallTypeId))||[];console.log("Configured stall type IDs:",a);const l=C.data.filter(c=>c.status==="active"&&c._id&&a.includes(c._id));console.log("Filtered stall types:",l),h(l)}catch(C){console.error("Failed to fetch stall types:",C)}finally{j(!1)}})()},[t,r.stallRates]);const w=S=>{var C;console.log("Stall type changed to:",S);const N=(C=r.stallRates)==null?void 0:C.find(a=>a.stallTypeId===S);console.log("Found stall rate:",N),N&&p.setFieldsValue({ratePerSqm:N.rate})},A=()=>{p.resetFields(),i()},T=()=>{if(console.log("Hall data:",n),!n||!n._id&&!n.id){le.error("Invalid hall selected. Please try again.");return}p.validateFields().then(S=>{var l;const N=n._id||n.id;if(!N){le.error("Hall ID is missing. Please select a hall again.");return}const C=e?{x:e.dimensions.x,y:e.dimensions.y}:f(S.width,S.height,((l=r.stalls)==null?void 0:l.filter(c=>c.hallId===N))||[],n.dimensions.width,n.dimensions.height),a={id:e==null?void 0:e.id,_id:e==null?void 0:e._id,number:S.number,stallTypeId:S.stallTypeId,dimensions:{x:C.x,y:C.y,width:S.width,height:S.height},ratePerSqm:S.ratePerSqm,status:S.status,hallId:N};console.log("Submitting stall data:",a),o(a)})},P=S=>{switch(S){case"available":return"#52c41a";case"booked":return"#faad14";case"reserved":return"#1890ff";default:return"#d9d9d9"}};return s.jsx(s.Fragment,{children:s.jsx(st,{title:s.jsxs(ue,{children:[s.jsx(tt,{style:{fontSize:"20px"}}),s.jsx($d,{level:4,style:{margin:0},children:e?"Edit Stall":"Add Stall"})]}),open:t,onCancel:A,destroyOnClose:!0,forceRender:!0,width:480,centered:!0,footer:[s.jsxs(ue,{size:"middle",children:[e&&d&&s.jsx(X,{danger:!0,icon:s.jsx(Ot,{}),onClick:()=>d(e),children:"Delete"}),s.jsx(X,{onClick:A,children:"Cancel"}),s.jsx(X,{type:"primary",onClick:T,children:e?"Save Changes":"Create"})]},"footer-buttons")],children:s.jsxs(W,{form:p,layout:"vertical",preserve:!1,requiredMark:"optional",style:{padding:"12px 0"},children:[s.jsx(W.Item,{name:"number",label:"Stall Number",rules:[{required:!0,message:"Please enter stall number"}],children:s.jsx(ge,{placeholder:"Enter stall number",size:"large",style:{borderRadius:"6px"}})}),s.jsx(W.Item,{name:"stallTypeId",label:"Stall Type",rules:[{required:!0,message:"Please select stall type"}],children:s.jsx(Je,{loading:_,placeholder:"Select stall type",size:"large",onChange:w,children:m.map(S=>s.jsx(Je.Option,{value:S._id,children:S.name},S._id))})}),s.jsx(De,{orientation:"left",plain:!0,style:{margin:"24px 0"},children:"Dimensions"}),s.jsxs(ue,{style:{width:"100%",gap:"16px"},children:[s.jsx(W.Item,{name:"width",label:"Width (meters)",rules:[{required:!0,message:"Please enter width"},{type:"number",min:1,message:"Width must be at least 1 meter"},{type:"number",max:(n==null?void 0:n.dimensions.width)||100,message:"Width cannot exceed hall width"}],style:{flex:1},children:s.jsx(Ye,{min:1,max:(n==null?void 0:n.dimensions.width)||100,style:{width:"100%"},size:"large",placeholder:"Width",addonAfter:"m"})}),s.jsx(W.Item,{name:"height",label:"Height (meters)",rules:[{required:!0,message:"Please enter height"},{type:"number",min:1,message:"Height must be at least 1 meter"},{type:"number",max:(n==null?void 0:n.dimensions.height)||100,message:"Height cannot exceed hall height"}],style:{flex:1},children:s.jsx(Ye,{min:1,max:(n==null?void 0:n.dimensions.height)||100,style:{width:"100%"},size:"large",placeholder:"Height",addonAfter:"m"})})]}),s.jsx(De,{orientation:"left",plain:!0,style:{margin:"24px 0"},children:"Details"}),s.jsx(W.Item,{name:"ratePerSqm",label:"Rate per sq.m ()",rules:[{required:!0,message:"Please select a stall type to set the rate"}],children:s.jsx(Ye,{min:0,style:{width:"100%"},size:"large",placeholder:"Rate will be set based on stall type",prefix:"",disabled:!0,formatter:S=>`${S}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:S=>{const N=S?Number(S.replace(/\\s?|(,*)/g,"")):0;return isNaN(N)?0:N}})}),s.jsx(W.Item,{name:"status",label:"Status",rules:[{required:!0,message:"Please select status"}],children:s.jsxs(Je,{placeholder:"Select status",size:"large",style:{borderRadius:"6px"},children:[s.jsx(Je.Option,{value:"available",children:s.jsxs(ue,{children:[s.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:P("available")}}),"Available"]})}),s.jsx(Je.Option,{value:"booked",children:s.jsxs(ue,{children:[s.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:P("booked")}}),"Booked"]})}),s.jsx(Je.Option,{value:"reserved",children:s.jsxs(ue,{children:[s.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:P("reserved")}}),"Reserved"]})})]})})]})})})},pi=t=>{if(!t)return"";const e=window.location.origin,n=t.replace(/^\/?(api\/uploads\/)?/,"");if(n.includes("fixtures/"))return`${e}/api/uploads/${n}`;const r=localStorage.getItem("token");return r?`${e}/api/uploads/${n}?token=${r}`:""},Ld=({name:t,type:e,color:n,rotation:r,showName:i,iconUrl:o,defaultIcons:d,borderColor:p=null,borderRadius:m=0})=>{u.useEffect(()=>{console.log("FixturePreview rendering with props:",{name:t,type:e,color:n,rotation:r,showName:i,iconUrl:o,defaultIconAvailable:!!d[e],borderColor:p,borderRadius:m})},[t,e,n,r,i,o,d,p,m]);const h=d[e]||"";return s.jsxs("div",{style:{padding:"24px",textAlign:"center",backgroundColor:"#fafafa",borderBottom:"1px solid #f0f0f0",borderRadius:"8px 8px 0 0"},children:[s.jsx("div",{style:{display:"inline-flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"120px",height:"120px",borderRadius:`${m||4}px`,backgroundColor:n||"#f0f0f0",transform:`rotate(${r}deg)`,transition:"all 0.3s ease",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",overflow:"hidden",position:"relative",border:p?`1px solid ${p}`:"1px solid rgba(0,0,0,0.05)"},children:o?s.jsx("img",{src:o,alt:t,style:{width:"100%",height:"100%",objectFit:"contain",padding:"8px"}}):s.jsx("div",{style:{fontSize:"48px",lineHeight:"1",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:h})}),i&&s.jsx("div",{style:{marginTop:"12px",fontSize:"16px",fontWeight:500,color:"#333"},children:t}),s.jsxs("div",{style:{marginTop:"4px",fontSize:"14px",color:"#888",display:"flex",gap:"8px",justifyContent:"center",alignItems:"center"},children:[s.jsx("span",{children:e.charAt(0).toUpperCase()+e.slice(1)}),s.jsx("span",{children:""}),s.jsx("span",{children:n}),r>0&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsxs("span",{children:[r,""]})]}),p&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsxs("span",{children:["Border: ",p]})]}),m>0&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsxs("span",{children:["Radius: ",m,"px"]})]})]})]})},{Text:Fd}=Pe,hn=({activeKey:t,form:e,fixture:n,exhibitionWidth:r,exhibitionHeight:i,selectedType:o,showName:d,iconFileList:p,fixtureTypes:m,fixtureIcons:h,defaultColors:_,defaultDimensions:j,colorPresets:f,uploadProps:w,iconPreviewVisible:A=!1,previewImage:T="",onTypeChange:P,onColorChange:S,onShowNameChange:N,onIconPreviewCancel:C=()=>{}})=>{switch(t){case"basic":return a();case"position":return l();case"appearance":return c();default:return a()}function a(){return s.jsxs("div",{className:"tab-content",children:[s.jsx(W.Item,{name:"name",label:"Fixture Name",rules:[{required:!0,message:"Please enter fixture name"}],children:s.jsx(ge,{placeholder:"Enter fixture name",prefix:s.jsx(Qt,{style:{color:"#aaa"}}),style:{borderRadius:"8px"}})}),s.jsx(W.Item,{name:"showName",label:"Show Name on Layout",tooltip:"Toggle whether the fixture name appears on the layout",valuePropName:"checked",children:s.jsx(Aa,{defaultChecked:!0,checkedChildren:"Visible",unCheckedChildren:"Hidden",onChange:g=>{N(g),console.log("Form values after showName toggle:",e.getFieldsValue(!0))}})}),s.jsx(W.Item,{name:"type",label:"Fixture Type",rules:[{required:!0,message:"Please select fixture type"}],children:s.jsx(Je,{placeholder:"Select fixture type",onChange:P,options:m.map(g=>({...g,label:s.jsxs(ue,{children:[s.jsx("span",{style:{fontSize:16},children:h[g.value]}),s.jsx("span",{children:g.label})]})})),style:{width:"100%",borderRadius:"8px"},listHeight:300,dropdownStyle:{borderRadius:"8px"}})})]})}function l(){return s.jsxs("div",{className:"tab-content",children:[s.jsx(ye,{size:"small",title:"Position (meters)",style:{marginBottom:16,borderRadius:8},styles:{body:{padding:"12px 16px"}},children:s.jsxs(Ne,{gutter:16,children:[s.jsx(se,{span:12,children:s.jsx(W.Item,{name:["position","x"],label:"X Position",rules:[{required:!0,message:"X position is required"}],children:s.jsx(Ye,{style:{width:"100%",borderRadius:"8px"},min:0,max:r,step:.1,precision:1,placeholder:"X position"})})}),s.jsx(se,{span:12,children:s.jsx(W.Item,{name:["position","y"],label:"Y Position",rules:[{required:!0,message:"Y position is required"}],children:s.jsx(Ye,{style:{width:"100%",borderRadius:"8px"},min:0,max:i,step:.1,precision:1,placeholder:"Y position"})})})]})}),s.jsx(ye,{size:"small",title:"Dimensions (meters)",style:{marginBottom:16,borderRadius:8},styles:{body:{padding:"12px 16px"}},children:s.jsxs(Ne,{gutter:16,children:[s.jsx(se,{span:12,children:s.jsx(W.Item,{name:["dimensions","width"],label:"Width",rules:[{required:!0,message:"Width is required"}],children:s.jsx(Ye,{style:{width:"100%",borderRadius:"8px"},min:.5,max:20,step:.1,precision:1,placeholder:"Width"})})}),s.jsx(se,{span:12,children:s.jsx(W.Item,{name:["dimensions","height"],label:"Height",rules:[{required:!0,message:"Height is required"}],children:s.jsx(Ye,{style:{width:"100%",borderRadius:"8px"},min:.5,max:20,step:.1,precision:1,placeholder:"Height"})})})]})}),s.jsx(ye,{size:"small",title:s.jsxs("span",{children:[s.jsx(Na,{})," Rotation (degrees)"]}),style:{borderRadius:8},styles:{body:{padding:"12px 16px"}},children:s.jsx(W.Item,{name:"rotation",noStyle:!0,children:s.jsx(Pa,{min:0,max:360,marks:{0:"0",90:"90",180:"180",270:"270",360:"360"},tooltip:{formatter:g=>`${g}`},style:{marginTop:10},keyboard:!1})})})]})}function c(){return s.jsxs("div",{className:"tab-content",children:[s.jsx(W.Item,{name:"color",label:"Color",tooltip:"Choose a color for the fixture. This affects the background color and tint applied to SVG icons.",rules:[{validator:(g,x)=>{try{return x?Promise.resolve():Promise.reject("Please select a color")}catch{return Promise.reject("Please enter a valid color value")}}}],children:s.jsx(Gr,{format:"hex",allowClear:!0,showText:!0,disabledAlpha:!0,presets:f,onChange:S,style:{width:"100%"}})}),s.jsx(W.Item,{name:"borderColor",label:"Border Color",tooltip:"Choose a border color for the fixture. Leave empty for default borders.",children:s.jsx(Gr,{format:"hex",allowClear:!0,showText:!0,disabledAlpha:!0,presets:f,style:{width:"100%"}})}),s.jsx(W.Item,{name:"borderRadius",label:"Border Radius",tooltip:"Set the corner radius in pixels. Higher values make more rounded corners.",children:s.jsx(Ye,{min:0,max:20,step:1,style:{width:"100%",borderRadius:"8px"},addonAfter:"px"})}),s.jsxs(ye,{size:"small",title:"Icon Upload",style:{borderRadius:8,marginBottom:16,marginTop:16},styles:{body:{padding:"16px"}},children:[s.jsx("div",{style:{marginBottom:0},children:s.jsx(Da,{...w,children:p.length<1&&s.jsxs("div",{children:[s.jsx($a,{style:{fontSize:20}}),s.jsx("div",{style:{marginTop:8},children:"Upload Icon"})]})})}),s.jsx(Fd,{type:"secondary",style:{display:"block",marginTop:12},children:"Upload a custom icon or use the default icon for the selected fixture type. Supported formats: PNG, JPG, SVG. SVG icons are preferred for better quality at all sizes."})]}),s.jsx(W.Item,{name:"icon",label:"Icon URL",tooltip:"URL to an icon image for this fixture. Will be used if no icon is uploaded.",children:s.jsx(ge,{placeholder:"https://example.com/icon.png",prefix:s.jsx(La,{style:{color:"#aaa"}}),style:{borderRadius:"8px"}})}),s.jsx(st,{open:A,title:"Icon Preview",footer:null,onCancel:C,children:s.jsx("img",{alt:"Icon Preview",style:{width:"100%"},src:T})})]})}},Md=t=>[{key:"basic",label:s.jsxs("span",{children:[s.jsx(Ar,{}),"Basic Info"]}),children:s.jsx(hn,{...t,activeKey:"basic"})},{key:"position",label:s.jsxs("span",{children:[s.jsx(qt,{}),"Position"]}),children:s.jsx(hn,{...t,activeKey:"position"})},{key:"appearance",label:s.jsxs("span",{children:[s.jsx(Ta,{}),"Appearance"]}),children:s.jsx(hn,{...t,activeKey:"appearance"})}],{Text:Bp,Title:zp}=Pe,{TabPane:Op}=_r,Bd=[{value:"sofa",label:"Sofa"},{value:"chair",label:"Chair"},{value:"table",label:"Table"},{value:"desk",label:"Desk"},{value:"plant",label:"Plant"},{value:"entrance",label:"Entrance"},{value:"exit",label:"Exit"},{value:"info",label:"Information"},{value:"restroom",label:"Restroom"},{value:"food",label:"Food Area"},{value:"custom",label:"Custom"}],ys={sofa:{width:2,height:1},chair:{width:5,height:5},table:{width:1,height:1},desk:{width:2,height:.8},plant:{width:.5,height:.5},entrance:{width:1.5,height:.2},exit:{width:1.5,height:.2},info:{width:1,height:1},restroom:{width:1,height:1},food:{width:2,height:2},custom:{width:1,height:1}},pt={sofa:"#a0d0ff",chair:"#a0d0ff",table:"#e0e0e0",desk:"#e0e0e0",plant:"#90ee90",entrance:"#98fb98",exit:"#ffcccb",info:"#add8e6",restroom:"#d8bfd8",food:"#ffe4b5",custom:"#f0f0f0"},pn={sofa:"",chair:"",table:"",desk:"",plant:"",entrance:"",exit:"",info:"",restroom:"",food:"",custom:""},qp=({visible:t,fixture:e,onCancel:n,onSubmit:r,onDelete:i,exhibitionWidth:o,exhibitionHeight:d})=>{const[p]=W.useForm(),[m,h]=u.useState(!1),[_,j]=u.useState(""),[f,w]=u.useState("basic"),[A,T]=u.useState(""),[P,S]=u.useState([]),[N,C]=u.useState(!1),[a,l]=u.useState(""),{message:c}=Pr.useApp(),[g,x]=u.useState("#f0f0f0"),[E,b]=u.useState("New Fixture"),[y,k]=u.useState("chair"),[I,R]=u.useState(0),[B,D]=u.useState(!0),[v,$]=u.useState(null),[z,V]=u.useState(0);u.useEffect(()=>{if(t)if(e){const M=Y(e.color),J=pt[e.type]||"#f0f0f0",ae=M||J;console.log("Setting up fixture colors:",{original:e.color,normalized:M,fallback:J,final:ae}),x(ae),b(e.name),k(e.type),R(e.rotation||0),j(e.type),D(e.showName!==!1),$(e.borderColor||null),V(e.borderRadius||0)}else{const M="chair",J=pt[M];x(J),b("New Fixture"),k(M),R(0),j(M),D(!0),$(null),V(0)}},[t,e]),u.useEffect(()=>{if(t&&p){if(e){const M=Y(e.color),J=pt[e.type]||"#f0f0f0",ae=M||J;p.setFieldsValue({name:e.name,type:e.type,position:{x:e.position.x,y:e.position.y},dimensions:{width:e.dimensions.width,height:e.dimensions.height},rotation:e.rotation||0,color:ae,icon:e.icon||"",showName:e.showName!==!1,borderColor:e.borderColor||null,borderRadius:e.borderRadius||0});const je=e.icon?pi(e.icon):"";T(je),e.icon?S([{uid:"-1",name:e.icon.split("/").pop()||"icon",status:"done",url:je,thumbUrl:je}]):S([])}else{const M="chair",J=pt[M];p.setFieldsValue({name:"New Fixture",type:M,position:{x:Math.floor(o/2),y:Math.floor(d/2)},dimensions:ys[M],rotation:0,color:J,icon:"",showName:!0,borderColor:null,borderRadius:0}),T(""),S([])}w("basic")}},[t,e,p,o,d]);const L=()=>{if(p&&t)try{const M=p.getFieldsValue(!0);if(M.name&&b(M.name),M.type&&k(M.type),M.rotation!==void 0&&R(M.rotation),M.color){const J=Y(M.color);J&&x(J)}if(M.showName!==void 0&&D(M.showName),M.borderColor!==void 0){const J=M.borderColor?Y(M.borderColor):null;$(J)}M.borderRadius!==void 0&&V(M.borderRadius)}catch(M){console.log("Error updating preview",M)}};u.useEffect(()=>{if(p&&t)return p.getFieldsValue,L(),()=>{}},[p,t]);const F=M=>{if(j(M),k(M),!e){const J=pt[M]||pt.custom;p.setFieldsValue({dimensions:ys[M]||ys.custom,color:J}),x(J)}},U=M=>{const J=Y(M);p.setFieldValue("color",J),x(J);const ae=Object.entries(pt).find(([je,ke])=>ke.toLowerCase()===J.toLowerCase());ae&&!e&&(p.setFieldValue("type",ae[0]),j(ae[0]),k(ae[0]))},O=()=>(console.log("Rendering fixture preview with:",{name:E,type:y,color:g,rotation:I,showName:B,iconUrl:A,borderColor:v,borderRadius:z}),s.jsx(Ld,{name:E,type:y,color:g,rotation:I,showName:B,iconUrl:A,defaultIcons:pn,borderColor:v,borderRadius:z})),q=({file:M,fileList:J})=>{var ae;if(M.status==="uploading"&&S(J),M.status==="done"){c.success(`${M.name} uploaded successfully`);let ke=(((ae=M.response)==null?void 0:ae.url)||"").replace(/^\/api\/uploads\//,"");ke&&!ke.startsWith("fixtures/")&&(ke=`fixtures/${ke.replace(/^\//,"")}`),console.log("Icon path stored in form:",ke),p.setFieldValue("icon",ke);const Be=pi(ke);console.log("Using direct backend URL:",Be),T(Be);const Wt=M.name.toLowerCase().endsWith(".svg"),It=J.map(ht=>ht.uid===M.uid?{...ht,url:Be,thumbUrl:Be,type:Wt?"image/svg+xml":ht.type}:ht);S(It),console.log("Form values after icon upload:",p.getFieldsValue(!0))}M.status==="error"&&(c.error(`${M.name} upload failed.`),S(J.filter(je=>je.uid!==M.uid)))},G={name:"file",action:`${H.defaults.baseURL}/fixtures/upload/icons`,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},accept:"image/png,image/jpeg,image/jpg,image/svg+xml",listType:"picture-card",fileList:P,onChange:q,onPreview:M=>{l(M.url||M.thumbUrl||""),C(!0)},onRemove:()=>(T(""),S([]),p.setFieldValue("icon",""),console.log("Form values after icon removal:",p.getFieldsValue(!0)),!0),maxCount:1,showUploadList:{showPreviewIcon:!0,showRemoveIcon:!0,showDownloadIcon:!1,removeIcon:s.jsx(Ot,{style:{color:"#ff4d4f"}})}},Y=M=>{try{if(!M)return"#f0f0f0";if(typeof M=="object"&&M!==null){if(typeof M.toHexString=="function")return M.toHexString();if(M.rgb||M.hex)return M.hex||`rgb(${M.rgb.r},${M.rgb.g},${M.rgb.b})`}if(typeof M=="string"){if(/^#([0-9A-F]{3}){1,2}$/i.test(M))return M;if(/^([0-9A-F]{3}){1,2}$/i.test(M))return`#${M}`;if(/^rgb\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*\)$/.test(M))return M}return"#f0f0f0"}catch(J){return console.error("Error normalizing color:",J),"#f0f0f0"}},pe=[{label:"Primary Colors",colors:["#1890ff","#52c41a","#faad14","#f5222d","#722ed1"]},{label:"Neutrals",colors:["#000000","#262626","#595959","#8c8c8c","#bfbfbf","#d9d9d9","#f0f0f0","#ffffff"]}],we=Ie.useCallback(()=>{e&&i&&i(e)},[e,i]),oe=M=>{w(M),document.activeElement instanceof HTMLElement&&document.activeElement.blur()},ee=Md({form:p,fixture:e,exhibitionWidth:o,exhibitionHeight:d,selectedType:_,showName:B,iconFileList:P,fixtureTypes:Bd,fixtureIcons:pn,defaultColors:pt,defaultDimensions:ys,colorPresets:pe,uploadProps:G,iconPreviewVisible:N,previewImage:a,onTypeChange:F,onColorChange:U,onShowNameChange:M=>D(M),onIconPreviewCancel:()=>C(!1),activeKey:f}),de=async()=>{try{h(!0);const M=await p.validateFields();b(M.name),k(M.type),R(M.rotation||0),x(Y(M.color)),D(M.showName),$(M.borderColor?Y(M.borderColor):null),V(M.borderRadius||0);let J="";M.icon!==void 0?J=M.icon?Te(M.icon):"":e!=null&&e.icon&&(J=e.icon),console.log("Form values being submitted:",{name:M.name,type:M.type,color:M.color,icon:M.icon,originalIcon:e==null?void 0:e.icon,cleanedIcon:J,showName:M.showName,borderColor:M.borderColor,borderRadius:M.borderRadius});const ae=(e==null?void 0:e._id)||(e==null?void 0:e.id)||"",je=M.color?Y(M.color):(e==null?void 0:e.color)||"#f0f0f0",ke=M.borderColor?Y(M.borderColor):null,Be={...e,id:ae,_id:ae,name:M.name,type:M.type,position:M.position,dimensions:M.dimensions,rotation:M.rotation,color:je,icon:J,zIndex:(e==null?void 0:e.zIndex)||1,isActive:(e==null?void 0:e.isActive)!==void 0?e.isActive:!0,borderColor:ke,borderRadius:M.borderRadius||0};ae&&(Be.showName=M.showName),console.log("Submitting fixture with icon path:",J),console.log("Color being submitted:",je),await r(Be),n()}catch(M){console.error("Fixture submission failed:",M),c.error("Failed to save fixture. Please check the form and try again.")}finally{h(!1)}},Te=M=>{if(!M||typeof M!="string")return"";if(M.startsWith("fixtures/")&&!M.includes("?")&&!M.includes("http"))return M;let J=M.replace(/^\/api\/uploads\//,"");if(J=J.replace(/^\//,""),J.includes("?")||J.includes("http")){const ae=J.split("?")[0].split("/").pop()||"";if(ae)return`fixtures/${ae}`}return J&&!J.startsWith("fixtures/")?`fixtures/${J}`:J};return s.jsxs(st,{title:s.jsxs("div",{style:{padding:"8px 0",display:"flex",alignItems:"center"},children:[s.jsx("span",{style:{fontSize:24,marginRight:8},children:e?pn[e.type]:""}),s.jsx("span",{children:e?`Edit ${e.name}`:"Add New Fixture"})]}),open:t,onCancel:n,confirmLoading:m,footer:s.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("div",{children:e&&i&&s.jsx(X,{danger:!0,icon:s.jsx(Ot,{}),onClick:we,style:{borderRadius:"6px"},children:"Delete"})}),s.jsxs("div",{style:{display:"flex",gap:"8px"},children:[s.jsx(X,{onClick:n,icon:s.jsx(Fa,{}),style:{borderRadius:"6px"},children:"Cancel"}),s.jsx(X,{type:"primary",onClick:de,icon:s.jsx(Ma,{}),style:{borderRadius:"6px"},children:e?"Update":"Create"})]})]}),width:560,centered:!0,styles:{header:{borderBottom:"1px solid #f0f0f0",padding:"16px 24px"},body:{backgroundColor:"#fff",borderRadius:"0 0 8px 8px",padding:"0"},footer:{borderTop:"1px solid #f0f0f0",padding:"12px 24px",margin:0}},children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:`
        .svg-icon {
          filter: drop-shadow(0px 1px 2px rgba(0,0,0,0.2));
        }
        
        /* Fix for passive event listener warnings */
        .ant-slider, .ant-slider-handle, .ant-color-picker-trigger, .ant-color-picker-dropdown {
          touch-action: none !important;
        }
        
        .ant-slider-rail, .ant-slider-track {
          touch-action: pan-y !important;
        }
        
        .ant-tabs-tab, .ant-select-selector, .ant-input-number-input, .ant-color-picker-slider, .ant-color-picker-palette {
          touch-action: manipulation !important;
        }
        
        /* Fix circular references warning */
        .ant-color-picker-trigger-disabled .ant-color-picker-clear {
          display: none;
        }
      `}}),O(),s.jsx(W,{form:p,layout:"vertical",initialValues:{name:"New Fixture",type:"chair",position:{x:0,y:0},dimensions:{width:1,height:1},rotation:0,color:"#f0f0f0",icon:"",showName:!0,borderColor:null,borderRadius:0},style:{padding:"0 24px 20px"},onValuesChange:L,children:s.jsx(_r,{activeKey:f,onChange:oe,items:ee,tabBarStyle:{marginBottom:16},centered:!0})})]})},zd=Q(st)`
  .ant-modal-content {
    padding: 0;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
  }
  .ant-modal-header {
    padding: 24px 32px;
    margin: 0;
    border-bottom: 1px solid rgba(0, 0, 0, 0.06);
    background: linear-gradient(to right, #4b47b9, #3f51b5);
    
    .ant-modal-title {
      color: white;
      font-weight: 600;
      font-size: 18px;
    }
  }
  .ant-modal-body {
    padding: 0;
  }
  .ant-modal-close {
    color: white;
  }
`,Od=Q.div`
  display: flex;
  border-bottom: 1px solid #eee;
  background-color: #f9f9fa;
  margin-bottom: 24px;
  
  .step-item {
    padding: 16px 24px;
    position: relative;
    display: flex;
    align-items: center;
    font-size: 15px;
    color: #666;
    gap: 10px;
    
    &.active {
      color: #4b47b9;
      font-weight: 500;
      
      &:after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 2px;
        background-color: #4b47b9;
      }
      
      .step-icon {
        background-color: #4b47b9;
        color: white;
      }
    }
    
    &.completed {
      .step-icon {
        background-color: #52c41a;
        color: white;
      }
    }
    
    .step-icon {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background-color: #eee;
      display: flex;
      align-items: center;
      justify-content: center;
    }
  }
`,rs=Q.div`
  padding: 24px 32px 32px;
`,qd=Q.h2`
  font-size: 24px;
  font-weight: 600;
  color: #1f1f1f;
  margin-bottom: 8px;
`,Ud=Q.p`
  font-size: 14px;
  color: #666;
  margin-bottom: 24px;
`;Q.div`
  display: flex;
  gap: 12px;
  margin-bottom: 24px;
  
  .search-input {
    width: 240px;
    border-radius: 8px;
  }
  
  .filter-select {
    width: 160px;
    border-radius: 8px;
  }
`;Q.div`
  margin-bottom: 24px;
  
  .tab-header {
    display: flex;
    margin-bottom: 24px;
    border-bottom: 1px solid #f0f0f0;
    
    .tab-item {
      padding: 12px 24px;
      font-size: 15px;
      font-weight: 500;
      color: #666;
      cursor: pointer;
      position: relative;
      display: flex;
      align-items: center;
      gap: 8px;
      
      &.active {
        color: #4b47b9;
        
        &:after {
          content: '';
          position: absolute;
          bottom: -1px;
          left: 0;
          right: 0;
          height: 2px;
          background: #4b47b9;
          border-radius: 2px 2px 0 0;
        }
      }
      
      .badge {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        background: #f0f0f0;
        color: #666;
        font-size: 12px;
        height: 20px;
        min-width: 20px;
        padding: 0 8px;
        border-radius: 10px;
        margin-left: 8px;
        
        &.active {
          background: #4b47b9;
          color: white;
        }
      }
    }
  }
`;Q.div`
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 16px;
  margin-bottom: 24px;
`;Q.div`
  border: 1px solid ${t=>t.selected?"#4b47b9":"#e6e6f0"};
  background: ${t=>t.selected?"rgba(75, 71, 185, 0.05)":"white"};
  border-radius: 12px;
  padding: 20px;
  padding-left: 48px;
  position: relative;
  transition: all 0.2s ease;
  box-shadow: ${t=>t.selected?"0 4px 12px rgba(75, 71, 185, 0.15)":"0 2px 8px rgba(0, 0, 0, 0.04)"};
  cursor: pointer;
  
  &:hover {
    border-color: #4b47b9;
    box-shadow: 0 4px 12px rgba(75, 71, 185, 0.15);
    transform: translateY(-2px);
  }
  
  .stall-price {
    position: absolute;
    top: 16px;
    right: 16px;
    background: ${t=>t.selected?"#4b47b9":"#52c41a"};
    color: white;
    font-weight: 600;
    padding: 6px 14px;
    border-radius: 20px;
    font-size: 14px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
  }
  
  .stall-number {
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 8px;
    color: #1f1f1f;
    display: flex;
    align-items: center;
    
    .hall-label {
      font-size: 13px;
      color: #666;
      margin-left: 8px;
      font-weight: normal;
    }
  }
  
  .stall-details {
    display: flex;
    gap: 16px;
    margin-top: 16px;
    
    .detail-item {
      flex: 1;
      
      .label {
        font-size: 12px;
        color: #666;
        margin-bottom: 4px;
      }
      
      .value {
        font-size: 15px;
        font-weight: 500;
      }
    }
  }
  
  .selection-indicator {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 26px;
    height: 26px;
    border-radius: 50%;
    position: absolute;
    top: 50%;
    left: 12px;
    transform: translateY(-50%);
    background: ${t=>t.selected?"#4b47b9":"white"};
    border: 2px solid ${t=>t.selected?"#4b47b9":"#d9d9d9"};
    color: white;
    transition: all 0.2s ease;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }
`;const Vd=Q(ye)`
  background: #f9fafc;
  border-radius: 12px;
  margin-top: 24px;
  border: 1px solid #eaecf0;
  overflow: hidden;
  box-shadow: 0 1px 3px rgba(16, 24, 40, 0.1), 0 1px 2px rgba(16, 24, 40, 0.06);
  
  .ant-card-head {
    background: #f2f4f7;
    border-bottom-color: #eaecf0;
    padding: 16px 24px;
    min-height: 48px;
    
    .ant-card-head-title {
      padding: 0;
      font-size: 16px;
      font-weight: 600;
      color: #101828;
    }
  }
  
  .ant-card-body {
    padding: 16px 24px 24px;
  }
  
  .summary-row {
    display: flex;
    justify-content: space-between;
    padding: 12px 0;
    
    &:not(:last-child) {
      border-bottom: 1px solid #eaecf0;
    }
    
    .label {
      color: #475467;
      font-weight: 500;
    }
    
    .value {
      font-weight: 600;
      text-align: right;
      color: #1f2937;
    }
    
    &.discount {
      color: #ef4444;
      
      .value {
        color: #ef4444;
      }
    }
    
    &.total {
      font-weight: 600;
      font-size: 16px;
      color: #101828;
      border-top: 1px solid #eaecf0;
      margin-top: 8px;
      padding-top: 16px;
      
      .label, .value {
        font-size: 16px;
        font-weight: 700;
        color: #101828;
      }
    }
  }
`;Q(X)`
  &.ant-btn-primary {
    background: #4b47b9;
    border-color: #4b47b9;
    
    &:hover, &:focus {
      background: #3b37a9;
      border-color: #3b37a9;
    }
  }
  
  &.ant-btn-lg {
    height: 48px;
    padding: 0 24px;
    font-size: 16px;
    border-radius: 8px;
  }
`;Q.div`
  display: flex;
  justify-content: flex-end;
  margin-top: 24px;
  padding-top: 16px;
  border-top: 1px solid #f0f0f0;
`;Q(ye)`
  background: #f8f8fc;
  border-radius: 12px;
  border: 1px solid #e6e6f0;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
  
  .ant-card-body {
    padding: 24px;
  }
  
  .ant-form-item:last-child {
    margin-bottom: 0;
  }
`;Q(ge)`
  &.ant-input-lg {
    border-radius: 8px;
    border: 1px solid #e6e6f0;
    background: white;
    padding: 12px 16px;
    height: auto;
    
    &:hover, &:focus {
      border-color: #4b47b9;
      box-shadow: 0 0 0 2px rgba(75, 71, 185, 0.1);
    }
  }
  
  .anticon {
    color: #4b47b9;
  }
`;const fn=Q(X)`
  &.ant-btn-lg {
    height: 40px;
    padding: 0 24px;
    font-size: 14px;
    border-radius: 6px;
    font-weight: 500;
    
    &.ant-btn-primary {
      background: #4b47b9;
      border-color: #4b47b9;
      
      &:hover {
        background: #3f3fa0;
        border-color: #3f3fa0;
      }
    }

    &:not(.ant-btn-primary) {
      border-color: #d9d9d9;
      
      &:hover {
        color: #4b47b9;
        border-color: #4b47b9;
      }
    }
  }
`;Q(Dt)`
  .ant-descriptions-item-label {
    background: #f8f8fc !important;
    font-weight: 600;
    color: #1f1f1f;
  }
  
  .ant-descriptions-item-content {
    background: white !important;
  }
`;Q.div`
  background: #f8f8fc;
  padding: 32px 0;
  border-bottom: 1px solid #e6e6f0;
  margin: -32px -32px 32px;
`;Q(us)`
  max-width: 900px;
  margin: 0 auto;

  .ant-steps-item {
    padding: 0 12px;
    margin: 0;
    
    &:first-of-type {
      padding-left: 0;
    }
    
    &:last-of-type {
      padding-right: 0;
    }
  }

  .ant-steps-item-container {
    position: relative;
  }

  .ant-steps-item-tail {
    padding: 0;
    top: 13px;
    margin: 0;
    
    &::after {
      height: 1px;
      margin: 0;
      background: #e6e6f0;
    }
  }

  .ant-steps-item-icon {
    width: 28px;
    height: 28px;
    line-height: 28px;
    margin-right: 8px;
    font-size: 14px;
    border: none;
    background: #e6e6f0;
    
    .anticon {
      font-size: 14px;
      top: 0;
    }
  }

  .ant-steps-item-content {
    display: inline-block;
  }

  .ant-steps-item-title {
    font-size: 14px;
    line-height: 28px;
    padding-right: 8px;
    color: rgba(0, 0, 0, 0.45);
    font-weight: normal;
    
    &::after {
      height: 1px;
      top: 14px;
      background: #e6e6f0 !important;
    }
  }

  .ant-steps-item-description {
    max-width: 140px;
    font-size: 12px;
    color: rgba(0, 0, 0, 0.45);
  }

  .ant-steps-item-active {
    .ant-steps-item-icon {
      background: #4b47b9;
      border: none;
      
      .ant-steps-icon {
        color: white;
      }
    }
    
    .ant-steps-item-title {
      color: rgba(0, 0, 0, 0.85);
      font-weight: 500;
      
      &::after {
        background: #e6e6f0;
      }
    }
    
    .ant-steps-item-description {
      color: rgba(0, 0, 0, 0.65);
    }
  }

  .ant-steps-item-finish {
    .ant-steps-item-icon {
      background: #4b47b9;
      border: none;
      
      .ant-steps-icon {
        color: white;
      }
    }
    
    .ant-steps-item-title {
      color: rgba(0, 0, 0, 0.85);
      
      &::after {
        background: #4b47b9 !important;
      }
    }
    
    .ant-steps-item-tail::after {
      background: #4b47b9;
    }
  }

  .ant-steps-item-wait {
    .ant-steps-item-icon {
      background: #e6e6f0;
      border: none;
      
      .ant-steps-icon {
        color: rgba(0, 0, 0, 0.45);
      }
    }
  }
`;Q.div`
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 4px 0;

  .company-name {
    font-weight: 500;
    color: rgba(0, 0, 0, 0.85);
  }

  .contact-details {
    font-size: 12px;
    color: rgba(0, 0, 0, 0.45);
  }
`;Q.div`
  margin-bottom: 32px;

  &:last-child {
    margin-bottom: 0;
  }

  .section-title {
    margin-bottom: 16px;
    padding-bottom: 8px;
    border-bottom: 1px solid #e6e6f0;
  }
`;Q.div`
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
`;Q.div`
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: 24px;
  margin-top: 24px;
`;Q.div`
  display: flex;
  flex-direction: column;
  gap: 16px;
  max-height: 338px; /* Height for 3 cards: (102px  3) + (16px  2 gaps) */
  overflow-y: auto;
  padding-right: 8px;
  
  &::-webkit-scrollbar {
    width: 6px;
  }
  
  &::-webkit-scrollbar-track {
    background: #f0f0f0;
    border-radius: 3px;
  }
  
  &::-webkit-scrollbar-thumb {
    background: #ccc;
    border-radius: 3px;
    
    &:hover {
      background: #bbb;
    }
  }
`;Q(ye)`
  &.ant-card {
    background: #f8f8fc;
    border: 1px solid #e6e6f0;
    border-radius: 8px;
    position: sticky;
    top: 24px;
  }

  .calculation-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 12px;
    
    &:last-child {
      margin-bottom: 0;
    }
  }

  .total-row {
    border-top: 1px solid #e6e6f0;
    margin-top: 16px;
    padding-top: 16px;
    font-weight: 600;
  }
`;const fi=({form:t,stallDetails:e=[],selectedStallId:n,selectedStallIds:r=[],exhibition:i})=>{const[o,d]=u.useState([]);u.useEffect(()=>{let w=[...(t.getFieldValue("selectedStalls")||[]).map(A=>String(A))];if(n){const A=String(n);w.some(T=>T===A)||w.push(A)}r.length>0&&r.forEach(A=>{const T=String(A);w.some(P=>P===T)||w.push(T)}),console.log("StallDetailsStep - Initial stalls after normalization:",w),t.setFieldsValue({selectedStalls:w}),d(w)},[t,n,r]),u.useEffect(()=>{if(o.length>0){const j=t.getFieldValue("selectedStalls")||[],f=new Set(j.map(T=>String(T))),w=new Set(o.map(T=>String(T)));let A=f.size!==w.size;if(!A){for(const T of w)if(!f.has(T)){A=!0;break}}if(A){console.log("Syncing form with selected stalls:",o);const T=o.map(P=>String(P));t.setFieldsValue({selectedStalls:T}),t.validateFields(["selectedStalls"]).catch(P=>{})}}},[o,t]);const p=u.useMemo(()=>!e||e.length===0?[]:e.filter(j=>o.includes(j.id)),[e,o]),m=u.useMemo(()=>{var a,l,c;if(!e||e.length===0)return{baseAmount:0,discounts:[],totalDiscountAmount:0,amountAfterDiscount:0,taxes:[],totalTaxAmount:0,total:0,selectedStallNumbers:""};const j=e.filter(g=>o.includes(g.id)),f=j.reduce((g,x)=>g+(x.price||x.ratePerSqm*x.dimensions.width*x.dimensions.height),0),A=(((a=i==null?void 0:i.publicDiscountConfig)==null?void 0:a.filter(g=>g.isActive))||[]).map(g=>{const x=g.type==="percentage"?f*(Math.min(Math.max(0,g.value),100)/100):Math.min(g.value,f);return{name:g.name,type:g.type,value:g.value,amount:x}}),T=A.reduce((g,x)=>g+x.amount,0),P=f-T,S=((c=(l=i==null?void 0:i.taxConfig)==null?void 0:l.filter(g=>g.isActive))==null?void 0:c.map(g=>({name:g.name,rate:g.rate,amount:P*(g.rate/100)})))||[],N=S.reduce((g,x)=>g+x.amount,0),C=P+N;return{baseAmount:f,discounts:A,totalDiscountAmount:T,amountAfterDiscount:P,taxes:S,totalTaxAmount:N,total:C,selectedStallNumbers:j.map(g=>`${g.number||g.stallNumber||`Stall ${g.id}`} (${g.hallName||`Hall ${g.hallId||1}`})`).join(", ")}},[e,o,i==null?void 0:i.taxConfig,i==null?void 0:i.publicDiscountConfig]),h=j=>{const f=String(j);if(o.some(A=>String(A)===f)){const A=o.filter(T=>String(T)!==f);d(A),t.setFieldsValue({selectedStalls:A}),le.info("Stall removed from selection")}},_=j=>`${j.toLocaleString("en-IN")}`;return s.jsxs(rs,{children:[s.jsx(qd,{children:"Your Selected Stalls"}),s.jsx(Ud,{children:"Review your selected stalls. You can remove a stall by clicking the delete button."}),s.jsx(W.Item,{name:"selectedStalls",rules:[{required:!0,message:"Please select at least one stall"}],style:{display:"none"},children:s.jsx(Je,{mode:"multiple"})}),p.length>0?s.jsx("div",{style:{marginBottom:24,background:"#fff",borderRadius:"8px",padding:"16px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)"},children:s.jsx(Ft,{dataSource:p.map(j=>({...j,key:j.id,price:j.price||j.ratePerSqm*j.dimensions.width*j.dimensions.height,area:j.dimensions.width*j.dimensions.height,dimensions:`${j.dimensions.width}m  ${j.dimensions.height}m`,size:`${j.dimensions.width}m  ${j.dimensions.height}m`,stallType:j.stallType||{name:j.typeName||j.type||"Standard"},type:j.typeName||j.type||"Standard"})),pagination:!1,size:"middle",rowClassName:()=>"stall-table-row",className:"selected-stalls-table",style:{borderRadius:"6px",overflow:"hidden"},columns:[{title:"Stall",dataIndex:"number",key:"number",render:(j,f)=>s.jsxs("span",{style:{fontWeight:600,fontSize:"15px"},children:["Stall ",j||f.stallNumber]})},{title:"Hall",dataIndex:"hallName",key:"hallName",render:(j,f)=>s.jsx(Fe,{color:"blue",style:{borderRadius:"4px"},children:j||`Hall ${f.hallId}`})},{title:"Stall Type",dataIndex:"stallType",key:"stallType",align:"center",render:(j,f)=>{var A;const w=((A=f.stallType)==null?void 0:A.name)||f.type||"Standard";return s.jsx(Fe,{color:"purple",style:{borderRadius:"4px",padding:"2px 8px"},children:w})}},{title:"Dimensions",dataIndex:"dimensions",key:"dimensions",align:"center",render:(j,f)=>s.jsxs(ue,{direction:"vertical",size:0,children:[s.jsx("span",{style:{fontWeight:500},children:j}),s.jsxs("span",{style:{color:"#888",fontSize:"13px"},children:[f.area," sqm"]})]})},{title:"Rate",dataIndex:"ratePerSqm",key:"ratePerSqm",align:"right",render:(j,f)=>s.jsxs("span",{style:{color:"#555"},children:["",(f.ratePerSqm||0).toLocaleString("en-IN"),"/sqm"]})},{title:"Price",dataIndex:"price",key:"price",align:"right",render:j=>s.jsx("span",{style:{fontWeight:600,color:"#1890ff",fontSize:"15px",display:"block",padding:"4px 8px",background:"rgba(24, 144, 255, 0.1)",borderRadius:"4px",textAlign:"right"},children:_(j)})},{title:"",key:"action",width:70,align:"center",render:(j,f)=>s.jsx(xt,{title:"Remove from selection",children:s.jsx(X,{type:"text",danger:!0,icon:s.jsx(Ot,{}),onClick:()=>h(f.id),size:"middle",style:{borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"}})})}]})}):s.jsx(qe,{description:"No stalls selected yet. Please select stalls from the layout.",image:qe.PRESENTED_IMAGE_SIMPLE,style:{margin:"32px 0"}}),o.length>0&&s.jsxs(Vd,{title:s.jsx("span",{style:{fontSize:"16px",fontWeight:600},children:"Booking Summary"}),style:{borderRadius:"8px",overflow:"hidden",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)"},headStyle:{background:"#f6f8fa",borderBottom:"1px solid #eee"},bodyStyle:{padding:"16px 24px"},children:[s.jsxs("div",{className:"summary-row",children:[s.jsx("div",{className:"label",children:"Selected Stalls"}),s.jsxs("div",{className:"value",children:[o.length," stall(s) selected"]})]}),s.jsxs("div",{className:"summary-row",children:[s.jsx("div",{className:"label",children:"Stall Numbers"}),s.jsx("div",{className:"value",style:{maxWidth:"60%",wordBreak:"break-word"},children:m.selectedStallNumbers})]}),s.jsxs("div",{className:"summary-row",children:[s.jsx("div",{className:"label",children:"Base Amount"}),s.jsx("div",{className:"value",children:_(m.baseAmount)})]}),m.discounts.map((j,f)=>s.jsxs("div",{className:"summary-row discount",children:[s.jsxs("div",{className:"label",children:[j.name,j.type==="percentage"?` (${j.value}%)`:""]}),s.jsxs("div",{className:"value",style:{color:"#52c41a"},children:["- ",_(j.amount)]})]},`discount-${f}`)),s.jsxs("div",{className:"summary-row",children:[s.jsx("div",{className:"label",children:"Amount after Discount"}),s.jsx("div",{className:"value",style:{fontWeight:500},children:_(m.amountAfterDiscount)})]}),m.taxes.map((j,f)=>s.jsxs("div",{className:"summary-row",children:[s.jsxs("div",{className:"label",children:[j.name," (",j.rate,"%)"]}),s.jsxs("div",{className:"value",style:{color:"#faad14"},children:["+ ",_(j.amount)]})]},`tax-${f}`)),s.jsxs("div",{className:"summary-row total",style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid #f0f0f0"},children:[s.jsx("div",{className:"label",style:{fontSize:"16px",fontWeight:600},children:"Total"}),s.jsx("div",{className:"value",style:{fontSize:"18px",fontWeight:700,color:"#1890ff"},children:_(m.total)})]})]})]})},{Title:Qd,Paragraph:gi,Text:rt}=Pe,{Panel:Up}=Ba,{Option:Hd}=Je,mi=({form:t,formValues:e,selectedStallIds:n=[],exhibition:r,stallDetails:i=[]})=>{const o=t.getFieldValue("selectedStalls")||n||[],[d,p]=u.useState(t.getFieldValue("amenities")||[]),[m,h]=u.useState({}),_=u.useMemo(()=>i!=null&&i.length?i.filter(c=>o.includes(c.id)):[],[i,o]),j=u.useMemo(()=>_.reduce((c,g)=>c+g.dimensions.width*g.dimensions.height,0),[_]),f=(r==null?void 0:r.basicAmenities)&&r.basicAmenities.length>0,w=(r==null?void 0:r.amenities)&&r.amenities.length>0,A=u.useMemo(()=>!f||j===0?[]:((r==null?void 0:r.basicAmenities)||[]).map(c=>{const g=Math.floor(j/c.perSqm)*c.quantity;return{...c,calculatedQuantity:g>0?g:0,key:c._id||c.id}}),[r,f,j]),T=c=>{const g={...m};c.forEach(x=>{d.includes(x)||(g[x]=1)}),Object.keys(g).forEach(x=>{c.includes(x)||delete g[x]}),h(g),p(c)},P=c=>(c._id||c.id||"").toString(),S=(c,g)=>{h(x=>({...x,[c]:g}))};Ie.useEffect(()=>{const c=d.map(g=>({id:g,quantity:m[g]||1}));t.setFieldsValue({amenities:c})},[d,m,t]);const N=c=>`${c.toLocaleString("en-IN")}`,C=u.useMemo(()=>w?((r==null?void 0:r.amenities)||[]).filter(c=>d.includes(P(c))).map(c=>({...c,key:P(c),quantity:m[P(c)]||1})):[],[r,w,d,m]),a=[{title:"Name",dataIndex:"name",key:"name",render:(c,g)=>s.jsxs(ue,{children:[s.jsx(rt,{strong:!0,children:c}),s.jsx(Fe,{color:"blue",children:g.type})]})},{title:"Quantity",dataIndex:"calculatedQuantity",key:"calculatedQuantity",width:120,render:c=>s.jsxs(Fe,{color:"green",children:[c," ",c===1?"unit":"units"]})},{title:"Allocation",dataIndex:"perSqm",key:"perSqm",width:180,render:(c,g)=>s.jsx(xt,{title:g.description,children:s.jsxs(rt,{type:"secondary",children:[s.jsx(Qt,{style:{marginRight:5}}),"1 ",g.quantity>1?`set of ${g.quantity}`:"unit"," per ",c," sqm"]})})}],l=[{title:"Name",dataIndex:"name",key:"name",render:(c,g)=>s.jsxs(ue,{align:"center",children:[s.jsx(rt,{strong:!0,children:c}),s.jsx(Fe,{color:"blue",children:g.type}),s.jsx(rt,{type:"secondary",style:{fontSize:"13px"},children:g.description})]})},{title:"Rate",dataIndex:"rate",key:"rate",width:120,render:c=>s.jsx(rt,{strong:!0,style:{color:"#1890ff"},children:N(c)})},{title:"Quantity",dataIndex:"quantity",key:"quantity",width:120,render:(c,g)=>s.jsx(Ye,{min:1,value:m[g.key]||1,onChange:x=>S(g.key,x||1),style:{width:"100%"}})},{title:"Total",key:"total",width:120,render:(c,g)=>{const x=m[g.key]||1,E=g.rate*x;return s.jsx(rt,{strong:!0,style:{color:"#1890ff"},children:N(E)})}}];return s.jsxs(rs,{children:[s.jsx(Qd,{level:4,children:"Stall Amenities"}),s.jsx(gi,{type:"secondary",style:{marginBottom:24},children:"Review included amenities and select additional amenities for your exhibition stalls."}),s.jsx(ye,{title:`Selected Stalls: ${o.length}`,style:{marginBottom:24},children:o.length>0?s.jsxs(gi,{children:["You've selected ",o.length," stall(s) with a total area of ",j," sq. meters."]}):s.jsx(qe,{image:qe.PRESENTED_IMAGE_SIMPLE,description:"No stalls selected"})}),s.jsx(ye,{title:s.jsxs(ue,{children:[s.jsx(lt,{status:"success"}),"Included Amenities"]}),style:{marginBottom:24},children:o.length===0?s.jsx(We,{message:"Select stalls first",description:"Please select stalls to see what amenities are included.",type:"info",showIcon:!0}):f?s.jsx(Ft,{dataSource:A.filter(c=>c.calculatedQuantity>0),columns:a,pagination:!1,size:"small",locale:{emptyText:s.jsx(qe,{image:qe.PRESENTED_IMAGE_SIMPLE,description:"Your stall area is too small to qualify for any basic amenities."})}}):s.jsx(qe,{image:s.jsx(Xr,{style:{fontSize:60,color:"#cccccc"}}),description:"No basic amenities have been configured for this exhibition."})}),s.jsx(De,{}),s.jsx(ye,{title:"Additional Amenities (Extra Charges)",children:w?s.jsxs("div",{children:[s.jsx(W.Item,{label:"Select Additional Amenities",style:{marginBottom:24},children:s.jsx(Je,{mode:"multiple",style:{width:"100%"},placeholder:"Select amenities",value:d,onChange:T,optionLabelProp:"label",children:((r==null?void 0:r.amenities)||[]).map(c=>s.jsxs(Hd,{value:P(c),label:`${c.name} (${N(c.rate)})`,children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsxs(ue,{children:[s.jsx(rt,{strong:!0,children:c.name}),s.jsx(Fe,{color:"blue",children:c.type})]}),s.jsx(rt,{style:{color:"#1890ff"},children:N(c.rate)})]}),s.jsx("div",{children:s.jsx(rt,{type:"secondary",children:c.description})})]},P(c)))})}),C.length>0&&s.jsxs("div",{style:{marginTop:16},children:[s.jsx(De,{orientation:"left",children:"Selected Amenities"}),s.jsx(Ft,{dataSource:C,columns:l,pagination:!1,size:"small"})]})]}):s.jsx(qe,{image:s.jsx(Xr,{style:{fontSize:60,color:"#cccccc"}}),description:"No additional amenities are available for this exhibition."})}),s.jsx(W.Item,{name:"amenities",hidden:!0,children:s.jsx(ge,{type:"hidden"})}),s.jsx(W.Item,{name:"selectedStalls",hidden:!0,children:s.jsx(ge,{type:"hidden"})})]})},{Title:gn,Paragraph:xi,Text:ve}=Pe,yi=({form:t,stallDetails:e=[],selectedStallId:n,selectedStallIds:r=[],selectedStalls:i=[],exhibition:o,onPrev:d,onFinish:p,loading:m=!1,formValues:h={}})=>{const[_,j]=u.useState([]),f=u.useMemo(()=>{const l=(t.getFieldValue("selectedStalls")||[]).map(g=>String(g));if(console.log("ReviewStep - Form has selectedStalls:",l),console.log("ReviewStep - Props selectedStallIds:",r),console.log("ReviewStep - Props selectedStalls:",i),l.length>0)return l;const c=[];if(n){const g=String(n);c.push(g)}return r&&r.length&&r.forEach(g=>{const x=String(g);c.includes(x)||c.push(x)}),i&&i.length&&i.forEach(g=>{const x=String(g);c.includes(x)||c.push(x)}),console.log("ReviewStep - Final consolidated stall IDs:",c),c},[t,n,r,i]);u.useEffect(()=>{if(console.log("ReviewStep - Processing stall details with IDs:",f),console.log("ReviewStep - Available stall details:",e),e&&e.length&&f.length){const a=e.filter(c=>f.includes(String(c.id)));console.log("ReviewStep - Matched stalls:",a.length);const l=a.map(c=>({key:c.id,id:c.id,number:c.number||c.stallNumber||`Stall ${c.id}`,hallName:c.hallName||`Hall ${c.hallId}`,size:`${c.dimensions.width}m  ${c.dimensions.height}m`,area:c.dimensions.width*c.dimensions.height,rate:c.ratePerSqm,price:c.price||c.ratePerSqm*c.dimensions.width*c.dimensions.height,type:c.typeName||c.type||"Standard"}));j(l)}},[e,f]);const w=u.useMemo(()=>{var v,$,z,V;const a=_.reduce((L,F)=>L+F.price,0),l=_.reduce((L,F)=>L+(F.area||0),0),c=((v=o==null?void 0:o.basicAmenities)==null?void 0:v.map(L=>{const F=Math.floor(l/L.perSqm)*L.quantity;return{...L,calculatedQuantity:F>0?F:0}}))||[],g=t.getFieldValue("amenities")||[];console.log("ReviewStep - Selected amenities with quantities:",g);let x=0;const E=g.map(L=>{var q;const F=L.id,U=L.quantity||1,O=(q=o==null?void 0:o.amenities)==null?void 0:q.find(G=>G.id===F||G._id===F);if(O){const G=(O.rate||0)*U;return x+=G,{name:O.name,rate:O.rate,type:O.type,description:O.description,quantity:U,total:G}}return null}).filter(Boolean);console.log("ReviewStep - Processed amenity items:",E);const y=((($=o==null?void 0:o.publicDiscountConfig)==null?void 0:$.filter(L=>L.isActive))||[]).map(L=>{const F=L.type==="percentage"?a*(Math.min(Math.max(0,L.value),100)/100):Math.min(L.value,a);return{name:L.name,type:L.type,value:L.value,amount:F}}),k=y.reduce((L,F)=>L+F.amount,0),I=a-k,R=I,B=((V=(z=o==null?void 0:o.taxConfig)==null?void 0:z.filter(L=>L.isActive))==null?void 0:V.map(L=>({name:L.name,rate:L.rate,amount:R*(L.rate/100)})))||[],D=B.reduce((L,F)=>L+F.amount,0);return{baseAmount:a,basicAmenities:c,totalStallArea:l,amenities:E,amenitiesTotal:x,discounts:y,totalDiscountAmount:k,amountAfterDiscount:I,subtotal:R,taxes:B,totalTaxAmount:D,total:R+D,stallCount:_.length}},[_,t,o]);u.useEffect(()=>{var l;const a=((l=o==null?void 0:o.publicDiscountConfig)==null?void 0:l.filter(c=>c.isActive))||[];if(a.length>0){const c=a[0];console.log("Setting discountId in form to:",c),t.setFieldsValue({discountId:{name:c.name,type:c.type,value:c.value}})}},[o,t]);const A=[{title:"Stall Number",dataIndex:"number",key:"number"},{title:"Hall",dataIndex:"hallName",key:"hallName"},{title:"Stall Type",dataIndex:"type",key:"type",render:(a,l)=>s.jsx(Fe,{color:"purple",children:a},`stall-type-${l.key}`)},{title:"Size",dataIndex:"size",key:"size"},{title:"Area",dataIndex:"area",key:"area",render:(a,l)=>s.jsxs("span",{children:[a," sqm"]},`stall-area-${l.key}`)},{title:"Rate",dataIndex:"rate",key:"rate",render:(a,l)=>s.jsxs("span",{children:["",a,"/sqm"]},`stall-rate-${l.key}`)},{title:"Price",dataIndex:"price",key:"price",render:(a,l)=>s.jsxs("span",{children:["",a.toLocaleString()]},`stall-price-${l.key}`)}],T=a=>`${a.toLocaleString("en-IN")}`,P=h.customerName||t.getFieldValue("customerName"),S=h.customerPhone||t.getFieldValue("customerPhone"),N=h.email||t.getFieldValue("email"),C=h.companyName||t.getFieldValue("companyName");return console.log("ReviewStep - Exhibitor Info:",{customerName:P,companyName:C,customerPhone:S,customerEmail:N,formValues:h,formFieldValues:{customerName:t.getFieldValue("customerName"),companyName:t.getFieldValue("companyName"),customerPhone:t.getFieldValue("customerPhone"),email:t.getFieldValue("email")}}),m?s.jsx(rs,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"300px"},children:s.jsx(ct,{size:"large",tip:"Processing your booking..."})}):f.length===0?s.jsxs(rs,{children:[s.jsx(We,{message:"No Stalls Selected",description:"Please go back and select at least one stall to book.",type:"warning",showIcon:!0}),s.jsx("div",{style:{marginTop:24,textAlign:"right"},children:s.jsx(X,{onClick:d,children:"Back to Stall Selection"})})]}):s.jsxs(rs,{children:[s.jsx(W.Item,{name:"discountId",hidden:!0,children:s.jsx(ge,{})}),s.jsx(gn,{level:4,children:"Booking Summary"}),s.jsx(xi,{type:"secondary",style:{marginBottom:24},children:"Please review your booking details before submitting."}),s.jsx(ye,{title:"Exhibitor Information",style:{marginBottom:24},children:s.jsxs(Dt,{column:2,children:[s.jsx(Dt.Item,{label:"Name",children:P||"Not provided"}),s.jsx(Dt.Item,{label:"Company",children:C||"Not provided"}),s.jsx(Dt.Item,{label:"Phone",children:S||"Not provided"}),s.jsx(Dt.Item,{label:"Email",children:N||"Not provided"})]})}),s.jsxs(ye,{title:"Selected Stalls",className:"review-card",size:"small",children:[s.jsx(Ft,{dataSource:_,columns:A,pagination:!1,size:"small",style:{marginBottom:16}}),s.jsxs(ve,{strong:!0,children:["Total Base Amount: ",T(w.baseAmount)]})]}),w.basicAmenities&&w.basicAmenities.length>0&&s.jsxs(ye,{title:s.jsxs(ue,{children:[s.jsx(lt,{status:"success"}),"Included Basic Amenities"]}),style:{marginBottom:24},children:[s.jsxs(xi,{type:"secondary",style:{marginBottom:16},children:["The following amenities are included based on your total stall area of ",w.totalStallArea," sqm."]}),s.jsx(Ft,{dataSource:w.basicAmenities.filter(a=>a.calculatedQuantity>0).map((a,l)=>({...a,key:`basic-${l}`})),columns:[{title:"Name",dataIndex:"name",key:"name",render:(a,l)=>s.jsxs(ue,{children:[s.jsx(ve,{strong:!0,children:a}),s.jsx(Fe,{color:"blue",children:l.type})]},`name-${l.key}`)},{title:"Quantity",dataIndex:"calculatedQuantity",key:"calculatedQuantity",width:120,render:(a,l)=>s.jsxs(Fe,{color:"green",children:[a," ",a===1?"unit":"units"]},`quantity-${l.key}`)},{title:"Allocation",dataIndex:"perSqm",key:"perSqm",width:180,render:(a,l)=>s.jsxs(ve,{type:"secondary",children:[s.jsx(Qt,{style:{marginRight:5}}),"1 ",l.quantity>1?`set of ${l.quantity}`:"unit"," per ",a," sqm"]},`allocation-${l.key}`)},{title:"Status",key:"status",width:100,align:"right",render:(a,l)=>s.jsx(ve,{type:"success",children:"Included"},`status-${l.key}`)}],pagination:!1,size:"small",locale:{emptyText:s.jsx(We,{message:"No basic amenities",description:"Your stall area is too small to qualify for any basic amenities.",type:"info",showIcon:!0})}})]}),w.amenities&&w.amenities.length>0&&s.jsxs(ye,{title:"Selected Amenities",style:{marginBottom:24},children:[s.jsx(Ft,{dataSource:w.amenities.map((a,l)=>({...a,key:l})),columns:[{title:"Name",dataIndex:"name",key:"name",render:(a,l)=>s.jsxs(ue,{children:[s.jsx(ve,{strong:!0,children:a}),s.jsx(Fe,{color:"blue",children:l.type})]},`amenity-name-${l.key}`)},{title:"Description",dataIndex:"description",key:"description",render:(a,l)=>s.jsx(ve,{type:"secondary",style:{fontSize:"13px"},children:a||"No description provided"},`amenity-desc-${l.key}`)},{title:"Rate",dataIndex:"rate",key:"rate",width:110,align:"right",render:(a,l)=>s.jsx(ve,{strong:!0,style:{color:"#1890ff"},children:T(a)},`amenity-rate-${l.key}`)},{title:"Quantity",dataIndex:"quantity",key:"quantity",width:90,align:"center",render:(a,l)=>s.jsx(Fe,{color:"green",children:a},`amenity-qty-${l.key}`)},{title:"Total",dataIndex:"total",key:"total",width:110,align:"right",render:(a,l)=>s.jsx(ve,{strong:!0,style:{color:"#1890ff"},children:T(a)},`amenity-total-${l.key}`)}],pagination:!1,size:"small"}),s.jsx(De,{}),s.jsx("div",{style:{textAlign:"right"},children:s.jsxs(ve,{strong:!0,children:["Amenities Total: ",T(w.amenitiesTotal)]})})]}),s.jsxs(ye,{title:"Price Calculation",style:{marginBottom:24},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[s.jsx(ve,{children:"Base Amount:"}),s.jsx(ve,{children:T(w.baseAmount)})]}),w.discounts.length>0&&s.jsxs(s.Fragment,{children:[w.discounts.map((a,l)=>s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[s.jsxs(ve,{children:[a.name," (",a.type==="percentage"?`${a.value}%`:T(a.value),"):"]}),s.jsxs(ve,{type:"danger",children:["- ",T(a.amount)]})]},l)),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[s.jsx(ve,{children:"Amount after Discount:"}),s.jsx(ve,{children:T(w.amountAfterDiscount)})]})]}),w.amenitiesTotal>0&&s.jsxs("div",{style:{background:"#f9f9f9",padding:"8px",borderRadius:"4px",marginBottom:"8px",border:"1px dashed #d9d9d9"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[s.jsx(ve,{type:"secondary",children:"Selected Amenities (for information only):"}),s.jsx(ve,{type:"secondary",children:T(w.amenitiesTotal)})]}),s.jsx(ve,{type:"secondary",style:{fontSize:"12px",fontStyle:"italic"},children:"Note: Amenities are not included in the total calculation"})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[s.jsx(ve,{strong:!0,children:"Subtotal:"}),s.jsx(ve,{strong:!0,children:T(w.subtotal)})]}),w.taxes.length>0&&s.jsx(s.Fragment,{children:w.taxes.map((a,l)=>s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[s.jsxs(ve,{children:[a.name," (",a.rate,"%):"]}),s.jsx(ve,{children:T(a.amount)})]},l))}),s.jsx(De,{}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsx(gn,{level:5,children:"Total:"}),s.jsx(gn,{level:5,children:T(w.total)})]})]})]})},{confirm:Vp}=st,Wd=({visible:t,stallDetails:e,selectedStallId:n,selectedStallIds:r,loading:i,exhibition:o,onCancel:d,onSubmit:p})=>{const[m]=W.useForm(),[h,_]=u.useState(0),[j]=u.useState(3),[f,w]=u.useState({}),[A,T]=u.useState(!1),[P,S]=u.useState(!1),[N,C]=u.useState(!1),a=Me(B=>B.exhibitorAuth.exhibitor);u.useEffect(()=>{if(t){_(0),T(!1),w({}),m.resetFields();const B=r.map($=>String($));n&&B.push(String(n));const D=[...new Set(B)],v={selectedStalls:D,exhibitionId:o==null?void 0:o._id};a&&(v.customerName=a.contactPerson||"",v.companyName=a.companyName||"",v.email=a.email||"",v.customerPhone=a.phone||""),m.setFieldsValue(v),w(v),console.log("Booking form initialized with stalls:",D),console.log("Exhibitor profile data:",a)}},[t,m,n,r,o,a]);const l=()=>{T(!0)},c=()=>{A?C(!0):d()},g=()=>{C(!1),d()},x=()=>{C(!1)},E=()=>{S(!0),m.validateFields().then(B=>{const D={...f,...B},v={customerName:m.getFieldValue("customerName"),companyName:m.getFieldValue("companyName"),email:m.getFieldValue("email"),customerPhone:m.getFieldValue("customerPhone")},$={...D,...v};w($),console.log("Step completed, saving form values:",$),console.log("Selected stalls are:",$.selectedStalls||[]),console.log("Exhibitor info:",v),_(h+1),S(!1)}).catch(B=>{S(!1),console.error("Form validation failed:",B),le.error("Please complete all required fields")})},b=()=>{_(h-1)},y=()=>{m.validateFields().then(B=>{const D={customerName:m.getFieldValue("customerName"),companyName:m.getFieldValue("companyName"),email:m.getFieldValue("email"),customerPhone:m.getFieldValue("customerPhone")},v=m.getFieldValue("selectedStalls")||[],$=m.getFieldValue("amenities")||[],V=e.filter(O=>v.includes(String(O.id))).reduce((O,q)=>O+q.dimensions.width*q.dimensions.height,0);let L=[];o!=null&&o.basicAmenities&&o.basicAmenities.length>0&&(L=o.basicAmenities.filter(O=>Math.floor(V/O.perSqm)*O.quantity>0).map(O=>{const q=Math.floor(V/O.perSqm)*O.quantity;return{name:O.name,type:O.type,perSqm:O.perSqm,quantity:O.quantity,calculatedQuantity:q,description:O.description||""}}));let F=[];$&&$.length>0&&(F=$.map(O=>{var G;const q=(G=o==null?void 0:o.amenities)==null?void 0:G.find(Y=>String(Y._id||Y.id)===String(O.id));return q?{id:String(q._id||q.id),name:q.name,type:q.type,rate:q.rate,quantity:O.quantity||1,description:q.description||""}:null}).filter(Boolean));const U={...f,...B,...D,basicAmenities:L,extraAmenities:F};console.log("Submitting booking with values:",U),console.log("Basic amenities:",L),console.log("Extra amenities:",F),p(U)}).catch(B=>{console.error("Form validation failed:",B),le.error("Please complete all required fields")})},k=["Stall Details","Amenities","Review"],I=[{title:"Stall Details",icon:s.jsx(za,{}),content:s.jsx(fi,{form:m,stallDetails:e,selectedStallId:n,selectedStallIds:r,exhibition:o})},{title:"Amenities",icon:s.jsx(Ar,{}),content:s.jsx(mi,{form:m,stallDetails:e,selectedStallIds:m.getFieldValue("selectedStalls")||[],exhibition:o,formValues:f})},{title:"Review",icon:s.jsx($t,{}),content:s.jsx(yi,{form:m,formValues:f,loading:i,exhibition:o,selectedStalls:m.getFieldValue("selectedStalls")||[],selectedStallIds:m.getFieldValue("selectedStalls")||[],stallDetails:e})}];u.useEffect(()=>{const B=m.getFieldValue("selectedStalls");console.log(`Step ${h} - Form has selectedStalls:`,B)},[h,m]);const R=B=>{const D=m.getFieldValue("selectedStalls")||[],v={customerName:m.getFieldValue("customerName"),companyName:m.getFieldValue("companyName"),email:m.getFieldValue("email"),customerPhone:m.getFieldValue("customerPhone")},$={...f,...v};switch(console.log(`Rendering step ${B} with:`,{selectedStalls:D,exhibitorInfo:v}),B){case 0:return s.jsx(fi,{form:m,stallDetails:e,selectedStallId:n,selectedStallIds:r,exhibition:o});case 1:return s.jsx(mi,{form:m,stallDetails:e,selectedStallIds:D,exhibition:o,formValues:$});case 2:return s.jsx(yi,{form:m,formValues:$,loading:i,exhibition:o,selectedStalls:D,selectedStallIds:D,stallDetails:e,onPrev:b,onFinish:y});default:return null}};return s.jsxs(s.Fragment,{children:[s.jsx(zd,{title:`Book Exhibition Stall - ${k[h]}`,open:t,onCancel:c,footer:s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"12px 24px"},children:[h>0&&s.jsx(fn,{onClick:b,disabled:P||i,size:"large",children:"Back"}),s.jsx("div",{children:h<j-1?s.jsx(fn,{type:"primary",onClick:E,loading:P,disabled:i,size:"large",children:"Next"}):s.jsx(fn,{type:"primary",onClick:y,loading:i,disabled:P,size:"large",children:"Submit Booking"})})]}),width:900,destroyOnClose:!0,maskClosable:!1,className:"booking-modal",children:s.jsxs(ct,{spinning:i||P,tip:i?"Processing your booking...":"Validating...",children:[s.jsx(Od,{children:I.map((B,D)=>s.jsxs("div",{className:`step-item ${h===D?"active":""} ${h>D?"completed":""}`,onClick:()=>h>D?_(D):null,style:{cursor:h>D?"pointer":"default"},children:[s.jsx("span",{className:"step-icon",children:h>D?s.jsx(Gi,{}):D+1}),B.title]},D))}),s.jsx(W,{form:m,layout:"vertical",preserve:!0,onFieldsChange:l,children:R(h)},`form-step-${h}`)]})}),s.jsx(st,{title:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx(Oa,{style:{color:"#faad14",fontSize:"18px"}}),s.jsx("span",{children:"Discard Changes?"})]}),open:N,onCancel:x,footer:s.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",padding:"8px 0"},children:[s.jsx(X,{onClick:x,size:"large",style:{minWidth:"100px"},children:"Keep Editing"}),s.jsx(X,{type:"primary",danger:!0,onClick:g,size:"large",style:{minWidth:"100px"},children:"Discard Changes"})]}),width:480,centered:!0,maskClosable:!1,children:s.jsxs("div",{style:{padding:"16px 0"},children:[s.jsx("p",{style:{margin:0,fontSize:"14px",lineHeight:"1.6",color:"#666"},children:"You have unsaved changes in your booking form. If you close now, all your progress will be lost."}),s.jsx("p",{style:{margin:"12px 0 0 0",fontSize:"14px",lineHeight:"1.6",color:"#666"},children:"Are you sure you want to discard your changes and close the form?"})]})})]})},br=ze.create({baseURL:Xe}),Rt=ze.create({baseURL:Xe});br.interceptors.request.use(t=>{const e=localStorage.getItem("exhibitor_token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));const St=ze.create({baseURL:Xe});St.interceptors.request.use(t=>{const e=localStorage.getItem("token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));const ot={sendRegistrationOTP:async t=>await Rt.post("/exhibitors/send-otp",{email:t}),verifyOTP:async t=>await Rt.post("/exhibitors/verify-otp",t),register:async t=>await Rt.post("/exhibitors/register",t),login:async t=>await Rt.post("/exhibitors/login",t),requestPasswordReset:async t=>await Rt.post("/exhibitors/forgot-password",t),resetPassword:async t=>await Rt.post("/exhibitors/reset-password",t),getProfile:async()=>await br.get("/exhibitors/profile"),updateProfile:async t=>await br.put("/exhibitors/profile",t),getExhibitors:async t=>{const e=new URLSearchParams;t!=null&&t.page&&e.append("page",t.page.toString()),t!=null&&t.limit&&e.append("limit",t.limit.toString()),t!=null&&t.status&&e.append("status",t.status),(t==null?void 0:t.isActive)!==void 0&&e.append("isActive",t.isActive.toString()),t!=null&&t.search&&e.append("search",t.search),t!=null&&t.sortBy&&e.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&e.append("sortOrder",t.sortOrder);const n=`/exhibitors/admin/exhibitors${e.toString()?`?${e.toString()}`:""}`;return await St.get(n)},getExhibitor:async t=>await St.get(`/exhibitors/admin/exhibitors/${t}`),createExhibitor:async t=>await St.post("/exhibitors/admin/exhibitors",t),updateStatus:async(t,e,n)=>await St.put(`/exhibitors/admin/exhibitors/${t}/status`,{status:e,rejectionReason:n}),updateExhibitor:async(t,e)=>await St.put(`/exhibitors/admin/exhibitors/${t}`,e),deleteExhibitor:async t=>await St.delete(`/exhibitors/admin/exhibitors/${t}`)},{Step:mn}=us,{Text:Yd}=Pe,Kd=({loginModalVisible:t,registerModalVisible:e,setRegisterModalVisible:n,setExhibitorCredentials:r,onForgotPassword:i})=>{const o=ut(),d=Me(L=>L.exhibitorAuth),[p,m]=u.useState(!1),[h,_]=u.useState(null),[j]=W.useForm(),[f]=W.useForm(),[w]=W.useForm(),[A,T]=u.useState(0),[P,S]=u.useState(""),[N,C]=u.useState(!1),[a,l]=u.useState(!1),[c,g]=u.useState(0),[x,E]=u.useState({companyName:"",contactPerson:""}),b=u.useRef(null),y=async L=>{var F,U,O,q,G,Y,pe,we,oe;try{_(null),m(!0);const ee=await ot.login(L),{exhibitor:de,token:Te}=ee.data;if(!de||!Te)throw new Error("Invalid response from server");r({exhibitor:de,token:Te}),o(ms()),j.resetFields(),le.success("Login successful!")}catch(ee){if(((F=ee.response)==null?void 0:F.status)===403){const de=(O=(U=ee.response)==null?void 0:U.data)==null?void 0:O.status;if(de==="pending")_("Your account is pending approval. You will be able to log in after admin approval.");else if(de==="rejected"){const Te=(G=(q=ee.response)==null?void 0:q.data)==null?void 0:G.rejectionReason;_(Te?`Your registration has been rejected. Reason: ${Te}`:"Your registration has been rejected. Please contact the administrator for more details.")}else _(((pe=(Y=ee.response)==null?void 0:Y.data)==null?void 0:pe.message)||"Access denied. Please contact administrator.")}else _(((oe=(we=ee.response)==null?void 0:we.data)==null?void 0:oe.message)||"Login failed. Please try again.")}finally{m(!1)}},k=async()=>{var L,F;try{const U=await f.validateFields(["email","companyName","contactPerson"]);m(!0),_(null),S(U.email),E({companyName:U.companyName,contactPerson:U.contactPerson}),await ot.sendRegistrationOTP(U.email),C(!0),le.success("OTP sent to your email address"),g(60),I(),T(1)}catch(U){if(U.name==="ValidationError")return;const O=((F=(L=U.response)==null?void 0:L.data)==null?void 0:F.message)||"Failed to send OTP. Please try again.";_(O),le.error(O)}finally{m(!1)}},I=()=>{b.current&&clearInterval(b.current),b.current=setInterval(()=>{g(L=>L<=1?(b.current&&clearInterval(b.current),0):L-1)},1e3)},R=async()=>{var L,F;try{m(!0),_(null),await ot.sendRegistrationOTP(P),le.success("New OTP sent to your email address"),g(60),I()}catch(U){const O=((F=(L=U.response)==null?void 0:L.data)==null?void 0:F.message)||"Failed to resend OTP. Please try again.";_(O),le.error(O)}finally{m(!1)}},B=async L=>{var F,U;try{m(!0),_(null);const O={email:P,otp:L.otp};await ot.verifyOTP(O),l(!0),le.success("Email verified successfully"),b.current&&clearInterval(b.current),T(2)}catch(O){const q=((U=(F=O.response)==null?void 0:F.data)==null?void 0:U.message)||"Invalid OTP. Please try again.";_(q),le.error(q)}finally{m(!1)}},D=()=>{C(!1),l(!1),S(""),g(0),T(0),E({companyName:"",contactPerson:""}),b.current&&clearInterval(b.current),w.resetFields()},v=async L=>{var F,U,O;try{if(_(null),m(!0),!a){_("Email verification required");return}const{confirmPassword:q,...G}=L,Y={...G,email:P,companyName:x.companyName,contactPerson:x.contactPerson};console.log("Sending registration data:",Y);const pe=await ot.register(Y);le.success("Registration successful! You can log in and book a stall only after admin approval."),n(!1),f.resetFields(),D(),setTimeout(()=>{o(Ct(void 0))},500)}catch(q){console.error("Registration error:",q),console.error("Response data:",(F=q.response)==null?void 0:F.data);const G=((O=(U=q.response)==null?void 0:U.data)==null?void 0:O.message)||"Registration failed. Please try again.";_(G),le.error(G)}finally{m(!1)}};Ie.useEffect(()=>()=>{b.current&&clearInterval(b.current)},[]);const $=()=>{n(!1),_(null),f.resetFields(),D()},z=()=>{o(ms()),n(!0),j.resetFields()},V=()=>{n(!1),o(Ct(void 0)),f.resetFields()};return s.jsxs(s.Fragment,{children:[s.jsxs(st,{title:"Exhibitor Login",open:t,onCancel:()=>{o(ms()),_(null),j.resetFields()},footer:null,width:400,children:[d.loginContext==="stall-booking"&&s.jsx(We,{message:"Login Required for Stall Booking",description:"Please log in to your exhibitor account to select and book stalls for this exhibition.",type:"info",showIcon:!0,style:{marginBottom:16}}),h&&s.jsx(We,{message:h,type:"error",showIcon:!0,style:{marginBottom:16}}),s.jsxs(W,{form:j,name:"exhibitor_login_modal",onFinish:y,layout:"vertical",children:[s.jsx(W.Item,{name:"email",rules:[{required:!0,message:"Please input your email!"},{type:"email",message:"Please enter a valid email address!"}],children:s.jsx(ge,{prefix:s.jsx(Us,{}),placeholder:"Email",size:"large",disabled:p})}),s.jsx(W.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}],children:s.jsx(ge.Password,{prefix:s.jsx(Lt,{}),placeholder:"Password",size:"large",disabled:p})}),s.jsxs(W.Item,{children:[s.jsx("div",{style:{textAlign:"right",marginBottom:10},children:s.jsx(X,{type:"link",onClick:()=>{o(ms()),i()},style:{padding:0},children:"Forgot password?"})}),s.jsx(X,{type:"primary",htmlType:"submit",block:!0,size:"large",loading:p,children:"Login"})]})]}),s.jsx(De,{children:s.jsx("span",{style:{fontSize:"14px",color:"#888"},children:"Don't have an account?"})}),s.jsx(X,{type:"default",block:!0,onClick:z,children:"Register as Exhibitor"})]}),s.jsxs(st,{title:"Exhibitor Registration",open:e,onCancel:$,footer:null,width:500,children:[s.jsxs(us,{current:A,style:{marginBottom:24},children:[s.jsx(mn,{title:"Basic Info"}),s.jsx(mn,{title:"Verify Email"}),s.jsx(mn,{title:"Complete"})]}),h&&s.jsx(We,{message:h,type:"error",showIcon:!0,style:{marginBottom:16}}),A===0&&s.jsxs(s.Fragment,{children:[s.jsx(We,{message:"Email Verification Required",description:"We'll send a one-time password (OTP) to verify your email before completing registration.",type:"info",showIcon:!0,style:{marginBottom:16}}),s.jsxs(W,{form:f,name:"exhibitor_register_step1",layout:"vertical",children:[s.jsx(W.Item,{name:"companyName",rules:[{required:!0,message:"Please input your company name!"}],children:s.jsx(ge,{prefix:s.jsx(to,{}),placeholder:"Company Name",size:"large",disabled:p})}),s.jsx(W.Item,{name:"contactPerson",rules:[{required:!0,message:"Please input contact person name!"}],children:s.jsx(ge,{prefix:s.jsx(Ae,{}),placeholder:"Contact Person",size:"large",disabled:p})}),s.jsx(W.Item,{name:"email",rules:[{required:!0,message:"Please input your email!"},{type:"email",message:"Please enter a valid email address!"}],children:s.jsx(ge,{prefix:s.jsx(Us,{}),placeholder:"Email",size:"large",disabled:p})}),s.jsx(W.Item,{children:s.jsx(X,{type:"primary",onClick:k,block:!0,size:"large",loading:p,children:"Continue & Verify Email"})})]}),s.jsx(De,{children:s.jsx("span",{style:{fontSize:"14px",color:"#888"},children:"Already have an account?"})}),s.jsx(X,{type:"default",block:!0,onClick:V,children:"Login"})]}),A===1&&s.jsxs(s.Fragment,{children:[s.jsx(We,{message:"Email Verification",description:`We've sent a verification code to ${P}. Please enter it below to continue.`,type:"info",showIcon:!0,style:{marginBottom:16}}),s.jsxs(W,{form:w,name:"verify_otp",onFinish:B,layout:"vertical",children:[s.jsx(W.Item,{name:"otp",rules:[{required:!0,message:"Please enter the verification code!"}],children:s.jsx(ge,{size:"large",placeholder:"Enter OTP",maxLength:6,style:{textAlign:"center",letterSpacing:"8px",fontSize:"20px"},disabled:p})}),s.jsx(W.Item,{children:s.jsx(X,{type:"primary",htmlType:"submit",block:!0,size:"large",loading:p,children:"Verify & Continue"})})]}),s.jsxs(Ne,{justify:"space-between",align:"middle",style:{marginTop:16},children:[s.jsx(se,{children:s.jsx(X,{type:"link",disabled:c>0||p,onClick:R,children:"Resend Code"})}),s.jsx(se,{children:c>0&&s.jsxs(Yd,{type:"secondary",children:["Resend in ",c,"s"]})})]}),s.jsx(De,{}),s.jsx(X,{type:"default",block:!0,onClick:()=>T(0),children:"Back"})]}),A===2&&s.jsxs(s.Fragment,{children:[s.jsx(We,{message:"Email Verified Successfully",description:"Please complete your registration by providing the remaining details.",type:"success",showIcon:!0,style:{marginBottom:16}}),s.jsxs(W,{form:f,name:"exhibitor_register_step2",onFinish:v,layout:"vertical",children:[s.jsx(W.Item,{name:"phone",rules:[{required:!0,message:"Please input your phone number!"}],children:s.jsx(ge,{prefix:s.jsx(so,{}),placeholder:"Phone Number",size:"large",disabled:p})}),s.jsx(W.Item,{name:"address",rules:[{required:!0,message:"Please input your address!"}],children:s.jsx(ge.TextArea,{placeholder:"Address",rows:3,disabled:p})}),s.jsx(W.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"},{min:6,message:"Password must be at least 6 characters!"}],children:s.jsx(ge.Password,{prefix:s.jsx(Lt,{}),placeholder:"Password",size:"large",disabled:p})}),s.jsx(W.Item,{name:"confirmPassword",dependencies:["password"],rules:[{required:!0,message:"Please confirm your password!"},({getFieldValue:L})=>({validator(F,U){return!U||L("password")===U?Promise.resolve():Promise.reject(new Error("The two passwords do not match!"))}})],children:s.jsx(ge.Password,{prefix:s.jsx(Lt,{}),placeholder:"Confirm Password",size:"large",disabled:p})}),s.jsx(W.Item,{children:s.jsx(X,{type:"primary",htmlType:"submit",block:!0,size:"large",loading:p,children:"Complete Registration"})})]})]})]})]})},{Step:Qp}=us,{Text:Hp}=Pe,Gd=({visible:t})=>{const e=ut(),[n,r]=u.useState(!1),[i,o]=u.useState(null),[d,p]=u.useState(0),[m,h]=u.useState(""),[_,j]=u.useState(!1),[f,w]=u.useState(0),A=W.useForm()[0],T=W.useForm()[0],P=W.useForm()[0],S=u.useRef(null),N=async b=>{var y,k;try{r(!0),o(null);const I=await ot.requestPasswordReset(b);h(b.email),j(!0),p(1),le.success("Password reset code sent to your email"),w(60),C()}catch(I){const R=((k=(y=I.response)==null?void 0:y.data)==null?void 0:k.message)||"Failed to send password reset code. Please try again.";o(R)}finally{r(!1)}},C=()=>{S.current&&clearInterval(S.current),S.current=setInterval(()=>{w(b=>b<=1?(S.current&&clearInterval(S.current),0):b-1)},1e3)},a=async()=>{var b,y;try{r(!0),o(null),await ot.requestPasswordReset({email:m}),le.success("New password reset code sent to your email"),w(60),C()}catch(k){const I=((y=(b=k.response)==null?void 0:b.data)==null?void 0:y.message)||"Failed to resend password reset code. Please try again.";o(I)}finally{r(!1)}},l=async b=>{var y,k;try{r(!0),o(null),p(2),S.current&&clearInterval(S.current)}catch(I){const R=((k=(y=I.response)==null?void 0:y.data)==null?void 0:k.message)||"Invalid code. Please try again.";o(R)}finally{r(!1)}},c=async b=>{var y,k;try{r(!0),o(null);const I=T.getFieldValue("otp"),R={email:m,otp:I,newPassword:b.newPassword};await ot.resetPassword(R),le.success("Password reset successful. You can now log in with your new password."),g(),e(un()),e(Ct())}catch(I){const R=((k=(y=I.response)==null?void 0:y.data)==null?void 0:k.message)||"Failed to reset password. Please try again.";o(R)}finally{r(!1)}},g=()=>{p(0),h(""),j(!1),w(0),S.current&&clearInterval(S.current),A.resetFields(),T.resetFields(),P.resetFields()},x=()=>{g(),e(un())},E=()=>{g(),e(un()),e(Ct())};return Ie.useEffect(()=>()=>{S.current&&clearInterval(S.current)},[]),s.jsxs(st,{title:"Forgot Password",open:t,onCancel:x,footer:null,width:400,children:[i&&s.jsx(We,{message:i,type:"error",style:{marginBottom:16}}),s.jsx(us,{current:d,size:"small",style:{marginBottom:20},items:[{title:"Email"},{title:"Verify"},{title:"Reset"}]}),d===0&&s.jsxs(W,{form:A,onFinish:N,layout:"vertical",children:[s.jsx(W.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please enter your email"},{type:"email",message:"Please enter a valid email"}],children:s.jsx(ge,{prefix:s.jsx(Us,{}),placeholder:"Email"})}),s.jsx(W.Item,{children:s.jsx(X,{type:"primary",htmlType:"submit",block:!0,loading:n,children:"Send Reset Code"})}),s.jsx(De,{style:{margin:"12px 0"},children:s.jsx("span",{style:{fontSize:"12px",color:"#8c8c8c"},children:"Remember your password?"})}),s.jsx(X,{type:"link",onClick:E,block:!0,children:"Back to Login"})]}),d===1&&s.jsxs(W,{form:T,onFinish:l,layout:"vertical",children:[s.jsxs("p",{children:["We've sent a verification code to ",s.jsx("strong",{children:m}),". Please check your email and enter the code below."]}),s.jsx(W.Item,{name:"otp",rules:[{required:!0,message:"Please enter the verification code"},{pattern:/^\d{6}$/,message:"Please enter a valid 6-digit code"}],children:s.jsx(ge,{placeholder:"Enter 6-digit code",maxLength:6,style:{letterSpacing:"0.5em",textAlign:"center",fontWeight:"bold"}})}),s.jsx(W.Item,{children:s.jsx(X,{type:"primary",htmlType:"submit",block:!0,loading:n,children:"Verify Code"})}),s.jsx("div",{style:{textAlign:"center",marginTop:8},children:f>0?s.jsxs(Pe.Text,{type:"secondary",children:["Resend code in ",f,"s"]}):s.jsx(X,{type:"link",onClick:a,disabled:n,children:"Resend Code"})}),s.jsx(De,{style:{margin:"12px 0"},children:s.jsx("span",{style:{fontSize:"12px",color:"#8c8c8c"},children:"Back to beginning"})}),s.jsx(X,{type:"link",onClick:()=>{p(0),S.current&&(clearInterval(S.current),w(0))},block:!0,children:"Change Email"})]}),d===2&&s.jsxs(W,{form:P,onFinish:c,layout:"vertical",children:[s.jsx(W.Item,{name:"newPassword",label:"New Password",rules:[{required:!0,message:"Please enter your new password"},{min:6,message:"Password must be at least 6 characters"}],hasFeedback:!0,children:s.jsx(ge.Password,{prefix:s.jsx(Lt,{}),placeholder:"New Password"})}),s.jsx(W.Item,{name:"confirmPassword",label:"Confirm Password",dependencies:["newPassword"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password"},({getFieldValue:b})=>({validator(y,k){return!k||b("newPassword")===k?Promise.resolve():Promise.reject(new Error("The two passwords do not match"))}})],children:s.jsx(ge.Password,{prefix:s.jsx(Lt,{}),placeholder:"Confirm Password"})}),s.jsx(W.Item,{children:s.jsx(X,{type:"primary",htmlType:"submit",block:!0,loading:n,children:"Reset Password"})})]})]})},{Header:Xd}=be,Jd=Q(Xd)`
  background: #fff;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
  padding: 0 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: fixed;
  width: 100%;
  z-index: 1000;
  
  @media (max-width: 768px) {
    padding: 0 1rem;
  }
`,Zd=Q.div`
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  display: flex;
  justify-content: space-between;
  align-items: center;
  
  @media (max-width: 768px) {
    justify-content: space-between;
  }
`,eu=Q.div`
  display: flex;
  align-items: center;
  justify-content: center;
  
  @media (max-width: 768px) {
    position: static;
    transform: none;
    justify-content: flex-start;
  }
`,tu=Q.div`
  border-radius: 8px;
  padding: 10px;
  display: flex;
  justify-content: center;
  align-items: center;
  
  @media (max-width: 768px) {
    padding: 8px;
  }
`,su=Q.img`
  height: auto;
  width: 100%;
  max-width: 140px;
  max-height: auto;
  object-fit: contain;
  
  @media (max-width: 768px) {
    max-width: 120px;
  }
`,bi=Q(zt)`
  background-color: #1890ff;
  cursor: pointer;
  transition: all 0.3s;
  border: 2px solid transparent;
  
  &:hover {
    background-color: #40a9ff;
    border-color: #e6f7ff;
    transform: scale(1.05);
    box-shadow: 0 0 10px rgba(24, 144, 255, 0.3);
  }
`,wi=Q(ds)`
  background: white;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  padding: 8px 0;
  
  .ant-dropdown-menu-item {
    padding: 10px 16px;
    transition: all 0.2s;
    
    &:hover {
      background-color: #fafafa;
    }
  }
`,nu=Q(ds)`
  border: none;
  display: flex;
  justify-content: center;
  font-size: 15px;
  
  @media (max-width: 768px) {
    display: none !important;
  }
`,ru=Q(X)`
  display: none;
  font-size: 18px;
  background: transparent;
  border: none;
  padding: 8px;
  transition: all 0.3s ease;
  
  @media (max-width: 768px) {
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 5;
  }
  
  &:hover {
    transform: rotate(90deg);
    color: #4158D0;
  }
  
  &:active {
    transform: scale(0.9) rotate(90deg);
  }
`,iu=Q.div`
  .ant-drawer-header {
    padding: 16px 24px;
  }
  
  .ant-drawer-title {
    font-size: 16px;
    font-weight: 600;
  }
  
  .ant-drawer-body {
    padding: 24px 16px;
  }
  
  .ant-drawer-content-wrapper {
    max-width: 80%;
  }
`,ou=Q(Ze)`
  display: block;
  padding: 16px 8px;
  margin-bottom: 8px;
  color: #333;
  font-size: 16px;
  border-bottom: 1px solid #f0f0f0;
  
  &:hover {
    color: #1890ff;
  }
`,bs=Q(X)`
  width: 100%;
  margin-bottom: 12px;
  height: auto;
  padding: 12px 16px;
  font-size: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  
  svg {
    margin-right: 10px;
    font-size: 18px;
  }
`,au=Q.div`
  display: flex;
  align-items: center;
  
  @media (max-width: 768px) {
    display: none;
  }
`,lu=Q.span`
  margin-right: 8px;
  display: none;
  
  @media (min-width: 768px) {
    display: inline;
  }
`,Ke=()=>{var x;const t=dt(),e=ut(),[n,r]=u.useState(!1),[i,o]=u.useState(!1),[d,p]=u.useState(!1),[m,h]=u.useState("/logo.png"),[_,j]=u.useState("Exhibition Manager"),f=Me(E=>E.exhibitorAuth),{exhibitor:w,isAuthenticated:A,showLoginModal:T,showForgotPasswordModal:P}=f;u.useEffect(()=>{const E=localStorage.getItem("cachedLogoUrl"),b=localStorage.getItem("logoTimestamp"),y=new Date().getTime();if(E&&b&&y-parseInt(b)<36e5)h(E);else{const k=`${H.defaults.baseURL}/public/logo`;h(k),localStorage.setItem("cachedLogoUrl",k),localStorage.setItem("logoTimestamp",y.toString());const I=new Image;I.src=k}fetch(`${H.defaults.baseURL}/public/site-info`).then(k=>k.json()).then(k=>{k.siteName&&j(k.siteName)}).catch(k=>{console.error("Error fetching site info:",k)})},[]),u.useEffect(()=>(le.config({top:84,duration:3,maxCount:1}),()=>{le.destroy()}),[]);const S=()=>{e(Eo()),le.success("Successfully logged out"),t("/"),r(!1),o(!1)},N=()=>{e(Ct(void 0)),r(!1),o(!1)},C=()=>{p(!0),r(!1),o(!1)},a=()=>{e(qc())},l=[{key:"exhibitions",label:"Exhibitions",path:"/exhibitions"},{key:"about",label:"About",path:"/about"},{key:"contact",label:"Contact",path:"/contact"}],c=s.jsx(wi,{items:[{key:"exhibitor-login",icon:s.jsx(Jr,{}),label:s.jsx("a",{onClick:N,children:"Exhibitor Login"})},{key:"exhibitor-register",icon:s.jsx(ar,{}),label:s.jsx("a",{onClick:C,children:"Register as Exhibitor"})}]}),g=s.jsx(wi,{items:[{key:"exhibitor-dashboard",icon:s.jsx(qs,{}),label:s.jsx(Ze,{to:"/exhibitor/dashboard",children:"Dashboard"})},{key:"exhibitor-profile",icon:s.jsx(Ae,{}),label:s.jsx(Ze,{to:"/exhibitor/profile",children:"My Profile"})},{key:"exhibitor-bookings",icon:s.jsx(tt,{}),label:s.jsx(Ze,{to:"/exhibitor/bookings",children:"My Bookings"})},{key:"divider",type:"divider"},{key:"exhibitor-logout",icon:s.jsx(Os,{}),label:s.jsx("a",{onClick:S,children:"Logout"})}]});return s.jsxs(s.Fragment,{children:[s.jsx(Jd,{children:s.jsxs(Zd,{children:[s.jsx(eu,{children:s.jsx(Ze,{to:"/",style:{display:"flex",alignItems:"center",textDecoration:"none"},children:s.jsx(tu,{children:s.jsx(su,{src:m,alt:"Logo",onError:()=>h("/logo.png")})})})}),s.jsx(nu,{mode:"horizontal",selectedKeys:[],style:{flex:1,display:"flex",justifyContent:"center"},items:l.map(E=>({key:E.key,label:s.jsx(Ze,{to:E.path,children:E.label})}))}),s.jsx(au,{children:s.jsx(Ys,{overlay:f.isAuthenticated?g:c,trigger:["click"],placement:"bottomRight",open:n,onOpenChange:r,overlayStyle:{minWidth:"150px",marginTop:"10px"},children:f.isAuthenticated?s.jsxs(ue,{style:{cursor:"pointer"},children:[s.jsx(lu,{children:((x=f.exhibitor)==null?void 0:x.companyName)||"Exhibitor"}),s.jsx(bi,{icon:s.jsx(Ae,{}),size:"large"})]}):s.jsx(bi,{icon:s.jsx(Ae,{}),size:"large"})})}),s.jsx(ru,{icon:s.jsx(qa,{}),onClick:()=>o(!0)})]})}),s.jsx(iu,{children:s.jsxs(Ua,{title:"Exhibition Management System",placement:"right",onClose:()=>o(!1),open:i,width:280,closeIcon:s.jsx("span",{style:{fontSize:"16px"},children:""}),children:[s.jsx("div",{style:{marginBottom:24},children:l.map(E=>s.jsx(ou,{to:E.path,onClick:()=>o(!1),children:E.label},E.key))}),s.jsx("div",{style:{marginTop:40},children:f.isAuthenticated?s.jsxs(s.Fragment,{children:[s.jsx(bs,{type:"primary",icon:s.jsx(qs,{}),onClick:()=>{t("/exhibitor/dashboard"),o(!1)},children:"Dashboard"}),s.jsx(bs,{type:"default",icon:s.jsx(Os,{}),onClick:S,children:"Logout"})]}):s.jsxs(s.Fragment,{children:[s.jsx(bs,{type:"primary",style:{background:"#7E57C2",borderColor:"#7E57C2"},icon:s.jsx(Jr,{}),onClick:()=>{N(),o(!1)},children:"Exhibitor Login"}),s.jsx(bs,{type:"default",icon:s.jsx(ar,{}),onClick:()=>{C(),o(!1)},children:"Register as Exhibitor"})]})})]})}),s.jsx(Kd,{loginModalVisible:T,registerModalVisible:d,setRegisterModalVisible:p,setExhibitorCredentials:E=>e(Oc(E)),onForgotPassword:a}),s.jsx(Gd,{visible:P})]})},{Content:ws}=be,{Title:Wp}=Pe,cu=t=>{if(!t)return"";if(t.startsWith("http"))return t;const e=t.startsWith("/")?t.substring(1):t;if(e.includes("logos/"))return`${H.defaults.baseURL}/public/images/${e}`;const n=localStorage.getItem("token"),r=`uploads/${e}`;return n?`${H.defaults.baseURL}/${r}?token=${n}`:`${H.defaults.baseURL}/${r}`},du=()=>{var $,z,V,L;const{id:t}=qi(),e=dt(),n=ut(),[r,i]=u.useState(null),[o,d]=u.useState(null),[p,m]=u.useState(null),[h,_]=u.useState([]),[j,f]=u.useState(!1),[w,A]=u.useState(!0),[T,P]=u.useState(null),[S,N]=u.useState(!1),[C,a]=u.useState(null),l=u.useRef(null),[c,g]=u.useState({width:800,height:600}),[x,E]=u.useState(!1),[b]=W.useForm(),{isAuthenticated:y}=Me(F=>F.exhibitorAuth);u.useEffect(()=>{const F=()=>{E(window.innerWidth<768)};return F(),window.addEventListener("resize",F),()=>{window.removeEventListener("resize",F)}},[]);const k=u.useCallback(F=>F.status==="booked"||F.status==="reserved",[]),I=u.useCallback(()=>{if(l.current){const{clientWidth:F,clientHeight:U}=l.current,O=x?320:800,q=x?480:600,G=Math.max(F||O,O),Y=Math.max(U||q,q);(Math.abs(G-c.width)>5||Math.abs(Y-c.height)>5)&&g({width:G,height:Y})}},[c.width,c.height,x]);u.useEffect(()=>{let F=null;const U=()=>{F===null&&(F=window.setTimeout(()=>{F=null,I()},x?100:50))};I();const O=new ResizeObserver(U);return l.current&&O.observe(l.current),window.addEventListener("resize",U),()=>{F!==null&&window.clearTimeout(F),O.disconnect(),window.removeEventListener("resize",U)}},[I,x]),u.useEffect(()=>{(async()=>{try{if(!t){P("Exhibition ID is missing"),A(!1);return}A(!0),P(null);const U=await gt.getLayout(t);i(U.data)}catch(U){P(U.message||"Failed to fetch layout"),console.error("Error fetching exhibition:",U)}finally{A(!1)}})()},[t]),u.useEffect(()=>{r&&I()},[r]),u.useEffect(()=>{y&&r&&(m(null),_([]),I(),le.info("You can now select stalls to book.",3))},[y]);const R=u.useCallback(async F=>{if(k(F)){le.info(`This stall (${F.stallNumber}) is already booked.`);return}if(!y){n(Ct("stall-booking"));return}const O=F._id||F.id;_(q=>q.includes(O)?(le.info(`Stall ${F.stallNumber} removed from selection`),q.filter(G=>G!==O)):(le.success(`Stall ${F.stallNumber} added to selection`),[...q,O]))},[k,y,n]),B=async F=>{try{N(!0);const U={...F,exhibitionId:r==null?void 0:r.exhibition._id,stallIds:F.selectedStalls};if(y){const O=await gt.exhibitorBookStalls(U);le.success("Your booking request has been submitted successfully! It is pending review by the admin.")}else{const O=await gt.bookMultipleStalls(t,U);le.success("Your booking request has been submitted successfully!")}if(f(!1),_([]),t)try{const O=await gt.getLayout(t);i(O.data)}catch(O){console.error("Error refreshing layout data:",O)}}catch(U){console.error("Error booking stall",U),le.error("Failed to book stall. Please try again.")}finally{N(!1)}},D=async()=>{var F;try{if(!r)return;N(!0);let U=null;if(p){const q=r.layout.find(G=>G.stalls.some(Y=>Y.id===p));q?U=q.stalls.find(G=>G.id===p)||null:console.error("Selected stall not found in any hall")}const O=r.layout.flatMap(q=>q.stalls.map(G=>({...G,hallId:q.id,hallName:q.name}))).filter(q=>q.status==="available");if(h.length===0&&p===null&&O.length===0){le.error("No stalls are available for booking");return}if(!r.exhibition.basicAmenities)try{const q=await gt.getExhibition(t||"");(F=q==null?void 0:q.data)!=null&&F.basicAmenities&&i({...r,exhibition:{...r.exhibition,basicAmenities:q.data.basicAmenities}})}catch(q){console.error("Error fetching exhibition details with amenities:",q)}a(O),f(!0)}catch(U){console.error("Error opening booking modal:",U),le.error("Failed to open booking form")}finally{N(!1)}};u.useCallback(F=>{F.cancelBubble=!0},[]);const v=u.useMemo(()=>{var F;return r?{halls:r.layout.map(U=>s.jsx(_o,{hall:{...U,exhibitionId:t||""},isSelected:!1,onSelect:()=>{},isStallMode:!0},U.id)),stalls:r.layout.flatMap(U=>U.stalls.map(O=>{var q,G,Y,pe,we,oe,ee,de;return s.jsx(To,{stall:{...O,hallId:U.id,hallName:U.name,isSelected:h.includes(O.id),stallTypeId:"default",number:O.stallNumber,typeName:O.type||"Standard",ratePerSqm:O.price||0,rotation:0,dimensions:{x:((q=O.position)==null?void 0:q.x)||0,y:((G=O.position)==null?void 0:G.y)||0,width:((Y=O.dimensions)==null?void 0:Y.width)||0,height:((pe=O.dimensions)==null?void 0:pe.height)||0},status:O.status==="maintenance"?"booked":O.status},isSelected:p===O.id||h.includes(O.id),onSelect:O.status==="available"?()=>R(O):void 0,hallWidth:((we=U.dimensions)==null?void 0:we.width)||0,hallHeight:((oe=U.dimensions)==null?void 0:oe.height)||0,hallX:((ee=U.dimensions)==null?void 0:ee.x)||0,hallY:((de=U.dimensions)==null?void 0:de.y)||0},O.id)})),fixtures:(F=r.fixtures)==null?void 0:F.map(U=>{var O,q;return s.jsx(Ro,{fixture:{...U,id:U.id||U._id,_id:U._id||U.id,exhibitionId:t||"",isActive:!0,zIndex:5},scale:1,position:{x:0,y:0},exhibitionWidth:((O=r.exhibition.dimensions)==null?void 0:O.width)||0,exhibitionHeight:((q=r.exhibition.dimensions)==null?void 0:q.height)||0},U.id||U._id)})}:null},[r,t,p,h,R]);return w?s.jsxs(be,{children:[s.jsx(Ke,{}),s.jsx(ws,{style:{paddingTop:"64px"},children:s.jsxs("div",{style:{textAlign:"center",padding:"48px"},children:[s.jsx(ct,{size:"large"}),s.jsx("p",{style:{marginTop:16},children:"Loading exhibition layout..."})]})})]}):T||!r?s.jsxs(be,{children:[s.jsx(Ke,{}),s.jsx(ws,{style:{paddingTop:"64px"},children:s.jsx(as,{status:"error",title:"Failed to load exhibition layout",subTitle:T||"The exhibition layout couldn't be loaded.",extra:[s.jsx(X,{type:"primary",onClick:()=>e("/exhibitions"),children:"Back to Exhibitions"},"back")]})})]}):!(($=r.exhibition.dimensions)!=null&&$.width)||!((z=r.exhibition.dimensions)!=null&&z.height)?s.jsxs(be,{children:[s.jsx(Ke,{}),s.jsx(ws,{style:{paddingTop:"64px"},children:s.jsx(ye,{children:s.jsx(as,{status:"error",title:"Invalid Exhibition Layout",subTitle:"Exhibition dimensions are not properly configured"})})})]}):s.jsxs(be,{children:[s.jsx(Ke,{}),s.jsxs(ws,{style:{paddingTop:"64px",background:"#f7f8fa"},children:[x&&s.jsx("div",{style:{height:"16px",width:"100%"}}),s.jsxs(ye,{className:"exhibition-card",style:{borderRadius:"8px",overflow:"hidden",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.08)",margin:x?"40px 0px 10px 0px":"10px 0px",border:"none"},bodyStyle:{padding:x?"5px":"24px"},children:[s.jsxs(Ne,{gutter:[24,24],style:{marginBottom:x?16:32},children:[s.jsx(se,{xs:24,sm:24,md:12,children:s.jsxs("div",{style:{padding:x?"12px":"16px",background:"linear-gradient(145deg, #ffffff, #f8faff)",borderRadius:"8px",border:"1px solid rgba(230, 235, 245, 0.8)",height:"100%",display:"flex",flexDirection:x?"column":"row",alignItems:x?"flex-start":"center",gap:x?"12px":"16px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.03)"},children:[s.jsx("div",{style:{flexShrink:0,display:"flex",justifyContent:x?"center":"flex-start",width:x?"100%":"auto"},children:r.exhibition.headerLogo?s.jsx(no,{src:cu(r.exhibition.headerLogo),alt:`${r.exhibition.name} logo`,style:{maxHeight:x?70:90,maxWidth:x?200:250,objectFit:"contain"},preview:!1,fallback:"/exhibition-placeholder.jpg",placeholder:s.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:x?200:250,height:x?70:90,backgroundColor:"#f5f5f5",borderRadius:"8px"},children:s.jsx(ct,{size:"small"})})}):s.jsx("div",{style:{width:x?70:90,height:x?70:90,display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(145deg, #f0f0f0, #e6e6e6)",borderRadius:"8px",boxShadow:"inset 0 2px 4px rgba(0, 0, 0, 0.05)"},children:s.jsx(at,{style:{fontSize:x?24:32,color:"#aaa"}})})}),!x&&s.jsx(De,{type:"vertical",style:{height:"90px",margin:"0 16px",opacity:.6}}),s.jsxs("div",{style:{flex:1,width:x?"100%":"auto"},children:[s.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:x?"18px":"22px",fontWeight:600,background:"linear-gradient(90deg, #333, #666)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:r.exhibition.name}),s.jsxs("p",{style:{margin:"0 0 8px 0",display:"flex",alignItems:"center",gap:"8px",color:"#555",fontSize:x?"13px":"14px"},children:[s.jsx(at,{style:{fontSize:x?"14px":"16px",color:"#1890ff"}}),s.jsxs("span",{children:[new Date(r.exhibition.startDate).toLocaleDateString()," -",new Date(r.exhibition.endDate).toLocaleDateString()]})]}),s.jsxs("p",{style:{margin:0,display:"flex",alignItems:"center",gap:"8px",color:"#555",fontSize:x?"13px":"14px"},children:[s.jsx(Qt,{style:{fontSize:x?"14px":"16px",color:"#1890ff"}}),s.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:x?"nowrap":"normal",maxWidth:x?"260px":"none"},children:r.exhibition.venue})]})]})]})}),s.jsx(se,{xs:24,sm:24,md:12,children:s.jsxs("div",{style:{padding:x?"16px 5px":"24px",background:"linear-gradient(145deg, #ffffff, #f9fbfd)",borderRadius:"8px",border:"1px solid rgba(230, 235, 245, 0.8)",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.03)"},children:[s.jsx("div",{style:{marginBottom:"16px",fontSize:x?"15px":"16px",fontWeight:600,color:"#444",textAlign:"center"},children:"Stall Status:"}),s.jsxs("div",{style:{display:"flex",flexDirection:x?"column":"row",justifyContent:"center",alignItems:"center",gap:x?"10px":"16px",width:"100%"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"10px",borderRadius:"8px",background:"#f6ffed",border:"1px solid #b7eb8f",width:x?"90%":"30%",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)"},children:[s.jsx(lt,{status:"success"}),s.jsx("span",{style:{marginLeft:"8px",fontWeight:500},children:"Available"})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"10px",borderRadius:"8px",background:"#e6f7ff",border:"1px solid #91d5ff",width:x?"90%":"30%",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)"},children:[s.jsx(lt,{status:"processing",color:"#1890ff"}),s.jsx("span",{style:{marginLeft:"8px",fontWeight:500},children:"Reserved"})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"10px",borderRadius:"8px",background:"#fff7e6",border:"1px solid #ffd591",width:x?"90%":"30%",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)"},children:[s.jsx(lt,{status:"warning"}),s.jsx("span",{style:{marginLeft:"8px",fontWeight:500},children:"Booked"})]})]})]})})]}),s.jsxs("div",{ref:l,style:{width:"100%",height:x?"70vh":"80vh",minHeight:x?"400px":"600px",background:"#ffffff",borderRadius:"12px",overflow:"hidden",position:"relative",border:"1px solid rgba(230, 235, 245, 0.8)",boxShadow:"inset 0 2px 6px rgba(0, 0, 0, 0.03)",willChange:"transform",contain:"content",isolation:"isolate"},className:"public-canvas-container",children:[s.jsx("style",{children:`
                /* Hide only canvas context menu in public view */
                .konvajs-content .ant-menu {
                  display: none !important;
                }
                
                /* Base canvas optimization */
                .konvajs-content {
                  will-change: transform;
                  transform: translateZ(0);
                  backface-visibility: hidden;
                  transition: filter 0.2s ease-out;
                }
                
                /* Fast layer for static background */
                .public-canvas-container .konvajs-content canvas:first-child {
                  image-rendering: auto;
                }
                
                /* Canvas optimization for all canvases */
                .public-canvas-container canvas {
                  backface-visibility: hidden;
                  -webkit-backface-visibility: hidden;
                  transition: filter 0.15s linear;
                }
                
                /* Dragging state - apply blur effect with better control */
                .public-canvas-container .konvajs-content.dragging {
                  filter: blur(1px);
                }
                
                /* Mobile-specific blur - slightly stronger */
                @media (max-width: 768px) {
                  .public-canvas-container .konvajs-content.dragging {
                    filter: blur(1.5px);
                  }
                }
                
                /* Performance optimizations for dragging */
                .public-canvas-container .konvajs-content:active canvas {
                  image-rendering: optimizeSpeed;
                }
                
                /* Touch device optimizations */
                @media (pointer: coarse) {
                  .public-canvas-container .konvajs-content:active {
                    touch-action: none;
                  }
                  
                  .public-canvas-container .konvajs-content.dragging {
                    filter: blur(2px); /* Stronger blur for touch devices */
                  }
                }
                
                /* Animation smoothing to reduce flickering */
                .public-canvas-container .konvajs-content canvas {
                  will-change: filter;
                  transform: translateZ(0);
                }
                
                /* Low-end device optimizations */
                @media (max-width: 480px), 
                       (resolution: 150dpi),
                       (any-pointer: coarse) {
                  .public-canvas-container .konvajs-content:active canvas {
                    image-rendering: optimizeSpeed;
                  }
                }
              `}),s.jsxs(Dd,{width:c.width,height:c.height,exhibitionWidth:((V=r==null?void 0:r.exhibition.dimensions)==null?void 0:V.width)||0,exhibitionHeight:((L=r==null?void 0:r.exhibition.dimensions)==null?void 0:L.height)||0,halls:(r==null?void 0:r.layout)||[],selectedHall:null,onSelectHall:()=>{},isStallMode:!0,onAddHall:()=>{},onAddStall:()=>{},onAddFixture:()=>{},onExhibitionChange:()=>{},isPublicView:!0,children:[v==null?void 0:v.halls,v==null?void 0:v.stalls,v==null?void 0:v.fixtures]})]})]})]}),h.length>0&&s.jsx(Va,{offsetBottom:20,children:s.jsx("div",{style:{position:"fixed",bottom:20,right:20,zIndex:1e3},children:s.jsxs(X,{type:"primary",size:"large",icon:s.jsx(Qa,{}),onClick:D,loading:S,style:{borderRadius:"30px",boxShadow:"0 6px 16px rgba(24, 144, 255, 0.25)",display:"flex",alignItems:"center",gap:"8px",padding:"0 22px",height:"48px",fontSize:"16px",fontWeight:500,background:"linear-gradient(145deg, #1890ff, #40a9ff)",border:"none",transition:"all 0.3s ease"},children:["Book Selected Stalls (",h.length,")"]})})}),s.jsx(Wd,{visible:j,stallDetails:C,selectedStallId:p,selectedStallIds:h,loading:S,exhibition:r==null?void 0:r.exhibition,onCancel:()=>{f(!1)},onSubmit:B})]})},uu=Ie.memo(du),{Content:xn}=be,{Title:yn,Text:vt,Paragraph:vi}=Pe,bn=t=>{if(!t)return"";if(t.startsWith("http"))return t;const e=t.startsWith("/")?t.substring(1):t;if(e.includes("logos/")||e.includes("sponsors/"))return`${H.defaults.baseURL}/public/images/${e}`;const n=localStorage.getItem("token"),r=`uploads/${e}`;return n?`${H.defaults.baseURL}/${r}?token=${n}`:`${H.defaults.baseURL}/${r}`},hu=(t,e)=>{const n=new Date,r=new Date(t),i=new Date(e);return n<r?{status:"Upcoming",color:"#722ED1"}:n>i?{status:"Completed",color:"#8C8C8C"}:{status:"Active",color:"#52C41A"}},vs=t=>{const e={year:"numeric",month:"long",day:"numeric"};return new Date(t).toLocaleDateString(void 0,e)},pu=(t,e)=>{const n=new Date,r=new Date(t),i=new Date(e);if(n<r){const o=r.getTime()-n.getTime(),d=Math.ceil(o/(1e3*60*60*24));return{text:`Day${d!==1?"s":""} until start`,count:d,isPast:!1}}else if(n>i){const o=n.getTime()-i.getTime(),d=Math.ceil(o/(1e3*60*60*24));return{text:`Day${d!==1?"s":""} since end`,count:d,isPast:!0}}else{const o=i.getTime()-n.getTime(),d=Math.ceil(o/(1e3*60*60*24));return{text:`Day${d!==1?"s":""} remaining`,count:d,isPast:!1}}},fu=()=>{const{id:t}=qi(),e=dt(),[n,r]=u.useState(null),[i,o]=u.useState(!0),[d,p]=u.useState(null),[m,h]=u.useState("https://images.unsplash.com/photo-1567419099214-0dd03b43e8de?q=80&w=1932&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D");if(u.useEffect(()=>{(async()=>{try{if(!t){p("Exhibition ID is missing");return}o(!0),p(null);const A=await gt.getExhibition(t);if(r(A.data),A.data.headerBackground){const T=bn(A.data.headerBackground);h(T);const P=new window.Image;P.src=T}else if(A.data.headerLogo){const T=bn(A.data.headerLogo),P=new window.Image;P.src=T}}catch(A){console.error("Error fetching exhibition:",A),p(A.message||"Error fetching exhibition")}finally{o(!1)}})()},[t]),i)return s.jsxs(be,{children:[s.jsx(Ke,{}),s.jsx(xn,{style:{paddingTop:"64px"},children:s.jsxs("div",{style:{textAlign:"center",padding:"48px"},children:[s.jsx(ct,{size:"large"}),s.jsx("p",{style:{marginTop:16},children:"Loading exhibition details..."})]})})]});if(d||!n)return s.jsxs(be,{children:[s.jsx(Ke,{}),s.jsx(xn,{style:{paddingTop:"64px"},children:s.jsx(as,{status:"404",title:"Exhibition not found",subTitle:d||"The exhibition you're looking for doesn't exist or has been removed.",extra:s.jsx(X,{type:"primary",onClick:()=>e("/exhibitions"),children:"Back to Exhibitions"})})})]});const{status:_,color:j}=hu(n.startDate,n.endDate),f=pu(n.startDate,n.endDate);return s.jsxs(be,{className:"exhibition-details-layout",children:[s.jsx(Ke,{}),s.jsxs(xn,{className:"exhibition-content",children:[s.jsx("div",{className:"breadcrumb-container",children:s.jsx(Ha,{items:[{title:s.jsx(Ze,{to:"/",children:s.jsx(to,{})})},{title:s.jsx(Ze,{to:"/exhibitions",children:"Exhibitions"})},{title:n.name}]})}),s.jsx("div",{className:"exhibition-hero",style:{backgroundImage:`url('${m}')`},children:s.jsx("div",{className:"hero-overlay",children:s.jsxs("div",{className:"hero-content",children:[s.jsxs("div",{className:"hero-main",children:[s.jsx(yn,{level:1,className:"exhibition-title",children:n.name}),s.jsxs(ue,{size:24,className:"exhibition-meta",children:[s.jsxs("div",{className:"meta-item",children:[s.jsx(at,{}),s.jsxs(vt,{children:[vs(n.startDate)," - ",vs(n.endDate)]})]}),n.venue&&s.jsxs("div",{className:"meta-item",children:[s.jsx(qt,{}),s.jsx(vt,{children:n.venue})]}),s.jsxs("div",{className:"meta-item",children:[s.jsx(os,{}),s.jsxs(vt,{children:[f.text,": ",s.jsx("strong",{children:f.count})]})]})]})]}),s.jsxs("div",{className:"hero-actions",children:[s.jsx(X,{type:"primary",size:"large",icon:s.jsx(Tr,{}),onClick:()=>e(`/exhibitions/${t}/layout`),className:"action-button layout-button",children:"View Exhibition Layout"}),s.jsx(X,{size:"large",icon:s.jsx(tt,{}),onClick:()=>e(`/exhibitions/${t}/layout`),className:"action-button book-button",children:"Book a Stall"}),f.isPast?null:s.jsx(X,{size:"large",icon:s.jsx(Rr,{}),onClick:()=>e("/exhibitor/login"),className:"action-button exhibitor-button",children:"Exhibitor Access"})]})]})})}),s.jsx("div",{className:"stats-container",children:s.jsxs(Ne,{gutter:[16,16],className:"stats-row",children:[s.jsx(se,{xs:24,sm:8,children:s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon duration-icon",children:s.jsx(at,{})}),s.jsxs("div",{className:"stat-content",children:[s.jsx("div",{className:"stat-value",children:Math.ceil((new Date(n.endDate).getTime()-new Date(n.startDate).getTime())/(1e3*60*60*24))}),s.jsx("div",{className:"stat-label",children:"Days Duration"})]})]})}),s.jsx(se,{xs:24,sm:8,children:s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon countdown-icon",children:s.jsx(os,{})}),s.jsxs("div",{className:"stat-content",children:[s.jsx("div",{className:"stat-value",children:f.count}),s.jsx("div",{className:"stat-label",children:f.text})]})]})}),s.jsx(se,{xs:24,sm:8,children:s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon status-icon",style:{backgroundColor:j+"20",color:j},children:s.jsx(Qt,{})}),s.jsxs("div",{className:"stat-content",children:[s.jsx("div",{className:"stat-value status-value",style:{color:j},children:_}),s.jsx("div",{className:"stat-label",children:"Status"})]})]})})]})}),n.sponsorLogos&&n.sponsorLogos.length>0&&s.jsxs("div",{className:"sponsors-section",children:[s.jsx("div",{className:"sponsors-header",children:s.jsx(vt,{type:"secondary",children:"PROUDLY SPONSORED BY"})}),s.jsx("div",{className:"sponsors-container",children:n.sponsorLogos.map((w,A)=>s.jsx("div",{className:"sponsor-logo-wrapper",children:s.jsx("div",{className:"sponsor-logo",children:s.jsx("img",{src:bn(w),alt:`Sponsor ${A+1}`,className:"sponsor-logo-img",onError:T=>{T.target.src="/placeholder-logo.png"}})})},A))})]}),s.jsx("div",{className:"exhibition-details-container",children:s.jsxs(Ne,{gutter:[24,24],children:[s.jsx(se,{xs:24,lg:16,children:s.jsxs(ye,{className:"details-card about-card",bordered:!1,children:[s.jsx(yn,{level:3,className:"section-title",children:"About This Exhibition"}),s.jsx(vi,{className:"main-description",children:n.description}),n.headerDescription&&s.jsx(vi,{className:"extended-description",children:n.headerDescription}),n.headerSubtitle&&s.jsxs("div",{className:"subtitle-section",children:[s.jsx(yn,{level:4,children:n.headerSubtitle}),s.jsx(De,{})]})]})}),s.jsx(se,{xs:24,lg:8,children:s.jsx(ue,{direction:"vertical",style:{width:"100%"},size:24,children:s.jsx(ye,{title:"Key Information",className:"details-card info-card",bordered:!1,children:s.jsxs("div",{className:"info-grid",children:[s.jsxs("div",{className:"info-item",children:[s.jsx("div",{className:"info-icon start-icon",children:s.jsx(at,{})}),s.jsxs("div",{className:"info-content",children:[s.jsx(vt,{type:"secondary",className:"info-label",children:"Start Date"}),s.jsx("div",{className:"info-value",children:vs(n.startDate)})]})]}),s.jsxs("div",{className:"info-item",children:[s.jsx("div",{className:"info-icon end-icon",children:s.jsx(at,{})}),s.jsxs("div",{className:"info-content",children:[s.jsx(vt,{type:"secondary",className:"info-label",children:"End Date"}),s.jsx("div",{className:"info-value",children:vs(n.endDate)})]})]}),n.venue&&s.jsxs("div",{className:"info-item",children:[s.jsx("div",{className:"info-icon venue-icon",children:s.jsx(qt,{})}),s.jsxs("div",{className:"info-content",children:[s.jsx(vt,{type:"secondary",className:"info-label",children:"Venue"}),s.jsx("div",{className:"info-value",children:n.venue})]})]})]})})})})]})})]}),s.jsx("style",{children:`
        .exhibition-details-layout {
          background-color: #f9fafc;
        }
        
        .exhibition-content {
          padding-top: 64px;
          min-height: calc(100vh - 64px);
        }
        
        .breadcrumb-container {
          max-width: 1280px;
          margin: 0 auto;
          padding: 16px 24px;
        }
        
        /* Hero Section */
        .exhibition-hero {
          height: 500px;
          background-size: cover;
          background-position: center;
          position: relative;
          color: white;
          margin-bottom: 0;
        }
        
        .hero-overlay {
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: linear-gradient(to bottom, rgba(20, 20, 40, 0.7), rgba(20, 20, 40, 0.9));
          display: flex;
          align-items: center;
        }
        
        .hero-content {
          max-width: 1280px;
          width: 100%;
          margin: 0 auto;
          padding: 40px 24px;
          display: flex;
          flex-direction: column;
          gap: 40px;
        }
        
        .hero-main {
          max-width: 800px;
        }
        
        .exhibition-title {
          color: #fff !important;
          margin-bottom: 32px !important;
          font-size: 3.5rem !important;
          font-weight: 700 !important;
          line-height: 1.2 !important;
          letter-spacing: -0.5px;
          text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .exhibition-meta {
          margin-bottom: 24px;
        }
        
        .meta-item {
          display: flex;
          align-items: center;
          gap: 8px;
        }
        
        .meta-item .anticon {
          font-size: 18px;
          color: rgba(255, 255, 255, 0.9);
        }
        
        .meta-item span {
          color: rgba(255, 255, 255, 0.9);
          font-size: 16px;
        }
        
        .hero-actions {
          display: flex;
          flex-wrap: wrap;
          gap: 16px;
        }
        
        .action-button {
          padding: 0 24px;
          height: 48px;
          font-weight: 500;
          border-radius: 8px;
          transition: all 0.3s ease;
        }
        
        .layout-button {
          background: #4361ee;
          border-color: #4361ee;
        }
        
        .layout-button:hover {
          background: #3a56d4;
          border-color: #3a56d4;
          transform: translateY(-2px);
          box-shadow: 0 6px 12px rgba(67, 97, 238, 0.25);
        }
        
        .book-button {
          background: white;
          color: #111;
          border-color: transparent;
        }
        
        .book-button:hover {
          background: #f8f9fa;
          color: #4361ee;
          transform: translateY(-2px);
          box-shadow: 0 6px 12px rgba(0, 0, 0, 0.08);
        }
        
        .exhibitor-button {
          border-color: rgba(255, 255, 255, 0.3);
          color: white;
          background: transparent;
        }
        
        .exhibitor-button:hover {
          border-color: white;
          color: white;
          background: rgba(255, 255, 255, 0.1);
          transform: translateY(-2px);
        }
        
        /* Stats Section */
        .stats-container {
          max-width: 1280px;
          margin: 0 auto;
          padding: 0 24px;
          margin-top: -50px;
          margin-bottom: 40px;
          position: relative;
          z-index: 5;
        }
        
        .stats-row {
          margin: 0;
        }
        
        .stat-card {
          background: white;
          padding: 24px;
          border-radius: 12px;
          display: flex;
          gap: 20px;
          align-items: center;
          box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
          height: 100%;
          transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .stat-card:hover {
          transform: translateY(-5px);
          box-shadow: 0 15px 35px rgba(0, 0, 0, 0.12);
        }
        
        .stat-icon {
          width: 60px;
          height: 60px;
          border-radius: 12px;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 24px;
        }
        
        .duration-icon {
          background-color: #4361ee20;
          color: #4361ee;
        }
        
        .countdown-icon {
          background-color: #f7257520;
          color: #f72575;
        }
        
        .stat-content {
          flex: 1;
        }
        
        .stat-value {
          font-size: 28px;
          font-weight: 700;
          line-height: 1.2;
          color: #111827;
        }
        
        .stat-label {
          font-size: 14px;
          color: #6b7280;
          margin-top: 4px;
        }
        
        /* Sponsor Logos Styles */
        .sponsors-section {
          max-width: 1280px;
          margin: 0 auto 40px;
          padding: 36px 24px;
          background: #fff;
          border-radius: 16px;
          box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
        }
        
        .sponsors-header {
          text-align: center;
          margin-bottom: 30px;
        }
        
        .sponsors-header .ant-typography {
          font-size: 14px;
          letter-spacing: 2px;
          font-weight: 600;
          color: #6b7280;
          position: relative;
          display: inline-block;
        }
        
        .sponsors-header .ant-typography:before,
        .sponsors-header .ant-typography:after {
          content: "";
          position: absolute;
          top: 50%;
          width: 40px;
          height: 1px;
          background: #e5e7eb;
        }
        
        .sponsors-header .ant-typography:before {
          right: 100%;
          margin-right: 15px;
        }
        
        .sponsors-header .ant-typography:after {
          left: 100%;
          margin-left: 15px;
        }
        
        .sponsors-container {
          display: flex;
          flex-wrap: wrap;
          gap: 30px;
          justify-content: center;
          align-items: center;
        }
        
        .sponsor-logo-wrapper {
          display: inline-flex;
          transition: transform 0.3s ease;
        }
        
        .sponsor-logo-wrapper:hover {
          transform: translateY(-5px);
        }
        
        .sponsor-logo {
          width: 190px;
          height: auto;
          border-radius: 8px;
          overflow: hidden;
          display: flex;
          align-items: center;
          justify-content: center;
          background-color: #ffffff;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
          padding: 20px;
          transition: box-shadow 0.3s ease;
        }
        
        .sponsor-logo:hover {
          box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
        }
        
        .sponsor-logo-img {
          max-width: 100%;
          max-height: 100%;
          object-fit: contain;
        }
        
        /* Details Section */
        .exhibition-details-container {
          max-width: 1280px;
          margin: 0 auto;
          padding: 0 24px 60px;
        }
        
        .details-card {
          border-radius: 16px;
          box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
          overflow: hidden;
          height: 100%;
        }
        
        .about-card .ant-card-body {
          padding: 32px;
        }
        
        .section-title {
          margin-bottom: 24px !important;
          font-weight: 700 !important;
          color: #111827 !important;
          font-size: 28px !important;
          position: relative;
        }
        
        .section-title:after {
          content: "";
          position: absolute;
          left: 0;
          bottom: -12px;
          width: 60px;
          height: 4px;
          background: #4361ee;
          border-radius: 2px;
        }
        
        .main-description {
          font-size: 16px !important;
          line-height: 1.7 !important;
          margin-bottom: 24px !important;
          color: #374151 !important;
        }
        
        .extended-description {
          font-size: 16px !important;
          line-height: 1.7 !important;
          margin-bottom: 24px !important;
          color: #6b7280 !important;
        }
        
        .subtitle-section {
          margin: 24px 0;
        }
        
        .subtitle-section .ant-typography {
          color: #111827;
          font-weight: 600;
        }
        
        .info-card .ant-card-head {
          border-bottom: none;
          padding: 20px 24px 0;
        }
        
        .info-card .ant-card-head-title {
          font-weight: 600;
          font-size: 18px;
          color: #111827;
        }
        
        .info-card .ant-card-body {
          padding: 16px 24px 24px;
        }
        
        .info-grid {
          display: flex;
          flex-direction: column;
          gap: 24px;
        }
        
        .info-item {
          display: flex;
          align-items: flex-start;
          gap: 16px;
        }
        
        .info-icon {
          width: 40px;
          height: 40px;
          border-radius: 8px;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 18px;
        }
        
        .start-icon {
          background-color: #4361ee20;
          color: #4361ee;
        }
        
        .end-icon {
          background-color: #f7257520;
          color: #f72575;
        }
        
        .venue-icon {
          background-color: #0ea5e920;
          color: #0ea5e9;
        }
        
        .info-content {
          flex: 1;
        }
        
        .info-label {
          display: block;
          margin-bottom: 4px;
          font-size: 14px;
        }
        
        .info-value {
          font-size: 16px;
          font-weight: 500;
          color: #111827;
        }
        
        @media (max-width: 991px) {
          .exhibition-hero {
            height: auto;
            min-height: 350px;
          }
          
          .hero-overlay {
            position: relative;
            padding: 50px 0;
          }
          
          .exhibition-title {
            font-size: 2.5rem !important;
          }
          
          .stats-container {
            margin-top: 0;
          }
          
          .stat-card {
            margin-bottom: 16px;
          }
        }
        
        @media (max-width: 768px) {
          .exhibition-title {
            font-size: 2rem !important;
            margin-bottom: 24px !important;
          }
          
          .hero-content {
            padding: 40px 20px;
          }
          
          .hero-actions {
            flex-direction: column;
            width: 100%;
          }
          
          .hero-actions button {
            width: 100%;
          }
          
          .sponsors-container {
            gap: 20px;
          }
          
          .sponsor-logo {
            width: 150px;
          }
          
          .stats-container {
            padding: 0 16px;
          }
          
          .stat-card {
            padding: 16px;
          }
          
          .stat-icon {
            width: 50px;
            height: 50px;
            font-size: 20px;
          }
          
          .stat-value {
            font-size: 22px;
          }
          
          .exhibition-details-container {
            padding: 0 16px 40px;
          }
          
          .about-card .ant-card-body {
            padding: 24px;
          }
          
          .section-title {
            font-size: 24px !important;
          }
        }
        
        @media (max-width: 480px) {
          .exhibition-title {
            font-size: 1.75rem !important;
          }
          
          .meta-item {
            flex-direction: column;
            align-items: flex-start;
            gap: 4px;
          }
        }
        `})]})},{Footer:gu}=be,{Title:mu,Paragraph:xu,Text:yu}=Pe,bu=Q(gu)`
  background: linear-gradient(to right, #242a38, #1a1f2c);
  padding: 60px 0 20px;
  color: rgba(255, 255, 255, 0.8);

  @media (max-width: 768px) {
    padding: 40px 0 20px;
  }
`,wu=Q.div`
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 24px;
`,js=Q(mu)`
  color: white !important;
  font-size: 18px !important;
  margin-bottom: 20px !important;
  position: relative;
  
  &:after {
    content: '';
    position: absolute;
    left: 0;
    bottom: -8px;
    width: 40px;
    height: 3px;
    background: linear-gradient(90deg, #4158D0, #C850C0);
  }
`,vu=Q.div`
  margin-bottom: 20px;
`,ju=Q.img`
  height: auto;
  width: 100%;
  max-width: 160px;
  margin-bottom: 16px;
`,Ge=Q(Ze)`
  color: rgba(255, 255, 255, 0.8);
  display: block;
  margin-bottom: 12px;
  transition: all 0.3s ease;
  
  &:hover {
    color: white;
    transform: translateX(5px);
  }
`,wn=Q.div`
  display: flex;
  margin-bottom: 16px;
  align-items: flex-start;
`,vn=Q.div`
  margin-right: 10px;
  color: #4158D0;
`,Ss=Q.a`
  font-size: 24px;
  margin-right: 16px;
  color: rgba(255, 255, 255, 0.7);
  transition: all 0.3s ease;
  
  &:hover {
    color: white;
    transform: translateY(-3px);
  }
`,Su=Q(ge)`
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: white;
  
  &::placeholder {
    color: rgba(255, 255, 255, 0.5);
  }
  
  &:focus {
    border-color: #4158D0;
    box-shadow: 0 0 0 2px rgba(65, 88, 208, 0.2);
  }
`,ku=Q(X)`
  background: linear-gradient(90deg, #4158D0, #C850C0);
  border: none;
  
  &:hover {
    opacity: 0.9;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  }
`,Eu=Q(yu)`
  display: block;
  text-align: center;
  color: rgba(255, 255, 255, 0.6);
  margin-top: 20px;
  font-size: 14px;
`,Cu=Q(De)`
  background: rgba(255, 255, 255, 0.1);
  margin: 30px 0;
`,Po=()=>{const[t,e]=u.useState("/logo.png"),[n,r]=u.useState("Exhibition Manager"),i=new Date().getFullYear();return u.useEffect(()=>{const o=`${H.defaults.baseURL}/public/logo`;e(o),fetch(`${H.defaults.baseURL}/public/site-info`).then(d=>d.json()).then(d=>{d.siteName&&r(d.siteName)}).catch(d=>{console.error("Error fetching site info:",d)})},[]),s.jsx(bu,{children:s.jsxs(wu,{children:[s.jsxs(Ne,{gutter:[48,40],children:[s.jsxs(se,{xs:24,sm:24,md:8,lg:7,children:[s.jsx(vu,{children:s.jsx(Ze,{to:"/",children:s.jsx(ju,{src:t,alt:n,onError:()=>e("/logo.png")})})}),s.jsx(xu,{style:{color:"rgba(255, 255, 255, 0.7)",marginBottom:24},children:"The premier platform for exhibition stall booking. Connect exhibitors with event organizers and simplify the booking process."}),s.jsxs(ue,{children:[s.jsx(Ss,{href:"#",target:"_blank",rel:"noopener noreferrer",children:s.jsx(Wa,{})}),s.jsx(Ss,{href:"#",target:"_blank",rel:"noopener noreferrer",children:s.jsx(Ya,{})}),s.jsx(Ss,{href:"#",target:"_blank",rel:"noopener noreferrer",children:s.jsx(Ka,{})}),s.jsx(Ss,{href:"#",target:"_blank",rel:"noopener noreferrer",children:s.jsx(Ga,{})})]})]}),s.jsxs(se,{xs:24,sm:12,md:5,lg:5,children:[s.jsx(js,{level:4,children:"Quick Links"}),s.jsx(Ge,{to:"/exhibitions",children:"Exhibitions"}),s.jsx(Ge,{to:"/about",children:"About Us"}),s.jsx(Ge,{to:"/contact",children:"Contact Us"}),s.jsx(Ge,{to:"/privacy-policy",children:"Privacy Policy"}),s.jsx(Ge,{to:"/terms",children:"Terms & Conditions"})]}),s.jsxs(se,{xs:24,sm:12,md:5,lg:5,children:[s.jsx(js,{level:4,children:"For Exhibitors"}),s.jsx(Ge,{to:"/exhibitor/login",children:"Login"}),s.jsx(Ge,{to:"/exhibitor/register",children:"Register"}),s.jsx(Ge,{to:"/exhibitor/dashboard",children:"Dashboard"}),s.jsx(Ge,{to:"/exhibitor/bookings",children:"My Bookings"}),s.jsx(Ge,{to:"/faq",children:"FAQ"})]}),s.jsxs(se,{xs:24,sm:24,md:6,lg:7,children:[s.jsx(js,{level:4,children:"Contact Us"}),s.jsxs(wn,{children:[s.jsx(vn,{children:s.jsx(qt,{})}),s.jsx("div",{children:"123 Exhibition Street, New Delhi, India"})]}),s.jsxs(wn,{children:[s.jsx(vn,{children:s.jsx(so,{})}),s.jsx("div",{children:"+91 98765 43210"})]}),s.jsxs(wn,{children:[s.jsx(vn,{children:s.jsx(Us,{})}),s.jsx("div",{children:"info@exhibitionmanager.com"})]}),s.jsxs("div",{style:{marginTop:24},children:[s.jsx(js,{level:4,children:"Newsletter"}),s.jsx(W,{children:s.jsxs(ue.Compact,{style:{width:"100%"},children:[s.jsx(Su,{placeholder:"Your email address"}),s.jsx(ku,{type:"primary",icon:s.jsx(Xa,{}),children:"Subscribe"})]})})]})]})]}),s.jsx(Cu,{}),s.jsxs(Eu,{children:[" ",i," ",n,". All rights reserved."]})]})})},Yp=(t,e)=>{if(!t)return"";let r=`/exhibition/${t.slug||t._id||t.id}`;return e&&(r+=`/${e}`),r},No=(t,e)=>t?`/exhibitions/${t.slug||t._id||t.id}`:"",{Title:ji,Text:jn,Paragraph:Si}=Pe,{Content:Sn}=be,Iu=(t,e)=>{const n=new Date,r=new Date(t),i=new Date(e);return n<r?{status:"Upcoming",color:"#722ED1"}:n>i?{status:"Completed",color:"#8C8C8C"}:{status:"Active",color:"#52C41A"}},ki=t=>{const e={year:"numeric",month:"short",day:"numeric"};return new Date(t).toLocaleDateString(void 0,e)},_u=t=>{const e=new Date,r=new Date(t).getTime()-e.getTime();return Math.ceil(r/(1e3*60*60*24))},Ei=t=>{if(!t)return"/exhibition-placeholder.jpg";if(t.startsWith("/")||t.startsWith("http"))return t;const e=t.startsWith("/")?t.substring(1):t,n=e.includes("logos/")?e:`logos/${e}`;return`${H.defaults.baseURL}/public/images/${n}`},Ru=()=>{const t=dt(),[e,n]=u.useState([]),[r,i]=u.useState(!0),[o,d]=u.useState(null),[p,m]=u.useState({});return u.useEffect(()=>{(async()=>{try{i(!0),d(null);const _=await gt.getExhibitions();n(_.data);const j={};_.data.forEach(f=>{if(f.headerLogo){const w=Ei(f.headerLogo),A=new window.Image;A.onload=()=>{j[f._id]=!0,m(T=>({...T,[f._id]:!0}))},A.onerror=()=>{console.warn(`Failed to preload image: ${w}`),j[f._id]=!1,m(T=>({...T,[f._id]:!1}))},A.src=w}})}catch(_){d(_.message||"Failed to fetch exhibitions")}finally{i(!1)}})()},[]),r?s.jsxs(be,{children:[s.jsx(Ke,{}),s.jsx(Sn,{style:{paddingTop:"64px"},children:s.jsxs("div",{style:{textAlign:"center",padding:"48px"},children:[s.jsx(ct,{size:"large"}),s.jsx("p",{style:{marginTop:16},children:"Loading exhibitions..."})]})})]}):o?s.jsxs(be,{children:[s.jsx(Ke,{}),s.jsx(Sn,{style:{paddingTop:"64px"},children:s.jsx(as,{status:"error",title:"Failed to load exhibitions",subTitle:o,extra:[s.jsx(X,{type:"primary",onClick:()=>window.location.reload(),children:"Try Again"},"retry")]})})]}):s.jsxs(be,{children:[s.jsx(Ke,{}),s.jsx(Sn,{style:{paddingTop:"64px",background:"#f5f5f5"},children:s.jsxs("div",{style:{padding:"80px 16px"},children:[s.jsxs("div",{style:{textAlign:"center",marginBottom:40},children:[s.jsx(ji,{level:2,style:{marginBottom:12,fontSize:36},children:"Upcoming & Current Exhibitions"}),s.jsx(Si,{type:"secondary",style:{fontSize:16,maxWidth:600,margin:"0 auto"},children:"Discover and explore our exhibitions. Click on any card to view details and book stalls."})]}),e.length>0?s.jsx(Ne,{gutter:[24,24],children:e.map(h=>{const{status:_,color:j}=Iu(h.startDate,h.endDate),f=_u(h.startDate),w=h.headerLogo?Ei(h.headerLogo):void 0;return s.jsx(se,{xs:24,sm:12,lg:8,children:s.jsxs(ye,{hoverable:!0,onClick:()=>t(No(h)),className:"exhibition-card",styles:{body:{padding:"0",overflow:"hidden",display:"flex",flexDirection:"column"}},style:{borderRadius:"12px",overflow:"hidden",height:"100%",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.06), 0 2px 4px rgba(0, 0, 0, 0.06)"},children:[s.jsx(lt.Ribbon,{text:_,color:j,style:{right:"-1px",top:"10px",zIndex:2}}),s.jsxs("div",{className:"exhibition-card-container",children:[s.jsx("div",{className:"exhibition-card-logo-container",children:w&&s.jsx("div",{className:"exhibition-logo",children:s.jsx(no,{src:w,alt:`${h.name} logo`,preview:!1,fallback:"/exhibition-placeholder.jpg",placeholder:s.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",backgroundColor:"#f0f0f0"},children:s.jsx(ct,{size:"small"})}),style:{width:"100%",height:"100%",objectFit:"contain"}})})}),s.jsxs("div",{className:"exhibition-card-content",children:[s.jsx("div",{className:"exhibition-title",children:s.jsx(ji,{level:4,ellipsis:{rows:2},style:{marginBottom:8,fontSize:20,lineHeight:"28px"},children:h.name})}),s.jsx(Si,{type:"secondary",ellipsis:{rows:2},style:{marginBottom:16,fontSize:14},children:h.description}),s.jsxs("div",{className:"exhibition-card-details",children:[s.jsxs("div",{className:"exhibition-card-detail-item",children:[s.jsx(at,{style:{color:"#722ED1"}}),s.jsx(xt,{title:"Exhibition Date Range",children:s.jsxs(jn,{style:{fontSize:14},children:[ki(h.startDate)," - ",ki(h.endDate)]})})]}),h.venue&&s.jsxs("div",{className:"exhibition-card-detail-item",children:[s.jsx(qt,{style:{color:"#F5222D"}}),s.jsx(xt,{title:"Venue",children:s.jsx(jn,{style:{fontSize:14},ellipsis:!0,children:h.venue})})]}),_==="Upcoming"&&f>0&&s.jsxs("div",{className:"exhibition-card-detail-item",children:[s.jsx(os,{style:{color:"#1890FF"}}),s.jsx(xt,{title:"Time Remaining",children:s.jsxs(jn,{style:{fontSize:14},children:["Starts in ",f," day",f!==1?"s":""]})})]})]}),s.jsx("div",{className:"exhibition-card-footer",children:s.jsxs(X,{type:"link",className:"view-details-btn",style:{padding:0,height:"auto",fontSize:14,fontWeight:500},children:["View Details ",s.jsx(cr,{})]})})]})]})]})},h._id)})}):s.jsx(qe,{description:"No exhibitions currently available",style:{background:"#fff",padding:"48px",borderRadius:"12px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.06), 0 2px 4px rgba(0, 0, 0, 0.06)"},image:qe.PRESENTED_IMAGE_SIMPLE})]})}),s.jsx(Po,{}),s.jsx("style",{children:`
        .exhibition-card {
          transition: all 0.3s ease;
        }
        
        .exhibition-card:hover {
          transform: translateY(-5px);
          box-shadow: 0 10px 20px rgba(0, 0, 0, 0.05), 0 6px 6px rgba(0, 0, 0, 0.06) !important;
        }
        
        .exhibition-card-container {
          display: flex;
          flex-direction: row;
          width: 100%;
          height: 100%;
        }
        
        .exhibition-card-logo-container {
          width: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 24px;
          background-color: #f9f9f9;
          border-right: 1px solid #eaeaea;
        }
        
        .exhibition-logo {
          position: relative;
          flex-shrink: 0;
          width: 100%;
          height: 172px;
          border-radius: 8px;
          overflow: hidden;
          display: flex;
          align-items: center;
          justify-content: center;
          background-color: #f0f0f0;
          border: 1px solid #e8e8e8;
        }
        
        .exhibition-card-content {
          width: 50%;
          padding: 24px;
          display: flex;
          flex-direction: column;
        }
        
        .exhibition-title {
          margin-right: 36px;
        }
        
        .exhibition-card-details {
          display: flex;
          flex-direction: column;
          gap: 8px;
          margin-bottom: 24px;
        }
        
        .exhibition-card-detail-item {
          display: flex;
          align-items: center;
          gap: 8px;
        }
        
        .exhibition-card-footer {
          margin-top: auto;
        }
        
        .view-details-btn {
          color: #722ED1;
        }
        
        .view-details-btn:hover {
          color: #9254DE;
        }
        
        .view-details-btn .anticon {
          transition: transform 0.3s ease;
        }
        
        .view-details-btn:hover .anticon {
          transform: translateX(4px);
        }
        
        @media (max-width: 575px) {
          .exhibition-card-container {
            flex-direction: column;
          }
          
          .exhibition-card-logo-container {
            width: 100%;
            border-right: none;
            border-bottom: 1px solid #eaeaea;
            padding: 20px;
          }
          
          .exhibition-logo {
            height: 140px;
          }
          
          .exhibition-card-content {
            width: 100%;
            padding: 20px;
          }
        }
        `})]})},{Title:Ce,Paragraph:Ee,Text:ks}=Pe,{Content:Tu}=be,Au=t=>{if(!t)return"/exhibition-placeholder.jpg";if(t.startsWith("/")||t.startsWith("http"))return t;const e=t.startsWith("/")?t.substring(1):t;return e.includes("logos/")||e.includes("sponsors/")?`${H.defaults.baseURL}/public/images/${e}`:"/exhibition-placeholder.jpg"},Pu=Q(Tu)`
  padding-top: 64px;
`,Nu=Q.div`
  background: linear-gradient(135deg, #4158D0 0%, #C850C0 46%, #FFCC70 100%);
  padding: 80px 0;
  color: white;
  position: relative;
  overflow: hidden;
  
  @media (max-width: 768px) {
    padding: 60px 0;
  }
`,Du=Q.div`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.2);
  z-index: 1;
`,$u=Q.div`
  position: relative;
  z-index: 2;
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 24px;
`,Tt=Q(ye)`
  height: 100%;
  border-radius: 12px;
  overflow: hidden;
  transition: all 0.3s ease;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  border: none;
  
  &:hover {
    transform: translateY(-8px);
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.12);
  }
`,Lu=Q(ye)`
  border-radius: 12px;
  overflow: hidden;
  transition: all 0.3s ease;
  margin-bottom: 16px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  border: none;
  
  &:hover {
    transform: translateY(-8px);
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.12);
  }
`,Jt=Q(Ce)`
  position: relative;
  display: inline-block;
  margin-bottom: 48px !important;
  
  &:after {
    content: "";
    position: absolute;
    bottom: -12px;
    left: 0;
    width: 60px;
    height: 4px;
    border-radius: 2px;
    background: linear-gradient(90deg, #4158D0, #C850C0);
  }
`,At=Q.div`
  width: 60px;
  height: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  margin-bottom: 24px;
  font-size: 24px;
  
  & svg {
    font-size: 28px;
  }
`,Es=Q.div`
  background: white;
  border-radius: 12px;
  padding: 30px;
  height: 100%;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  transition: all 0.3s ease;
  
  &:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.12);
  }
`,Ci=Q.div`
  background: white;
  border-radius: 12px;
  padding: 30px;
  margin: 10px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
`,Fu=Q(Fe)`
  position: absolute;
  top: 12px;
  right: 12px;
  z-index: 10;
  font-weight: 500;
  padding: 4px 12px;
  border-radius: 50px;
`,Ii=Q(X)`
  height: 50px;
  font-weight: 500;
  border-radius: 8px;
  padding: 0 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  
  &.ant-btn-primary {
    background: linear-gradient(90deg, #4158D0, #C850C0);
    border: none;
    
    &:hover {
      background: linear-gradient(90deg, #3a4ec0, #b745af);
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
    }
  }
  
  &.secondary-btn {
    background: rgba(255, 255, 255, 0.9);
    color: #4158D0;
    border: none;
    
    &:hover {
      background: white;
      color: #C850C0;
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
    }
  }
`,Zt=Q.div`
  padding: 80px 0;
  
  @media (max-width: 768px) {
    padding: 60px 0;
  }
  
  &.gray-bg {
    background: #f9fafb;
  }
  
  &.how-it-works {
    background: linear-gradient(135deg, #f6f9fc 0%, #f1f4f9 100%);
  }
`;Q.div`
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: linear-gradient(135deg, #4158D0, #C850C0);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  margin-right: 16px;
  font-size: 18px;
  flex-shrink: 0;
`;const Mu=()=>{const t=dt(),e=ut(),[n,r]=u.useState([]),[i,o]=u.useState(!0);u.useEffect(()=>{(async()=>{try{o(!0);const _=await gt.getExhibitions();r(_.data.slice(0,4))}catch(_){console.error("Failed to fetch exhibitions:",_)}finally{o(!1)}})()},[]);const d=h=>{const _={year:"numeric",month:"short",day:"numeric"};return new Date(h).toLocaleDateString(void 0,_)},p=(h,_)=>{const j=new Date,f=new Date(h),w=new Date(_);return j<f?{status:"Upcoming",color:"#722ED1"}:j>w?{status:"Completed",color:"#8C8C8C"}:{status:"Active",color:"#52C41A"}},m=()=>{e(Ct(void 0))};return s.jsxs(be,{children:[s.jsx(Ke,{}),s.jsxs(Pu,{children:[s.jsxs(Nu,{children:[s.jsx(Du,{}),s.jsx($u,{children:s.jsxs(Ne,{gutter:[48,48],align:"middle",children:[s.jsxs(se,{xs:24,lg:14,children:[s.jsx(Ce,{level:1,style:{fontSize:"3.5rem",marginBottom:24,color:"white",fontWeight:700},children:"Book Your Exhibition Space with Ease"}),s.jsx(Ee,{style:{fontSize:"1.2rem",marginBottom:40,color:"rgba(255, 255, 255, 0.9)"},children:"Explore upcoming exhibitions, select your perfect stall, and secure your spot all in one place. Manage your exhibition presence effortlessly."}),s.jsx(ue,{size:16,wrap:!0,children:s.jsx(Ii,{type:"primary",size:"large",onClick:()=>t("/exhibitions"),icon:s.jsx(cr,{}),children:"Explore Exhibitions"})})]}),s.jsx(se,{xs:24,lg:10,children:s.jsx("img",{src:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?auto=format&fit=crop&q=80&w=1000&ixlib=rb-4.0.3",alt:"Exhibition Space",style:{width:"100%",borderRadius:"12px",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.2)",border:"4px solid rgba(255, 255, 255, 0.2)",objectFit:"cover",height:"300px"},onError:h=>{const _=h.target;_.src="https://images.unsplash.com/photo-1559223607-a43f990c43d5?auto=format&fit=crop&q=80&w=1000&ixlib=rb-4.0.3",_.onerror=()=>{_.style.height="300px",_.style.background="linear-gradient(135deg, #4158D0 0%, #C850C0 100%)",_.onerror=null;const j=_.parentElement;if(j){const f=document.createElement("div");f.style.position="absolute",f.style.top="50%",f.style.left="50%",f.style.transform="translate(-50%, -50%)",f.style.color="white",f.style.fontSize="18px",f.style.fontWeight="bold",f.style.textAlign="center",f.textContent="Exhibition Venue",j.appendChild(f)}}}})})]})})]}),s.jsx(Zt,{children:s.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 24px"},children:[s.jsx(Jt,{level:2,children:"Featured Exhibitions"}),i?s.jsx(Ne,{gutter:[24,24],children:[1,2,3,4].map(h=>s.jsx(se,{xs:24,sm:12,lg:6,children:s.jsx(ye,{style:{borderRadius:"12px"},children:s.jsx(Ja,{active:!0,avatar:!0,paragraph:{rows:3}})})},h))}):n.length>0?s.jsx(Ne,{gutter:[24,24],children:n.map((h,_)=>{const{status:j,color:f}=p(h.startDate,h.endDate);return s.jsx(se,{xs:24,sm:12,lg:6,children:s.jsxs(Lu,{onClick:()=>t(No(h)),cover:s.jsxs("div",{style:{height:200,overflow:"hidden",position:"relative"},children:[s.jsx("img",{alt:h.name,src:h.headerLogo?Au(h.headerLogo):"/exhibition-placeholder.jpg",style:{width:"100%",height:"100%",objectFit:"contain",filter:"brightness(0.95)"}}),s.jsx(Fe,{color:f,style:{position:"absolute",top:12,left:12,borderRadius:"50px",padding:"2px 12px"},children:j}),_===0&&s.jsx(Fu,{color:"#f50",children:"Featured"})]}),hoverable:!0,children:[s.jsx(Ce,{level:5,ellipsis:{rows:1},style:{marginBottom:8},children:h.name}),s.jsxs("div",{style:{marginBottom:12,display:"flex",alignItems:"center",gap:8},children:[s.jsx(at,{style:{color:"#4158D0"}}),s.jsxs(ks,{type:"secondary",style:{fontSize:13},children:[d(h.startDate)," - ",d(h.endDate)]})]}),h.venue&&s.jsxs("div",{style:{marginBottom:16,display:"flex",alignItems:"center",gap:8},children:[s.jsx(qt,{style:{color:"#C850C0"}}),s.jsx(ks,{type:"secondary",style:{fontSize:13},ellipsis:!0,children:h.venue})]}),s.jsx(X,{type:"link",style:{padding:0,height:"auto"},icon:s.jsx(cr,{}),children:"View Details"})]})},h._id)})}):s.jsx("div",{style:{textAlign:"center",padding:40},children:s.jsx(Ee,{children:"No exhibitions available at the moment. Check back soon!"})}),s.jsx("div",{style:{textAlign:"center",marginTop:40},children:s.jsx(X,{type:"primary",size:"large",onClick:()=>t("/exhibitions"),icon:s.jsx(Za,{}),children:"View All Exhibitions"})})]})}),s.jsx(Zt,{className:"how-it-works",children:s.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 24px"},children:[s.jsx(Jt,{level:2,children:"How to Book Stall"}),s.jsx("div",{style:{textAlign:"center",maxWidth:"800px",margin:"0 auto 40px"},children:s.jsx(Ee,{style:{fontSize:"18px",color:"#666",fontWeight:500},children:"Secure your exhibition space in just a few simple steps. Our streamlined booking process makes it easy to showcase your business at premier events."})}),s.jsxs("div",{className:"booking-steps",children:[s.jsx("div",{className:"step-indicator",children:s.jsxs("div",{className:"step-dots",children:[[1,2,3,4,5,6,7].map(h=>s.jsxs("div",{className:"step-dot-container",children:[s.jsx("div",{className:"step-dot",children:h}),s.jsx("div",{className:"step-label",children:`Step ${h}`})]},h)),s.jsx("div",{className:"step-progress-line"})]})}),s.jsxs(Ne,{gutter:[24,24],style:{marginTop:40},children:[s.jsx(se,{xs:24,md:12,lg:8,xl:6,children:s.jsxs("div",{className:"step-card",children:[s.jsxs("div",{className:"step-card-header",children:[s.jsx("div",{className:"step-number",children:"1"}),s.jsx("div",{className:"step-icon",children:s.jsx(Ae,{})})]}),s.jsxs("div",{className:"step-card-body",children:[s.jsx(Ce,{level:5,children:"Register"}),s.jsx(Ee,{children:"The exhibitor must first register on the platform with company details and contact information."})]})]})}),s.jsx(se,{xs:24,md:12,lg:8,xl:6,children:s.jsxs("div",{className:"step-card",children:[s.jsxs("div",{className:"step-card-header",children:[s.jsx("div",{className:"step-number",children:"2"}),s.jsx("div",{className:"step-icon",children:s.jsx($t,{})})]}),s.jsxs("div",{className:"step-card-body",children:[s.jsx(Ce,{level:5,children:"Admin Approval"}),s.jsx(Ee,{children:"After registration, the admin will review and approve your account. You'll receive a notification."})]})]})}),s.jsx(se,{xs:24,md:12,lg:8,xl:6,children:s.jsxs("div",{className:"step-card",children:[s.jsxs("div",{className:"step-card-header",children:[s.jsx("div",{className:"step-number",children:"3"}),s.jsx("div",{className:"step-icon",children:s.jsx(tt,{})})]}),s.jsxs("div",{className:"step-card-body",children:[s.jsx(Ce,{level:5,children:"Login & Book Stall"}),s.jsx(Ee,{children:"Once approved, log in and select a stall from the interactive layout map."})]})]})}),s.jsx(se,{xs:24,md:12,lg:8,xl:6,children:s.jsxs("div",{className:"step-card",children:[s.jsxs("div",{className:"step-card-header",children:[s.jsx("div",{className:"step-number",children:"4"}),s.jsx("div",{className:"step-icon",children:s.jsx(os,{})})]}),s.jsxs("div",{className:"step-card-body",children:[s.jsx(Ce,{level:5,children:"Stall Goes to Reserved"}),s.jsx(Ee,{children:'After booking, the stall status changes to "Reserved" and will be temporarily held for you.'})]})]})}),s.jsx(se,{xs:24,md:12,lg:8,xl:6,children:s.jsxs("div",{className:"step-card",children:[s.jsxs("div",{className:"step-card-header",children:[s.jsx("div",{className:"step-number",children:"5"}),s.jsx("div",{className:"step-icon",children:s.jsx($t,{})})]}),s.jsxs("div",{className:"step-card-body",children:[s.jsx(Ce,{level:5,children:"Admin Final Approval"}),s.jsx(Ee,{children:"The admin will review your reservation request and approve it based on availability."})]})]})}),s.jsx(se,{xs:24,md:12,lg:8,xl:6,children:s.jsxs("div",{className:"step-card",children:[s.jsxs("div",{className:"step-card-header",children:[s.jsx("div",{className:"step-number",children:"6"}),s.jsx("div",{className:"step-icon",children:s.jsx($t,{})})]}),s.jsxs("div",{className:"step-card-body",children:[s.jsx(Ce,{level:5,children:"Stall Becomes Booked"}),s.jsx(Ee,{children:'After admin approval, the stall status changes to "Booked" and an invoice is generated.'})]})]})}),s.jsx(se,{xs:24,md:12,lg:8,xl:6,children:s.jsxs("div",{className:"step-card",children:[s.jsxs("div",{className:"step-card-header",children:[s.jsx("div",{className:"step-number",children:"7"}),s.jsx("div",{className:"step-icon",children:s.jsx(Zr,{})})]}),s.jsxs("div",{className:"step-card-body",children:[s.jsx(Ce,{level:5,children:"Make Payment in 3 Days"}),s.jsx(Ee,{children:"Complete your payment within 3 days of booking to confirm your stall reservation."})]})]})})]}),s.jsx("style",{children:`
                  .booking-steps {
                    margin-top: 20px;
                  }
                  
                  .step-indicator {
                    margin-bottom: 30px;
                    padding: 0 40px;
                  }
                  
                  .step-dots {
                    display: flex;
                    justify-content: space-between;
                    position: relative;
                    max-width: 800px;
                    margin: 0 auto;
                  }
                  
                  .step-progress-line {
                    position: absolute;
                    top: 25px;
                    left: 50px;
                    right: 50px;
                    height: 3px;
                    background: linear-gradient(90deg, #4158D0, #C850C0);
                    z-index: 0;
                  }
                  
                  .step-dot-container {
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    position: relative;
                    z-index: 1;
                  }
                  
                  .step-dot {
                    width: 50px;
                    height: 50px;
                    border-radius: 50%;
                    background: linear-gradient(135deg, #4158D0, #C850C0);
                    color: white;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-weight: bold;
                    font-size: 20px;
                    margin-bottom: 8px;
                    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
                  }
                  
                  .step-label {
                    font-size: 14px;
                    font-weight: 500;
                    color: #666;
                  }
                  
                  .step-card {
                    background: white;
                    border-radius: 12px;
                    overflow: hidden;
                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
                    height: 100%;
                    transition: all 0.3s ease;
                    display: flex;
                    flex-direction: column;
                    border: 1px solid #f0f0f0;
                  }
                  
                  .step-card:hover {
                    transform: translateY(-5px);
                    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.12);
                  }
                  
                  .step-card-header {
                    background: linear-gradient(135deg, #f6f9fc 0%, #f1f4f9 100%);
                    padding: 16px;
                    display: flex;
                    align-items: center;
                    gap: 16px;
                    border-bottom: 1px solid #f0f0f0;
                  }
                  
                  .step-number {
                    width: 36px;
                    height: 36px;
                    border-radius: 50%;
                    background: linear-gradient(135deg, #4158D0, #C850C0);
                    color: white;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-weight: bold;
                    font-size: 16px;
                  }
                  
                  .step-icon {
                    width: 36px;
                    height: 36px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 20px;
                    color: #4158D0;
                  }
                  
                  .step-card-body {
                    padding: 16px;
                    flex: 1;
                  }
                  
                  .step-card-body h5 {
                    margin-bottom: 8px;
                  }
                  
                  .step-card-body p {
                    margin-bottom: 0;
                    color: #666;
                  }
                  
                  @media (max-width: 768px) {
                    .step-progress-line {
                      display: none;
                    }
                    
                    .step-dots {
                      display: none;
                    }
                  }
                `})]}),s.jsx("div",{style:{textAlign:"center",marginTop:60},children:s.jsx(Ii,{type:"primary",size:"large",onClick:m,icon:s.jsx(Ae,{}),children:"Register as Exhibitor"})})]})}),s.jsx(Zt,{children:s.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 24px"},children:[s.jsx(Jt,{level:2,children:"Why Choose Us"}),s.jsxs(Ne,{gutter:[24,24],children:[s.jsx(se,{xs:24,sm:12,lg:8,children:s.jsxs(Tt,{children:[s.jsx(At,{style:{background:"rgba(65, 88, 208, 0.1)",color:"#4158D0"},children:s.jsx(Tr,{})}),s.jsx(Ce,{level:4,children:"Interactive Layouts"}),s.jsx(Ee,{style:{fontSize:16},children:"Explore detailed exhibition floor plans with interactive maps to find your perfect spot."})]})}),s.jsx(se,{xs:24,sm:12,lg:8,children:s.jsxs(Tt,{children:[s.jsx(At,{style:{background:"rgba(200, 80, 192, 0.1)",color:"#C850C0"},children:s.jsx(tt,{})}),s.jsx(Ce,{level:4,children:"Real-time Availability"}),s.jsx(Ee,{style:{fontSize:16},children:"See stall availability in real-time and book instantly without any delays or confusion."})]})}),s.jsx(se,{xs:24,sm:12,lg:8,children:s.jsxs(Tt,{children:[s.jsx(At,{style:{background:"rgba(255, 204, 112, 0.1)",color:"#FFCC70"},children:s.jsx(Zr,{})}),s.jsx(Ce,{level:4,children:"Secure Payments"}),s.jsx(Ee,{style:{fontSize:16},children:"Complete your bookings with our secure payment gateway and receive instant confirmation."})]})}),s.jsx(se,{xs:24,sm:12,lg:8,children:s.jsxs(Tt,{children:[s.jsx(At,{style:{background:"rgba(82, 196, 26, 0.1)",color:"#52c41a"},children:s.jsx(Rr,{})}),s.jsx(Ce,{level:4,children:"Exhibitor Dashboard"}),s.jsx(Ee,{style:{fontSize:16},children:"Manage all your bookings, payments, and exhibition details through our user-friendly dashboard."})]})}),s.jsx(se,{xs:24,sm:12,lg:8,children:s.jsxs(Tt,{children:[s.jsx(At,{style:{background:"rgba(250, 140, 22, 0.1)",color:"#fa8c16"},children:s.jsx(at,{})}),s.jsx(Ce,{level:4,children:"Schedule Management"}),s.jsx(Ee,{style:{fontSize:16},children:"Keep track of important dates, setup times, and exhibition schedules all in one place."})]})}),s.jsx(se,{xs:24,sm:12,lg:8,children:s.jsxs(Tt,{children:[s.jsx(At,{style:{background:"rgba(24, 144, 255, 0.1)",color:"#1890ff"},children:s.jsx($t,{})}),s.jsx(Ce,{level:4,children:"Support & Assistance"}),s.jsx(Ee,{style:{fontSize:16},children:"Get expert assistance throughout the booking process and during the exhibition."})]})})]})]})}),s.jsx(Zt,{className:"gray-bg",children:s.jsx("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 24px"},children:s.jsxs(Ne,{gutter:[48,48],children:[s.jsxs(se,{xs:24,lg:12,children:[s.jsx(Jt,{level:2,children:"Our Impact"}),s.jsxs(Ne,{gutter:[24,24],children:[s.jsx(se,{xs:12,children:s.jsx(Es,{children:s.jsx(ps,{title:"Exhibitions",value:100,suffix:"+",valueStyle:{color:"#4158D0",fontWeight:"bold"}})})}),s.jsx(se,{xs:12,children:s.jsx(Es,{children:s.jsx(ps,{title:"Exhibitors",value:5e3,suffix:"+",valueStyle:{color:"#C850C0",fontWeight:"bold"}})})}),s.jsx(se,{xs:12,children:s.jsx(Es,{children:s.jsx(ps,{title:"Stalls Booked",value:12e3,suffix:"+",valueStyle:{color:"#FFCC70",fontWeight:"bold"}})})}),s.jsx(se,{xs:12,children:s.jsx(Es,{children:s.jsx(ps,{title:"Cities",value:25,suffix:"+",valueStyle:{color:"#52c41a",fontWeight:"bold"}})})})]})]}),s.jsxs(se,{xs:24,lg:12,children:[s.jsx(Jt,{level:2,children:"What Exhibitors Say"}),s.jsxs(el,{autoplay:!0,dots:{className:"custom-carousel-dots"},children:[s.jsx("div",{children:s.jsxs(Ci,{children:[s.jsxs("div",{style:{display:"flex",gap:16,marginBottom:20},children:[s.jsx(zt,{size:64,icon:s.jsx(Ae,{}),style:{backgroundColor:"#4158D0"}}),s.jsxs("div",{children:[s.jsx(Ce,{level:5,style:{margin:0},children:"Sarah Johnson"}),s.jsx(ks,{type:"secondary",children:"Tech Innovations Inc."})]})]}),s.jsx(Ee,{style:{fontSize:16},children:'"The booking process was seamless! I could view the layout, select my preferred spot, and complete payment all in one go. Will definitely use again for our next exhibition."'})]})}),s.jsx("div",{children:s.jsxs(Ci,{children:[s.jsxs("div",{style:{display:"flex",gap:16,marginBottom:20},children:[s.jsx(zt,{size:64,icon:s.jsx(Ae,{}),style:{backgroundColor:"#C850C0"}}),s.jsxs("div",{children:[s.jsx(Ce,{level:5,style:{margin:0},children:"Michael Chen"}),s.jsx(ks,{type:"secondary",children:"Global Exhibits Ltd"})]})]}),s.jsx(Ee,{style:{fontSize:16},children:'"As a regular exhibitor, this platform has made my life so much easier. I love how I can see all my bookings and manage everything from one dashboard."'})]})})]})]})]})})}),s.jsx(Zt,{style:{padding:"60px 0"},children:s.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",padding:"40px 24px",background:"linear-gradient(135deg, #4158D0 0%, #C850C0 100%)",borderRadius:"16px",color:"white",textAlign:"center",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.1)"},children:[s.jsx(Ce,{level:2,style:{color:"white",marginBottom:16},children:"Ready to Showcase Your Business?"}),s.jsx(Ee,{style:{fontSize:"1.2rem",marginBottom:32,color:"rgba(255, 255, 255, 0.9)"},children:"Join thousands of successful exhibitors and book your perfect stall today"}),s.jsxs(ue,{size:16,wrap:!0,style:{justifyContent:"center"},children:[s.jsx(X,{size:"large",style:{height:"50px",background:"white",color:"#4158D0",border:"none",borderRadius:"8px",fontWeight:500,paddingLeft:24,paddingRight:24,display:"flex",alignItems:"center"},onClick:()=>t("/exhibitions"),icon:s.jsx(tt,{}),children:"Browse Exhibitions"}),s.jsx(X,{size:"large",style:{height:"50px",background:"rgba(255, 255, 255, 0.2)",color:"white",border:"2px solid white",borderRadius:"8px",fontWeight:500,paddingLeft:24,paddingRight:24,display:"flex",alignItems:"center"},onClick:m,icon:s.jsx(Ae,{}),children:"Register as Exhibitor"})]})]})})]}),s.jsx(Po,{})]})},Bu=u.lazy(()=>ce(()=>import("./Dashboard-Cr1qrR-P.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),zu=u.lazy(()=>ce(()=>import("./Dashboard-Dl6Abs_k.js"),__vite__mapDeps([7,1,2,3,4,5]))),Ou=u.lazy(()=>ce(()=>import("./Bookings-CvR98Ryl.js"),__vite__mapDeps([8,1,2,3,4,5]))),qu=u.lazy(()=>ce(()=>import("./BookingDetails-DemNncs0.js"),__vite__mapDeps([9,1,2,3,4,5]))),Uu=u.lazy(()=>ce(()=>import("./Profile-CyyR8MH_.js"),__vite__mapDeps([10,1,2,3,4,5]))),Vu=u.lazy(()=>ce(()=>import("./InvoiceDetails-BCZl8ujc.js"),__vite__mapDeps([11,1,12,13,2,3,4,5]))),Qu=u.lazy(()=>ce(()=>import("./Profile-Ca1xBZFz.js"),__vite__mapDeps([14,1,2,3,4,5]))),Hu=u.lazy(()=>ce(()=>import("./Settings-C1E7uH_V.js"),__vite__mapDeps([15,1,2,3,4,5,6]))),Wu=u.lazy(()=>ce(()=>import("./index-C-hK8LEZ.js"),__vite__mapDeps([16,1,2,17,3,4,5]))),Yu=u.lazy(()=>ce(()=>import("./index-DjsFNMUa.js"),__vite__mapDeps([18,1,2,17,3,4,5]))),Ku=u.lazy(()=>ce(()=>import("./index-BeL5Xxxt.js"),__vite__mapDeps([19,1,2,3,4,5]))),Gu=u.lazy(()=>ce(()=>import("./index-DP8nC8VT.js"),__vite__mapDeps([20,1,2,17,3,4,5,6]))),Xu=u.lazy(()=>ce(()=>import("./index-D3x-xepx.js"),__vite__mapDeps([21,1,22,2,3,4,5]))),Ju=u.lazy(()=>ce(()=>import("./index-BwvGwAB6.js"),__vite__mapDeps([23,1,2,3,4,5]))),Zu=u.lazy(()=>ce(()=>import("./edit-DRGSyYT-.js"),__vite__mapDeps([24,1,22,2,3,4,5]))),eh=u.lazy(()=>ce(()=>import("./index-CTn8UePu.js"),__vite__mapDeps([25,1,5,2,3,4]))),th=u.lazy(()=>ce(()=>import("./index-ClJdD571.js"),__vite__mapDeps([26,1,2,3,4,5]))),sh=u.lazy(()=>ce(()=>import("./index-CzM7W17T.js"),__vite__mapDeps([27,1,5,2,3,4]))),nh=u.lazy(()=>ce(()=>import("./index-CfGTOeS3.js"),__vite__mapDeps([28,1,5,2,3,4]))),rh=u.lazy(()=>ce(()=>import("./index-nA_CX28j.js"),__vite__mapDeps([29,1,5,2,3,4]))),ih=u.lazy(()=>ce(()=>import("./index-C_kQRXaZ.js"),__vite__mapDeps([30,1,31,2,3,4,5,6]))),oh=u.lazy(()=>ce(()=>import("./index-CWHDgcX9.js"),__vite__mapDeps([32,1,2,3,4,5,6]))),ah=u.lazy(()=>ce(()=>import("./index-D7CHrjyX.js"),__vite__mapDeps([33,1,2,17,31,3,4,5,6]))),lh=u.lazy(()=>ce(()=>import("./index-BfyEZPt7.js"),__vite__mapDeps([34,1,2,3,4,5]))),ch=u.lazy(()=>ce(()=>import("./index-DVSwLU5t.js"),__vite__mapDeps([35,1,12,13,2,3,4,5,36]))),dh=u.lazy(()=>ce(()=>import("./index-DysEZhLM.js"),__vite__mapDeps([37,1,2,3,4,5]))),uh=u.lazy(()=>ce(()=>import("./index-DU2wTeXd.js"),__vite__mapDeps([38,1,31,2,3,4,5,6]))),hh=u.lazy(()=>ce(()=>import("./index-Cy-hEcde.js"),__vite__mapDeps([39,1,31,2,3,4,5,40]))),ph=()=>{const t=ce(()=>import("./Dashboard-Cr1qrR-P.js"),__vite__mapDeps([0,1,2,3,4,5,6])),e=ce(()=>import("./index-D7CHrjyX.js"),__vite__mapDeps([33,1,2,17,31,3,4,5,6]));return{preloadDashboard:t,preloadBookingManager:e}};setTimeout(ph,3e3);const fh=()=>s.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:s.jsx(ct,{size:"large",tip:"Loading..."})}),xe=({children:t})=>Me(n=>n.auth.isAuthenticated)?t:s.jsx(Sr,{to:"/login"}),Pt=({children:t})=>Me(n=>n.exhibitorAuth.isAuthenticated)?t:s.jsx(Sr,{to:"/"}),_i=t=>s.jsx(yr,{children:t});function gh(){return s.jsx(Pr,{children:s.jsx(yr,{children:s.jsx(aa,{children:s.jsx(u.Suspense,{fallback:s.jsx(fh,{}),children:s.jsxs(la,{children:[s.jsx(re,{path:"/",element:s.jsx(Mu,{})}),s.jsx(re,{path:"/login",element:s.jsx(Rd,{})}),s.jsx(re,{path:"/exhibitions",element:s.jsx(Ru,{})}),s.jsx(re,{path:"/exhibitions/:id",element:s.jsx(fu,{})}),s.jsx(re,{path:"/exhibitions/:id/layout",element:s.jsx(uu,{})}),s.jsx(re,{path:"/exhibitor/dashboard",element:s.jsx(Pt,{children:s.jsx(_t,{children:s.jsx(yr,{children:s.jsx(zu,{})})})})}),s.jsx(re,{path:"/exhibitor/profile",element:s.jsx(Pt,{children:s.jsx(_t,{children:s.jsx(Uu,{})})})}),s.jsx(re,{path:"/exhibitor/bookings",element:s.jsx(Pt,{children:s.jsx(_t,{children:s.jsx(Ou,{})})})}),s.jsx(re,{path:"/exhibitor/bookings/:id",element:s.jsx(Pt,{children:s.jsx(_t,{children:s.jsx(qu,{})})})}),s.jsx(re,{path:"/exhibitor/support",element:s.jsx(Pt,{children:s.jsx(_t,{children:s.jsx("div",{children:"Help & Support"})})})}),s.jsx(re,{path:"/exhibitor/invoice/:id",element:s.jsx(Pt,{children:s.jsx(_t,{children:s.jsx(Vu,{})})})}),s.jsx(re,{path:"/dashboard",element:s.jsx(xe,{children:s.jsx(me,{children:_i(s.jsx(Bu,{}))})})}),s.jsx(re,{path:"/account",element:s.jsx(xe,{children:s.jsx(me,{children:s.jsx(Qu,{})})})}),s.jsx(re,{path:"/exhibition",element:s.jsx(xe,{children:s.jsx(me,{children:s.jsx(Gu,{})})})}),s.jsx(re,{path:"/exhibition/create",element:s.jsx(xe,{children:s.jsx(me,{children:s.jsx(Xu,{})})})}),s.jsx(re,{path:"/exhibition/:id",element:s.jsx(xe,{children:s.jsx(me,{children:s.jsx(Ju,{})})})}),s.jsx(re,{path:"/exhibition/:id/space",element:s.jsx(xe,{children:s.jsx(me,{children:s.jsx(eh,{})})})}),s.jsx(re,{path:"/exhibition/:id/layout",element:s.jsx(xe,{children:s.jsx(me,{children:s.jsx(th,{})})})}),s.jsx(re,{path:"/exhibition/:id/halls",element:s.jsx(xe,{children:s.jsx(me,{children:s.jsx(sh,{})})})}),s.jsx(re,{path:"/exhibition/:id/stalls",element:s.jsx(xe,{children:s.jsx(me,{children:s.jsx(nh,{})})})}),s.jsx(re,{path:"/exhibition/:id/fixtures",element:s.jsx(xe,{children:s.jsx(me,{children:s.jsx(rh,{})})})}),s.jsx(re,{path:"/exhibition/:id/edit",element:s.jsx(xe,{children:s.jsx(me,{children:s.jsx(Zu,{})})})}),s.jsx(re,{path:"/stall/list",element:s.jsx(xe,{children:s.jsx(me,{children:s.jsx(ih,{})})})}),s.jsx(re,{path:"/stall-types",element:s.jsx(xe,{children:s.jsx(me,{children:s.jsx(oh,{})})})}),s.jsx(re,{path:"/bookings",element:s.jsx(xe,{children:s.jsx(me,{children:_i(s.jsx(ah,{}))})})}),s.jsx(re,{path:"/bookings/create",element:s.jsx(xe,{children:s.jsx(me,{children:s.jsx(lh,{})})})}),s.jsx(re,{path:"/amenities",element:s.jsx(xe,{children:s.jsx(me,{children:s.jsx(hh,{})})})}),s.jsx(re,{path:"/invoices",element:s.jsx(xe,{children:s.jsx(me,{children:s.jsx(dh,{})})})}),s.jsx(re,{path:"/invoice/:id",element:s.jsx(xe,{children:s.jsx(me,{children:s.jsx(ch,{})})})}),s.jsx(re,{path:"/index",element:s.jsx(xe,{children:s.jsx(me,{children:s.jsx(Yu,{})})})}),s.jsx(re,{path:"/settings",element:s.jsx(xe,{children:s.jsx(me,{children:s.jsx(Hu,{})})})}),s.jsx(re,{path:"/roles",element:s.jsx(xe,{children:s.jsx(me,{children:s.jsx(Wu,{})})})}),s.jsx(re,{path:"/notifications",element:s.jsx(xe,{children:s.jsx(me,{children:s.jsx(Ku,{})})})}),s.jsx(re,{path:"/exhibitors",element:s.jsx(xe,{children:s.jsx(me,{children:s.jsx(uh,{})})})}),s.jsx(re,{path:"*",element:s.jsx(Sr,{to:"/",replace:!0})})]})})})})})}const fe=t=>{var n,r;const e=((r=(n=t.response)==null?void 0:n.data)==null?void 0:r.message)||"An error occurred";throw new Error(e)},Ve={getExhibitions:async()=>{try{return await H.get("/exhibitions")}catch(t){return fe(t)}},getActiveExhibitions:async()=>{try{return await H.get("/exhibitions/active")}catch(t){return fe(t)}},getAllExhibitionsForAssignment:async()=>{try{return await H.get("/exhibitions/all-for-assignment")}catch(t){return fe(t)}},getExhibition:async t=>{try{return await H.get(`/exhibitions/${t}`)}catch(e){return fe(e)}},createExhibition:async t=>{try{return await H.post("/exhibitions",t)}catch(e){return fe(e)}},updateExhibition:async(t,e)=>{try{return await H.put(`/exhibitions/${t}`,e)}catch(n){return fe(n)}},deleteExhibition:async t=>{try{return await H.delete(`/exhibitions/${t}`)}catch(e){return fe(e)}},getExhibitionProgress:async t=>{try{return(await H.get(`/exhibitions/${t}/progress`)).data}catch(e){return fe(e)}},getHalls:async t=>{try{return await H.get(`/exhibitions/${t}/halls`)}catch(e){return fe(e)}},createHall:async(t,e)=>{try{const{_id:n,id:r,createdAt:i,updatedAt:o,...d}=e;return console.log("Creating hall with data:",{exhibitionId:t,data:d}),(await H.post(`/exhibitions/${t}/halls`,d)).data}catch(n){throw console.error("Error creating hall:",n),n}},updateHall:async(t,e,n)=>{try{const{_id:r,id:i,createdAt:o,updatedAt:d,...p}=n;console.log("Updating hall with data:",{exhibitionId:t,hallId:e,data:p});const m=await H.put(`/exhibitions/${t}/halls/${e}`,p);return console.log("Hall updated:",m.data),m}catch(r){return console.error("Error updating hall:",r),fe(r)}},deleteHall:async(t,e)=>{var n,r,i;try{if(!t||!e)throw new Error("Exhibition ID and Hall ID are required");console.log("Deleting hall:",{exhibitionId:t,hallId:e});const o=await H.delete(`/exhibitions/${t}/halls/${e}`);if(!o.data)throw new Error("No response received from server");return o}catch(o){throw console.error("Error deleting hall:",o),((n=o.response)==null?void 0:n.status)===401?new Error("Unauthorized. Please log in again."):((r=o.response)==null?void 0:r.status)===403?new Error("You do not have permission to delete halls."):((i=o.response)==null?void 0:i.status)===404?new Error("Hall not found."):o}},saveLayout:async(t,e)=>{try{if(!t)throw new Error("Exhibition ID is required");return{data:{halls:e}}}catch(n){return fe(n)}},getLayout:async t=>{try{if(!t)throw new Error("Exhibition ID is required");return await H.get(`/exhibitions/${t}/layout`)}catch(e){return fe(e)}},getStalls:async(t,e,n)=>{try{if(!t)throw new Error("Exhibition ID is required");const r={};return e&&(r.hallId=e),n!=null&&n.page&&(r.page=n.page),n!=null&&n.limit&&(r.limit=n.limit),n!=null&&n.search&&(r.search=n.search),n!=null&&n.status&&(r.status=n.status),n!=null&&n.sortBy&&(r.sortBy=n.sortBy),n!=null&&n.sortOrder&&(r.sortOrder=n.sortOrder),n!=null&&n.minPrice&&(r.minPrice=n.minPrice),n!=null&&n.maxPrice&&(r.maxPrice=n.maxPrice),await H.get(`/exhibitions/${t}/stalls`,{params:r})}catch(r){return fe(r)}},createStall:async(t,e)=>{try{if(!t)throw new Error("Exhibition ID is required");return await H.post(`/exhibitions/${t}/stalls`,e)}catch(n){return fe(n)}},updateStall:async(t,e,n)=>{try{if(!t||!e)throw new Error("Exhibition ID and Stall ID are required");console.log("Updating stall:",{exhibitionId:t,stallId:e,data:n});const r=await H.put(`/exhibitions/${t}/stalls/${e}`,n);return console.log("Stall update response:",r),r}catch(r){return console.error("Error updating stall:",r),fe(r)}},deleteStall:async(t,e)=>{try{if(!t||!e)throw new Error("Exhibition ID and Stall ID are required");return await H.delete(`/exhibitions/${t}/stalls/${e}`)}catch(n){return fe(n)}},getFixtures:async(t,e)=>{try{const n=`/exhibitions/${t}/fixtures`,r=e?{type:e}:void 0;return await H.get(n,{params:r})}catch(n){return fe(n)}},getFixture:async(t,e)=>{try{return await H.get(`/exhibitions/${t}/fixtures/${e}`)}catch(n){return fe(n)}},createFixture:async(t,e)=>{try{return await H.post(`/exhibitions/${t}/fixtures`,e)}catch(n){return fe(n)}},updateFixture:async(t,e,n)=>{try{return await H.put(`/exhibitions/${t}/fixtures/${e}`,n)}catch(r){return fe(r)}},deleteFixture:async(t,e)=>{try{return await H.delete(`/exhibitions/${t}/fixtures/${e}`)}catch(n){return fe(n)}},assignUsersToExhibition:async(t,e)=>{try{return await H.post(`/exhibitions/${t}/assign-users`,{userIds:e})}catch(n){return fe(n)}},unassignUserFromExhibition:async(t,e)=>{try{return await H.delete(`/exhibitions/${t}/unassign-user/${e}`)}catch(n){return fe(n)}},getAssignedUsers:async t=>{try{return await H.get(`/exhibitions/${t}/assigned-users`)}catch(e){return fe(e)}}},mh={exhibitions:[],currentExhibition:null,halls:[],stalls:[],fixtures:[],loading:!1,error:null,stallsPagination:{currentPage:1,totalPages:0,totalCount:0,pageSize:10,hasNextPage:!1,hasPrevPage:!1,startIndex:0,endIndex:0}},kn=ne("exhibition/fetchExhibitions",async(t,{rejectWithValue:e})=>{try{return(await Ve.getExhibitions()).data.map(i=>({...i,id:i._id||i.id})).filter(i=>i.id)}catch(n){return e(n.message)}}),En=ne("exhibition/fetchAllExhibitionsForAssignment",async(t,{rejectWithValue:e})=>{try{return(await Ve.getAllExhibitionsForAssignment()).data.map(i=>({...i,id:i._id||i.id})).filter(i=>i.id)}catch(n){return e(n.message)}}),Cn=ne("exhibition/fetchExhibition",async(t,{rejectWithValue:e})=>{try{if(!t)throw new Error("Exhibition ID is required");return(await Ve.getExhibition(t)).data}catch(n){return e(n.message)}}),In=ne("exhibition/createExhibition",async(t,{rejectWithValue:e})=>{try{return(await Ve.createExhibition(t)).data}catch(n){return e(n.message)}}),_n=ne("exhibition/updateExhibition",async({id:t,data:e},{rejectWithValue:n})=>{try{if(!t)throw new Error("Exhibition ID is required");return(await Ve.updateExhibition(t,e)).data}catch(r){return n(r.message)}}),Rn=ne("exhibition/fetchHalls",async(t,{rejectWithValue:e})=>{var n;try{if(!t)throw new Error("Exhibition ID is required");return(await Ve.getHalls(t)).data}catch(r){return((n=r.response)==null?void 0:n.status)===404?[]:e(r.message)}}),Tn=ne("exhibition/fetchStalls",async({exhibitionId:t,hallId:e,page:n=1,limit:r=10,search:i,status:o,sortBy:d="number",sortOrder:p="asc",minPrice:m,maxPrice:h},{rejectWithValue:_})=>{try{if(!t)throw new Error("Exhibition ID is required");return(await Ve.getStalls(t,e,{page:n,limit:r,search:i,status:o,sortBy:d,sortOrder:p,minPrice:m,maxPrice:h})).data}catch(j){return _(j.message)}}),An=ne("exhibition/deleteExhibition",async(t,{rejectWithValue:e})=>{try{return await Ve.deleteExhibition(t),t}catch(n){return e(n.message)}}),Pn=ne("exhibition/fetchFixtures",async({exhibitionId:t,type:e},{rejectWithValue:n})=>{try{if(!t)throw new Error("Exhibition ID is required");return(await Ve.getFixtures(t,e)).data}catch(r){return n(r.message)}}),Nn=ne("exhibition/createFixture",async({exhibitionId:t,data:e},{rejectWithValue:n})=>{try{if(!t)throw new Error("Exhibition ID is required");return(await Ve.createFixture(t,e)).data}catch(r){return n(r.message)}}),Dn=ne("exhibition/updateFixture",async({exhibitionId:t,id:e,data:n},{rejectWithValue:r})=>{try{if(!t||!e)throw new Error("Exhibition ID and Fixture ID are required");return(await Ve.updateFixture(t,e,n)).data}catch(i){return r(i.message)}}),$n=ne("exhibition/deleteFixture",async({exhibitionId:t,id:e},{rejectWithValue:n})=>{try{if(!t||!e)throw new Error("Exhibition ID and Fixture ID are required");return await Ve.deleteFixture(t,e),e}catch(r){return n(r.message)}}),Do=Le({name:"exhibition",initialState:mh,reducers:{clearCurrentExhibition:t=>{t.currentExhibition=null,t.halls=[],t.stalls=[],t.fixtures=[],t.error=null},clearError:t=>{t.error=null},clearStalls:t=>{t.stalls=[],t.stallsPagination={currentPage:1,totalPages:0,totalCount:0,pageSize:10,hasNextPage:!1,hasPrevPage:!1,startIndex:0,endIndex:0}},clearFixtures:t=>{t.fixtures=[]}},extraReducers:t=>{t.addCase(kn.pending,e=>{e.loading=!0,e.error=null}).addCase(kn.fulfilled,(e,n)=>{e.loading=!1,e.exhibitions=n.payload}).addCase(kn.rejected,(e,n)=>{e.loading=!1,e.error=n.payload}).addCase(En.pending,e=>{e.loading=!0,e.error=null}).addCase(En.fulfilled,(e,n)=>{e.loading=!1,e.exhibitions=n.payload}).addCase(En.rejected,(e,n)=>{e.loading=!1,e.error=n.payload}).addCase(Cn.pending,e=>{e.loading=!0,e.error=null}).addCase(Cn.fulfilled,(e,n)=>{e.loading=!1,e.currentExhibition=n.payload}).addCase(Cn.rejected,(e,n)=>{e.loading=!1,e.error=n.payload}).addCase(In.pending,e=>{e.loading=!0,e.error=null}).addCase(In.fulfilled,(e,n)=>{e.loading=!1,e.exhibitions.push(n.payload)}).addCase(In.rejected,(e,n)=>{e.loading=!1,e.error=n.payload}).addCase(_n.pending,e=>{e.loading=!0,e.error=null}).addCase(_n.fulfilled,(e,n)=>{e.loading=!1,e.currentExhibition=n.payload;const r=e.exhibitions.findIndex(i=>i.id===n.payload.id);r!==-1&&(e.exhibitions[r]=n.payload)}).addCase(_n.rejected,(e,n)=>{e.loading=!1,e.error=n.payload}).addCase(Rn.pending,e=>{e.loading=!0,e.error=null}).addCase(Rn.fulfilled,(e,n)=>{e.loading=!1,e.halls=n.payload}).addCase(Rn.rejected,(e,n)=>{e.loading=!1,e.error=n.payload}).addCase(Tn.pending,e=>{e.loading=!0,e.error=null}).addCase(Tn.fulfilled,(e,n)=>{e.loading=!1;const r=n.payload,i=r&&typeof r=="object"&&"stalls"in r,o=i?r.stalls:r,d=i?r.pagination:null,p=(Array.isArray(o)?o:[]).map(m=>{var h;return{...m,id:m._id||m.id,_id:m._id||m.id,stallTypeId:typeof m.stallTypeId=="string"?m.stallTypeId:(h=m.stallTypeId)==null?void 0:h._id,stallType:m.stallType||{name:"N/A",description:null}}});e.stalls=p,d&&(e.stallsPagination=d)}).addCase(Tn.rejected,(e,n)=>{e.loading=!1,e.error=n.payload}).addCase(An.pending,e=>{e.loading=!0,e.error=null}).addCase(An.fulfilled,(e,n)=>{e.loading=!1,e.exhibitions=e.exhibitions.filter(r=>(r._id||r.id)!==n.payload)}).addCase(An.rejected,(e,n)=>{e.loading=!1,e.error=n.payload}).addCase(Pn.pending,e=>{e.loading=!0,e.error=null}).addCase(Pn.fulfilled,(e,n)=>{e.loading=!1,e.fixtures=n.payload.map(r=>({...r,id:r._id||r.id,_id:r._id||r.id}))}).addCase(Pn.rejected,(e,n)=>{e.loading=!1,e.error=n.payload}).addCase(Nn.pending,e=>{e.loading=!0,e.error=null}).addCase(Nn.fulfilled,(e,n)=>{e.loading=!1;const r={...n.payload,id:n.payload._id||n.payload.id,_id:n.payload._id||n.payload.id};e.fixtures.push(r)}).addCase(Nn.rejected,(e,n)=>{e.loading=!1,e.error=n.payload}).addCase(Dn.pending,e=>{e.loading=!0,e.error=null}).addCase(Dn.fulfilled,(e,n)=>{e.loading=!1;const r={...n.payload,id:n.payload._id||n.payload.id,_id:n.payload._id||n.payload.id},i=e.fixtures.findIndex(o=>o.id===r.id||o._id===r._id);i!==-1&&(e.fixtures[i]=r)}).addCase(Dn.rejected,(e,n)=>{e.loading=!1,e.error=n.payload}).addCase($n.pending,e=>{e.loading=!0,e.error=null}).addCase($n.fulfilled,(e,n)=>{e.loading=!1,e.fixtures=e.fixtures.filter(r=>r.id!==n.payload&&r._id!==n.payload)}).addCase($n.rejected,(e,n)=>{e.loading=!1,e.error=n.payload})}}),{clearCurrentExhibition:Kp,clearError:Gp,clearStalls:Xp,clearFixtures:Jp}=Do.actions,xh=Do.reducer,yh={bookings:[],currentBooking:null,loading:!1,statsLoading:!1,error:null,pagination:{total:0,page:1,limit:10,pages:0},stats:{total:0,pending:0,approved:0,rejected:0,confirmed:0,cancelled:0,totalRevenue:0,totalBaseAmount:0}},Ln=ne("booking/fetchBookings",async(t={},{rejectWithValue:e})=>{var n,r;try{const i={};return t.page&&(i.page=t.page),t.limit&&(i.limit=t.limit),t.search&&(i.search=t.search),t.status&&(i.status=t.status),t.exhibitionId&&(i.exhibitionId=t.exhibitionId),t.startDate&&(i.startDate=t.startDate),t.endDate&&(i.endDate=t.endDate),(await H.get("/bookings",{params:i})).data}catch(i){return e(((r=(n=i==null?void 0:i.response)==null?void 0:n.data)==null?void 0:r.message)||"Failed to fetch bookings")}}),Fn=ne("booking/fetchBooking",async t=>(await H.get(`/bookings/${t}`)).data),Mn=ne("booking/createBooking",async t=>(await H.post("/bookings",t)).data),Bn=ne("booking/updateStatus",async({id:t,status:e,rejectionReason:n})=>(await H.patch(`/bookings/${t}`,{status:e,...n&&{rejectionReason:n}})).data),zn=ne("booking/updatePaymentStatus",async({id:t,paymentStatus:e,paymentDetails:n})=>(await H.patch(`/bookings/${t}/payment`,{paymentStatus:e,paymentDetails:n})).data),On=ne("booking/deleteBooking",async t=>(await H.delete(`/bookings/${t}`),t)),qn=ne("booking/fetchBookingStats",async(t,{rejectWithValue:e})=>{var n,r;try{return(await H.get("/bookings/stats")).data}catch(i){return e(((r=(n=i==null?void 0:i.response)==null?void 0:n.data)==null?void 0:r.message)||"Failed to fetch booking statistics")}}),$o=Le({name:"booking",initialState:yh,reducers:{clearCurrentBooking:t=>{t.currentBooking=null},clearBookingError:t=>{t.error=null}},extraReducers:t=>{t.addCase(Ln.pending,e=>{e.loading=!0,e.error=null}).addCase(Ln.fulfilled,(e,n)=>{e.loading=!1,e.bookings=n.payload.data||[],n.payload.pagination&&(e.pagination=n.payload.pagination)}).addCase(Ln.rejected,(e,n)=>{e.loading=!1,e.error=n.error.message||"Failed to fetch bookings"}).addCase(Fn.pending,e=>{e.loading=!0,e.error=null}).addCase(Fn.fulfilled,(e,n)=>{e.loading=!1,e.currentBooking=n.payload}).addCase(Fn.rejected,(e,n)=>{e.loading=!1,e.error=n.error.message||"Failed to fetch booking"}).addCase(Mn.pending,e=>{e.loading=!0,e.error=null}).addCase(Mn.fulfilled,(e,n)=>{e.loading=!1,e.bookings.unshift(n.payload),e.currentBooking=n.payload}).addCase(Mn.rejected,(e,n)=>{e.loading=!1,e.error=n.error.message||"Failed to create booking"}).addCase(Bn.pending,e=>{e.loading=!0,e.error=null}).addCase(Bn.fulfilled,(e,n)=>{var i;e.loading=!1;const r=e.bookings.findIndex(o=>o._id===n.payload._id);r!==-1&&(e.bookings[r]=n.payload),((i=e.currentBooking)==null?void 0:i._id)===n.payload._id&&(e.currentBooking=n.payload)}).addCase(Bn.rejected,(e,n)=>{e.loading=!1,e.error=n.error.message||"Failed to update booking status"}).addCase(zn.pending,e=>{e.loading=!0,e.error=null}).addCase(zn.fulfilled,(e,n)=>{var i;e.loading=!1;const r=e.bookings.findIndex(o=>o._id===n.payload._id);r!==-1&&(e.bookings[r]=n.payload),((i=e.currentBooking)==null?void 0:i._id)===n.payload._id&&(e.currentBooking=n.payload)}).addCase(zn.rejected,(e,n)=>{e.loading=!1,e.error=n.error.message||"Failed to update payment status"}).addCase(qn.pending,e=>{e.statsLoading=!0,e.error=null}).addCase(qn.fulfilled,(e,n)=>{e.statsLoading=!1,e.stats=n.payload}).addCase(qn.rejected,(e,n)=>{e.statsLoading=!1,e.error=n.error.message||"Failed to fetch booking statistics"}).addCase(On.pending,e=>{e.loading=!0,e.error=null}).addCase(On.fulfilled,(e,n)=>{var r;e.loading=!1,e.bookings=e.bookings.filter(i=>i._id!==n.payload),((r=e.currentBooking)==null?void 0:r._id)===n.payload&&(e.currentBooking=null)}).addCase(On.rejected,(e,n)=>{e.loading=!1,e.error=n.error.message||"Failed to delete booking"})}}),{clearCurrentBooking:Zp,clearBookingError:ef}=$o.actions,bh=$o.reducer,Un={exhibitors:[],loading:!1,error:null,pagination:{total:0,page:1,limit:10,pages:0,hasNextPage:!1,hasPrevPage:!1,nextPage:null,prevPage:null},filters:{status:null,isActive:null,search:null,sortBy:"createdAt",sortOrder:"desc"}},Vn=ne("exhibitors/fetchAll",async(t={},{rejectWithValue:e})=>{var n,r;try{return(await ot.getExhibitors(t)).data}catch(i){return e(((r=(n=i.response)==null?void 0:n.data)==null?void 0:r.message)||"Failed to fetch exhibitors")}}),Lo=Le({name:"exhibitor",initialState:Un,reducers:{clearExhibitors:t=>{t.exhibitors=[],t.pagination=Un.pagination,t.filters=Un.filters},clearError:t=>{t.error=null}},extraReducers:t=>{t.addCase(Vn.pending,e=>{e.loading=!0,e.error=null}).addCase(Vn.fulfilled,(e,n)=>{e.exhibitors=n.payload.data,e.pagination=n.payload.pagination,e.filters=n.payload.filters,e.loading=!1}).addCase(Vn.rejected,(e,n)=>{e.loading=!1,e.error=n.payload})}}),{clearExhibitors:tf,clearError:sf}=Lo.actions,wh=Lo.reducer,vh=async()=>{try{return(await H.get("/roles")).data}catch(t){throw console.error("Error fetching roles:",t),t}},jh=async t=>{try{return(await H.get(`/roles/${t}`)).data}catch(e){throw console.error("Error fetching role:",e),e}},Sh=async t=>{try{return(await H.post("/roles",t)).data}catch(e){throw console.error("Error creating role:",e),e}},kh=async(t,e)=>{try{return(await H.put(`/roles/${t}`,e)).data}catch(n){throw console.error("Error updating role:",n),n}},Eh=async t=>{try{await H.delete(`/roles/${t}`)}catch(e){throw console.error("Error deleting role:",e),e}},Ch={roles:[],role:null,loading:!1,error:null},Qn=ne("roles/fetchRoles",async(t,{rejectWithValue:e})=>{var n,r;try{return await vh()}catch(i){return e(((r=(n=i.response)==null?void 0:n.data)==null?void 0:r.message)||"Failed to fetch roles")}}),Hn=ne("roles/fetchRoleById",async(t,{rejectWithValue:e})=>{var n,r;try{return await jh(t)}catch(i){return e(((r=(n=i.response)==null?void 0:n.data)==null?void 0:r.message)||"Failed to fetch role")}}),Wn=ne("roles/addRole",async(t,{rejectWithValue:e})=>{var n,r;try{return await Sh(t)}catch(i){return e(((r=(n=i.response)==null?void 0:n.data)==null?void 0:r.message)||"Failed to create role")}}),Yn=ne("roles/modifyRole",async({id:t,roleData:e},{rejectWithValue:n})=>{var r,i;try{return await kh(t,e)}catch(o){return n(((i=(r=o.response)==null?void 0:r.data)==null?void 0:i.message)||"Failed to update role")}}),Kn=ne("roles/removeRole",async(t,{rejectWithValue:e})=>{var n,r;try{return await Eh(t),t}catch(i){return e(((r=(n=i.response)==null?void 0:n.data)==null?void 0:r.message)||"Failed to delete role")}}),Fo=Le({name:"roles",initialState:Ch,reducers:{clearRoleError:t=>{t.error=null},setSelectedRole:(t,e)=>{t.role=e.payload}},extraReducers:t=>{t.addCase(Qn.pending,e=>{e.loading=!0,e.error=null}).addCase(Qn.fulfilled,(e,n)=>{e.loading=!1,e.roles=n.payload}).addCase(Qn.rejected,(e,n)=>{e.loading=!1,e.error=n.payload}).addCase(Hn.pending,e=>{e.loading=!0,e.error=null}).addCase(Hn.fulfilled,(e,n)=>{e.loading=!1,e.role=n.payload}).addCase(Hn.rejected,(e,n)=>{e.loading=!1,e.error=n.payload}).addCase(Wn.pending,e=>{e.loading=!0,e.error=null}).addCase(Wn.fulfilled,(e,n)=>{e.loading=!1,e.roles.push(n.payload)}).addCase(Wn.rejected,(e,n)=>{e.loading=!1,e.error=n.payload}).addCase(Yn.pending,e=>{e.loading=!0,e.error=null}).addCase(Yn.fulfilled,(e,n)=>{var i;e.loading=!1;const r=e.roles.findIndex(o=>o._id===n.payload._id);r!==-1&&(e.roles[r]=n.payload),((i=e.role)==null?void 0:i._id)===n.payload._id&&(e.role=n.payload)}).addCase(Yn.rejected,(e,n)=>{e.loading=!1,e.error=n.payload}).addCase(Kn.pending,e=>{e.loading=!0,e.error=null}).addCase(Kn.fulfilled,(e,n)=>{var r;e.loading=!1,e.roles=e.roles.filter(i=>i._id!==n.payload),((r=e.role)==null?void 0:r._id)===n.payload&&(e.role=null)}).addCase(Kn.rejected,(e,n)=>{e.loading=!1,e.error=n.payload})}}),{clearRoleError:nf,setSelectedRole:rf}=Fo.actions,Ih=Fo.reducer,_h=async()=>{try{return(await H.get("/users")).data}catch(t){throw console.error("Error fetching users:",t),t}},Rh=async t=>{try{return(await H.get(`/users/${t}`)).data}catch(e){throw console.error("Error fetching user:",e),e}},Th=async t=>{try{return(await H.post("/users",t)).data}catch(e){throw console.error("Error creating user:",e),e}},Ah=async(t,e)=>{try{return(await H.put(`/users/${t}`,e)).data}catch(n){throw console.error("Error updating user:",n),n}},Ph=async t=>{try{await H.delete(`/users/${t}`)}catch(e){throw console.error("Error deleting user:",e),e}},Nh={users:[],selectedUser:null,loading:!1,error:null},Gn=ne("users/fetchUsers",async(t,{rejectWithValue:e})=>{var n,r;try{return await _h()}catch(i){return e(((r=(n=i.response)==null?void 0:n.data)==null?void 0:r.message)||"Failed to fetch users")}}),Xn=ne("users/fetchUserById",async(t,{rejectWithValue:e})=>{var n,r;try{return await Rh(t)}catch(i){return e(((r=(n=i.response)==null?void 0:n.data)==null?void 0:r.message)||"Failed to fetch user")}}),Jn=ne("users/addUser",async(t,{rejectWithValue:e})=>{var n,r;try{return await Th(t)}catch(i){return e(((r=(n=i.response)==null?void 0:n.data)==null?void 0:r.message)||"Failed to create user")}}),Zn=ne("users/modifyUser",async({id:t,userData:e},{rejectWithValue:n})=>{var r,i;try{return await Ah(t,e)}catch(o){return n(((i=(r=o.response)==null?void 0:r.data)==null?void 0:i.message)||"Failed to update user")}}),er=ne("users/removeUser",async(t,{rejectWithValue:e})=>{var n,r;try{return await Ph(t),t}catch(i){return e(((r=(n=i.response)==null?void 0:n.data)==null?void 0:r.message)||"Failed to delete user")}}),Mo=Le({name:"users",initialState:Nh,reducers:{clearUserError:t=>{t.error=null},setSelectedUser:(t,e)=>{t.selectedUser=e.payload}},extraReducers:t=>{t.addCase(Gn.pending,e=>{e.loading=!0,e.error=null}).addCase(Gn.fulfilled,(e,n)=>{e.loading=!1,e.users=n.payload}).addCase(Gn.rejected,(e,n)=>{e.loading=!1,e.error=n.payload}).addCase(Xn.pending,e=>{e.loading=!0,e.error=null}).addCase(Xn.fulfilled,(e,n)=>{e.loading=!1,e.selectedUser=n.payload}).addCase(Xn.rejected,(e,n)=>{e.loading=!1,e.error=n.payload}).addCase(Jn.pending,e=>{e.loading=!0,e.error=null}).addCase(Jn.fulfilled,(e,n)=>{e.loading=!1,e.users.push(n.payload)}).addCase(Jn.rejected,(e,n)=>{e.loading=!1,e.error=n.payload}).addCase(Zn.pending,e=>{e.loading=!0,e.error=null}).addCase(Zn.fulfilled,(e,n)=>{var i;e.loading=!1;const r=e.users.findIndex(o=>o._id===n.payload._id);r!==-1&&(e.users[r]=n.payload),((i=e.selectedUser)==null?void 0:i._id)===n.payload._id&&(e.selectedUser=n.payload)}).addCase(Zn.rejected,(e,n)=>{e.loading=!1,e.error=n.payload}).addCase(er.pending,e=>{e.loading=!0,e.error=null}).addCase(er.fulfilled,(e,n)=>{var r;e.loading=!1,e.users=e.users.filter(i=>i._id!==n.payload),((r=e.selectedUser)==null?void 0:r._id)===n.payload&&(e.selectedUser=null)}).addCase(er.rejected,(e,n)=>{e.loading=!1,e.error=n.payload})}}),{clearUserError:of,setSelectedUser:af}=Mo.actions,Dh=Mo.reducer;var $h=class extends Error{constructor(e){super(e[0].message);Hr(this,"issues");this.name="SchemaError",this.issues=e}},Bo=(t=>(t.uninitialized="uninitialized",t.pending="pending",t.fulfilled="fulfilled",t.rejected="rejected",t))(Bo||{});function Ri(t){return{status:t,isUninitialized:t==="uninitialized",isLoading:t==="pending",isSuccess:t==="fulfilled",isError:t==="rejected"}}var Ti=is;function zo(t,e){if(t===e||!(Ti(t)&&Ti(e)||Array.isArray(t)&&Array.isArray(e)))return e;const n=Object.keys(e),r=Object.keys(t);let i=n.length===r.length;const o=Array.isArray(e)?[]:{};for(const d of n)o[d]=zo(t[d],e[d]),i&&(i=t[d]===o[d]);return i?t:o}function Bt(t){let e=0;for(const n in t)e++;return e}var Ai=t=>[].concat(...t);function Lh(t){return new RegExp("(^|:)//").test(t)}function Fh(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}function Qs(t){return t!=null}function Mh(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}var Bh=t=>t.replace(/\/$/,""),zh=t=>t.replace(/^\//,"");function Oh(t,e){if(!t)return e;if(!e)return t;if(Lh(e))return e;const n=t.endsWith("/")||!e.startsWith("?")?"/":"";return t=Bh(t),e=zh(e),`${t}${n}${e}`}function qh(t,e,n){return t.has(e)?t.get(e):t.set(e,n).get(e)}var Pi=(...t)=>fetch(...t),Uh=t=>t.status>=200&&t.status<=299,Vh=t=>/ion\/(vnd\.api\+)?json/.test(t.get("content-type")||"");function Ni(t){if(!is(t))return t;const e={...t};for(const[n,r]of Object.entries(e))r===void 0&&delete e[n];return e}function Or({baseUrl:t,prepareHeaders:e=j=>j,fetchFn:n=Pi,paramsSerializer:r,isJsonContentType:i=Vh,jsonContentType:o="application/json",jsonReplacer:d,timeout:p,responseHandler:m,validateStatus:h,..._}={}){return typeof fetch>"u"&&n===Pi&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),async(f,w,A)=>{const{getState:T,extra:P,endpoint:S,forced:N,type:C}=w;let a,{url:l,headers:c=new Headers(_.headers),params:g=void 0,responseHandler:x=m??"json",validateStatus:E=h??Uh,timeout:b=p,...y}=typeof f=="string"?{url:f}:f,k,I=w.signal;b&&(k=new AbortController,w.signal.addEventListener("abort",k.abort),I=k.signal);let R={..._,signal:I,...y};c=new Headers(Ni(c)),R.headers=await e(c,{getState:T,arg:f,extra:P,endpoint:S,forced:N,type:C,extraOptions:A})||c;const B=O=>typeof O=="object"&&(is(O)||Array.isArray(O)||typeof O.toJSON=="function");if(!R.headers.has("content-type")&&B(R.body)&&R.headers.set("content-type",o),B(R.body)&&i(R.headers)&&(R.body=JSON.stringify(R.body,d)),g){const O=~l.indexOf("?")?"&":"?",q=r?r(g):new URLSearchParams(Ni(g));l+=O+q}l=Oh(t,l);const D=new Request(l,R);a={request:new Request(l,R)};let $,z=!1,V=k&&setTimeout(()=>{z=!0,k.abort()},b);try{$=await n(D)}catch(O){return{error:{status:z?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(O)},meta:a}}finally{V&&clearTimeout(V),k==null||k.signal.removeEventListener("abort",k.abort)}const L=$.clone();a.response=L;let F,U="";try{let O;if(await Promise.all([j($,x).then(q=>F=q,q=>O=q),L.text().then(q=>U=q,()=>{})]),O)throw O}catch(O){return{error:{status:"PARSING_ERROR",originalStatus:$.status,data:U,error:String(O)},meta:a}}return E($,F)?{data:F,meta:a}:{error:{status:$.status,data:F},meta:a}};async function j(f,w){if(typeof w=="function")return w(f);if(w==="content-type"&&(w=i(f.headers)?"json":"text"),w==="json"){const A=await f.text();return A.length?JSON.parse(A):null}return f.text()}}var Di=class{constructor(t,e=void 0){this.value=t,this.meta=e}},qr=Vt("__rtkq/focused"),Oo=Vt("__rtkq/unfocused"),Ur=Vt("__rtkq/online"),qo=Vt("__rtkq/offline");function en(t){return t.type==="query"}function Qh(t){return t.type==="mutation"}function tn(t){return t.type==="infinitequery"}function Hs(t){return en(t)||tn(t)}function Vr(t,e,n,r,i,o){return Hh(t)?t(e,n,r,i).filter(Qs).map(wr).map(o):Array.isArray(t)?t.map(wr).map(o):[]}function Hh(t){return typeof t=="function"}function wr(t){return typeof t=="string"?{type:t}:t}function Wh(t,e){return t.catch(e)}var ls=Symbol("forceQueryFn"),vr=t=>typeof t[ls]=="function";function Yh({serializeQueryArgs:t,queryThunk:e,infiniteQueryThunk:n,mutationThunk:r,api:i,context:o}){const d=new Map,p=new Map,{unsubscribeQueryResult:m,removeMutationResult:h,updateSubscriptionOptions:_}=i.internalActions;return{buildInitiateQuery:P,buildInitiateInfiniteQuery:S,buildInitiateMutation:N,getRunningQueryThunk:j,getRunningMutationThunk:f,getRunningQueriesThunk:w,getRunningMutationsThunk:A};function j(C,a){return l=>{var x;const c=o.endpointDefinitions[C],g=t({queryArgs:a,endpointDefinition:c,endpointName:C});return(x=d.get(l))==null?void 0:x[g]}}function f(C,a){return l=>{var c;return(c=p.get(l))==null?void 0:c[a]}}function w(){return C=>Object.values(d.get(C)||{}).filter(Qs)}function A(){return C=>Object.values(p.get(C)||{}).filter(Qs)}function T(C,a){const l=(c,{subscribe:g=!0,forceRefetch:x,subscriptionOptions:E,[ls]:b,...y}={})=>(k,I)=>{var G;const R=t({queryArgs:c,endpointDefinition:a,endpointName:C});let B;const D={...y,type:"query",subscribe:g,forceRefetch:x,subscriptionOptions:E,endpointName:C,originalArgs:c,queryCacheKey:R,[ls]:b};if(en(a))B=e(D);else{const{direction:Y,initialPageParam:pe}=y;B=n({...D,direction:Y,initialPageParam:pe})}const v=i.endpoints[C].select(c),$=k(B),z=v(I()),{requestId:V,abort:L}=$,F=z.requestId!==V,U=(G=d.get(k))==null?void 0:G[R],O=()=>v(I()),q=Object.assign(b?$.then(O):F&&!U?Promise.resolve(z):Promise.all([U,$]).then(O),{arg:c,requestId:V,subscriptionOptions:E,queryCacheKey:R,abort:L,async unwrap(){const Y=await q;if(Y.isError)throw Y.error;return Y.data},refetch:()=>k(l(c,{subscribe:!1,forceRefetch:!0})),unsubscribe(){g&&k(m({queryCacheKey:R,requestId:V}))},updateSubscriptionOptions(Y){q.subscriptionOptions=Y,k(_({endpointName:C,requestId:V,queryCacheKey:R,options:Y}))}});if(!U&&!F&&!b){const Y=qh(d,k,{});Y[R]=q,q.then(()=>{delete Y[R],Bt(Y)||d.delete(k)})}return q};return l}function P(C,a){return T(C,a)}function S(C,a){return T(C,a)}function N(C){return(a,{track:l=!0,fixedCacheKey:c}={})=>(g,x)=>{const E=r({type:"mutation",endpointName:C,originalArgs:a,track:l,fixedCacheKey:c}),b=g(E),{requestId:y,abort:k,unwrap:I}=b,R=Wh(b.unwrap().then($=>({data:$})),$=>({error:$})),B=()=>{g(h({requestId:y,fixedCacheKey:c}))},D=Object.assign(R,{arg:b.arg,requestId:y,abort:k,unwrap:I,reset:B}),v=p.get(g)||{};return p.set(g,v),v[y]=D,D.then(()=>{delete v[y],Bt(v)||p.delete(g)}),c&&(v[c]=D,D.then(()=>{v[c]===D&&(delete v[c],Bt(v)||p.delete(g))})),D}}}var Uo=class extends $h{constructor(t,e,n,r){super(t),this.value=e,this.schemaName=n,this._bqMeta=r}};async function jt(t,e,n,r){const i=await t["~standard"].validate(e);if(i.issues)throw new Uo(i.issues,e,n,r);return i.value}function Kh(t){return t}var es=(t={})=>({...t,[Hi]:!0});function Gh({reducerPath:t,baseQuery:e,context:{endpointDefinitions:n},serializeQueryArgs:r,api:i,assertTagType:o,selectors:d,onSchemaFailure:p,catchSchemaFailure:m,skipSchemaValidation:h}){const _=(y,k,I,R)=>(B,D)=>{const v=n[y],$=r({queryArgs:k,endpointDefinition:v,endpointName:y});if(B(i.internalActions.queryResultPatched({queryCacheKey:$,patches:I})),!R)return;const z=i.endpoints[y].select(k)(D()),V=Vr(v.providesTags,z.data,void 0,k,{},o);B(i.internalActions.updateProvidedBy([{queryCacheKey:$,providedTags:V}]))};function j(y,k,I=0){const R=[k,...y];return I&&R.length>I?R.slice(0,-1):R}function f(y,k,I=0){const R=[...y,k];return I&&R.length>I?R.slice(1):R}const w=(y,k,I,R=!0)=>(B,D)=>{const $=i.endpoints[y].select(k)(D()),z={patches:[],inversePatches:[],undo:()=>B(i.util.patchQueryData(y,k,z.inversePatches,R))};if($.status==="uninitialized")return z;let V;if("data"in $)if(ua($.data)){const[L,F,U]=Yi($.data,I);z.patches.push(...F),z.inversePatches.push(...U),V=L}else V=I($.data),z.patches.push({op:"replace",path:[],value:V}),z.inversePatches.push({op:"replace",path:[],value:$.data});return z.patches.length===0||B(i.util.patchQueryData(y,k,z.patches,R)),z},A=(y,k,I)=>R=>R(i.endpoints[y].initiate(k,{subscribe:!1,forceRefetch:!0,[ls]:()=>({data:I})})),T=(y,k)=>y.query&&y[k]?y[k]:Kh,P=async(y,{signal:k,abort:I,rejectWithValue:R,fulfillWithValue:B,dispatch:D,getState:v,extra:$})=>{var F,U;const z=n[y.endpointName],{metaSchema:V,skipSchemaValidation:L=h}=z;try{let O=T(z,"transformResponse");const q={signal:k,abort:I,dispatch:D,getState:v,extra:$,endpoint:y.endpointName,type:y.type,forced:y.type==="query"?S(y,v()):void 0,queryCacheKey:y.type==="query"?y.queryCacheKey:void 0},G=y.type==="query"?y[ls]:void 0;let Y;const pe=async(oe,ee,de,Te)=>{if(ee==null&&oe.pages.length)return Promise.resolve({data:oe});const M={queryArg:y.originalArgs,pageParam:ee},J=await we(M),ae=Te?j:f;return{data:{pages:ae(oe.pages,J.data,de),pageParams:ae(oe.pageParams,ee,de)},meta:J.meta}};async function we(oe){let ee;const{extraOptions:de,argSchema:Te,rawResponseSchema:M,responseSchema:J}=z;if(Te&&!L&&(oe=await jt(Te,oe,"argSchema",{})),G?ee=G():z.query?ee=await e(z.query(oe),q,de):ee=await z.queryFn(oe,q,de,ke=>e(ke,q,de)),typeof process<"u",ee.error)throw new Di(ee.error,ee.meta);let{data:ae}=ee;M&&!L&&(ae=await jt(M,ee.data,"rawResponseSchema",ee.meta));let je=await O(ae,ee.meta,oe);return J&&!L&&(je=await jt(J,je,"responseSchema",ee.meta)),{...ee,data:je}}if(y.type==="query"&&"infiniteQueryOptions"in z){const{infiniteQueryOptions:oe}=z,{maxPages:ee=1/0}=oe;let de;const Te={pages:[],pageParams:[]},M=(F=d.selectQueryEntry(v(),y.queryCacheKey))==null?void 0:F.data,ae=S(y,v())&&!y.direction||!M?Te:M;if("direction"in y&&y.direction&&ae.pages.length){const je=y.direction==="backward",Be=(je?Vo:jr)(oe,ae);de=await pe(ae,Be,ee,je)}else{const{initialPageParam:je=oe.initialPageParam}=y,ke=(M==null?void 0:M.pageParams)??[],Be=ke[0]??je,Wt=ke.length;de=await pe(ae,Be,ee),G&&(de={data:de.data.pages[0]});for(let It=1;It<Wt;It++){const ht=jr(oe,de.data);de=await pe(de.data,ht,ee)}}Y=de}else Y=await we(y.originalArgs);return V&&!L&&Y.meta&&(Y.meta=await jt(V,Y.meta,"metaSchema",Y.meta)),B(Y.data,es({fulfilledTimeStamp:Date.now(),baseQueryMeta:Y.meta}))}catch(O){let q=O;if(q instanceof Di){let G=T(z,"transformErrorResponse");const{rawErrorResponseSchema:Y,errorResponseSchema:pe}=z;let{value:we,meta:oe}=q;try{Y&&!L&&(we=await jt(Y,we,"rawErrorResponseSchema",oe)),V&&!L&&(oe=await jt(V,oe,"metaSchema",oe));let ee=await G(we,oe,y.originalArgs);return pe&&!L&&(ee=await jt(pe,ee,"errorResponseSchema",oe)),R(ee,es({baseQueryMeta:oe}))}catch(ee){q=ee}}try{if(q instanceof Uo){const G={endpoint:y.endpointName,arg:y.originalArgs,type:y.type,queryCacheKey:y.type==="query"?y.queryCacheKey:void 0};(U=z.onSchemaFailure)==null||U.call(z,q,G),p==null||p(q,G);const{catchSchemaFailure:Y=m}=z;if(Y)return R(Y(q,G),es({baseQueryMeta:q._bqMeta}))}}catch(G){q=G}throw console.error(q),q}};function S(y,k){const I=d.selectQueryEntry(k,y.queryCacheKey),R=d.selectConfig(k).refetchOnMountOrArgChange,B=I==null?void 0:I.fulfilledTimeStamp,D=y.forceRefetch??(y.subscribe&&R);return D?D===!0||(Number(new Date)-Number(B))/1e3>=D:!1}const N=()=>ne(`${t}/executeQuery`,P,{getPendingMeta({arg:k}){const I=n[k.endpointName];return es({startedTimeStamp:Date.now(),...tn(I)?{direction:k.direction}:{}})},condition(k,{getState:I}){var L;const R=I(),B=d.selectQueryEntry(R,k.queryCacheKey),D=B==null?void 0:B.fulfilledTimeStamp,v=k.originalArgs,$=B==null?void 0:B.originalArgs,z=n[k.endpointName],V=k.direction;return vr(k)?!0:(B==null?void 0:B.status)==="pending"?!1:S(k,R)||en(z)&&((L=z==null?void 0:z.forceRefetch)!=null&&L.call(z,{currentArg:v,previousArg:$,endpointState:B,state:R}))?!0:!(D&&!V)},dispatchConditionRejection:!0}),C=N(),a=N(),l=ne(`${t}/executeMutation`,P,{getPendingMeta(){return es({startedTimeStamp:Date.now()})}}),c=y=>"force"in y,g=y=>"ifOlderThan"in y,x=(y,k,I)=>(R,B)=>{const D=c(I)&&I.force,v=g(I)&&I.ifOlderThan,$=(V=!0)=>{const L={forceRefetch:V,isPrefetch:!0};return i.endpoints[y].initiate(k,L)},z=i.endpoints[y].select(k)(B());if(D)R($());else if(v){const V=z==null?void 0:z.fulfilledTimeStamp;if(!V){R($());return}(Number(new Date)-Number(new Date(V)))/1e3>=v&&R($())}else R($(!1))};function E(y){return k=>{var I,R;return((R=(I=k==null?void 0:k.meta)==null?void 0:I.arg)==null?void 0:R.endpointName)===y}}function b(y,k){return{matchPending:sn(Wi(y),E(k)),matchFulfilled:sn(Et(y),E(k)),matchRejected:sn(Cr(y),E(k))}}return{queryThunk:C,mutationThunk:l,infiniteQueryThunk:a,prefetch:x,updateQueryData:w,upsertQueryData:A,patchQueryData:_,buildMatchThunkActions:b}}function jr(t,{pages:e,pageParams:n}){const r=e.length-1;return t.getNextPageParam(e[r],e,n[r],n)}function Vo(t,{pages:e,pageParams:n}){var r;return(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n)}function Qo(t,e,n,r){return Vr(n[t.meta.arg.endpointName][e],Et(t)?t.payload:void 0,Er(t)?t.payload:void 0,t.meta.arg.originalArgs,"baseQueryMeta"in t.meta?t.meta.baseQueryMeta:void 0,r)}function Cs(t,e,n){const r=t[e];r&&n(r)}function cs(t){return("arg"in t?t.arg.fixedCacheKey:t.fixedCacheKey)??t.requestId}function $i(t,e,n){const r=t[cs(e)];r&&n(r)}var Is={};function Xh({reducerPath:t,queryThunk:e,mutationThunk:n,serializeQueryArgs:r,context:{endpointDefinitions:i,apiUid:o,extractRehydrationInfo:d,hasRehydrationInfo:p},assertTagType:m,config:h}){const _=Vt(`${t}/resetApiState`);function j(E,b,y,k){var I;E[I=b.queryCacheKey]??(E[I]={status:"uninitialized",endpointName:b.endpointName}),Cs(E,b.queryCacheKey,R=>{R.status="pending",R.requestId=y&&R.requestId?R.requestId:k.requestId,b.originalArgs!==void 0&&(R.originalArgs=b.originalArgs),R.startedTimeStamp=k.startedTimeStamp;const B=i[k.arg.endpointName];tn(B)&&"direction"in b&&(R.direction=b.direction)})}function f(E,b,y,k){Cs(E,b.arg.queryCacheKey,I=>{if(I.requestId!==b.requestId&&!k)return;const{merge:R}=i[b.arg.endpointName];if(I.status="fulfilled",R)if(I.data!==void 0){const{fulfilledTimeStamp:B,arg:D,baseQueryMeta:v,requestId:$}=b;let z=kr(I.data,V=>R(V,y,{arg:D.originalArgs,baseQueryMeta:v,fulfilledTimeStamp:B,requestId:$}));I.data=z}else I.data=y;else I.data=i[b.arg.endpointName].structuralSharing??!0?zo(pa(I.data)?fa(I.data):I.data,y):y;delete I.error,I.fulfilledTimeStamp=b.fulfilledTimeStamp})}const w=Le({name:`${t}/queries`,initialState:Is,reducers:{removeQueryResult:{reducer(E,{payload:{queryCacheKey:b}}){delete E[b]},prepare:Kt()},cacheEntriesUpserted:{reducer(E,b){for(const y of b.payload){const{queryDescription:k,value:I}=y;j(E,k,!0,{arg:k,requestId:b.meta.requestId,startedTimeStamp:b.meta.timestamp}),f(E,{arg:k,requestId:b.meta.requestId,fulfilledTimeStamp:b.meta.timestamp,baseQueryMeta:{}},I,!0)}},prepare:E=>({payload:E.map(k=>{const{endpointName:I,arg:R,value:B}=k,D=i[I];return{queryDescription:{type:"query",endpointName:I,originalArgs:k.arg,queryCacheKey:r({queryArgs:R,endpointDefinition:D,endpointName:I})},value:B}}),meta:{[Hi]:!0,requestId:Ui(),timestamp:Date.now()}})},queryResultPatched:{reducer(E,{payload:{queryCacheKey:b,patches:y}}){Cs(E,b,k=>{k.data=Yr(k.data,y.concat())})},prepare:Kt()}},extraReducers(E){E.addCase(e.pending,(b,{meta:y,meta:{arg:k}})=>{const I=vr(k);j(b,k,I,y)}).addCase(e.fulfilled,(b,{meta:y,payload:k})=>{const I=vr(y.arg);f(b,y,k,I)}).addCase(e.rejected,(b,{meta:{condition:y,arg:k,requestId:I},error:R,payload:B})=>{Cs(b,k.queryCacheKey,D=>{if(!y){if(D.requestId!==I)return;D.status="rejected",D.error=B??R}})}).addMatcher(p,(b,y)=>{const{queries:k}=d(y);for(const[I,R]of Object.entries(k))((R==null?void 0:R.status)==="fulfilled"||(R==null?void 0:R.status)==="rejected")&&(b[I]=R)})}}),A=Le({name:`${t}/mutations`,initialState:Is,reducers:{removeMutationResult:{reducer(E,{payload:b}){const y=cs(b);y in E&&delete E[y]},prepare:Kt()}},extraReducers(E){E.addCase(n.pending,(b,{meta:y,meta:{requestId:k,arg:I,startedTimeStamp:R}})=>{I.track&&(b[cs(y)]={requestId:k,status:"pending",endpointName:I.endpointName,startedTimeStamp:R})}).addCase(n.fulfilled,(b,{payload:y,meta:k})=>{k.arg.track&&$i(b,k,I=>{I.requestId===k.requestId&&(I.status="fulfilled",I.data=y,I.fulfilledTimeStamp=k.fulfilledTimeStamp)})}).addCase(n.rejected,(b,{payload:y,error:k,meta:I})=>{I.arg.track&&$i(b,I,R=>{R.requestId===I.requestId&&(R.status="rejected",R.error=y??k)})}).addMatcher(p,(b,y)=>{const{mutations:k}=d(y);for(const[I,R]of Object.entries(k))((R==null?void 0:R.status)==="fulfilled"||(R==null?void 0:R.status)==="rejected")&&I!==(R==null?void 0:R.requestId)&&(b[I]=R)})}}),T={tags:{},keys:{}},P=Le({name:`${t}/invalidation`,initialState:T,reducers:{updateProvidedBy:{reducer(E,b){var y,k,I;for(const{queryCacheKey:R,providedTags:B}of b.payload){S(E,R);for(const{type:D,id:v}of B){const $=(k=(y=E.tags)[D]??(y[D]={}))[I=v||"__internal_without_id"]??(k[I]=[]);$.includes(R)||$.push(R)}E.keys[R]=B}},prepare:Kt()}},extraReducers(E){E.addCase(w.actions.removeQueryResult,(b,{payload:{queryCacheKey:y}})=>{S(b,y)}).addMatcher(p,(b,y)=>{var I,R,B;const{provided:k}=d(y);for(const[D,v]of Object.entries(k))for(const[$,z]of Object.entries(v)){const V=(R=(I=b.tags)[D]??(I[D]={}))[B=$||"__internal_without_id"]??(R[B]=[]);for(const L of z)V.includes(L)||V.push(L)}}).addMatcher(zs(Et(e),Er(e)),(b,y)=>{N(b,[y])}).addMatcher(w.actions.cacheEntriesUpserted.match,(b,y)=>{const k=y.payload.map(({queryDescription:I,value:R})=>({type:"UNKNOWN",payload:R,meta:{requestStatus:"fulfilled",requestId:"UNKNOWN",arg:I}}));N(b,k)})}});function S(E,b){var k;const y=E.keys[b]??[];for(const I of y){const R=I.type,B=I.id??"__internal_without_id",D=(k=E.tags[R])==null?void 0:k[B];D&&(E.tags[R][B]=D.filter(v=>v!==b))}delete E.keys[b]}function N(E,b){const y=b.map(k=>{const I=Qo(k,"providesTags",i,m),{queryCacheKey:R}=k.meta.arg;return{queryCacheKey:R,providedTags:I}});P.caseReducers.updateProvidedBy(E,P.actions.updateProvidedBy(y))}const C=Le({name:`${t}/subscriptions`,initialState:Is,reducers:{updateSubscriptionOptions(E,b){},unsubscribeQueryResult(E,b){},internal_getRTKQSubscriptions(){}}}),a=Le({name:`${t}/internalSubscriptions`,initialState:Is,reducers:{subscriptionsUpdated:{reducer(E,b){return Yr(E,b.payload)},prepare:Kt()}}}),l=Le({name:`${t}/config`,initialState:{online:Mh(),focused:Fh(),middlewareRegistered:!1,...h},reducers:{middlewareRegistered(E,{payload:b}){E.middlewareRegistered=E.middlewareRegistered==="conflict"||o!==b?"conflict":!0}},extraReducers:E=>{E.addCase(Ur,b=>{b.online=!0}).addCase(qo,b=>{b.online=!1}).addCase(qr,b=>{b.focused=!0}).addCase(Oo,b=>{b.focused=!1}).addMatcher(p,b=>({...b}))}}),c=da({queries:w.reducer,mutations:A.reducer,provided:P.reducer,subscriptions:a.reducer,config:l.reducer}),g=(E,b)=>c(_.match(b)?void 0:E,b),x={...l.actions,...w.actions,...C.actions,...a.actions,...A.actions,...P.actions,resetApiState:_};return{reducer:g,actions:x}}var Qe=Symbol.for("RTKQ/skipToken"),Ho={status:"uninitialized"},Li=kr(Ho,()=>{}),Fi=kr(Ho,()=>{});function Jh({serializeQueryArgs:t,reducerPath:e,createSelector:n}){const r=C=>Li,i=C=>Fi;return{buildQuerySelector:f,buildInfiniteQuerySelector:w,buildMutationSelector:A,selectInvalidatedBy:T,selectCachedArgsForQuery:P,selectApiState:d,selectQueries:p,selectMutations:h,selectQueryEntry:m,selectConfig:_};function o(C){return{...C,...Ri(C.status)}}function d(C){return C[e]}function p(C){var a;return(a=d(C))==null?void 0:a.queries}function m(C,a){var l;return(l=p(C))==null?void 0:l[a]}function h(C){var a;return(a=d(C))==null?void 0:a.mutations}function _(C){var a;return(a=d(C))==null?void 0:a.config}function j(C,a,l){return c=>{if(c===Qe)return n(r,l);const g=t({queryArgs:c,endpointDefinition:a,endpointName:C});return n(E=>m(E,g)??Li,l)}}function f(C,a){return j(C,a,o)}function w(C,a){const{infiniteQueryOptions:l}=a;function c(g){const x={...g,...Ri(g.status)},{isLoading:E,isError:b,direction:y}=x,k=y==="forward",I=y==="backward";return{...x,hasNextPage:S(l,x.data),hasPreviousPage:N(l,x.data),isFetchingNextPage:E&&k,isFetchingPreviousPage:E&&I,isFetchNextPageError:b&&k,isFetchPreviousPageError:b&&I}}return j(C,a,c)}function A(){return C=>{let a;return typeof C=="object"?a=cs(C)??Qe:a=C,n(a===Qe?i:g=>{var x,E;return((E=(x=d(g))==null?void 0:x.mutations)==null?void 0:E[a])??Fi},o)}}function T(C,a){const l=C[e],c=new Set;for(const g of a.filter(Qs).map(wr)){const x=l.provided.tags[g.type];if(!x)continue;let E=(g.id!==void 0?x[g.id]:Ai(Object.values(x)))??[];for(const b of E)c.add(b)}return Ai(Array.from(c.values()).map(g=>{const x=l.queries[g];return x?[{queryCacheKey:g,endpointName:x.endpointName,originalArgs:x.originalArgs}]:[]}))}function P(C,a){return Object.values(p(C)).filter(l=>(l==null?void 0:l.endpointName)===a&&l.status!=="uninitialized").map(l=>l.originalArgs)}function S(C,a){return a?jr(C,a)!=null:!1}function N(C,a){return!a||!C.getPreviousPageParam?!1:Vo(C,a)!=null}}var Nt=WeakMap?new WeakMap:void 0,Ws=({endpointName:t,queryArgs:e})=>{let n="";const r=Nt==null?void 0:Nt.get(e);if(typeof r=="string")n=r;else{const i=JSON.stringify(e,(o,d)=>(d=typeof d=="bigint"?{$bigint:d.toString()}:d,d=is(d)?Object.keys(d).sort().reduce((p,m)=>(p[m]=d[m],p),{}):d,d));is(e)&&(Nt==null||Nt.set(e,i)),n=i}return`${t}(${n})`};function Wo(...t){return function(n){const r=Wr(h=>{var _;return(_=n.extractRehydrationInfo)==null?void 0:_.call(n,h,{reducerPath:n.reducerPath??"api"})}),i={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...n,extractRehydrationInfo:r,serializeQueryArgs(h){let _=Ws;if("serializeQueryArgs"in h.endpointDefinition){const j=h.endpointDefinition.serializeQueryArgs;_=f=>{const w=j(f);return typeof w=="string"?w:Ws({...f,queryArgs:w})}}else n.serializeQueryArgs&&(_=n.serializeQueryArgs);return _(h)},tagTypes:[...n.tagTypes||[]]},o={endpointDefinitions:{},batch(h){h()},apiUid:Ui(),extractRehydrationInfo:r,hasRehydrationInfo:Wr(h=>r(h)!=null)},d={injectEndpoints:m,enhanceEndpoints({addTagTypes:h,endpoints:_}){if(h)for(const j of h)i.tagTypes.includes(j)||i.tagTypes.push(j);if(_)for(const[j,f]of Object.entries(_))typeof f=="function"?f(o.endpointDefinitions[j]):Object.assign(o.endpointDefinitions[j]||{},f);return d}},p=t.map(h=>h.init(d,i,o));function m(h){const _=h.endpoints({query:j=>({...j,type:"query"}),mutation:j=>({...j,type:"mutation"}),infiniteQuery:j=>({...j,type:"infinitequery"})});for(const[j,f]of Object.entries(_)){if(h.overrideExisting!==!0&&j in o.endpointDefinitions){if(h.overrideExisting==="throw")throw new Error(Vi(39));continue}o.endpointDefinitions[j]=f;for(const w of p)w.injectEndpoint(j,f)}return d}return d.injectEndpoints({endpoints:n.endpoints})}}function it(t,...e){return Object.assign(t,...e)}var Zh=({api:t,queryThunk:e,internalState:n})=>{const r=`${t.reducerPath}/subscriptions`;let i=null,o=null;const{updateSubscriptionOptions:d,unsubscribeQueryResult:p}=t.internalActions,m=(w,A)=>{var P,S,N;if(d.match(A)){const{queryCacheKey:C,requestId:a,options:l}=A.payload;return(P=w==null?void 0:w[C])!=null&&P[a]&&(w[C][a]=l),!0}if(p.match(A)){const{queryCacheKey:C,requestId:a}=A.payload;return w[C]&&delete w[C][a],!0}if(t.internalActions.removeQueryResult.match(A))return delete w[A.payload.queryCacheKey],!0;if(e.pending.match(A)){const{meta:{arg:C,requestId:a}}=A,l=w[S=C.queryCacheKey]??(w[S]={});return l[`${a}_running`]={},C.subscribe&&(l[a]=C.subscriptionOptions??l[a]??{}),!0}let T=!1;if(e.fulfilled.match(A)||e.rejected.match(A)){const C=w[A.meta.arg.queryCacheKey]||{},a=`${A.meta.requestId}_running`;T||(T=!!C[a]),delete C[a]}if(e.rejected.match(A)){const{meta:{condition:C,arg:a,requestId:l}}=A;if(C&&a.subscribe){const c=w[N=a.queryCacheKey]??(w[N]={});c[l]=a.subscriptionOptions??c[l]??{},T=!0}}return T},h=()=>n.currentSubscriptions,f={getSubscriptions:h,getSubscriptionCount:w=>{const T=h()[w]??{};return Bt(T)},isRequestSubscribed:(w,A)=>{var P;const T=h();return!!((P=T==null?void 0:T[w])!=null&&P[A])}};return(w,A)=>{if(i||(i=JSON.parse(JSON.stringify(n.currentSubscriptions))),t.util.resetApiState.match(w))return i=n.currentSubscriptions={},o=null,[!0,!1];if(t.internalActions.internal_getRTKQSubscriptions.match(w))return[!1,f];const T=m(n.currentSubscriptions,w);let P=!0;if(T){o||(o=setTimeout(()=>{const C=JSON.parse(JSON.stringify(n.currentSubscriptions)),[,a]=Yi(i,()=>C);A.next(t.internalActions.subscriptionsUpdated(a)),i=C,o=null},500));const S=typeof w.type=="string"&&!!w.type.startsWith(r),N=e.rejected.match(w)&&w.meta.condition&&!!w.meta.arg.subscribe;P=!S&&!N}return[P,!1]}};function ep(t){for(const e in t)return!1;return!0}var tp=2147483647/1e3-1,sp=({reducerPath:t,api:e,queryThunk:n,context:r,internalState:i,selectors:{selectQueryEntry:o,selectConfig:d}})=>{const{removeQueryResult:p,unsubscribeQueryResult:m,cacheEntriesUpserted:h}=e.internalActions,_=zs(m.match,n.fulfilled,n.rejected,h.match);function j(P){const S=i.currentSubscriptions[P];return!!S&&!ep(S)}const f={},w=(P,S,N)=>{const C=S.getState(),a=d(C);if(_(P)){let l;if(h.match(P))l=P.payload.map(c=>c.queryDescription.queryCacheKey);else{const{queryCacheKey:c}=m.match(P)?P.payload:P.meta.arg;l=[c]}A(l,S,a)}if(e.util.resetApiState.match(P))for(const[l,c]of Object.entries(f))c&&clearTimeout(c),delete f[l];if(r.hasRehydrationInfo(P)){const{queries:l}=r.extractRehydrationInfo(P);A(Object.keys(l),S,a)}};function A(P,S,N){const C=S.getState();for(const a of P){const l=o(C,a);T(a,l==null?void 0:l.endpointName,S,N)}}function T(P,S,N,C){const a=r.endpointDefinitions[S],l=(a==null?void 0:a.keepUnusedDataFor)??C.keepUnusedDataFor;if(l===1/0)return;const c=Math.max(0,Math.min(l,tp));if(!j(P)){const g=f[P];g&&clearTimeout(g),f[P]=setTimeout(()=>{j(P)||N.dispatch(p({queryCacheKey:P})),delete f[P]},c*1e3)}}return w},Mi=new Error("Promise never resolved before cacheEntryRemoved."),np=({api:t,reducerPath:e,context:n,queryThunk:r,mutationThunk:i,internalState:o,selectors:{selectQueryEntry:d,selectApiState:p}})=>{const m=Kr(r),h=Kr(i),_=Et(r,i),j={};function f(S,N,C){const a=j[S];a!=null&&a.valueResolved&&(a.valueResolved({data:N,meta:C}),delete a.valueResolved)}function w(S){const N=j[S];N&&(delete j[S],N.cacheEntryRemoved())}const A=(S,N,C)=>{const a=T(S);function l(c,g,x,E){const b=d(C,g),y=d(N.getState(),g);!b&&y&&P(c,E,g,N,x)}if(r.pending.match(S))l(S.meta.arg.endpointName,a,S.meta.requestId,S.meta.arg.originalArgs);else if(t.internalActions.cacheEntriesUpserted.match(S))for(const{queryDescription:c,value:g}of S.payload){const{endpointName:x,originalArgs:E,queryCacheKey:b}=c;l(x,b,S.meta.requestId,E),f(b,g,{})}else if(i.pending.match(S))N.getState()[e].mutations[a]&&P(S.meta.arg.endpointName,S.meta.arg.originalArgs,a,N,S.meta.requestId);else if(_(S))f(a,S.payload,S.meta.baseQueryMeta);else if(t.internalActions.removeQueryResult.match(S)||t.internalActions.removeMutationResult.match(S))w(a);else if(t.util.resetApiState.match(S))for(const c of Object.keys(j))w(c)};function T(S){return m(S)?S.meta.arg.queryCacheKey:h(S)?S.meta.arg.fixedCacheKey??S.meta.requestId:t.internalActions.removeQueryResult.match(S)?S.payload.queryCacheKey:t.internalActions.removeMutationResult.match(S)?cs(S.payload):""}function P(S,N,C,a,l){const c=n.endpointDefinitions[S],g=c==null?void 0:c.onCacheEntryAdded;if(!g)return;const x={},E=new Promise(B=>{x.cacheEntryRemoved=B}),b=Promise.race([new Promise(B=>{x.valueResolved=B}),E.then(()=>{throw Mi})]);b.catch(()=>{}),j[C]=x;const y=t.endpoints[S].select(Hs(c)?N:C),k=a.dispatch((B,D,v)=>v),I={...a,getCacheEntry:()=>y(a.getState()),requestId:l,extra:k,updateCachedData:Hs(c)?B=>a.dispatch(t.util.updateQueryData(S,N,B)):void 0,cacheDataLoaded:b,cacheEntryRemoved:E},R=g(N,I);Promise.resolve(R).catch(B=>{if(B!==Mi)throw B})}return A},rp=({api:t,context:{apiUid:e},reducerPath:n})=>(r,i)=>{t.util.resetApiState.match(r)&&i.dispatch(t.internalActions.middlewareRegistered(e))},ip=({reducerPath:t,context:e,context:{endpointDefinitions:n},mutationThunk:r,queryThunk:i,api:o,assertTagType:d,refetchQuery:p,internalState:m})=>{const{removeQueryResult:h}=o.internalActions,_=zs(Et(r),Er(r)),j=zs(Et(r,i),Cr(r,i));let f=[];const w=(P,S)=>{_(P)?T(Qo(P,"invalidatesTags",n,d),S):j(P)?T([],S):o.util.invalidateTags.match(P)&&T(Vr(P.payload,void 0,void 0,void 0,void 0,d),S)};function A(P){var C;const{queries:S,mutations:N}=P;for(const a of[S,N])for(const l in a)if(((C=a[l])==null?void 0:C.status)==="pending")return!0;return!1}function T(P,S){const N=S.getState(),C=N[t];if(f.push(...P),C.config.invalidationBehavior==="delayed"&&A(C))return;const a=f;if(f=[],a.length===0)return;const l=o.util.selectInvalidatedBy(N,a);e.batch(()=>{const c=Array.from(l.values());for(const{queryCacheKey:g}of c){const x=C.queries[g],E=m.currentSubscriptions[g]??{};x&&(Bt(E)===0?S.dispatch(h({queryCacheKey:g})):x.status!=="uninitialized"&&S.dispatch(p(x)))}})}return w},op=({reducerPath:t,queryThunk:e,api:n,refetchQuery:r,internalState:i})=>{const o={},d=(f,w)=>{(n.internalActions.updateSubscriptionOptions.match(f)||n.internalActions.unsubscribeQueryResult.match(f))&&m(f.payload,w),(e.pending.match(f)||e.rejected.match(f)&&f.meta.condition)&&m(f.meta.arg,w),(e.fulfilled.match(f)||e.rejected.match(f)&&!f.meta.condition)&&p(f.meta.arg,w),n.util.resetApiState.match(f)&&_()};function p({queryCacheKey:f},w){const A=w.getState()[t],T=A.queries[f],P=i.currentSubscriptions[f];if(!T||T.status==="uninitialized")return;const{lowestPollingInterval:S,skipPollingIfUnfocused:N}=j(P);if(!Number.isFinite(S))return;const C=o[f];C!=null&&C.timeout&&(clearTimeout(C.timeout),C.timeout=void 0);const a=Date.now()+S;o[f]={nextPollTimestamp:a,pollingInterval:S,timeout:setTimeout(()=>{(A.config.focused||!N)&&w.dispatch(r(T)),p({queryCacheKey:f},w)},S)}}function m({queryCacheKey:f},w){const T=w.getState()[t].queries[f],P=i.currentSubscriptions[f];if(!T||T.status==="uninitialized")return;const{lowestPollingInterval:S}=j(P);if(!Number.isFinite(S)){h(f);return}const N=o[f],C=Date.now()+S;(!N||C<N.nextPollTimestamp)&&p({queryCacheKey:f},w)}function h(f){const w=o[f];w!=null&&w.timeout&&clearTimeout(w.timeout),delete o[f]}function _(){for(const f of Object.keys(o))h(f)}function j(f={}){let w=!1,A=Number.POSITIVE_INFINITY;for(let T in f)f[T].pollingInterval&&(A=Math.min(f[T].pollingInterval,A),w=f[T].skipPollingIfUnfocused||w);return{lowestPollingInterval:A,skipPollingIfUnfocused:w}}return d},ap=({api:t,context:e,queryThunk:n,mutationThunk:r})=>{const i=Wi(n,r),o=Cr(n,r),d=Et(n,r),p={};return(h,_)=>{var j,f;if(i(h)){const{requestId:w,arg:{endpointName:A,originalArgs:T}}=h.meta,P=e.endpointDefinitions[A],S=P==null?void 0:P.onQueryStarted;if(S){const N={},C=new Promise((g,x)=>{N.resolve=g,N.reject=x});C.catch(()=>{}),p[w]=N;const a=t.endpoints[A].select(Hs(P)?T:w),l=_.dispatch((g,x,E)=>E),c={..._,getCacheEntry:()=>a(_.getState()),requestId:w,extra:l,updateCachedData:Hs(P)?g=>_.dispatch(t.util.updateQueryData(A,T,g)):void 0,queryFulfilled:C};S(T,c)}}else if(d(h)){const{requestId:w,baseQueryMeta:A}=h.meta;(j=p[w])==null||j.resolve({data:h.payload,meta:A}),delete p[w]}else if(o(h)){const{requestId:w,rejectedWithValue:A,baseQueryMeta:T}=h.meta;(f=p[w])==null||f.reject({error:h.payload??h.error,isUnhandledError:!A,meta:T}),delete p[w]}}},lp=({reducerPath:t,context:e,api:n,refetchQuery:r,internalState:i})=>{const{removeQueryResult:o}=n.internalActions,d=(m,h)=>{qr.match(m)&&p(h,"refetchOnFocus"),Ur.match(m)&&p(h,"refetchOnReconnect")};function p(m,h){const _=m.getState()[t],j=_.queries,f=i.currentSubscriptions;e.batch(()=>{for(const w of Object.keys(f)){const A=j[w],T=f[w];if(!T||!A)continue;(Object.values(T).some(S=>S[h]===!0)||Object.values(T).every(S=>S[h]===void 0)&&_.config[h])&&(Bt(T)===0?m.dispatch(o({queryCacheKey:w})):A.status!=="uninitialized"&&m.dispatch(r(A)))}})}return d};function cp(t){const{reducerPath:e,queryThunk:n,api:r,context:i}=t,{apiUid:o}=i,d={invalidateTags:Vt(`${e}/invalidateTags`)},p=j=>j.type.startsWith(`${e}/`),m=[rp,sp,ip,op,np,ap];return{middleware:j=>{let f=!1;const A={...t,internalState:{currentSubscriptions:{}},refetchQuery:_,isThisApiSliceAction:p},T=m.map(N=>N(A)),P=Zh(A),S=lp(A);return N=>C=>{if(!ha(C))return N(C);f||(f=!0,j.dispatch(r.internalActions.middlewareRegistered(o)));const a={...j,next:N},l=j.getState(),[c,g]=P(C,a,l);let x;if(c?x=N(C):x=g,j.getState()[e]&&(S(C,a,l),p(C)||i.hasRehydrationInfo(C)))for(const E of T)E(C,a,l);return x}},actions:d};function _(j){return t.api.endpoints[j.endpointName].initiate(j.originalArgs,{subscribe:!1,forceRefetch:!0})}}var Bi=Symbol(),Yo=({createSelector:t=Qi}={})=>({name:Bi,init(e,{baseQuery:n,tagTypes:r,reducerPath:i,serializeQueryArgs:o,keepUnusedDataFor:d,refetchOnMountOrArgChange:p,refetchOnFocus:m,refetchOnReconnect:h,invalidationBehavior:_,onSchemaFailure:j,catchSchemaFailure:f,skipSchemaValidation:w},A){ca();const T=q=>q;Object.assign(e,{reducerPath:i,endpoints:{},internalActions:{onOnline:Ur,onOffline:qo,onFocus:qr,onFocusLost:Oo},util:{}});const P=Jh({serializeQueryArgs:o,reducerPath:i,createSelector:t}),{selectInvalidatedBy:S,selectCachedArgsForQuery:N,buildQuerySelector:C,buildInfiniteQuerySelector:a,buildMutationSelector:l}=P;it(e.util,{selectInvalidatedBy:S,selectCachedArgsForQuery:N});const{queryThunk:c,infiniteQueryThunk:g,mutationThunk:x,patchQueryData:E,updateQueryData:b,upsertQueryData:y,prefetch:k,buildMatchThunkActions:I}=Gh({baseQuery:n,reducerPath:i,context:A,api:e,serializeQueryArgs:o,assertTagType:T,selectors:P,onSchemaFailure:j,catchSchemaFailure:f,skipSchemaValidation:w}),{reducer:R,actions:B}=Xh({context:A,queryThunk:c,mutationThunk:x,serializeQueryArgs:o,reducerPath:i,assertTagType:T,config:{refetchOnFocus:m,refetchOnReconnect:h,refetchOnMountOrArgChange:p,keepUnusedDataFor:d,reducerPath:i,invalidationBehavior:_}});it(e.util,{patchQueryData:E,updateQueryData:b,upsertQueryData:y,prefetch:k,resetApiState:B.resetApiState,upsertQueryEntries:B.cacheEntriesUpserted}),it(e.internalActions,B);const{middleware:D,actions:v}=cp({reducerPath:i,context:A,queryThunk:c,mutationThunk:x,infiniteQueryThunk:g,api:e,assertTagType:T,selectors:P});it(e.util,v),it(e,{reducer:R,middleware:D});const{buildInitiateQuery:$,buildInitiateInfiniteQuery:z,buildInitiateMutation:V,getRunningMutationThunk:L,getRunningMutationsThunk:F,getRunningQueriesThunk:U,getRunningQueryThunk:O}=Yh({queryThunk:c,mutationThunk:x,infiniteQueryThunk:g,api:e,serializeQueryArgs:o,context:A});return it(e.util,{getRunningMutationThunk:L,getRunningMutationsThunk:F,getRunningQueryThunk:O,getRunningQueriesThunk:U}),{name:Bi,injectEndpoint(q,G){var we;const pe=(we=e.endpoints)[q]??(we[q]={});en(G)&&it(pe,{name:q,select:C(q,G),initiate:$(q,G)},I(c,q)),Qh(G)&&it(pe,{name:q,select:l(),initiate:V(q)},I(x,q)),tn(G)&&it(pe,{name:q,select:a(q,G),initiate:z(q,G)},I(c,q))}}}});Yo();function _s(t){return t.replace(t[0],t[0].toUpperCase())}function dp(t){return t.type==="query"}function up(t){return t.type==="mutation"}function Ko(t){return t.type==="infinitequery"}function ts(t,...e){return Object.assign(t,...e)}var tr=Symbol();function sr(t,e,n,r){const i=u.useMemo(()=>({queryArgs:t,serialized:typeof t=="object"?e({queryArgs:t,endpointDefinition:n,endpointName:r}):t}),[t,e,n,r]),o=u.useRef(i);return u.useEffect(()=>{o.current.serialized!==i.serialized&&(o.current=i)},[i]),o.current.serialized===i.serialized?o.current.queryArgs:t}function Rs(t){const e=u.useRef(t);return u.useEffect(()=>{ns(e.current,t)||(e.current=t)},[t]),ns(e.current,t)?e.current:t}var hp=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pp=hp(),fp=()=>typeof navigator<"u"&&navigator.product==="ReactNative",gp=fp(),mp=()=>pp||gp?u.useLayoutEffect:u.useEffect,xp=mp(),zi=t=>t.isUninitialized?{...t,isUninitialized:!1,isFetching:!0,isLoading:t.data===void 0,status:Bo.pending}:t;function nr(t,...e){const n={};return e.forEach(r=>{n[r]=t[r]}),n}var rr=["data","status","isLoading","isSuccess","isError","error"];function yp({api:t,moduleOptions:{batch:e,hooks:{useDispatch:n,useSelector:r,useStore:i},unstable__sideEffectsInRender:o,createSelector:d},serializeQueryArgs:p,context:m}){const h=o?a=>a():u.useEffect;return{buildQueryHooks:S,buildInfiniteQueryHooks:N,buildMutationHook:C,usePrefetch:f};function _(a,l,c){if(l!=null&&l.endpointName&&a.isUninitialized){const{endpointName:k}=l,I=m.endpointDefinitions[k];c!==Qe&&p({queryArgs:l.originalArgs,endpointDefinition:I,endpointName:k})===p({queryArgs:c,endpointDefinition:I,endpointName:k})&&(l=void 0)}let g=a.isSuccess?a.data:l==null?void 0:l.data;g===void 0&&(g=a.data);const x=g!==void 0,E=a.isLoading,b=(!l||l.isLoading||l.isUninitialized)&&!x&&E,y=a.isSuccess||x&&(E&&!(l!=null&&l.isError)||a.isUninitialized);return{...a,data:g,currentData:a.data,isFetching:E,isLoading:b,isSuccess:y}}function j(a,l,c){if(l!=null&&l.endpointName&&a.isUninitialized){const{endpointName:k}=l,I=m.endpointDefinitions[k];c!==Qe&&p({queryArgs:l.originalArgs,endpointDefinition:I,endpointName:k})===p({queryArgs:c,endpointDefinition:I,endpointName:k})&&(l=void 0)}let g=a.isSuccess?a.data:l==null?void 0:l.data;g===void 0&&(g=a.data);const x=g!==void 0,E=a.isLoading,b=(!l||l.isLoading||l.isUninitialized)&&!x&&E,y=a.isSuccess||E&&x;return{...a,data:g,currentData:a.data,isFetching:E,isLoading:b,isSuccess:y}}function f(a,l){const c=n(),g=Rs(l);return u.useCallback((x,E)=>c(t.util.prefetch(a,x,{...g,...E})),[a,c,g])}function w(a,l,{refetchOnReconnect:c,refetchOnFocus:g,refetchOnMountOrArgChange:x,skip:E=!1,pollingInterval:b=0,skipPollingIfUnfocused:y=!1,...k}={}){const{initiate:I}=t.endpoints[a],R=n(),B=u.useRef(void 0);if(!B.current){const q=R(t.internalActions.internal_getRTKQSubscriptions());B.current=q}const D=sr(E?Qe:l,Ws,m.endpointDefinitions[a],a),v=Rs({refetchOnReconnect:c,refetchOnFocus:g,pollingInterval:b,skipPollingIfUnfocused:y}),$=k.initialPageParam,z=Rs($),V=u.useRef(void 0);let{queryCacheKey:L,requestId:F}=V.current||{},U=!1;L&&F&&(U=B.current.isRequestSubscribed(L,F));const O=!U&&V.current!==void 0;return h(()=>{O&&(V.current=void 0)},[O]),h(()=>{var Y;const q=V.current;if(D===Qe){q==null||q.unsubscribe(),V.current=void 0;return}const G=(Y=V.current)==null?void 0:Y.subscriptionOptions;if(!q||q.arg!==D){q==null||q.unsubscribe();const pe=R(I(D,{subscriptionOptions:v,forceRefetch:x,...Ko(m.endpointDefinitions[a])?{initialPageParam:z}:{}}));V.current=pe}else v!==G&&q.updateSubscriptionOptions(v)},[R,I,x,D,v,O,z,a]),[V,R,I,v]}function A(a,l){return(g,{skip:x=!1,selectFromResult:E}={})=>{const{select:b}=t.endpoints[a],y=sr(x?Qe:g,p,m.endpointDefinitions[a],a),k=u.useRef(void 0),I=u.useMemo(()=>d([b(y),($,z)=>z,$=>y],l,{memoizeOptions:{resultEqualityCheck:ns}}),[b,y]),R=u.useMemo(()=>E?d([I],E,{devModeChecks:{identityFunctionCheck:"never"}}):I,[I,E]),B=r($=>R($,k.current),ns),D=i(),v=I(D.getState(),k.current);return xp(()=>{k.current=v},[v]),B}}function T(a){u.useEffect(()=>()=>{var l,c;(c=(l=a.current)==null?void 0:l.unsubscribe)==null||c.call(l),a.current=void 0},[a])}function P(a){if(!a.current)throw new Error(Vi(38));return a.current.refetch()}function S(a){const l=(x,E={})=>{const[b]=w(a,x,E);return T(b),u.useMemo(()=>({refetch:()=>P(b)}),[b])},c=({refetchOnReconnect:x,refetchOnFocus:E,pollingInterval:b=0,skipPollingIfUnfocused:y=!1}={})=>{const{initiate:k}=t.endpoints[a],I=n(),[R,B]=u.useState(tr),D=u.useRef(void 0),v=Rs({refetchOnReconnect:x,refetchOnFocus:E,pollingInterval:b,skipPollingIfUnfocused:y});h(()=>{var F,U;const L=(F=D.current)==null?void 0:F.subscriptionOptions;v!==L&&((U=D.current)==null||U.updateSubscriptionOptions(v))},[v]);const $=u.useRef(v);h(()=>{$.current=v},[v]);const z=u.useCallback(function(L,F=!1){let U;return e(()=>{var O;(O=D.current)==null||O.unsubscribe(),D.current=U=I(k(L,{subscriptionOptions:$.current,forceRefetch:!F})),B(L)}),U},[I,k]),V=u.useCallback(()=>{var L,F;(L=D.current)!=null&&L.queryCacheKey&&I(t.internalActions.removeQueryResult({queryCacheKey:(F=D.current)==null?void 0:F.queryCacheKey}))},[I]);return u.useEffect(()=>()=>{var L;(L=D==null?void 0:D.current)==null||L.unsubscribe()},[]),u.useEffect(()=>{R!==tr&&!D.current&&z(R,!0)},[R,z]),u.useMemo(()=>[z,R,{reset:V}],[z,R,V])},g=A(a,_);return{useQueryState:g,useQuerySubscription:l,useLazyQuerySubscription:c,useLazyQuery(x){const[E,b,{reset:y}]=c(x),k=g(b,{...x,skip:b===tr}),I=u.useMemo(()=>({lastArg:b}),[b]);return u.useMemo(()=>[E,{...k,reset:y},I],[E,k,y,I])},useQuery(x,E){const b=l(x,E),y=g(x,{selectFromResult:x===Qe||E!=null&&E.skip?void 0:zi,...E}),k=nr(y,...rr);return u.useDebugValue(k),u.useMemo(()=>({...y,...b}),[y,b])}}}function N(a){const l=(g,x={})=>{const[E,b,y,k]=w(a,g,x),I=u.useRef(k);h(()=>{I.current=k},[k]);const R=u.useCallback(function(v,$){let z;return e(()=>{var V;(V=E.current)==null||V.unsubscribe(),E.current=z=b(y(v,{subscriptionOptions:I.current,direction:$}))}),z},[E,b,y]);T(E);const B=sr(x.skip?Qe:g,Ws,m.endpointDefinitions[a],a),D=u.useCallback(()=>P(E),[E]);return u.useMemo(()=>({trigger:R,refetch:D,fetchNextPage:()=>R(B,"forward"),fetchPreviousPage:()=>R(B,"backward")}),[D,R,B])},c=A(a,j);return{useInfiniteQueryState:c,useInfiniteQuerySubscription:l,useInfiniteQuery(g,x){const{refetch:E,fetchNextPage:b,fetchPreviousPage:y}=l(g,x),k=c(g,{selectFromResult:g===Qe||x!=null&&x.skip?void 0:zi,...x}),I=nr(k,...rr,"hasNextPage","hasPreviousPage");return u.useDebugValue(I),u.useMemo(()=>({...k,fetchNextPage:b,fetchPreviousPage:y,refetch:E}),[k,b,y,E])}}}function C(a){return({selectFromResult:l,fixedCacheKey:c}={})=>{const{select:g,initiate:x}=t.endpoints[a],E=n(),[b,y]=u.useState();u.useEffect(()=>()=>{b!=null&&b.arg.fixedCacheKey||b==null||b.reset()},[b]);const k=u.useCallback(function(L){const F=E(x(L,{fixedCacheKey:c}));return y(F),F},[E,x,c]),{requestId:I}=b||{},R=u.useMemo(()=>g({fixedCacheKey:c,requestId:b==null?void 0:b.requestId}),[c,b,g]),B=u.useMemo(()=>l?d([R],l):R,[l,R]),D=r(B,ns),v=c==null?b==null?void 0:b.arg.originalArgs:void 0,$=u.useCallback(()=>{e(()=>{b&&y(void 0),c&&E(t.internalActions.removeMutationResult({requestId:I,fixedCacheKey:c}))})},[E,c,b,I]),z=nr(D,...rr,"endpointName");u.useDebugValue(z);const V=u.useMemo(()=>({...D,originalArgs:v,reset:$}),[D,v,$]);return u.useMemo(()=>[k,V],[k,V])}}}var bp=Symbol(),wp=({batch:t=ga,hooks:e={useDispatch:ut,useSelector:Me,useStore:ma},createSelector:n=Qi,unstable__sideEffectsInRender:r=!1,...i}={})=>({name:bp,init(o,{serializeQueryArgs:d},p){const m=o,{buildQueryHooks:h,buildInfiniteQueryHooks:_,buildMutationHook:j,usePrefetch:f}=yp({api:o,moduleOptions:{batch:t,hooks:e,unstable__sideEffectsInRender:r,createSelector:n},serializeQueryArgs:d,context:p});return ts(m,{usePrefetch:f}),ts(p,{batch:t}),{injectEndpoint(w,A){if(dp(A)){const{useQuery:T,useLazyQuery:P,useLazyQuerySubscription:S,useQueryState:N,useQuerySubscription:C}=h(w);ts(m.endpoints[w],{useQuery:T,useLazyQuery:P,useLazyQuerySubscription:S,useQueryState:N,useQuerySubscription:C}),o[`use${_s(w)}Query`]=T,o[`useLazy${_s(w)}Query`]=P}if(up(A)){const T=j(w);ts(m.endpoints[w],{useMutation:T}),o[`use${_s(w)}Mutation`]=T}else if(Ko(A)){const{useInfiniteQuery:T,useInfiniteQuerySubscription:P,useInfiniteQueryState:S}=_(w);ts(m.endpoints[w],{useInfiniteQuery:T,useInfiniteQuerySubscription:P,useInfiniteQueryState:S}),o[`use${_s(w)}InfiniteQuery`]=T}}}}}),Qr=Wo(Yo(),wp());const ir=Qr({reducerPath:"bookingApi",baseQuery:Or({baseUrl:"/api"}),endpoints:t=>({getBookings:t.query({query:()=>"/bookings"}),getBooking:t.query({query:e=>`/bookings/${e}`}),createBooking:t.mutation({query:e=>({url:"/bookings",method:"POST",body:e})}),updateBookingStatus:t.mutation({query:({id:e,status:n})=>({url:`/bookings/${e}/status`,method:"PATCH",body:{status:n}})})})}),vp="/api",Ms=Qr({reducerPath:"invoiceApi",baseQuery:Or({baseUrl:vp,credentials:"include",prepareHeaders:t=>{const e=localStorage.getItem("token");return e&&t.set("authorization",`Bearer ${e}`),t.set("Content-Type","application/json"),t.set("Accept","application/json"),t}}),tagTypes:["Invoice"],endpoints:t=>({getInvoices:t.query({query:(e={page:1,limit:10})=>({url:"/invoices",method:"GET",params:e}),transformResponse:e=>(console.log("Raw invoice response:",e),typeof e=="object"&&e!==null&&"data"in e?e:Array.isArray(e)?{success:!0,data:e,pagination:{total:e.length,page:1,limit:e.length,pages:1}}:(console.error("Invalid invoice response:",e),{success:!1,data:[],pagination:{total:0,page:1,limit:10,pages:0}})),transformErrorResponse:e=>(console.error("Invoice API Error:",e),e),providesTags:["Invoice"]}),getInvoice:t.query({query:e=>({url:`/invoices/${e}`,method:"GET"}),transformErrorResponse:e=>(console.error("Get Invoice Error:",e),e),providesTags:(e,n,r)=>[{type:"Invoice",id:r}]}),downloadInvoice:t.mutation({query:e=>({url:`/invoices/${e}/download`,method:"GET",responseHandler:n=>n.blob()})}),shareViaEmail:t.mutation({query:({id:e,...n})=>({url:`/invoices/${e}/share/email`,method:"POST",body:n})}),shareViaWhatsApp:t.mutation({query:({id:e,...n})=>({url:`/invoices/${e}/share/whatsapp`,method:"POST",body:n})})})}),{useGetInvoicesQuery:lf,useGetInvoiceQuery:cf,useShareViaEmailMutation:df}=Ms,jp="/api",Bs=Qr({reducerPath:"exhibitorInvoiceApi",baseQuery:Or({baseUrl:jp,credentials:"include",prepareHeaders:t=>{const e=localStorage.getItem("exhibitor_token");return e&&t.set("authorization",`Bearer ${e}`),t.set("Content-Type","application/json"),t.set("Accept","application/json"),t}}),tagTypes:["ExhibitorInvoice"],endpoints:t=>({getExhibitorInvoice:t.query({query:e=>({url:`/exhibitor-bookings/${e}/invoice`,method:"GET"}),transformResponse:e=>e,transformErrorResponse:e=>e,providesTags:(e,n,r)=>[{type:"ExhibitorInvoice",id:r}]}),downloadExhibitorInvoice:t.mutation({query:e=>({url:`/exhibitor-bookings/${e}/invoice/download`,method:"GET",responseHandler:n=>n.blob()})}),shareViaEmail:t.mutation({query:({bookingId:e,...n})=>({url:`/exhibitor-bookings/${e}/invoice/share/email`,method:"POST",body:n})}),shareViaWhatsApp:t.mutation({query:({bookingId:e,...n})=>({url:`/exhibitor-bookings/${e}/invoice/share/whatsapp`,method:"POST",body:n})})})}),{useGetExhibitorInvoiceQuery:uf,useDownloadExhibitorInvoiceMutation:hf,useShareViaEmailMutation:pf,useShareViaWhatsAppMutation:ff}=Bs,Sp=xa({reducer:{auth:jl,exhibitorAuth:Uc,exhibition:xh,booking:bh,exhibitor:wh,settings:Ac,role:Ih,user:Dh,[ir.reducerPath]:ir.reducer,[Ms.reducerPath]:Ms.reducer,[Bs.reducerPath]:Bs.reducer},middleware:t=>t().concat(ir.middleware).concat(Ms.middleware).concat(Bs.middleware)}),kp={token:{colorPrimary:"#7C3AED",borderRadius:8,colorBgContainer:"#FFFFFF",colorBgLayout:"#F9FAFB",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif"},components:{Layout:{siderBg:"#FFFFFF",headerBg:"#FFFFFF"},Menu:{itemBg:"transparent",itemSelectedBg:"#F3F4F6",itemHoverBg:"#F3F4F6",itemSelectedColor:"#7C3AED",itemColor:"#6B7280"},Card:{boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)"},Button:{borderRadius:8,primaryShadow:"0 1px 2px 0 rgb(124 58 237 / 0.05)"},Table:{borderRadius:8,headerBg:"#F9FAFB"},Modal:{borderRadius:8}}};dr.createRoot(document.getElementById("root")).render(s.jsx(Ie.StrictMode,{children:s.jsx(ya,{store:Sp,children:s.jsx(tl,{theme:kp,children:s.jsx(Pr,{children:s.jsx(gh,{})})})})}));export{qn as $,et as A,$p as B,kn as C,Ve as D,An as E,Yp as F,No as G,In as H,Cn as I,Rn as J,Tn as K,_n as L,Ao as M,Sc as N,Np as O,yr as P,Dd as Q,Mp as R,To as S,qp as T,Pn as U,Dn as V,Nn as W,$n as X,lf as Y,Bn as Z,Ln as _,H as a,ce as a0,On as a1,Vn as a2,Mn as a3,cf as a4,bl as a5,df as a6,Ap as a7,Fp as a8,hf as b,pf as c,ff as d,ot as e,oo as f,vl as g,Ls as h,Fs as i,s as j,dn as k,Qn as l,Yn as m,Wn as n,En as o,gt as p,Zn as q,Kn as r,Oc as s,Jn as t,uf as u,Gn as v,af as w,er as x,_e as y,Dp as z};
