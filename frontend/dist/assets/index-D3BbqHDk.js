import{j as e}from"./vendor-pdf-Cn0rG44s.js";import{r as n,F as h,w as p,G as k,W as g,h as y}from"./vendor-antd-B8jUXf3i.js";import{b as z,u as j}from"./vendor-redux-rS0pI56E.js";import{z as v,F,G as R,v as w,x as B}from"./index-4IR4xblb.js";import"./vendor-canvas-DrFPvyt4.js";import{b as W,a as L,u as E}from"./vendor-react-DW9h-haf.js";import{N as H,S as N}from"./vendor-antd-icons-BoTJB7uA.js";import"./vendor-http-t--hEgTQ.js";import"./vendor-ui-BmMA_ojr.js";const D=({exhibitionId:l,destination:c="layout",label:a="Back to Layout"})=>{const r=E(),{currentExhibition:i}=j(s=>s.exhibition);return e.jsxs("div",{style:{marginBottom:"24px",position:"sticky",top:"16px",zIndex:10},children:[e.jsx(y,{icon:e.jsx(N,{}),onClick:()=>r(w(i,c),{state:{exhibitionId:l}}),type:"default",size:"large",style:{borderRadius:"8px",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",background:"white",borderColor:"transparent",fontWeight:500,padding:"0 16px",height:"42px",display:"flex",alignItems:"center",transition:"all 0.3s ease"},className:"back-button-hover",children:e.jsx("span",{style:{marginLeft:8},children:a})}),e.jsx("style",{children:`
        .back-button-hover:hover {
          transform: translateX(-5px);
          box-shadow: 0 4px 12px rgba(0,0,0,0.1);
          background: #f0f5ff;
          border-color: #d6e4ff;
        }
      `})]})},A=()=>{var f;const{id:l}=W(),c=L(),a=E(),r=z(),i=((f=c.state)==null?void 0:f.exhibitionId)||l,{currentExhibition:s}=j(t=>t.exhibition),d=n.useRef(null),[x,m]=n.useState({width:100,height:100}),[b,S]=n.useState({width:0,height:0}),[o]=h.useForm();n.useEffect(()=>{if(!i){p.error("Exhibition ID not found"),a("/exhibition");return}r(v(i))},[i,r,a]),n.useEffect(()=>{s!=null&&s.dimensions&&(m(s.dimensions),o.setFieldsValue(s.dimensions))},[s,o]),n.useEffect(()=>{const t=()=>{d.current&&S({width:d.current.clientWidth,height:d.current.clientHeight})};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);const C=async()=>{try{const t=await o.validateFields();await B.updateExhibition(i,{dimensions:t}),p.success("Exhibition space saved successfully"),await r(v(i)).unwrap(),a(w(s,"layout"),{state:{exhibitionId:i}})}catch{p.error("Failed to save exhibition space")}},u=t=>{m(I=>({...I,...t})),o.setFieldsValue(t)};return e.jsxs("div",{style:{padding:"24px"},children:[e.jsx(D,{exhibitionId:i}),e.jsx(k,{title:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"Exhibition Space Setup"}),e.jsx(y,{type:"primary",icon:e.jsx(H,{}),onClick:C,children:"Save and Continue"})]}),children:e.jsxs("div",{style:{display:"flex",gap:"24px",height:"calc(100vh - 200px)"},children:[e.jsx("div",{style:{flex:"0 0 300px"},children:e.jsxs(h,{form:o,layout:"vertical",initialValues:x,children:[e.jsx(h.Item,{name:"width",label:"Width (meters)",rules:[{required:!0,message:"Please enter width"},{type:"number",min:10,message:"Width must be at least 10 meters"}],children:e.jsx(g,{min:10,max:1e3,style:{width:"100%"},onChange:t=>u({width:t||10})})}),e.jsx(h.Item,{name:"height",label:"Height (meters)",rules:[{required:!0,message:"Please enter height"},{type:"number",min:10,message:"Height must be at least 10 meters"}],children:e.jsx(g,{min:10,max:1e3,style:{width:"100%"},onChange:t=>u({height:t||10})})})]})}),e.jsx("div",{ref:d,style:{flex:"1",border:"1px solid #d9d9d9",borderRadius:"8px",position:"relative",overflow:"hidden"},children:e.jsx(F,{children:e.jsx(R,{width:b.width,height:b.height,exhibitionWidth:x.width,exhibitionHeight:x.height,onExhibitionChange:u})})})]})})]})};export{A as default};
