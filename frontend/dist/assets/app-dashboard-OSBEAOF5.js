import{r,j as e,R}from"./vendor-react-core-B0uGejYc.js";import{n as B}from"./app-core-L3PgNZOI.js";import{i as j,X as y,Y as A,Z as k}from"./vendor-antd-icons-DK8C9GTH.js";import{T as w,R as v,C as u,a as h,o as T}from"./vendor-antd-core-PMpIrrMR.js";import"./vendor-deps-DEOa4Mno.js";import"./vendor-ui-utils-CGs7t4cg.js";import"./vendor-canvas-CkLjwLEv.js";import"./vendor-redux-GR4hUpLs.js";import"./app-auth-Phoe3BrL.js";import"./vendor-http-t--hEgTQ.js";import"./vendor-date-utils-3BRsAYU6.js";import"./app-admin-CoTkNL6t.js";import"./app-dashboard-OSBEAOF5.js";const{Title:F,Text:t}=w,L=({title:n,value:o,icon:d,color:p,gradient:x,loading:m})=>e.jsxs(h,{className:"stat-card",styles:{body:{padding:"24px"}},style:{background:x,border:"none",overflow:"hidden",position:"relative"},children:[e.jsx("div",{className:"stat-card-background"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",position:"relative",zIndex:1},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1},children:[e.jsx(t,{style:{fontSize:"14px",color:"rgba(255, 255, 255, 0.85)",marginBottom:"8px"},children:n}),e.jsx(t,{style:{fontSize:"28px",fontWeight:600,color:"#FFFFFF",marginBottom:"0"},children:m?e.jsx(T,{size:"small"}):o})]}),e.jsx("div",{className:"stat-card-icon",style:{color:"white"},children:d})]})]}),K=()=>{const[n,o]=r.useState(!0),[d,p]=r.useState(0),[x,m]=r.useState(0),[f,S]=r.useState(0),[b,D]=r.useState(0),[g,C]=r.useState([]),[c,I]=r.useState({server:"Online",database:"Connected",lastBackup:"2 hours ago",systemLoad:"Normal"});r.useEffect(()=>{(async()=>{o(!0);try{const a=await B.getDashboardStats();p(a.userCount),m(a.bookingCount),S(a.totalRevenue),D(a.exhibitionCount);const l=[];a.recentBookings.slice(0,3).forEach(s=>{l.push({id:s._id,icon:e.jsx(y,{}),color:"#2563EB",text:e.jsxs(t,{children:["New booking ",e.jsxs(t,{strong:!0,children:["#",s._id.substring(0,8)]})," received"]}),timestamp:new Date(s.createdAt).toLocaleString()})}),a.recentUsers.slice(0,2).forEach(s=>{l.push({id:s._id,icon:e.jsx(j,{}),color:"#7C3AED",text:e.jsxs(t,{children:["User ",e.jsxs(t,{strong:!0,children:["'",s.username,"'"]})," ",s.createdAt?"registered":"active"]}),timestamp:s.createdAt?new Date(s.createdAt).toLocaleString():"Recently"})}),l.sort((s,E)=>new Date(E.timestamp).getTime()-new Date(s.timestamp).getTime()),C(l)}catch(a){console.error("Error fetching dashboard data:",a)}finally{o(!1)}})()},[]);const N=[{title:"Total Users",value:d,icon:e.jsx(j,{}),color:"#7C3AED",gradient:"linear-gradient(135deg, #7C3AED 0%, #5B21B6 100%)"},{title:"Total Orders",value:x,icon:e.jsx(y,{}),color:"#2563EB",gradient:"linear-gradient(135deg, #2563EB 0%, #1D4ED8 100%)"},{title:"Revenue",value:`â‚¹${f.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,icon:e.jsx(A,{}),color:"#059669",gradient:"linear-gradient(135deg, #059669 0%, #047857 100%)"},{title:"Exhibitions",value:b,icon:e.jsx(k,{}),color:"#DC2626",gradient:"linear-gradient(135deg, #DC2626 0%, #B91C1C 100%)"}];return e.jsxs("div",{className:"dashboard-container",children:[e.jsx(F,{level:4,style:{marginBottom:"24px"},children:"Dashboard"}),e.jsx(v,{gutter:[24,24],children:N.map((i,a)=>e.jsx(u,{xs:24,sm:12,lg:6,children:e.jsx(L,{...i,loading:n})},a))}),e.jsxs(v,{gutter:[24,24],style:{marginTop:"24px"},children:[e.jsx(u,{xs:24,lg:12,children:e.jsx(h,{title:"Recent Activity",className:"info-card",styles:{body:{padding:"20px"}},loading:n,children:g.length>0?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:g.map(i=>e.jsxs("div",{className:"activity-item",children:[R.cloneElement(i.icon,{style:{color:i.color}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[i.text,e.jsx(t,{type:"secondary",style:{fontSize:"12px"},children:i.timestamp})]})]},i.id))}):e.jsx(t,{type:"secondary",children:"No recent activity found"})})}),e.jsx(u,{xs:24,lg:12,children:e.jsx(h,{title:"System Status",className:"info-card",styles:{body:{padding:"20px"}},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{className:"status-item",children:[e.jsx("div",{className:"status-indicator online"}),e.jsxs(t,{children:["Server Status: ",e.jsx(t,{strong:!0,type:"success",children:c.server})]})]}),e.jsxs("div",{className:"status-item",children:[e.jsx("div",{className:"status-indicator connected"}),e.jsxs(t,{children:["Database Status: ",e.jsx(t,{strong:!0,type:"success",children:c.database})]})]}),e.jsxs("div",{className:"status-item",children:[e.jsx("div",{className:"status-indicator backup"}),e.jsxs(t,{children:["Last Backup: ",e.jsx(t,{strong:!0,children:c.lastBackup})]})]}),e.jsxs("div",{className:"status-item",children:[e.jsx("div",{className:"status-indicator normal"}),e.jsxs(t,{children:["System Load: ",e.jsx(t,{strong:!0,children:c.systemLoad})]})]})]})})})]})]})};export{K as default};
