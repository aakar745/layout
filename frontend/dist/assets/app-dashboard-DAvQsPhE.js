import{r,j as e,R}from"./vendor-react-core-GL8v-krj.js";import{n as B}from"./app-core-BUxrPMxd.js";import{i as j,X as y,Y as A,Z as k}from"./vendor-antd-icons-C-4QrCZ0.js";import{T as w,R as v,C as u,a as p,o as T}from"./vendor-antd-core-1s5t57SE.js";import"./vendor-ui-utils-C1xmPZI8.js";import"./vendor-canvas-DygNVcxM.js";import"./vendor-deps-j0W__MH0.js";import"./vendor-react-dom-22Ywsp5_.js";import"./vendor-redux-9XI87JsB.js";import"./app-auth-pav3ebXF.js";import"./vendor-react-router-BoDVXa_L.js";import"./vendor-http-t--hEgTQ.js";import"./vendor-date-utils-CEjhVsrT.js";import"./app-admin-iCKr2TyV.js";import"./app-dashboard-DAvQsPhE.js";const{Title:F,Text:t}=w,L=({title:o,value:n,icon:d,color:h,gradient:x,loading:m})=>e.jsxs(p,{className:"stat-card",styles:{body:{padding:"24px"}},style:{background:x,border:"none",overflow:"hidden",position:"relative"},children:[e.jsx("div",{className:"stat-card-background"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",position:"relative",zIndex:1},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1},children:[e.jsx(t,{style:{fontSize:"14px",color:"rgba(255, 255, 255, 0.85)",marginBottom:"8px"},children:o}),e.jsx(t,{style:{fontSize:"28px",fontWeight:600,color:"#FFFFFF",marginBottom:"0"},children:m?e.jsx(T,{size:"small"}):n})]}),e.jsx("div",{className:"stat-card-icon",style:{color:"white"},children:d})]})]}),P=()=>{const[o,n]=r.useState(!0),[d,h]=r.useState(0),[x,m]=r.useState(0),[f,S]=r.useState(0),[b,D]=r.useState(0),[g,C]=r.useState([]),[c,I]=r.useState({server:"Online",database:"Connected",lastBackup:"2 hours ago",systemLoad:"Normal"});r.useEffect(()=>{(async()=>{n(!0);try{const i=await B.getDashboardStats();h(i.userCount),m(i.bookingCount),S(i.totalRevenue),D(i.exhibitionCount);const l=[];i.recentBookings.slice(0,3).forEach(s=>{l.push({id:s._id,icon:e.jsx(y,{}),color:"#2563EB",text:e.jsxs(t,{children:["New booking ",e.jsxs(t,{strong:!0,children:["#",s._id.substring(0,8)]})," received"]}),timestamp:new Date(s.createdAt).toLocaleString()})}),i.recentUsers.slice(0,2).forEach(s=>{l.push({id:s._id,icon:e.jsx(j,{}),color:"#7C3AED",text:e.jsxs(t,{children:["User ",e.jsxs(t,{strong:!0,children:["'",s.username,"'"]})," ",s.createdAt?"registered":"active"]}),timestamp:s.createdAt?new Date(s.createdAt).toLocaleString():"Recently"})}),l.sort((s,E)=>new Date(E.timestamp).getTime()-new Date(s.timestamp).getTime()),C(l)}catch(i){console.error("Error fetching dashboard data:",i)}finally{n(!1)}})()},[]);const N=[{title:"Total Users",value:d,icon:e.jsx(j,{}),color:"#7C3AED",gradient:"linear-gradient(135deg, #7C3AED 0%, #5B21B6 100%)"},{title:"Total Orders",value:x,icon:e.jsx(y,{}),color:"#2563EB",gradient:"linear-gradient(135deg, #2563EB 0%, #1D4ED8 100%)"},{title:"Revenue",value:`â‚¹${f.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,icon:e.jsx(A,{}),color:"#059669",gradient:"linear-gradient(135deg, #059669 0%, #047857 100%)"},{title:"Exhibitions",value:b,icon:e.jsx(k,{}),color:"#DC2626",gradient:"linear-gradient(135deg, #DC2626 0%, #B91C1C 100%)"}];return e.jsxs("div",{className:"dashboard-container",children:[e.jsx(F,{level:4,style:{marginBottom:"24px"},children:"Dashboard"}),e.jsx(v,{gutter:[24,24],children:N.map((a,i)=>e.jsx(u,{xs:24,sm:12,lg:6,children:e.jsx(L,{...a,loading:o})},i))}),e.jsxs(v,{gutter:[24,24],style:{marginTop:"24px"},children:[e.jsx(u,{xs:24,lg:12,children:e.jsx(p,{title:"Recent Activity",className:"info-card",styles:{body:{padding:"20px"}},loading:o,children:g.length>0?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:g.map(a=>e.jsxs("div",{className:"activity-item",children:[R.cloneElement(a.icon,{style:{color:a.color}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[a.text,e.jsx(t,{type:"secondary",style:{fontSize:"12px"},children:a.timestamp})]})]},a.id))}):e.jsx(t,{type:"secondary",children:"No recent activity found"})})}),e.jsx(u,{xs:24,lg:12,children:e.jsx(p,{title:"System Status",className:"info-card",styles:{body:{padding:"20px"}},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{className:"status-item",children:[e.jsx("div",{className:"status-indicator online"}),e.jsxs(t,{children:["Server Status: ",e.jsx(t,{strong:!0,type:"success",children:c.server})]})]}),e.jsxs("div",{className:"status-item",children:[e.jsx("div",{className:"status-indicator connected"}),e.jsxs(t,{children:["Database Status: ",e.jsx(t,{strong:!0,type:"success",children:c.database})]})]}),e.jsxs("div",{className:"status-item",children:[e.jsx("div",{className:"status-indicator backup"}),e.jsxs(t,{children:["Last Backup: ",e.jsx(t,{strong:!0,children:c.lastBackup})]})]}),e.jsxs("div",{className:"status-item",children:[e.jsx("div",{className:"status-indicator normal"}),e.jsxs(t,{children:["System Load: ",e.jsx(t,{strong:!0,children:c.systemLoad})]})]})]})})})]})]})};export{P as default};
