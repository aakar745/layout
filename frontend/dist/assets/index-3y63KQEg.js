import{I as f,j as e,P as k,Q as z,F as y,D as F}from"./index-BRKtYmDF.js";import{l as R,k as B,u as j,j as L,i as w,r as n}from"./vendor-react-BNeW3y6d.js";import"./vendor-canvas-BRbMLhVA.js";import{N as h,X as p,a7 as W,$ as v,c as E,aj as D,a$ as H}from"./vendor-antd-Dz3j4xaK.js";import"./vendor-utils-CsjRLf7T.js";import"./vendor-styling-BEMjND7I.js";const N=({exhibitionId:l,destination:c="layout",label:a="Back to Layout"})=>{const r=j(),{currentExhibition:i}=w(s=>s.exhibition);return e.jsxs("div",{style:{marginBottom:"24px",position:"sticky",top:"16px",zIndex:10},children:[e.jsx(E,{icon:e.jsx(H,{}),onClick:()=>r(y(i,c),{state:{exhibitionId:l}}),type:"default",size:"large",style:{borderRadius:"8px",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",background:"white",borderColor:"transparent",fontWeight:500,padding:"0 16px",height:"42px",display:"flex",alignItems:"center",transition:"all 0.3s ease"},className:"back-button-hover",children:e.jsx("span",{style:{marginLeft:8},children:a})}),e.jsx("style",{children:`
        .back-button-hover:hover {
          transform: translateX(-5px);
          box-shadow: 0 4px 12px rgba(0,0,0,0.1);
          background: #f0f5ff;
          border-color: #d6e4ff;
        }
      `})]})},Q=()=>{var g;const{id:l}=R(),c=B(),a=j(),r=L(),i=((g=c.state)==null?void 0:g.exhibitionId)||l,{currentExhibition:s}=w(t=>t.exhibition),d=n.useRef(null),[x,m]=n.useState({width:100,height:100}),[b,C]=n.useState({width:0,height:0}),[o]=h.useForm();n.useEffect(()=>{if(!i){p.error("Exhibition ID not found"),a("/exhibition");return}r(f(i))},[i,r,a]),n.useEffect(()=>{s!=null&&s.dimensions&&(m(s.dimensions),o.setFieldsValue(s.dimensions))},[s,o]),n.useEffect(()=>{const t=()=>{d.current&&C({width:d.current.clientWidth,height:d.current.clientHeight})};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);const S=async()=>{try{const t=await o.validateFields();await F.updateExhibition(i,{dimensions:t}),p.success("Exhibition space saved successfully"),await r(f(i)).unwrap(),a(y(s,"layout"),{state:{exhibitionId:i}})}catch{p.error("Failed to save exhibition space")}},u=t=>{m(I=>({...I,...t})),o.setFieldsValue(t)};return e.jsxs("div",{style:{padding:"24px"},children:[e.jsx(N,{exhibitionId:i}),e.jsx(W,{title:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"Exhibition Space Setup"}),e.jsx(E,{type:"primary",icon:e.jsx(D,{}),onClick:S,children:"Save and Continue"})]}),children:e.jsxs("div",{style:{display:"flex",gap:"24px",height:"calc(100vh - 200px)"},children:[e.jsx("div",{style:{flex:"0 0 300px"},children:e.jsxs(h,{form:o,layout:"vertical",initialValues:x,children:[e.jsx(h.Item,{name:"width",label:"Width (meters)",rules:[{required:!0,message:"Please enter width"},{type:"number",min:10,message:"Width must be at least 10 meters"}],children:e.jsx(v,{min:10,max:1e3,style:{width:"100%"},onChange:t=>u({width:t||10})})}),e.jsx(h.Item,{name:"height",label:"Height (meters)",rules:[{required:!0,message:"Please enter height"},{type:"number",min:10,message:"Height must be at least 10 meters"}],children:e.jsx(v,{min:10,max:1e3,style:{width:"100%"},onChange:t=>u({height:t||10})})})]})}),e.jsx("div",{ref:d,style:{flex:"1",border:"1px solid #d9d9d9",borderRadius:"8px",position:"relative",overflow:"hidden"},children:e.jsx(k,{children:e.jsx(z,{width:b.width,height:b.height,exhibitionWidth:x.width,exhibitionHeight:x.height,onExhibitionChange:u})})})]})})]})};export{Q as default};
