import{z as f,j as e,E as I,w as k}from"./index-DoSueJxk.js";import{X as z,m as F,u as v,l as R,k as y,r as n}from"./vendor-react-dkbxt9Jf.js";import{C as B}from"./FixtureForm-CZKRuS-V.js";import"./vendor-canvas-CSSoKFlf.js";import{g as j}from"./url-DUULaBjX.js";import{K as h,W as p,a1 as W,aF as g,c as w,aa as L,aE as H}from"./vendor-antd-mFVHvrVJ.js";import"./vendor-utils-ngrFHoWO.js";import"./vendor-styling-CQa69cNz.js";import"./stallUtils-DlikgrX5.js";import"./stall-BMZvk0fo.js";const D=({exhibitionId:l,destination:c="layout",label:a="Back to Layout"})=>{const r=v(),{currentExhibition:i}=y(s=>s.exhibition);return e.jsxs("div",{style:{marginBottom:"24px",position:"sticky",top:"16px",zIndex:10},children:[e.jsx(w,{icon:e.jsx(H,{}),onClick:()=>r(j(i,c),{state:{exhibitionId:l}}),type:"default",size:"large",style:{borderRadius:"8px",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",background:"white",borderColor:"transparent",fontWeight:500,padding:"0 16px",height:"42px",display:"flex",alignItems:"center",transition:"all 0.3s ease"},className:"back-button-hover",children:e.jsx("span",{style:{marginLeft:8},children:a})}),e.jsx("style",{children:`
        .back-button-hover:hover {
          transform: translateX(-5px);
          box-shadow: 0 4px 12px rgba(0,0,0,0.1);
          background: #f0f5ff;
          border-color: #d6e4ff;
        }
      `})]})},A=()=>{const{id:l}=z(),c=F(),a=v(),r=R(),i=c.state?.exhibitionId||l,{currentExhibition:s}=y(t=>t.exhibition),d=n.useRef(null),[x,m]=n.useState({width:100,height:100}),[b,E]=n.useState({width:0,height:0}),[o]=h.useForm();n.useEffect(()=>{if(!i){p.error("Exhibition ID not found"),a("/exhibition");return}r(f(i))},[i,r,a]),n.useEffect(()=>{s?.dimensions&&(m(s.dimensions),o.setFieldsValue(s.dimensions))},[s,o]),n.useEffect(()=>{const t=()=>{d.current&&E({width:d.current.clientWidth,height:d.current.clientHeight})};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);const C=async()=>{try{const t=await o.validateFields();await k.updateExhibition(i,{dimensions:t}),p.success("Exhibition space saved successfully"),await r(f(i)).unwrap(),a(j(s,"layout"),{state:{exhibitionId:i}})}catch{p.error("Failed to save exhibition space")}},u=t=>{m(S=>({...S,...t})),o.setFieldsValue(t)};return e.jsxs("div",{style:{padding:"24px"},children:[e.jsx(D,{exhibitionId:i}),e.jsx(W,{title:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"Exhibition Space Setup"}),e.jsx(w,{type:"primary",icon:e.jsx(L,{}),onClick:C,children:"Save and Continue"})]}),children:e.jsxs("div",{style:{display:"flex",gap:"24px",height:"calc(100vh - 200px)"},children:[e.jsx("div",{style:{flex:"0 0 300px"},children:e.jsxs(h,{form:o,layout:"vertical",initialValues:x,children:[e.jsx(h.Item,{name:"width",label:"Width (meters)",rules:[{required:!0,message:"Please enter width"},{type:"number",min:10,message:"Width must be at least 10 meters"}],children:e.jsx(g,{min:10,max:1e3,style:{width:"100%"},onChange:t=>u({width:t||10})})}),e.jsx(h.Item,{name:"height",label:"Height (meters)",rules:[{required:!0,message:"Please enter height"},{type:"number",min:10,message:"Height must be at least 10 meters"}],children:e.jsx(g,{min:10,max:1e3,style:{width:"100%"},onChange:t=>u({height:t||10})})})]})}),e.jsx("div",{ref:d,style:{flex:"1",border:"1px solid #d9d9d9",borderRadius:"8px",position:"relative",overflow:"hidden"},children:e.jsx(I,{children:e.jsx(B,{width:b.width,height:b.height,exhibitionWidth:x.width,exhibitionHeight:x.height,onExhibitionChange:u})})})]})})]})};export{A as default};
