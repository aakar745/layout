import{j as e,e as x,s as f}from"./index-BP1I9PmK.js";import{r as d,j as T,i as v}from"./vendor-react-BNeW3y6d.js";import{J as a,T as E,a6 as S,n as I,a7 as o,a8 as n,A as k,f as y,I as r,ap as q,z as F,aq as R,c as P,ah as Z,V as i}from"./vendor-antd-DhcJxEc5.js";import"./vendor-utils-j652IAQy.js";import"./vendor-styling-BBrlYwaV.js";import"./vendor-canvas-BRbMLhVA.js";const{Title:w,Text:g}=E,{TabPane:N}=I,V=()=>{var j;const[m]=a.useForm(),[b,u]=d.useState(!1),[C,h]=d.useState(!1),p=T(),s=v(t=>t.exhibitorAuth.exhibitor);d.useEffect(()=>{(async()=>{try{h(!0);const l=await x.getProfile();l.data&&p(f({exhibitor:l.data,token:(s==null?void 0:s.token)||localStorage.getItem("exhibitor_token")||""}))}catch{i.error("Failed to fetch exhibitor profile")}finally{h(!1)}})()},[p]),d.useEffect(()=>{s&&m.setFieldsValue({companyName:s.companyName||"",contactPerson:s.contactPerson||"",email:s.email||"",phone:s.phone||"",address:s.address||"",website:s.website||"",description:s.description||"",panNumber:s.panNumber||"",gstNumber:s.gstNumber||"",city:s.city||"",state:s.state||"",pinCode:s.pinCode||""})},[s,m]);const A=async t=>{try{u(!0);const l=await x.updateProfile(t),c=(s==null?void 0:s.token)||localStorage.getItem("exhibitor_token")||"";p(f({exhibitor:{...s,...t},token:c})),i.success("Profile updated successfully")}catch{i.error("Failed to update profile")}finally{u(!1)}};return e.jsxs("div",{children:[e.jsx(w,{level:2,children:"My Profile"}),e.jsx(g,{type:"secondary",children:"Manage your exhibitor profile information"}),e.jsx(S,{style:{marginTop:24},loading:C,children:e.jsxs(I,{defaultActiveKey:"profile",children:[e.jsx(N,{tab:"Profile Information",children:e.jsxs(o,{gutter:32,children:[e.jsx(n,{span:6,children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:24},children:[e.jsx(k,{size:100,icon:e.jsx(y,{}),style:{backgroundColor:"#1890ff",marginBottom:16},children:((j=s==null?void 0:s.companyName)==null?void 0:j.charAt(0).toUpperCase())||"E"}),e.jsx(w,{level:4,children:s==null?void 0:s.companyName}),e.jsx(g,{type:"secondary",children:s==null?void 0:s.email})]})}),e.jsx(n,{span:18,children:e.jsxs(a,{form:m,layout:"vertical",onFinish:A,initialValues:{companyName:(s==null?void 0:s.companyName)||"",contactPerson:(s==null?void 0:s.contactPerson)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||"",address:(s==null?void 0:s.address)||"",website:(s==null?void 0:s.website)||"",description:(s==null?void 0:s.description)||"",panNumber:(s==null?void 0:s.panNumber)||"",gstNumber:(s==null?void 0:s.gstNumber)||"",city:(s==null?void 0:s.city)||"",state:(s==null?void 0:s.state)||"",pinCode:(s==null?void 0:s.pinCode)||""},children:[e.jsxs(o,{gutter:16,children:[e.jsx(n,{span:12,children:e.jsx(a.Item,{name:"companyName",label:"Company Name",rules:[{required:!0,message:"Please enter your company name"}],children:e.jsx(r,{prefix:e.jsx(q,{}),placeholder:"Company Name"})})}),e.jsx(n,{span:12,children:e.jsx(a.Item,{name:"contactPerson",label:"Contact Person",rules:[{required:!0,message:"Please enter contact person name"}],children:e.jsx(r,{prefix:e.jsx(y,{}),placeholder:"Contact Person"})})})]}),e.jsxs(o,{gutter:16,children:[e.jsx(n,{span:12,children:e.jsx(a.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please enter your email"},{type:"email",message:"Please enter a valid email"}],children:e.jsx(r,{prefix:e.jsx(F,{}),placeholder:"Email",disabled:!0})})}),e.jsx(n,{span:12,children:e.jsx(a.Item,{name:"phone",label:"Phone",rules:[{required:!0,message:"Please enter your phone number"}],children:e.jsx(r,{prefix:e.jsx(R,{}),placeholder:"Phone Number"})})})]}),e.jsx(a.Item,{name:"address",label:"Address",children:e.jsx(r.TextArea,{rows:2,placeholder:"Company Address"})}),e.jsxs(o,{gutter:16,children:[e.jsx(n,{span:8,children:e.jsx(a.Item,{name:"city",label:"City",children:e.jsx(r,{placeholder:"City"})})}),e.jsx(n,{span:8,children:e.jsx(a.Item,{name:"state",label:"State",children:e.jsx(r,{placeholder:"State"})})}),e.jsx(n,{span:8,children:e.jsx(a.Item,{name:"pinCode",label:"PIN Code",rules:[{pattern:/^[0-9]{6}$/,message:"Please enter a valid 6-digit PIN code"}],children:e.jsx(r,{placeholder:"PIN Code",maxLength:6})})})]}),e.jsxs(o,{gutter:16,children:[e.jsx(n,{span:12,children:e.jsx(a.Item,{name:"panNumber",label:"PAN No.",rules:[{pattern:/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/,message:"Please enter a valid PAN number"}],children:e.jsx(r,{placeholder:"PAN Number",style:{textTransform:"uppercase"},maxLength:10})})}),e.jsx(n,{span:12,children:e.jsx(a.Item,{name:"gstNumber",label:"GST No.",rules:[{pattern:/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/,message:"Please enter a valid GST number"}],children:e.jsx(r,{placeholder:"GST Number",style:{textTransform:"uppercase"}})})})]}),e.jsx(a.Item,{name:"website",label:"Website",children:e.jsx(r,{placeholder:"https://www.yourcompany.com"})}),e.jsx(a.Item,{name:"description",label:"Company Description",children:e.jsx(r.TextArea,{rows:4,placeholder:"Brief description of your company"})}),e.jsx(a.Item,{children:e.jsx(P,{type:"primary",htmlType:"submit",loading:b,icon:e.jsx(Z,{}),children:"Save Changes"})})]})})]})},"profile"),e.jsx(N,{tab:"Change Password",children:e.jsxs(a,{layout:"vertical",onFinish:t=>{i.success("Password updated successfully")},children:[e.jsx(a.Item,{name:"currentPassword",label:"Current Password",rules:[{required:!0,message:"Please enter your current password"}],children:e.jsx(r.Password,{placeholder:"Current Password"})}),e.jsx(a.Item,{name:"newPassword",label:"New Password",rules:[{required:!0,message:"Please enter your new password"},{min:6,message:"Password must be at least 6 characters"}],children:e.jsx(r.Password,{placeholder:"New Password"})}),e.jsx(a.Item,{name:"confirmPassword",label:"Confirm New Password",dependencies:["newPassword"],rules:[{required:!0,message:"Please confirm your new password"},({getFieldValue:t})=>({validator(l,c){return!c||t("newPassword")===c?Promise.resolve():Promise.reject(new Error("The two passwords do not match"))}})],children:e.jsx(r.Password,{placeholder:"Confirm New Password"})}),e.jsx(a.Item,{children:e.jsx(P,{type:"primary",htmlType:"submit",children:"Update Password"})})]})},"password")]})})]})};export{V as default};
