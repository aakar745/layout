import{j as e,a as A}from"./index-nu_xN7Rs.js";import{r as S,i as G}from"./vendor-react-BNeW3y6d.js";const U=a=>{if(!a)return 0;const o=a.shapeType||"rectangle";if(o==="rectangle")return a.width*a.height;if(o==="l-shape"&&a.lShape){const{rect1Width:d,rect1Height:j,rect2Width:h,rect2Height:c}=a.lShape;return d*j+h*c}return a.width*a.height},W=({booking:a})=>{var L,E,C;const[o,d]=S.useState(null),[j,h]=S.useState(!0),c=G(l=>l.settings.settings);S.useEffect(()=>{(async()=>{h(!0);try{if(a.exhibitionId.headerLogo){const s=a.exhibitionId.headerLogo;d(`${A.defaults.baseURL}/public/uploads/${s}`),console.log("Using exhibition header logo:",s)}else if(c!=null&&c.logo){const s=c.logo;d(`${A.defaults.baseURL}/public/uploads/${s}`),console.log("Using global settings logo:",s)}else{const s=`${A.defaults.baseURL}/public/logo`;d(s),console.log("Using public logo endpoint:",s)}}catch(s){console.error("Error loading logo:",s),d(null)}finally{h(!1)}})()},[a.exhibitionId.headerLogo,c==null?void 0:c.logo]);const O=()=>{const l=new Date(a.exhibitionId.startDate||""),s=new Date(a.exhibitionId.endDate||""),r={};let i=new Date(l);for(;i<=s;){const t=i.toLocaleString("default",{month:"short",year:"numeric"});r[t]||(r[t]=[]),r[t].push(i.getDate().toString().padStart(2,"0")),i=new Date(i),i.setDate(i.getDate()+1)}const y=Object.entries(r).map(([t,F])=>`${F.join(", ")} ${t}`);return`${a.exhibitionId.name||"ABSE"} (${y.join(" & ")})`},g=l=>{const s=new Date(l);return{date:s.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}),time:s.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}},T=a.stallIds.map((l,s)=>{var t;const r=l,i=U(l.dimensions),y=i*l.ratePerSqm;return{key:l._id,sn:s+1,stallNo:l.number,stallType:((t=r.stallTypeId)==null?void 0:t.name)||"Standard",dimensions:l.dimensions.shapeType==="l-shape"?"L-Shape":`${l.dimensions.width}m x ${l.dimensions.height}m`,area:i.toFixed(0),rate:l.ratePerSqm.toFixed(0),amount:y}}),N=T.reduce((l,s)=>l+s.amount,0),x=a.calculations,v=((L=x.stalls[0])==null?void 0:L.discount)!==void 0&&((E=x.stalls[0])==null?void 0:E.discount)!==null,n=v?(C=x.stalls[0])==null?void 0:C.discount:null,p=(n==null?void 0:n.type)||"percentage",m=(n==null?void 0:n.value)||0;let u=0;v&&m>0&&(p==="percentage"?u=Math.round(N*m/100*100)/100:p==="fixed"&&(u=Math.min(m,N)));const I=N-u,D=x.taxes.find(l=>l.name.includes("GST")),f=D?D.rate:18,w=Math.round(I*f/100*100)/100,R=I+w,P=N,b=u,B=I,$=w,M=R;return e.jsx("div",{className:"invoice-container",children:e.jsxs("div",{className:"proforma-invoice",children:[e.jsxs("div",{className:"header-section",children:[e.jsx("div",{className:"logo-cell",children:j?e.jsx("div",{className:"logo-loading",children:"Loading..."}):o?e.jsx("img",{src:o,alt:a.exhibitionId.companyName,className:"logo-image",onError:()=>d(null)}):a.exhibitionId.companyName}),e.jsxs("div",{className:"title-company",children:[e.jsx("div",{className:"title-cell",children:"PROFORMA INVOICE"}),e.jsx("div",{className:"company-cell",children:a.exhibitionId.companyName})]})]}),e.jsxs("div",{className:"bill-to-section",children:[e.jsx("div",{className:"bill-to-cell",children:"Bill To"}),e.jsxs("div",{className:"bill-to-info",children:[e.jsxs("div",{className:"info-row",children:[e.jsx("div",{className:"label-cell",children:"Company Name"}),e.jsx("div",{className:"value-cell",children:a.companyName}),e.jsx("div",{className:"date-label-cell",children:"Date"}),e.jsx("div",{className:"date-value-cell",children:g(a.createdAt).date})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("div",{className:"label-cell",children:"Phone No."}),e.jsx("div",{className:"value-cell",children:a.customerPhone}),e.jsx("div",{className:"date-label-cell",children:"Time"}),e.jsx("div",{className:"date-value-cell",children:g(a.createdAt).time})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("div",{className:"label-cell",children:"GST No."}),e.jsx("div",{className:"value-cell",children:a.customerGSTIN}),e.jsx("div",{className:"date-label-cell",children:"Invoice No"}),e.jsx("div",{className:"date-value-cell",children:a.invoiceNumber})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("div",{className:"label-cell",children:"Address"}),e.jsx("div",{className:"value-cell",children:a.customerAddress})]})]})]}),e.jsxs("div",{className:"expo-venue-section",children:[e.jsxs("div",{className:"expo-column",children:[e.jsx("div",{className:"heading",children:"Expo Name"}),e.jsx("div",{className:"content",children:O()})]}),e.jsxs("div",{className:"venue-column",children:[e.jsx("div",{className:"heading",children:"Venue"}),e.jsx("div",{className:"content",children:a.exhibitionId.venue})]})]}),e.jsx("div",{className:"section-header stall-summary-header",children:"Stall Summary"}),e.jsxs("div",{className:"stall-table",children:[e.jsxs("div",{className:"stall-header",children:[e.jsx("div",{className:"stall-header-cell",children:"S/N"}),e.jsx("div",{className:"stall-header-cell",children:"Stall No."}),e.jsx("div",{className:"stall-header-cell",children:"Stall Type"}),e.jsx("div",{className:"stall-header-cell",children:"Dimensions"}),e.jsx("div",{className:"stall-header-cell",children:"Area (sqm)"}),e.jsx("div",{className:"stall-header-cell",children:"Rate (per sqm)"}),e.jsx("div",{className:"stall-header-cell",children:"Amount"})]}),T.map(l=>e.jsxs("div",{className:"stall-row",children:[e.jsx("div",{className:"stall-cell",children:l.sn}),e.jsx("div",{className:"stall-cell",children:l.stallNo}),e.jsx("div",{className:"stall-cell",children:l.stallType}),e.jsx("div",{className:"stall-cell",children:l.dimensions}),e.jsx("div",{className:"stall-cell",children:l.area}),e.jsx("div",{className:"stall-cell",children:Number(l.rate).toLocaleString("en-IN")}),e.jsx("div",{className:"stall-cell",children:l.amount.toLocaleString("en-IN")})]},l.key))]}),e.jsx("div",{className:"section-header",children:"Calculation Summary"}),e.jsxs("div",{className:"calc-table",children:[e.jsxs("div",{className:"calc-row",children:[e.jsx("div",{className:"calc-label",children:"Total Basic Amount"}),e.jsxs("div",{className:"calc-value",children:["₹",P.toLocaleString("en-IN")]})]}),v&&b>0&&e.jsxs("div",{className:"calc-row",children:[e.jsx("div",{className:"calc-label",children:p==="percentage"?`Discount (${m}%)`:`Discount (Fixed ₹${m.toLocaleString("en-IN")})`}),e.jsxs("div",{className:"calc-value",children:["-₹",b.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"calc-row",children:[e.jsx("div",{className:"calc-label",children:v&&b>0?"Amount after Discount":"Net Amount"}),e.jsxs("div",{className:"calc-value",children:["₹",B.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"calc-row",children:[e.jsxs("div",{className:"calc-label",children:["GST (",f,"%)"]}),e.jsxs("div",{className:"calc-value",children:["₹",$.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"calc-row total-row",children:[e.jsx("div",{className:"calc-label",children:"Total Amount"}),e.jsxs("div",{className:"calc-value",children:["₹",M.toLocaleString("en-IN")]})]})]}),e.jsxs("div",{className:"details-section",children:[e.jsxs("div",{className:"bank-details",children:[e.jsx("div",{className:"details-header",children:"Bank Details"}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"Bank Name"}),e.jsx("div",{className:"detail-value",children:a.exhibitionId.bankName})]}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"Account No."}),e.jsx("div",{className:"detail-value",children:a.exhibitionId.bankAccount})]}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"Name"}),e.jsx("div",{className:"detail-value",children:a.exhibitionId.bankAccountName})]}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"Branch"}),e.jsx("div",{className:"detail-value",children:a.exhibitionId.bankBranch})]}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"IFSC CODE"}),e.jsx("div",{className:"detail-value",children:a.exhibitionId.bankIFSC})]})]}),e.jsxs("div",{className:"company-details",children:[e.jsx("div",{className:"details-header",children:"Company Details"}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"CIN No."}),e.jsx("div",{className:"detail-value",children:a.exhibitionId.companyCIN})]}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"Pan No."}),e.jsx("div",{className:"detail-value",children:a.exhibitionId.companyPAN})]}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"SAC CODE"}),e.jsx("div",{className:"detail-value",children:a.exhibitionId.companySAC})]}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"GST No."}),e.jsx("div",{className:"detail-value",children:a.exhibitionId.companyGST})]}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"Email"}),e.jsx("div",{className:"detail-value",children:a.exhibitionId.companyEmail})]}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"Website"}),e.jsx("div",{className:"detail-value",children:a.exhibitionId.companyWebsite})]}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"Address"}),e.jsx("div",{className:"detail-value",children:a.exhibitionId.companyAddress})]})]})]}),e.jsxs("div",{className:"instruction-section",children:[e.jsx("div",{className:"instruction-header",children:"PI Instruction"}),e.jsx("div",{className:"instruction-content",dangerouslySetInnerHTML:{__html:a.exhibitionId.piInstructions||"THIS INVOICE IS PROFORMA INVOICE DO NOT CLAIM ANY GOVERNMENT CREDITS ON THIS PROFORMA INVOICE. FINAL INVOICE WOULD BE RAISED AFTER 100% PAYMENT."}})]}),e.jsxs("div",{className:"instruction-section",children:[e.jsx("div",{className:"instruction-header",children:"Terms & Conditions"}),e.jsx("div",{className:"instruction-content",dangerouslySetInnerHTML:{__html:a.exhibitionId.termsAndConditions||'All cheques / Drafts should be payable to "AAKAR EXHIBITION Private Limited". This bill is payable as per agreed terms. All delayed payments will be charged interest @ 18% p.a. All Complaints / Disputes, if any on this bill should reach us within 15 days on receipt of bill, failing which the bill becomes fully payable. Subject to Ahmedabad Jurisdiction.'}})]}),e.jsx("div",{className:"signature-section",children:e.jsxs("div",{style:{textAlign:"center",color:"#333"},children:[e.jsxs("div",{style:{marginBottom:"0px"},children:["For, ",a.exhibitionId.companyName]}),e.jsx("div",{style:{borderTop:"1px solid black",minWidth:"200px",display:"inline-block",margin:"0 auto"}}),e.jsx("div",{style:{marginTop:"0px"},children:"Authorised Signature"})]})})]})})};export{W as I};
