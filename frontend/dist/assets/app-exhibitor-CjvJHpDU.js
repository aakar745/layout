import{r as u,j as e}from"./vendor-react-core-GL8v-krj.js";import{c as tt,a as st,d as nt,f as it,b as Me,u as Ke}from"./vendor-redux-9XI87JsB.js";import{u as _e,L as Ne,a as rt,b as Ze}from"./vendor-react-router-BoDVXa_L.js";import{d as F}from"./vendor-date-utils-CEjhVsrT.js";import{l as ae,q as me}from"./app-core-BUxrPMxd.js";import{T as pe,m as je,B as m,R as D,C as r,a as k,j as oe,Q as se,L as he,S as E,D as Le,E as ee,h as y,I as b,k as Te,e as ne,g as Re,s as w,M as ie,b as Fe,o as Qe,i as T,F as x,f as ot,P as at,p as lt,l as ct,q as Pe,c as dt,r as ht,t as Ee}from"./vendor-antd-core-1s5t57SE.js";import{J as ze,u as H,m as le,af as He,x as $e,Y as Be,i as ge,v as ue,w as xt,a8 as ut,p as pt,n as Je,h as Xe,ad as mt,r as jt,q as et,s as gt,R as yt,z as ft,ag as bt,l as vt,j as Ye,y as wt,d as It,e as kt}from"./vendor-antd-icons-C-4QrCZ0.js";import{s as Ve}from"./app-auth-pav3ebXF.js";import{I as St}from"./app-invoice-D3-oPHO9.js";import"./app-dashboard-DAvQsPhE.js";const Ct={exhibitors:[],loading:!1,error:null},re=tt("exhibitors/fetchAll",async(l,{rejectWithValue:i})=>{var o,c;try{return(await ae.getExhibitors()).data}catch(N){return i(((c=(o=N.response)==null?void 0:o.data)==null?void 0:c.message)||"Failed to fetch exhibitors")}}),Pt=st({name:"exhibitor",initialState:Ct,reducers:{},extraReducers:l=>{l.addCase(re.pending,i=>{i.loading=!0,i.error=null}).addCase(re.fulfilled,(i,o)=>{i.exhibitors=o.payload,i.loading=!1}).addCase(re.rejected,(i,o)=>{i.loading=!1,i.error=o.payload})}}),os=Pt.reducer,At="/api",Tt=nt({reducerPath:"exhibitorInvoiceApi",baseQuery:it({baseUrl:At,credentials:"include",prepareHeaders:l=>{const i=localStorage.getItem("exhibitor_token");return i&&l.set("authorization",`Bearer ${i}`),l.set("Content-Type","application/json"),l.set("Accept","application/json"),l}}),tagTypes:["ExhibitorInvoice"],endpoints:l=>({getExhibitorInvoice:l.query({query:i=>({url:`/exhibitor-bookings/${i}/invoice`,method:"GET"}),transformResponse:i=>i,transformErrorResponse:i=>i,providesTags:(i,o,c)=>[{type:"ExhibitorInvoice",id:c}]}),downloadExhibitorInvoice:l.mutation({query:i=>({url:`/exhibitor-bookings/${i}/invoice/download`,method:"GET",responseHandler:o=>o.blob()})}),shareViaEmail:l.mutation({query:({bookingId:i,...o})=>({url:`/exhibitor-bookings/${i}/invoice/share/email`,method:"POST",body:o})}),shareViaWhatsApp:l.mutation({query:({bookingId:i,...o})=>({url:`/exhibitor-bookings/${i}/invoice/share/whatsapp`,method:"POST",body:o})})})}),{useGetExhibitorInvoiceQuery:Nt,useDownloadExhibitorInvoiceMutation:Et,useShareViaEmailMutation:Dt,useShareViaWhatsAppMutation:Rt}=Tt,{Title:$t,Text:X,Paragraph:as}=pe,Bt=()=>{const[l,i]=u.useState([]),[o,c]=u.useState(!0),[N,R]=u.useState(null),[n,z]=u.useState([]),[C,A]=u.useState(!0),S=Me(d=>d.exhibitorAuth.exhibitor),f=_e();u.useEffect(()=>{M(),Y()},[]);const M=async()=>{try{c(!0),R(null);const d=await me.getExhibitorBookings();i(d.data||[])}catch(d){console.error("Failed to fetch bookings:",d),R("Unable to load your bookings at this time. Please try again later.")}finally{c(!1)}},Y=async()=>{try{A(!0);const d=await me.getExhibitions(),V=F(),O=(d.data||[]).filter(B=>B.isActive&&F(B.endDate).isAfter(V)).slice(0,3);z(O)}catch(d){console.error("Failed to fetch upcoming exhibitions:",d)}finally{A(!1)}},_=l.filter(d=>d.status==="approved").length,$=l.filter(d=>d.status==="pending").length;l.filter(d=>d.status==="rejected").length;const U=l.filter(d=>d.status==="confirmed").length,L=d=>{switch(d){case"approved":return e.jsxs(y,{color:"success",children:[e.jsx(H,{})," Approved"]});case"pending":return e.jsxs(y,{color:"warning",children:[e.jsx(le,{})," Pending"]});case"rejected":return e.jsxs(y,{color:"error",children:[e.jsx(ue,{})," Rejected"]});case"confirmed":return e.jsxs(y,{color:"blue",children:[e.jsx(H,{})," Confirmed"]});case"cancelled":return e.jsxs(y,{color:"default",children:[e.jsx(ue,{})," Cancelled"]});default:return e.jsx(y,{children:"Unknown"})}},K=d=>{f(`/exhibitor/invoice/${d}`)},Z=(d,V)=>d.status===V;return e.jsxs("div",{children:[e.jsxs($t,{level:2,children:["Welcome, ",(S==null?void 0:S.companyName)||"Exhibitor"]}),e.jsx(X,{type:"secondary",children:"Here's an overview of your exhibition activities"}),N&&e.jsx(je,{message:"Error",description:N,type:"error",showIcon:!0,style:{marginTop:24,marginBottom:24}}),$>0&&e.jsx(je,{message:"Pending Approvals",description:`You have ${$} booking(s) waiting for approval.`,type:"info",showIcon:!0,style:{marginTop:24,marginBottom:24},action:e.jsx(m,{size:"small",type:"primary",onClick:()=>f("/exhibitor/bookings"),children:"View Bookings"})}),e.jsxs(D,{gutter:[24,24],style:{marginTop:24},children:[e.jsx(r,{xs:24,sm:12,md:6,children:e.jsx(k,{children:e.jsx(oe,{title:"Total Bookings",value:o?"-":l.length,prefix:e.jsx(ze,{}),loading:o})})}),e.jsx(r,{xs:24,sm:12,md:6,children:e.jsx(k,{children:e.jsx(oe,{title:"Confirmed",value:o?"-":U,valueStyle:{color:"#1890ff"},prefix:e.jsx(H,{}),loading:o})})}),e.jsx(r,{xs:24,sm:12,md:6,children:e.jsx(k,{children:e.jsx(oe,{title:"Approved",value:o?"-":_,valueStyle:{color:"#3f8600"},prefix:e.jsx(H,{}),loading:o})})}),e.jsx(r,{xs:24,sm:12,md:6,children:e.jsx(k,{children:e.jsx(oe,{title:"Pending",value:o?"-":$,valueStyle:{color:"#faad14"},prefix:e.jsx(le,{}),loading:o})})})]}),e.jsx(k,{title:"Recent Bookings",extra:e.jsx(Ne,{to:"/exhibitor/bookings",children:"View All"}),style:{marginTop:24},loading:o,children:o?e.jsx(se,{active:!0,paragraph:{rows:3}}):l.length>0?e.jsx(he,{dataSource:l.slice(0,5),renderItem:d=>{var V,O,B,p,q;return e.jsxs(he.Item,{actions:[e.jsx(m,{type:"link",onClick:()=>f(`/exhibitor/bookings/${d._id}`),children:"View Details"},"view"),Z(d,"approved")||Z(d,"confirmed")?e.jsx(m,{type:"link",icon:e.jsx(He,{}),onClick:()=>K(d._id),children:"Invoice"},"invoice"):null].filter(Boolean),children:[e.jsx(he.Item.Meta,{title:e.jsxs("div",{children:[e.jsx(X,{strong:!0,children:((V=d.exhibitionId)==null?void 0:V.name)||"Exhibition"}),e.jsxs(X,{type:"secondary",style:{marginLeft:12},children:["Stall: ",((O=d.stallIds)==null?void 0:O.map(t=>t.number).join(", "))||"N/A"]})]}),description:e.jsxs(E,{direction:"vertical",size:1,children:[e.jsxs("div",{children:[e.jsxs(X,{children:["Booked on: ",F(d.createdAt).format("MMM D, YYYY")]}),e.jsx(Le,{type:"vertical"}),e.jsxs(X,{children:["Amount: â‚¹",((B=d.amount)==null?void 0:B.toLocaleString())||"N/A"]})]}),e.jsx("div",{children:e.jsxs(X,{children:["Exhibition date: ",F((p=d.exhibitionId)==null?void 0:p.startDate).format("MMM D")," - ",F((q=d.exhibitionId)==null?void 0:q.endDate).format("MMM D, YYYY")]})})]})}),L(d.status)]})}}):e.jsx(ee,{description:"No bookings found",image:ee.PRESENTED_IMAGE_SIMPLE})}),e.jsx(k,{title:"Upcoming Exhibitions",style:{marginTop:24},loading:C,extra:e.jsx(Ne,{to:"/exhibitions",children:"View All"}),children:C?e.jsx(se,{active:!0,paragraph:{rows:3}}):n.length>0?e.jsx(he,{dataSource:n,renderItem:d=>e.jsx(he.Item,{actions:[e.jsx(m,{type:"primary",onClick:()=>f(`/exhibitions/${d._id}/layout`),children:"Book Stall"},"book")],children:e.jsx(he.Item.Meta,{title:d.name,description:e.jsxs(E,{direction:"vertical",size:1,children:[e.jsx(X,{children:d.venue}),e.jsxs(X,{type:"secondary",children:[F(d.startDate).format("MMM D")," - ",F(d.endDate).format("MMM D, YYYY")]})]})})})}):e.jsxs("div",{style:{textAlign:"center",padding:"20px 0"},children:[e.jsx($e,{style:{fontSize:48,color:"#1890ff",marginBottom:16}}),e.jsxs("div",{children:[e.jsx(X,{children:"No upcoming exhibitions at the moment"}),e.jsx("div",{style:{marginTop:16},children:e.jsx(Ne,{to:"/exhibitions",children:e.jsx(m,{type:"primary",children:"Browse All Exhibitions"})})})]})]})}),e.jsx(D,{gutter:[24,24],style:{marginTop:24},children:e.jsx(r,{span:24,children:e.jsx(k,{title:"Quick Actions",children:e.jsxs(D,{gutter:[16,16],children:[e.jsx(r,{xs:24,sm:12,md:8,lg:6,children:e.jsx(m,{type:"primary",icon:e.jsx(ze,{}),block:!0,onClick:()=>f("/exhibitions"),children:"Book New Stall"})}),e.jsx(r,{xs:24,sm:12,md:8,lg:6,children:e.jsx(m,{icon:e.jsx($e,{}),block:!0,onClick:()=>f("/exhibitor/bookings"),children:"View All Bookings"})}),e.jsx(r,{xs:24,sm:12,md:8,lg:6,children:e.jsx(m,{icon:e.jsx(Be,{}),block:!0,onClick:()=>f("/exhibitor/bookings?status=approved"),children:"Pending Payments"})}),e.jsx(r,{xs:24,sm:12,md:8,lg:6,children:e.jsx(m,{icon:e.jsx(ge,{}),block:!0,onClick:()=>f("/exhibitor/profile"),children:"Update Profile"})})]})})})})]})},ls=Object.freeze(Object.defineProperty({__proto__:null,default:Bt},Symbol.toStringTag,{value:"Module"})),{Title:Mt,Text:te}=pe,{Option:cs}=Fe,{TabPane:xe}=Te,{confirm:_t}=ie,{Search:Lt}=b,Ft=()=>{const[l,i]=u.useState([]),[o,c]=u.useState(!0),[N,R]=u.useState(null),[n,z]=u.useState(""),[C,A]=u.useState("all"),S=_e(),f=rt();u.useEffect(()=>{M()},[]),u.useEffect(()=>{const h=new URLSearchParams(f.search).get("status");h&&A(h)},[f]);const M=async()=>{try{c(!0),R(null);const t=await me.getExhibitorBookings();i(t.data||[])}catch(t){console.error("Error fetching bookings:",t),R("Failed to load bookings. Please try again.")}finally{c(!1)}},Y=t=>{_t({title:"Are you sure you want to cancel this booking?",icon:e.jsx(Xe,{}),content:"This action cannot be undone. Once cancelled, the stalls will be available for others to book.",okText:"Yes, Cancel Booking",okType:"danger",cancelText:"No, Keep Booking",onOk:async()=>{try{await me.cancelExhibitorBooking(t),w.success("Booking cancelled successfully"),M()}catch(h){console.error("Error cancelling booking:",h),w.error("Failed to cancel booking")}}})},_=t=>{switch(t){case"approved":return e.jsxs(y,{color:"success",children:[e.jsx(H,{})," Approved"]});case"pending":return e.jsxs(y,{color:"warning",children:[e.jsx(le,{})," Pending"]});case"rejected":return e.jsxs(y,{color:"error",children:[e.jsx(ue,{})," Rejected"]});case"confirmed":return e.jsxs(y,{color:"blue",children:[e.jsx(H,{})," Confirmed"]});case"cancelled":return e.jsxs(y,{color:"default",children:[e.jsx(ue,{})," Cancelled"]});default:return e.jsx(y,{children:"Unknown"})}},$=t=>{switch(t){case"paid":return e.jsxs(y,{color:"success",children:[e.jsx(Be,{})," Paid"]});case"pending":return e.jsxs(y,{color:"warning",children:[e.jsx(le,{})," Pending"]});case"refunded":return e.jsxs(y,{color:"default",children:[e.jsx(Be,{})," Refunded"]});default:return e.jsx(y,{children:"Unknown"})}},U=async t=>{try{S(`/exhibitor/invoice/${t}`)}catch(h){console.error("Error navigating to invoice:",h),w.error("Failed to access invoice. Please try again.")}},L=[{title:"Exhibition",dataIndex:["exhibitionId","name"],key:"exhibitionName",render:(t,h)=>{var v,I;return e.jsxs(E,{direction:"vertical",size:0,children:[e.jsx(te,{strong:!0,children:((v=h.exhibitionId)==null?void 0:v.name)||"N/A"}),e.jsx(te,{type:"secondary",style:{fontSize:"12px"},children:((I=h.exhibitionId)==null?void 0:I.venue)||"N/A"})]})},sorter:(t,h)=>{var v,I;return(((v=t.exhibitionId)==null?void 0:v.name)||"").localeCompare(((I=h.exhibitionId)==null?void 0:I.name)||"")}},{title:"Stall(s)",dataIndex:"stallIds",key:"stallNumbers",render:t=>e.jsx(E,{direction:"vertical",size:4,children:(t==null?void 0:t.map(h=>e.jsx(y,{children:h.number},h._id)))||"N/A"})},{title:"Type",key:"stallType",render:(t,h)=>{var v;return e.jsx(E,{direction:"vertical",size:4,children:((v=h.stallIds)==null?void 0:v.map(I=>{var W;return(W=I.stallTypeId)!=null&&W.name?e.jsx(y,{color:"blue",children:I.stallTypeId.name},I._id):e.jsx(te,{type:"secondary",children:"N/A"},I._id)}))||"N/A"})}},{title:"Dimensions",key:"dimensions",render:(t,h)=>{var v;return e.jsx(E,{direction:"vertical",size:4,children:((v=h.stallIds)==null?void 0:v.map(I=>e.jsxs(te,{children:[I.dimensions.width,"m x ",I.dimensions.height,"m"]},I._id)))||"N/A"})}},{title:"Dates",key:"dates",render:(t,h)=>{var v,I;return e.jsxs(E,{direction:"vertical",size:0,children:[e.jsxs(te,{children:[e.jsx(ut,{style:{marginRight:4}}),F((v=h.exhibitionId)==null?void 0:v.startDate).format("MMM D")," - ",F((I=h.exhibitionId)==null?void 0:I.endDate).format("MMM D, YYYY")]}),e.jsxs(te,{type:"secondary",style:{fontSize:"12px"},children:["Booked: ",F(h.createdAt).format("MMM D, YYYY")]})]})},sorter:(t,h)=>F(t.createdAt).unix()-F(h.createdAt).unix()},{title:"Amount",dataIndex:"amount",key:"amount",render:t=>e.jsxs(te,{strong:!0,children:["â‚¹",t.toLocaleString()]}),sorter:(t,h)=>t.amount-h.amount},{title:"Status",key:"status",dataIndex:"status",render:(t,h)=>t==="rejected"&&h.rejectionReason?e.jsxs(Re,{title:h.rejectionReason,children:[_(t),e.jsx(pt,{style:{marginLeft:4,color:"#ff4d4f"}})]}):_(t),filters:[{text:"Approved",value:"approved"},{text:"Pending",value:"pending"},{text:"Rejected",value:"rejected"},{text:"Confirmed",value:"confirmed"},{text:"Cancelled",value:"cancelled"}],onFilter:(t,h)=>h.status===t},{title:"Payment",key:"paymentStatus",dataIndex:"paymentStatus",render:t=>$(t),filters:[{text:"Paid",value:"paid"},{text:"Pending",value:"pending"},{text:"Refunded",value:"refunded"}],onFilter:(t,h)=>h.paymentStatus===t},{title:"Actions",key:"actions",render:(t,h)=>e.jsxs(E,{children:[e.jsx(m,{type:"link",icon:e.jsx(Je,{}),onClick:()=>S(`/exhibitor/bookings/${h._id}`),children:"Details"}),(h.status==="approved"||h.status==="confirmed")&&e.jsx(m,{type:"link",icon:e.jsx(He,{}),onClick:()=>U(h._id),children:"Invoice"}),h.status==="pending"&&e.jsx(m,{type:"link",danger:!0,onClick:()=>Y(h._id),children:"Cancel"})]})}],K=t=>{z(t)},Z=l.filter(t=>{var I,W;const h=(((I=t.exhibitionId)==null?void 0:I.name)||"").toLowerCase().includes(n.toLowerCase())||t.stallIds.some(ce=>ce.number.toLowerCase().includes(n.toLowerCase()))||(((W=t.exhibitionId)==null?void 0:W.venue)||"").toLowerCase().includes(n.toLowerCase())||(t.customerName||"").toLowerCase().includes(n.toLowerCase()),v=C==="all"||t.status===C;return h&&v}),d=()=>l.length,V=()=>l.filter(t=>t.status==="pending").length,O=()=>l.filter(t=>t.status==="approved").length,B=()=>l.filter(t=>t.status==="confirmed").length,p=()=>l.filter(t=>t.status==="rejected").length,q=()=>l.filter(t=>t.status==="cancelled").length;return e.jsxs("div",{children:[e.jsx(Mt,{level:2,children:"My Bookings"}),e.jsx(te,{type:"secondary",children:"Manage all your exhibition stall bookings in one place"}),N&&e.jsx(je,{message:"Error",description:N,type:"error",showIcon:!0,style:{marginTop:24,marginBottom:24},action:e.jsx(m,{type:"primary",onClick:M,children:"Retry"})}),e.jsxs(k,{style:{marginTop:24},children:[e.jsxs(D,{gutter:[16,16],style:{marginBottom:16},children:[e.jsx(r,{flex:"auto",children:e.jsx(Lt,{placeholder:"Search bookings by exhibition name, stall number, or venue",onSearch:K,onChange:t=>z(t.target.value),style:{width:"100%",maxWidth:400},allowClear:!0})}),e.jsx(r,{children:e.jsx(m,{icon:e.jsx(xt,{}),onClick:M,children:"Refresh"})})]}),e.jsxs(Te,{defaultActiveKey:C,onChange:t=>A(t),children:[e.jsx(xe,{tab:`All Bookings (${d()})`,children:o?e.jsx(se,{active:!0,paragraph:{rows:5}}):Z.length>0?e.jsx(ne,{columns:L,dataSource:Z,rowKey:"_id",pagination:{pageSize:10},scroll:{x:!0},size:"middle"}):e.jsx(ee,{description:n?"No bookings match your search criteria":"No bookings found",image:ee.PRESENTED_IMAGE_SIMPLE})},"all"),e.jsx(xe,{tab:`Pending (${V()})`,children:o?e.jsx(se,{active:!0,paragraph:{rows:5}}):e.jsx(ne,{columns:L,dataSource:l.filter(t=>t.status==="pending"),rowKey:"_id",pagination:{pageSize:10},locale:{emptyText:e.jsx(ee,{description:"No pending bookings"})},scroll:{x:!0},size:"middle"})},"pending"),e.jsx(xe,{tab:`Approved (${O()})`,children:o?e.jsx(se,{active:!0,paragraph:{rows:5}}):e.jsx(ne,{columns:L,dataSource:l.filter(t=>t.status==="approved"),rowKey:"_id",pagination:{pageSize:10},locale:{emptyText:e.jsx(ee,{description:"No approved bookings"})},scroll:{x:!0},size:"middle"})},"approved"),e.jsx(xe,{tab:`Confirmed (${B()})`,children:o?e.jsx(se,{active:!0,paragraph:{rows:5}}):e.jsx(ne,{columns:L,dataSource:l.filter(t=>t.status==="confirmed"),rowKey:"_id",pagination:{pageSize:10},locale:{emptyText:e.jsx(ee,{description:"No confirmed bookings"})},scroll:{x:!0},size:"middle"})},"confirmed"),e.jsx(xe,{tab:`Rejected (${p()})`,children:o?e.jsx(se,{active:!0,paragraph:{rows:5}}):e.jsx(ne,{columns:L,dataSource:l.filter(t=>t.status==="rejected"),rowKey:"_id",pagination:{pageSize:10},locale:{emptyText:e.jsx(ee,{description:"No rejected bookings"})},scroll:{x:!0},size:"middle"})},"rejected"),e.jsx(xe,{tab:`Cancelled (${q()})`,children:o?e.jsx(se,{active:!0,paragraph:{rows:5}}):e.jsx(ne,{columns:L,dataSource:l.filter(t=>t.status==="cancelled"),rowKey:"_id",pagination:{pageSize:10},locale:{emptyText:e.jsx(ee,{description:"No cancelled bookings"})},scroll:{x:!0},size:"middle"})},"cancelled")]})]})]})},ds=Object.freeze(Object.defineProperty({__proto__:null,default:Ft},Symbol.toStringTag,{value:"Module"})),{Title:Oe,Text:De}=pe,zt=()=>{var f,M,Y,_,$,U,L,K,Z,d,V,O,B;const{id:l}=Ze(),i=_e(),[o,c]=u.useState(null),[N,R]=u.useState(!0);u.useEffect(()=>{n()},[l]);const n=async()=>{try{R(!0);const p=await me.getExhibitorBooking(l||"");c(p.data)}catch(p){console.error("Error fetching booking details:",p),w.error("Failed to load booking details")}finally{R(!1)}},z=async()=>{try{i(`/exhibitor/invoice/${l}`)}catch(p){console.error("Error fetching invoice:",p),w.error("Failed to retrieve invoice")}},C=p=>{switch(p){case"approved":return e.jsxs(y,{color:"success",children:[e.jsx(H,{})," Approved"]});case"pending":return e.jsxs(y,{color:"warning",children:[e.jsx(le,{})," Pending"]});case"rejected":return e.jsx(y,{color:"error",children:"Rejected"});case"confirmed":return e.jsxs(y,{color:"blue",children:[e.jsx(H,{})," Confirmed"]});case"cancelled":return e.jsx(y,{color:"default",children:"Cancelled"});default:return e.jsx(y,{children:"Unknown"})}},A=p=>{switch(p){case"paid":return e.jsx(y,{color:"success",children:"Paid"});case"pending":return e.jsx(y,{color:"warning",children:"Pending"});case"refunded":return e.jsx(y,{color:"default",children:"Refunded"});default:return e.jsx(y,{children:"Unknown"})}},S=[{title:"Stall Number",dataIndex:"number",key:"number"},{title:"Dimensions",key:"dimensions",render:p=>`${p.dimensions.width}m Ã— ${p.dimensions.height}m`},{title:"Size",key:"size",render:p=>`${p.dimensions.width*p.dimensions.height} mÂ²`},{title:"Rate per mÂ²",dataIndex:"ratePerSqm",key:"ratePerSqm",render:p=>`â‚¹${p.toLocaleString()}`},{title:"Amount",key:"amount",render:(p,q,t)=>{var v;const h=(v=o.calculations)==null?void 0:v.stalls[t];return h?`â‚¹${h.baseAmount.toLocaleString()}`:"N/A"}}];return N?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"500px"},children:e.jsx(Qe,{size:"large"})}):o?e.jsxs("div",{style:{padding:"20px"},children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(m,{icon:e.jsx(mt,{}),onClick:()=>i("/exhibitor/bookings"),style:{marginRight:16},children:"Back to Bookings"}),["approved","confirmed"].includes(o.status)&&e.jsx(m,{type:"primary",icon:e.jsx($e,{}),onClick:z,children:"View Invoice"})]}),e.jsxs(k,{title:"Booking Details",style:{marginBottom:20},children:[e.jsxs(T,{bordered:!0,column:{xs:1,sm:2,md:3},children:[e.jsx(T.Item,{label:"Booking ID",children:o._id}),e.jsx(T.Item,{label:"Exhibition",children:((f=o.exhibitionId)==null?void 0:f.name)||"N/A"}),e.jsx(T.Item,{label:"Venue",children:((M=o.exhibitionId)==null?void 0:M.venue)||"N/A"}),e.jsx(T.Item,{label:"Booking Date",children:F(o.createdAt).format("MMM D, YYYY")}),e.jsxs(T.Item,{label:"Exhibition Dates",children:[F((Y=o.exhibitionId)==null?void 0:Y.startDate).format("MMM D, YYYY")," -",F((_=o.exhibitionId)==null?void 0:_.endDate).format("MMM D, YYYY")]}),e.jsx(T.Item,{label:"Status",children:C(o.status)}),e.jsx(T.Item,{label:"Payment Status",children:A(o.paymentStatus||"pending")}),e.jsxs(T.Item,{label:"Total Amount",children:["â‚¹",(($=o.amount)==null?void 0:$.toLocaleString())||"N/A"]})]}),o.rejectionReason&&e.jsxs("div",{style:{marginTop:16},children:[e.jsx(Oe,{level:5,style:{color:"#f5222d"},children:"Rejection Reason:"}),e.jsx(De,{children:o.rejectionReason})]})]}),e.jsx(k,{title:"Stall Details",style:{marginBottom:20},children:e.jsx(ne,{dataSource:o.stallIds||[],columns:S,rowKey:"_id",pagination:!1})}),e.jsx(k,{title:"Calculation Summary",children:e.jsx(D,{gutter:[16,16],children:e.jsx(r,{span:24,children:e.jsxs(T,{bordered:!0,column:1,children:[e.jsxs(T.Item,{label:"Base Amount",children:["â‚¹",((U=o.calculations)==null?void 0:U.totalBaseAmount.toLocaleString())||"N/A"]}),((L=o.calculations)==null?void 0:L.totalDiscountAmount)>0&&e.jsxs(T.Item,{label:"Discount",children:["- â‚¹",((K=o.calculations)==null?void 0:K.totalDiscountAmount.toLocaleString())||"N/A"]}),((Z=o.calculations)==null?void 0:Z.totalDiscountAmount)>0&&e.jsxs(T.Item,{label:"Amount After Discount",children:["â‚¹",((d=o.calculations)==null?void 0:d.totalAmountAfterDiscount.toLocaleString())||"N/A"]}),(O=(V=o.calculations)==null?void 0:V.taxes)==null?void 0:O.map(p=>e.jsxs(T.Item,{label:`${p.name} (${p.rate}%)`,children:["+ â‚¹",p.amount.toLocaleString()||"N/A"]},p.name)),e.jsx(T.Item,{label:"Total Amount",children:e.jsxs(De,{strong:!0,style:{fontSize:"16px"},children:["â‚¹",((B=o.amount)==null?void 0:B.toLocaleString())||"N/A"]})})]})})})}),e.jsx(k,{title:"Customer Information",style:{marginTop:20},children:e.jsxs(T,{bordered:!0,column:{xs:1,sm:2},children:[e.jsx(T.Item,{label:"Company Name",children:o.companyName}),e.jsx(T.Item,{label:"Contact Person",children:o.customerName}),e.jsx(T.Item,{label:"Email",children:o.customerEmail}),e.jsx(T.Item,{label:"Phone",children:o.customerPhone})]})})]}):e.jsx(k,{children:e.jsxs("div",{style:{textAlign:"center",margin:"50px 0"},children:[e.jsx(Oe,{level:3,children:"Booking Not Found"}),e.jsx(De,{type:"secondary",children:"The requested booking could not be found or you don't have permission to view it."}),e.jsx("div",{style:{marginTop:20},children:e.jsx(m,{type:"primary",onClick:()=>i("/exhibitor/bookings"),children:"Back to Bookings"})})]})})},hs=Object.freeze(Object.defineProperty({__proto__:null,default:zt},Symbol.toStringTag,{value:"Module"})),{Title:Ue,Text:qe}=pe,{TabPane:We}=Te,Yt=()=>{var C;const[l]=x.useForm(),[i,o]=u.useState(!1),[c,N]=u.useState(!1),R=Ke(),n=Me(A=>A.exhibitorAuth.exhibitor);u.useEffect(()=>{(async()=>{try{N(!0);const S=await ae.getProfile();S.data&&R(Ve({exhibitor:S.data,token:(n==null?void 0:n.token)||localStorage.getItem("exhibitor_token")||""}))}catch{w.error("Failed to fetch exhibitor profile")}finally{N(!1)}})()},[R]),u.useEffect(()=>{n&&l.setFieldsValue({companyName:n.companyName||"",contactPerson:n.contactPerson||"",email:n.email||"",phone:n.phone||"",address:n.address||"",website:n.website||"",description:n.description||"",panNumber:n.panNumber||"",gstNumber:n.gstNumber||"",city:n.city||"",state:n.state||"",pinCode:n.pinCode||""})},[n,l]);const z=async A=>{try{o(!0);const S=await ae.updateProfile(A),f=(n==null?void 0:n.token)||localStorage.getItem("exhibitor_token")||"";R(Ve({exhibitor:{...n,...A},token:f})),w.success("Profile updated successfully")}catch{w.error("Failed to update profile")}finally{o(!1)}};return e.jsxs("div",{children:[e.jsx(Ue,{level:2,children:"My Profile"}),e.jsx(qe,{type:"secondary",children:"Manage your exhibitor profile information"}),e.jsx(k,{style:{marginTop:24},loading:c,children:e.jsxs(Te,{defaultActiveKey:"profile",children:[e.jsx(We,{tab:"Profile Information",children:e.jsxs(D,{gutter:32,children:[e.jsx(r,{span:6,children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:24},children:[e.jsx(ot,{size:100,icon:e.jsx(ge,{}),style:{backgroundColor:"#1890ff",marginBottom:16},children:((C=n==null?void 0:n.companyName)==null?void 0:C.charAt(0).toUpperCase())||"E"}),e.jsx(Ue,{level:4,children:n==null?void 0:n.companyName}),e.jsx(qe,{type:"secondary",children:n==null?void 0:n.email})]})}),e.jsx(r,{span:18,children:e.jsxs(x,{form:l,layout:"vertical",onFinish:z,initialValues:{companyName:(n==null?void 0:n.companyName)||"",contactPerson:(n==null?void 0:n.contactPerson)||"",email:(n==null?void 0:n.email)||"",phone:(n==null?void 0:n.phone)||"",address:(n==null?void 0:n.address)||"",website:(n==null?void 0:n.website)||"",description:(n==null?void 0:n.description)||"",panNumber:(n==null?void 0:n.panNumber)||"",gstNumber:(n==null?void 0:n.gstNumber)||"",city:(n==null?void 0:n.city)||"",state:(n==null?void 0:n.state)||"",pinCode:(n==null?void 0:n.pinCode)||""},children:[e.jsxs(D,{gutter:16,children:[e.jsx(r,{span:12,children:e.jsx(x.Item,{name:"companyName",label:"Company Name",rules:[{required:!0,message:"Please enter your company name"}],children:e.jsx(b,{prefix:e.jsx(jt,{}),placeholder:"Company Name"})})}),e.jsx(r,{span:12,children:e.jsx(x.Item,{name:"contactPerson",label:"Contact Person",rules:[{required:!0,message:"Please enter contact person name"}],children:e.jsx(b,{prefix:e.jsx(ge,{}),placeholder:"Contact Person"})})})]}),e.jsxs(D,{gutter:16,children:[e.jsx(r,{span:12,children:e.jsx(x.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please enter your email"},{type:"email",message:"Please enter a valid email"}],children:e.jsx(b,{prefix:e.jsx(et,{}),placeholder:"Email",disabled:!0})})}),e.jsx(r,{span:12,children:e.jsx(x.Item,{name:"phone",label:"Phone",rules:[{required:!0,message:"Please enter your phone number"}],children:e.jsx(b,{prefix:e.jsx(gt,{}),placeholder:"Phone Number"})})})]}),e.jsx(x.Item,{name:"address",label:"Address",children:e.jsx(b.TextArea,{rows:2,placeholder:"Company Address"})}),e.jsxs(D,{gutter:16,children:[e.jsx(r,{span:8,children:e.jsx(x.Item,{name:"city",label:"City",children:e.jsx(b,{placeholder:"City"})})}),e.jsx(r,{span:8,children:e.jsx(x.Item,{name:"state",label:"State",children:e.jsx(b,{placeholder:"State"})})}),e.jsx(r,{span:8,children:e.jsx(x.Item,{name:"pinCode",label:"PIN Code",rules:[{pattern:/^[0-9]{6}$/,message:"Please enter a valid 6-digit PIN code"}],children:e.jsx(b,{placeholder:"PIN Code",maxLength:6})})})]}),e.jsxs(D,{gutter:16,children:[e.jsx(r,{span:12,children:e.jsx(x.Item,{name:"panNumber",label:"PAN No.",rules:[{pattern:/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/,message:"Please enter a valid PAN number"}],children:e.jsx(b,{placeholder:"PAN Number",style:{textTransform:"uppercase"},maxLength:10})})}),e.jsx(r,{span:12,children:e.jsx(x.Item,{name:"gstNumber",label:"GST No.",rules:[{pattern:/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/,message:"Please enter a valid GST number"}],children:e.jsx(b,{placeholder:"GST Number",style:{textTransform:"uppercase"}})})})]}),e.jsx(x.Item,{name:"website",label:"Website",children:e.jsx(b,{placeholder:"https://www.yourcompany.com"})}),e.jsx(x.Item,{name:"description",label:"Company Description",children:e.jsx(b.TextArea,{rows:4,placeholder:"Brief description of your company"})}),e.jsx(x.Item,{children:e.jsx(m,{type:"primary",htmlType:"submit",loading:i,icon:e.jsx(yt,{}),children:"Save Changes"})})]})})]})},"profile"),e.jsx(We,{tab:"Change Password",children:e.jsxs(x,{layout:"vertical",onFinish:A=>{w.success("Password updated successfully")},children:[e.jsx(x.Item,{name:"currentPassword",label:"Current Password",rules:[{required:!0,message:"Please enter your current password"}],children:e.jsx(b.Password,{placeholder:"Current Password"})}),e.jsx(x.Item,{name:"newPassword",label:"New Password",rules:[{required:!0,message:"Please enter your new password"},{min:6,message:"Password must be at least 6 characters"}],children:e.jsx(b.Password,{placeholder:"New Password"})}),e.jsx(x.Item,{name:"confirmPassword",label:"Confirm New Password",dependencies:["newPassword"],rules:[{required:!0,message:"Please confirm your new password"},({getFieldValue:A})=>({validator(S,f){return!f||A("newPassword")===f?Promise.resolve():Promise.reject(new Error("The two passwords do not match"))}})],children:e.jsx(b.Password,{placeholder:"Confirm New Password"})}),e.jsx(x.Item,{children:e.jsx(m,{type:"primary",htmlType:"submit",children:"Update Password"})})]})},"password")]})})]})},xs=Object.freeze(Object.defineProperty({__proto__:null,default:Yt},Symbol.toStringTag,{value:"Module"})),{Title:Vt,Text:Ot}=pe,Ut=()=>{var O,B,p,q,t,h,v,I,W,ce,ye,fe,be,ve,we,Ie,ke,Se,Ce;const{id:l}=Ze(),{data:i,isLoading:o,error:c}=Nt(l||""),[N]=Et(),[R]=Dt(),[n]=Rt(),[z,C]=u.useState(!1),[A,S]=u.useState(!1),[f]=x.useForm(),[M]=x.useForm(),[Y,_]=u.useState(0),[$,U]=u.useState(!1),L=async()=>{if(l)try{U(!0),_(0),w.loading({content:"Preparing invoice...",key:"download"});const a=(()=>{let j=0;const P=setInterval(()=>{j+=5,j<=90?(_(j),j%25===0&&w.loading({content:`Downloading: ${j}% complete`,key:"download"})):clearInterval(P)},200);return P})();try{const j=await N(l).unwrap();clearInterval(a),_(100),w.loading({content:"Finalizing download...",key:"download"});const P=URL.createObjectURL(j),G=document.createElement("a");G.href=P,G.download=`Invoice-${(i==null?void 0:i.invoiceNumber)||l||"download"}.pdf`,document.body.appendChild(G),G.click(),document.body.removeChild(G),URL.revokeObjectURL(P),w.success({content:"Invoice downloaded successfully",key:"download"})}catch(j){throw clearInterval(a),j}}catch(s){console.error("Error downloading PDF:",s),w.error({content:"Failed to download invoice",key:"download"})}finally{U(!1),setTimeout(()=>_(0),500)}},K=()=>{C(!0)},Z=()=>{S(!0)},d=async s=>{try{await R({bookingId:l||"",email:s.email,message:s.message}).unwrap(),w.success(`Invoice sent to ${s.email}`),C(!1),f.resetFields()}catch(a){console.error("Error sending email:",a),w.error("Failed to send email")}},V=async s=>{try{await n({bookingId:l||"",phoneNumber:s.phoneNumber}).unwrap();const a=s.phoneNumber.replace(/\D/g,""),j=encodeURIComponent(s.message);window.open(`https://wa.me/${a}?text=${j}`,"_blank"),S(!1),M.resetFields()}catch(a){console.error("Error opening WhatsApp:",a),w.error("Failed to open WhatsApp")}};return o?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx(Qe,{size:"large"})}):c||!i?e.jsxs("div",{style:{textAlign:"center",marginTop:"50px"},children:[e.jsx(Vt,{level:3,children:"Invoice Not Found"}),e.jsx(Ot,{children:"The requested invoice could not be loaded. Please try again later."})]}):e.jsxs(e.Fragment,{children:[e.jsxs(k,{title:"Invoice Details",style:{margin:"20px"},children:[e.jsx(D,{gutter:[16,24],children:e.jsx(r,{span:24,children:e.jsxs(E,{direction:"vertical",style:{width:"100%"},children:[e.jsxs(E,{children:[e.jsx(m,{icon:e.jsx(ft,{}),onClick:L,loading:$&&Y<100,disabled:$&&Y>=100,children:"Download PDF"}),e.jsx(m,{icon:e.jsx(et,{}),onClick:K,disabled:$,children:"Share via Email"}),e.jsx(m,{icon:e.jsx(bt,{}),onClick:Z,disabled:$,children:"Share via WhatsApp"})]}),$&&e.jsx(at,{percent:Y,size:"small",status:"active",style:{marginBottom:0,marginTop:4}})]})})}),e.jsx(Le,{}),e.jsx(St,{booking:{...i.bookingId,customerGSTIN:(O=i.bookingId)!=null&&O.customerGSTIN||((B=i.bookingId)==null?void 0:B.customerGSTIN)===""?i.bookingId.customerGSTIN:"N/A",customerAddress:(p=i.bookingId)!=null&&p.customerAddress||((q=i.bookingId)==null?void 0:q.customerAddress)===""?i.bookingId.customerAddress:"N/A",invoiceNumber:i.invoiceNumber,exhibitionId:{...i.bookingId.exhibitionId,companyName:((t=i.bookingId.exhibitionId)==null?void 0:t.companyName)||"",bankName:((h=i.bookingId.exhibitionId)==null?void 0:h.bankName)||"",bankAccount:((v=i.bookingId.exhibitionId)==null?void 0:v.bankAccount)||"",bankAccountName:((I=i.bookingId.exhibitionId)==null?void 0:I.bankAccountName)||"",bankBranch:((W=i.bookingId.exhibitionId)==null?void 0:W.bankBranch)||"",bankIFSC:((ce=i.bookingId.exhibitionId)==null?void 0:ce.bankIFSC)||"",companyCIN:((ye=i.bookingId.exhibitionId)==null?void 0:ye.companyCIN)||"",companyPAN:((fe=i.bookingId.exhibitionId)==null?void 0:fe.companyPAN)||"",companySAC:((be=i.bookingId.exhibitionId)==null?void 0:be.companySAC)||"",companyGST:((ve=i.bookingId.exhibitionId)==null?void 0:ve.companyGST)||"",companyEmail:((we=i.bookingId.exhibitionId)==null?void 0:we.companyEmail)||"",companyWebsite:((Ie=i.bookingId.exhibitionId)==null?void 0:Ie.companyWebsite)||"",companyAddress:((ke=i.bookingId.exhibitionId)==null?void 0:ke.companyAddress)||""},calculations:{...i.bookingId.calculations,stalls:((Ce=(Se=i.bookingId.calculations)==null?void 0:Se.stalls)==null?void 0:Ce.map(s=>({...s,discount:s.discount?{...s.discount,type:s.discount.type||"percentage",value:s.discount.value}:void 0})))||[]}}})]}),e.jsx(ie,{title:"Share Invoice via Email",visible:z,onCancel:()=>C(!1),footer:null,children:e.jsxs(x,{form:f,layout:"vertical",onFinish:d,children:[e.jsx(x.Item,{name:"email",label:"Email Address",rules:[{required:!0,message:"Please enter an email address"},{type:"email",message:"Please enter a valid email address"}],children:e.jsx(b,{placeholder:"example@example.com"})}),e.jsx(x.Item,{name:"message",label:"Message",initialValue:`Please find attached the invoice for your booking with invoice number ${i.invoiceNumber}.`,children:e.jsx(b.TextArea,{rows:4})}),e.jsx(x.Item,{children:e.jsx(m,{type:"primary",htmlType:"submit",children:"Send"})})]})}),e.jsx(ie,{title:"Share Invoice via WhatsApp",visible:A,onCancel:()=>S(!1),footer:null,children:e.jsxs(x,{form:M,layout:"vertical",onFinish:V,children:[e.jsx(x.Item,{name:"phoneNumber",label:"Phone Number",rules:[{required:!0,message:"Please enter a phone number"}],children:e.jsx(b,{placeholder:"+1234567890"})}),e.jsx(x.Item,{name:"message",label:"Message",initialValue:`Please find the invoice for your booking with invoice number ${i.invoiceNumber}.`,children:e.jsx(b.TextArea,{rows:4})}),e.jsx(x.Item,{children:e.jsx(m,{type:"primary",htmlType:"submit",children:"Open WhatsApp"})})]})})]})},us=Object.freeze(Object.defineProperty({__proto__:null,default:Ut},Symbol.toStringTag,{value:"Module"})),{Title:qt,Text:g,Paragraph:Wt}=pe,{Option:Ae}=Fe,{TextArea:Ge,Search:Gt}=b,{RangePicker:Kt}=lt,Zt=()=>{const l=Ke(),{exhibitors:i,loading:o}=Me(s=>s.exhibitor),[c,N]=u.useState(null),[R,n]=u.useState(!1),[z,C]=u.useState(!1),[A,S]=u.useState(!1),[f,M]=u.useState("approved"),[Y,_]=u.useState(""),[$,U]=u.useState(!1),[L,K]=u.useState(!1),[Z,d]=u.useState(!1),[V,O]=u.useState(""),[B,p]=u.useState([]),[q]=x.useForm(),[t,h]=u.useState([]);t.length>0;const[v,I]=u.useState({total:0,pending:0,approved:0,rejected:0});u.useEffect(()=>{l(re())},[l]),u.useEffect(()=>{if(i!=null&&i.length){p(i);const s={total:i.length,pending:i.filter(a=>a.status==="pending").length,approved:i.filter(a=>a.status==="approved").length,rejected:i.filter(a=>a.status==="rejected").length};I(s)}},[i]),u.useEffect(()=>{c&&z&&q.setFieldsValue({companyName:c.companyName,contactPerson:c.contactPerson,email:c.email,phone:c.phone,address:c.address||"",website:c.website||"",description:c.description||"",isActive:c.isActive})},[c,z,q]);const W=s=>{switch(s){case"approved":return e.jsx(y,{color:"success",children:"Approved"});case"pending":return e.jsx(y,{color:"warning",children:"Pending"});case"rejected":return e.jsx(y,{color:"error",children:"Rejected"});default:return e.jsx(y,{children:"Unknown"})}},ce=async()=>{var s,a;if(c)try{U(!0),await ae.updateStatus(c._id,f,f==="rejected"?Y:void 0),w.success(`Exhibitor status updated to ${f}`),n(!1),l(re())}catch(j){w.error(((a=(s=j.response)==null?void 0:s.data)==null?void 0:a.message)||"Failed to update exhibitor status")}finally{U(!1)}},ye=async s=>{var a,j;if(c)try{K(!0),await ae.updateExhibitor(c._id,s),w.success("Exhibitor details updated successfully"),C(!1),l(re())}catch(P){w.error(((j=(a=P.response)==null?void 0:a.data)==null?void 0:j.message)||"Failed to update exhibitor details")}finally{K(!1)}},fe=async s=>{var a,j;try{d(!0),await ae.deleteExhibitor(s),w.success("Exhibitor deleted successfully"),l(re())}catch(P){w.error(((j=(a=P.response)==null?void 0:a.data)==null?void 0:j.message)||"Failed to delete exhibitor")}finally{d(!1)}},be=s=>{if(O(s),!s){p(i);return}const a=s.toLowerCase(),j=i.filter(P=>P.companyName.toLowerCase().includes(a)||P.contactPerson.toLowerCase().includes(a)||P.email.toLowerCase().includes(a)||P.phone.toLowerCase().includes(a));p(j)},ve=s=>{if(s==="all"){p(i);return}const a=i.filter(j=>j.status===s);p(a)},we=s=>{if(!s||s.length!==2){p(i);return}const a=s[0].startOf("day").toISOString(),j=s[1].endOf("day").toISOString(),P=i.filter(G=>{const J=new Date(G.createdAt).toISOString();return J>=a&&J<=j});p(P)},Ie=()=>{const s=["Company Name","Contact Person","Email","Phone","Status","Active","Registration Date","Address","Website"],a=B.map(Q=>[Q.companyName,Q.contactPerson,Q.email,Q.phone,Q.status,Q.isActive?"Yes":"No",new Date(Q.createdAt).toLocaleDateString(),Q.address||"",Q.website||""]);a.unshift(s);const j=a.map(Q=>Q.map(de=>typeof de=="string"&&(de.includes(",")||de.includes('"')||de.includes(`
`))?`"${de.replace(/"/g,'""')}"`:de).join(",")).join(`
`),P=new Blob([j],{type:"text/csv;charset=utf-8;"}),G=URL.createObjectURL(P),J=document.createElement("a");J.setAttribute("href",G),J.setAttribute("download",`exhibitors-${new Date().toISOString().split("T")[0]}.csv`),J.style.visibility="hidden",document.body.appendChild(J),J.click(),document.body.removeChild(J),w.success("Exhibitor data exported successfully")},ke=()=>{ie.confirm({title:"Delete Selected Exhibitors",content:`Are you sure you want to delete ${t.length} exhibitors? This action cannot be undone.`,okText:"Yes",okType:"danger",cancelText:"No",onOk:async()=>{try{d(!0);const s=t.map(a=>ae.deleteExhibitor(a.toString()));await Promise.all(s),w.success(`${t.length} exhibitors deleted successfully`),h([]),l(re())}catch{w.error("Failed to delete some exhibitors")}finally{d(!1)}}})},Se={selectedRowKeys:t,onChange:s=>{h(s)}},Ce=[{title:"Company",dataIndex:"companyName",key:"companyName",width:220,fixed:"left",sorter:(s,a)=>s.companyName.localeCompare(a.companyName),filterDropdown:({setSelectedKeys:s,selectedKeys:a,confirm:j,clearFilters:P})=>e.jsxs("div",{style:{padding:8},children:[e.jsx(b,{placeholder:"Search company or contact",value:a[0],onChange:G=>s(G.target.value?[G.target.value]:[]),onPressEnter:()=>j(),style:{width:188,marginBottom:8,display:"block"}}),e.jsxs(E,{children:[e.jsx(m,{type:"primary",onClick:()=>j(),icon:e.jsx(Ye,{}),size:"small",style:{width:90},children:"Filter"}),e.jsx(m,{onClick:()=>{P&&P(),j()},size:"small",style:{width:90},children:"Reset"})]})]}),filterIcon:s=>e.jsx(Ye,{style:{color:s?"#1890ff":void 0}}),onFilter:(s,a)=>{const j=String(s).toLowerCase();return a.companyName.toLowerCase().includes(j)||a.contactPerson.toLowerCase().includes(j)},render:(s,a)=>e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:s}),e.jsxs("div",{style:{fontSize:"12px",color:"#888"},children:["Contact: ",a.contactPerson]})]})},{title:"Contact",dataIndex:"email",key:"email",width:220,render:(s,a)=>e.jsxs("div",{children:[e.jsx("div",{children:s}),e.jsx("div",{style:{fontSize:"12px"},children:a.phone})]})},{title:"Status",dataIndex:"status",key:"status",width:120,filters:[{text:"Pending",value:"pending"},{text:"Approved",value:"approved"},{text:"Rejected",value:"rejected"}],onFilter:(s,a)=>a.status===s,render:s=>W(s)},{title:"Active",dataIndex:"isActive",key:"isActive",width:100,filters:[{text:"Active",value:!0},{text:"Inactive",value:!1}],onFilter:(s,a)=>a.isActive===s,render:s=>e.jsx(y,{color:s?"green":"red",children:s?"Active":"Inactive"})},{title:"Registration Date",dataIndex:"createdAt",key:"createdAt",width:160,sorter:(s,a)=>new Date(s.createdAt).getTime()-new Date(a.createdAt).getTime(),render:s=>e.jsx(Re,{title:new Date(s).toLocaleString(),children:new Date(s).toLocaleDateString()})},{title:"Address",dataIndex:"address",key:"address",width:200,ellipsis:!0},{title:"Website",dataIndex:"website",key:"website",width:180,render:s=>s?e.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",children:s.replace(/^https?:\/\/(www\.)?/i,"")}):"-"},{title:"Actions",key:"actions",fixed:"right",width:220,render:(s,a)=>e.jsxs(E,{children:[e.jsx(Re,{title:"View Details",children:e.jsx(m,{icon:e.jsx(Je,{}),onClick:()=>{N(a),S(!0)}})}),e.jsx(m,{type:"primary",onClick:()=>{N(a),M(a.status),_(a.rejectionReason||""),n(!0)},children:"Update Status"}),e.jsx(ht,{overlay:e.jsxs(Ee,{children:[e.jsx(Ee.Item,{icon:e.jsx(It,{}),onClick:()=>{N(a),C(!0)},children:"Edit"},"edit"),e.jsx(Ee.Item,{icon:e.jsx(kt,{}),danger:!0,onClick:j=>{j.domEvent.stopPropagation(),ie.confirm({title:"Delete Exhibitor",content:"Are you sure you want to delete this exhibitor? This action cannot be undone.",okText:"Yes",okType:"danger",cancelText:"No",onOk:()=>fe(a._id)})},children:"Delete"},"delete")]}),trigger:["click"],children:e.jsx(m,{icon:e.jsx(wt,{})})})]})}];return e.jsxs("div",{className:"dashboard-container",children:[e.jsx("div",{style:{marginBottom:"24px"},children:e.jsxs(D,{gutter:[24,24],align:"middle",children:[e.jsx(r,{flex:"auto",children:e.jsxs(E,{direction:"vertical",size:4,children:[e.jsx(qt,{level:4,style:{margin:0},children:"Exhibitors"}),e.jsx(g,{type:"secondary",children:"Manage exhibitors and their information"})]})}),e.jsx(r,{children:e.jsx(m,{type:"primary",icon:e.jsx(vt,{}),onClick:()=>C(!0),size:"large",children:"Add Exhibitor"})})]})}),e.jsxs(D,{gutter:[16,24],style:{marginBottom:"24px"},children:[e.jsx(r,{xs:24,sm:12,md:6,children:e.jsx(k,{children:e.jsx(oe,{title:"Total Exhibitors",value:v.total,prefix:e.jsx(ge,{})})})}),e.jsx(r,{xs:24,sm:12,md:6,children:e.jsx(k,{children:e.jsx(oe,{title:"Pending",value:v.pending,prefix:e.jsx(le,{style:{color:"#faad14"}})})})}),e.jsx(r,{xs:24,sm:12,md:6,children:e.jsx(k,{children:e.jsx(oe,{title:"Approved",value:v.approved,prefix:e.jsx(H,{style:{color:"#52c41a"}})})})}),e.jsx(r,{xs:24,sm:12,md:6,children:e.jsx(k,{children:e.jsx(oe,{title:"Rejected",value:v.rejected,prefix:e.jsx(ue,{style:{color:"#ff4d4f"}})})})})]}),e.jsx(k,{className:"info-card",style:{marginBottom:"24px"},children:e.jsxs(E,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxs(D,{gutter:[16,16],align:"middle",children:[e.jsx(r,{xs:24,sm:8,md:6,lg:4,children:e.jsx(Gt,{placeholder:"Search exhibitors",allowClear:!0,onSearch:be,style:{width:"100%"}})}),e.jsx(r,{xs:24,sm:8,md:6,lg:4,children:e.jsxs(Fe,{placeholder:"Filter by status",style:{width:"100%"},onChange:ve,allowClear:!0,children:[e.jsx(Ae,{value:"all",children:"All Status"}),e.jsx(Ae,{value:"pending",children:"Pending"}),e.jsx(Ae,{value:"approved",children:"Approved"}),e.jsx(Ae,{value:"rejected",children:"Rejected"})]})}),e.jsx(r,{xs:24,sm:8,md:6,lg:6,children:e.jsx(Kt,{style:{width:"100%"},onChange:we})})]}),t.length>0&&e.jsx(D,{children:e.jsxs(E,{children:[e.jsxs(g,{children:["Selected ",t.length," items"]}),e.jsx(m,{danger:!0,onClick:ke,children:"Delete Selected"}),e.jsx(m,{type:"primary",onClick:Ie,children:"Export Selected"})]})})]})}),e.jsx(k,{className:"info-card",children:e.jsx(ne,{rowSelection:Se,dataSource:B,columns:Ce,rowKey:"_id",loading:o,pagination:{pageSize:10,showSizeChanger:!0,showTotal:(s,a)=>`${a[0]}-${a[1]} of ${s} items`},scroll:{x:1500}})}),e.jsx(ie,{title:"Exhibitor Details",open:A,onCancel:()=>S(!1),footer:[e.jsx(m,{onClick:()=>S(!1),children:"Close"},"close")],width:600,children:c&&e.jsx("div",{children:e.jsxs(D,{gutter:[16,16],children:[e.jsx(r,{span:24,children:e.jsx(k,{title:"Company Information",children:e.jsxs(D,{gutter:[16,8],children:[e.jsx(r,{span:12,children:e.jsx(g,{strong:!0,children:"Company Name:"})}),e.jsx(r,{span:12,children:e.jsx(g,{children:c.companyName})}),e.jsx(r,{span:12,children:e.jsx(g,{strong:!0,children:"Contact Person:"})}),e.jsx(r,{span:12,children:e.jsx(g,{children:c.contactPerson})}),e.jsx(r,{span:12,children:e.jsx(g,{strong:!0,children:"Email:"})}),e.jsx(r,{span:12,children:e.jsx(g,{children:c.email})}),e.jsx(r,{span:12,children:e.jsx(g,{strong:!0,children:"Phone:"})}),e.jsx(r,{span:12,children:e.jsx(g,{children:c.phone})}),e.jsx(r,{span:12,children:e.jsx(g,{strong:!0,children:"Address:"})}),e.jsx(r,{span:12,children:e.jsx(g,{children:c.address||"Not provided"})}),e.jsx(r,{span:12,children:e.jsx(g,{strong:!0,children:"Status:"})}),e.jsx(r,{span:12,children:W(c.status)}),e.jsx(r,{span:12,children:e.jsx(g,{strong:!0,children:"Active:"})}),e.jsx(r,{span:12,children:e.jsx(ct,{status:c.isActive?"success":"error",text:c.isActive?"Yes":"No"})}),e.jsx(r,{span:12,children:e.jsx(g,{strong:!0,children:"Registration Date:"})}),e.jsx(r,{span:12,children:e.jsx(g,{children:new Date(c.createdAt).toLocaleString()})})]})})}),e.jsx(r,{span:24,children:e.jsxs(k,{title:"Additional Information",children:[e.jsxs(D,{gutter:[16,8],children:[e.jsx(r,{span:12,children:e.jsx(g,{strong:!0,children:"Address:"})}),e.jsx(r,{span:12,children:e.jsx(g,{children:c.address||"Not provided"})}),e.jsx(r,{span:12,children:e.jsx(g,{strong:!0,children:"Website:"})}),e.jsx(r,{span:12,children:c.website?e.jsx("a",{href:c.website,target:"_blank",rel:"noopener noreferrer",children:c.website}):"Not provided"}),c.status==="rejected"&&e.jsxs(e.Fragment,{children:[e.jsx(r,{span:12,children:e.jsx(g,{strong:!0,children:"Rejection Reason:"})}),e.jsx(r,{span:12,children:e.jsx(g,{type:"danger",children:c.rejectionReason||"No reason provided"})})]})]}),c.description&&e.jsxs(e.Fragment,{children:[e.jsx(Le,{}),e.jsx(g,{strong:!0,children:"Description:"}),e.jsx(Wt,{style:{marginTop:8},children:c.description})]})]})})]})})}),e.jsx(ie,{title:"Update Exhibitor Status",open:R,onCancel:()=>n(!1),footer:null,width:600,children:c&&e.jsxs("div",{children:[e.jsx(k,{title:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(ge,{style:{fontSize:"18px"}}),e.jsx("span",{children:"Exhibitor Information"})]}),style:{marginBottom:16},bordered:!1,size:"small",children:e.jsxs(D,{gutter:[16,8],children:[e.jsx(r,{span:8,children:e.jsx(g,{strong:!0,children:"Company:"})}),e.jsx(r,{span:16,children:e.jsx(g,{children:c.companyName})}),e.jsx(r,{span:8,children:e.jsx(g,{strong:!0,children:"Contact Person:"})}),e.jsx(r,{span:16,children:e.jsx(g,{children:c.contactPerson})}),e.jsx(r,{span:8,children:e.jsx(g,{strong:!0,children:"Email:"})}),e.jsx(r,{span:16,children:e.jsx(g,{children:c.email})}),e.jsx(r,{span:8,children:e.jsx(g,{strong:!0,children:"Address:"})}),e.jsx(r,{span:16,children:e.jsx(g,{children:c.address||"Not provided"})}),e.jsx(r,{span:8,children:e.jsx(g,{strong:!0,children:"Current Status:"})}),e.jsx(r,{span:16,children:W(c.status)})]})}),e.jsxs(k,{title:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(Xe,{style:{fontSize:"18px"}}),e.jsx("span",{children:"Update Status"})]}),bordered:!1,size:"small",children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx(g,{strong:!0,children:"Select New Status:"}),e.jsx("div",{style:{marginTop:"16px"},children:e.jsxs(Pe.Group,{value:f,onChange:s=>M(s.target.value),buttonStyle:"solid",children:[e.jsx(Pe.Button,{value:"pending",children:e.jsxs(E,{children:[e.jsx(le,{style:{color:"#faad14"}}),"Pending"]})}),e.jsx(Pe.Button,{value:"approved",children:e.jsxs(E,{children:[e.jsx(H,{style:{color:"#52c41a"}}),"Approved"]})}),e.jsx(Pe.Button,{value:"rejected",children:e.jsxs(E,{children:[e.jsx(ue,{style:{color:"#f5222d"}}),"Rejected"]})})]})})]}),f==="rejected"&&e.jsx("div",{children:e.jsx(x.Item,{label:e.jsx(g,{strong:!0,children:"Rejection Reason:"}),required:f==="rejected",rules:[{required:!0,message:"Please provide a reason for rejection"}],help:"This will be visible to the exhibitor",children:e.jsx(Ge,{rows:4,value:Y,onChange:s=>_(s.target.value),placeholder:"Provide a reason for rejection",style:{marginTop:8}})})}),f==="approved"&&e.jsx(je,{message:"Approval Confirmation",description:"By approving this exhibitor, they will be able to log in and manage their exhibition space.",type:"success",showIcon:!0,style:{marginTop:8}}),f==="pending"&&e.jsx(je,{message:"Return to Pending",description:"This exhibitor will be moved back to pending status and will not be able to log in.",type:"warning",showIcon:!0,style:{marginTop:8}})]}),e.jsxs("div",{style:{marginTop:24,display:"flex",justifyContent:"flex-end",gap:"8px"},children:[e.jsx(m,{onClick:()=>n(!1),children:"Cancel"}),e.jsx(m,{type:"primary",onClick:ce,loading:$,disabled:f==="rejected"&&!Y.trim(),children:"Update Status"})]})]})]})}),e.jsx(ie,{title:"Edit Exhibitor Details",open:z,onCancel:()=>C(!1),footer:null,width:600,children:e.jsxs(x,{form:q,layout:"vertical",onFinish:ye,children:[e.jsx(x.Item,{name:"companyName",label:"Company Name",rules:[{required:!0,message:"Please enter company name"}],children:e.jsx(b,{})}),e.jsx(x.Item,{name:"contactPerson",label:"Contact Person",rules:[{required:!0,message:"Please enter contact person"}],children:e.jsx(b,{})}),e.jsx(x.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please enter email"},{type:"email",message:"Please enter a valid email"}],children:e.jsx(b,{})}),e.jsx(x.Item,{name:"phone",label:"Phone",rules:[{required:!0,message:"Please enter phone number"}],children:e.jsx(b,{})}),e.jsx(x.Item,{name:"address",label:"Address",children:e.jsx(b,{})}),e.jsx(x.Item,{name:"website",label:"Website",children:e.jsx(b,{})}),e.jsx(x.Item,{name:"description",label:"Description",children:e.jsx(Ge,{rows:4})}),e.jsx(x.Item,{name:"isActive",label:"Active Status",valuePropName:"checked",children:e.jsx(dt,{checkedChildren:"Active",unCheckedChildren:"Inactive"})}),e.jsx(x.Item,{children:e.jsxs(E,{children:[e.jsx(m,{type:"primary",htmlType:"submit",loading:L,children:"Save Changes"}),e.jsx(m,{onClick:()=>C(!1),children:"Cancel"})]})})]})})]})},ps=Object.freeze(Object.defineProperty({__proto__:null,default:Zt},Symbol.toStringTag,{value:"Module"}));export{ds as B,ls as D,us as I,xs as P,os as a,hs as b,Tt as e,re as f,ps as i};
