import{j as e,U as Ce,V as le,v as Te,W as Ie,P as ie,w as se}from"./index-DoSueJxk.js";import{l as oe,r as f,u as ke,k as L}from"./vendor-react-dkbxt9Jf.js";import{ag as Fe,K as x,J as j,$ as E,a0 as S,ac as Ee,c as B,W as w,a1 as R,ai as N,T as g,S as C,b as P,V as Ne,D as ce,ab as q,aF as $e,ah as Pe}from"./vendor-antd-mFVHvrVJ.js";import{c as ne}from"./stallUtils-DlikgrX5.js";import"./vendor-utils-ngrFHoWO.js";import"./vendor-styling-CQa69cNz.js";const Be=({visible:i,onCancel:o,onExhibitorAdded:d,form:l})=>{const s=oe(),n=async m=>{try{const b={companyName:m.companyName,contactPerson:m.contactPerson,email:m.email,phone:m.phone,address:m.address,city:m.city,state:m.state,pinCode:m.pinCode,website:m.website,description:m.description,panNumber:m.panNumber,gstNumber:m.gstNumber,isActive:m.isActive!==!1},a=await Ce.createExhibitor(b);w.success({content:"Exhibitor created successfully! Login credentials have been sent via email.",duration:5}),s(le({})),d(a.data.exhibitor._id),o(),l.resetFields()}catch(b){const a=b.response?.data?.message||b?.message||"Failed to add exhibitor";w.error(a),a.includes("email already exists")&&l.setFields([{name:"email",errors:["This email is already registered"]}])}};return e.jsx(Fe,{title:e.jsx("span",{style:{fontSize:"18px",fontWeight:600,color:"#101828"},children:"Add Exhibitor"}),open:i,onCancel:o,width:800,footer:e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end",padding:"20px 24px",borderTop:"1px solid #E5E7EB"},children:[e.jsx(B,{onClick:o,size:"large",style:{height:"44px",padding:"12px 20px",borderRadius:"8px",border:"1px solid #D0D5DD",color:"#344054",fontWeight:500,fontSize:"14px",backgroundColor:"white",minWidth:"100px"},children:"Cancel"}),e.jsx(B,{type:"primary",onClick:l.submit,size:"large",style:{height:"44px",padding:"12px 20px",borderRadius:"8px",border:"none",backgroundColor:"#6941C6",color:"white",fontWeight:500,fontSize:"14px",boxShadow:"0px 1px 2px rgba(16, 24, 40, 0.05)",minWidth:"140px"},children:"Create Exhibitor"})]}),styles:{body:{padding:"24px",maxHeight:"calc(100vh - 200px)",overflowY:"auto"},header:{borderBottom:"1px solid #E5E7EB",padding:"24px"},footer:{borderTop:"1px solid #E5E7EB",padding:0}},style:{top:20},children:e.jsxs(x,{form:l,layout:"vertical",onFinish:n,requiredMark:!1,scrollToFirstError:!0,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"32px"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"24px",paddingBottom:"12px",borderBottom:"2px solid #F3F4F6"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",backgroundColor:"#EEF2FF",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"12px"},children:e.jsx("span",{style:{fontSize:"16px"},children:"ðŸ¢"})}),e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#101828",margin:0},children:"Company Information"})]}),e.jsx(x.Item,{name:"companyName",label:"Company Name",rules:[{required:!0,message:"Please enter company name"},{min:2,message:"Company name must be at least 2 characters"},{max:100,message:"Company name cannot exceed 100 characters"}],children:e.jsx(j,{placeholder:"Enter company name",size:"large"})}),e.jsx(x.Item,{name:"address",label:"Address",rules:[{required:!0,message:"Please enter address"}],children:e.jsx(j.TextArea,{rows:3,placeholder:"Enter complete address",showCount:!0,maxLength:200})}),e.jsxs(E,{gutter:16,children:[e.jsx(S,{span:12,children:e.jsx(x.Item,{name:"city",label:"City",rules:[{required:!0,message:"Please enter city"}],children:e.jsx(j,{placeholder:"Enter city"})})}),e.jsx(S,{span:12,children:e.jsx(x.Item,{name:"state",label:"State",rules:[{required:!0,message:"Please enter state"}],children:e.jsx(j,{placeholder:"Enter state"})})})]}),e.jsx(x.Item,{name:"pinCode",label:"PIN Code",rules:[{required:!0,message:"Please enter PIN code"},{pattern:/^\d{6}$/,message:"Please enter a valid 6-digit PIN code"}],children:e.jsx(j,{placeholder:"123456",maxLength:6})}),e.jsx(x.Item,{name:"website",label:"Website",rules:[{type:"url",message:"Please enter a valid website URL"}],children:e.jsx(j,{placeholder:"https://www.company.com"})}),e.jsx(x.Item,{name:"description",label:"Company Description",children:e.jsx(j.TextArea,{rows:3,placeholder:"Brief description about the company",showCount:!0,maxLength:500})})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"24px",paddingBottom:"12px",borderBottom:"2px solid #F3F4F6"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",backgroundColor:"#FEF3F2",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"12px"},children:e.jsx("span",{style:{fontSize:"16px"},children:"ðŸ‘¤"})}),e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#101828",margin:0},children:"Contact & Legal Information"})]}),e.jsx(x.Item,{name:"contactPerson",label:"Contact Person",rules:[{required:!0,message:"Please enter contact person"},{min:2,message:"Name must be at least 2 characters"},{max:100,message:"Name cannot exceed 100 characters"}],children:e.jsx(j,{placeholder:"Enter contact person name",size:"large"})}),e.jsx(x.Item,{name:"email",label:"Email Address",rules:[{required:!0,message:"Please enter email"},{type:"email",message:"Please enter a valid email"}],extra:"Login credentials will be sent to this email",children:e.jsx(j,{placeholder:"contact@company.com",size:"large",prefix:e.jsx("span",{style:{color:"#9CA3AF"},children:"ðŸ“§"})})}),e.jsx(x.Item,{name:"phone",label:"Phone Number",rules:[{required:!0,message:"Please enter phone number"},{pattern:/^[0-9-+()]*$/,message:"Please enter a valid phone number"}],children:e.jsx(j,{placeholder:"9876543210",size:"large",prefix:e.jsx("span",{style:{color:"#9CA3AF"},children:"ðŸ“±"})})}),e.jsx(x.Item,{name:"panNumber",label:"PAN Number",rules:[{pattern:/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/,message:"Please enter a valid PAN number (e.g., ABCDE1234F)"}],children:e.jsx(j,{placeholder:"ABCDE1234F",style:{textTransform:"uppercase"},maxLength:10})}),e.jsx(x.Item,{name:"gstNumber",label:"GST Number",rules:[{pattern:/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/,message:"Please enter a valid GST number"}],children:e.jsx(j,{placeholder:"27AAPFU0939F1ZV",style:{textTransform:"uppercase"},maxLength:15})}),e.jsx(x.Item,{name:"isActive",label:"Account Status",initialValue:!0,valuePropName:"checked",children:e.jsx(Ee,{checkedChildren:"Active",unCheckedChildren:"Inactive",size:"default"})})]})]}),e.jsxs("div",{style:{marginTop:"24px",padding:"16px",backgroundColor:"#F0F9FF",border:"1px solid #BAE6FD",borderRadius:"8px",display:"flex",alignItems:"flex-start",gap:"12px"},children:[e.jsx("span",{style:{fontSize:"16px",marginTop:"2px"},children:"â„¹ï¸"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,color:"#0369A1",marginBottom:"4px"},children:"Account Creation Notice"}),e.jsxs("div",{style:{color:"#0369A1",fontSize:"14px",lineHeight:"1.5"},children:["â€¢ A temporary password will be automatically generated and sent to the provided email",e.jsx("br",{}),"â€¢ The exhibitor will be pre-approved and can log in immediately",e.jsx("br",{}),"â€¢ They should change their password after first login for security"]})]})]})]})})},{Text:ae}=g,qe=i=>{if(!i)return 0;const o=i.shapeType||"rectangle";if(o==="rectangle")return i.width*i.height;if(o==="l-shape"&&i.lShape){const{rect1Width:d,rect1Height:l,rect2Width:s,rect2Height:n}=i.lShape;return d*l+s*n}return i.width*i.height},De=({selectedStalls:i,calculateBaseAmount:o})=>{if(i.length===0)return null;const d=[{title:"Stall Number",dataIndex:"number",key:"number",width:120},{title:"Stall Type",key:"type",width:150,render:(s,n)=>n.stallType?.name||(typeof n.stallTypeId=="object"?n.stallTypeId?.name:"Not specified")},{title:"Dimensions",key:"dimensions",width:120,render:(s,n)=>n.dimensions.shapeType==="l-shape"?"L-Shape":`${n.dimensions.width}m Ã— ${n.dimensions.height}m`},{title:"Area (sqm)",key:"area",width:100,render:(s,n)=>qe(n.dimensions).toFixed(2)},{title:"Rate/sq.m",dataIndex:"ratePerSqm",key:"rate",width:120,render:s=>`â‚¹${s.toLocaleString()}`},{title:"Base Amount",key:"baseAmount",width:120,render:(s,n)=>`â‚¹${o(n).toLocaleString()}`}],l=i.reduce((s,n)=>s+o(n),0);return e.jsx(R,{title:"Selected Stalls Summary",size:"small",style:{marginBottom:16},children:e.jsx(N,{dataSource:i.map(s=>({...s,key:s._id||s.id})),columns:d,pagination:!1,size:"small",summary:()=>e.jsxs(N.Summary.Row,{children:[e.jsx(N.Summary.Cell,{index:0,colSpan:5,children:e.jsx(ae,{strong:!0,children:"Total Base Amount"})}),e.jsx(N.Summary.Cell,{index:1,children:e.jsxs(ae,{strong:!0,children:["â‚¹",l.toLocaleString()]})})]})})})},{Text:Ue}=g,ze=({selectedExhibition:i,basicAmenitiesWithQuantities:o,totalStallArea:d,selectedExtraAmenities:l,extraAmenityQuantities:s,onExtraAmenitiesChange:n,onExtraAmenityQuantityChange:m,getSelectedExtraAmenities:b})=>e.jsxs(R,{title:"Stall Amenities",size:"small",style:{marginBottom:16},children:[i?.basicAmenities&&i.basicAmenities.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(g.Title,{level:5,style:{margin:0},children:e.jsxs(C,{children:[e.jsx("span",{children:"Included Basic Amenities"}),e.jsx(P,{color:"green",children:"Based on stall area"})]})}),e.jsxs(g.Text,{type:"secondary",children:["The following amenities are included based on your total stall area of ",d.toFixed(2)," sqm."]})]}),e.jsx(N,{dataSource:o.filter(a=>a.calculatedQuantity>0),columns:[{title:"Name",dataIndex:"name",key:"name",render:(a,p)=>e.jsxs(C,{children:[e.jsx(g.Text,{strong:!0,children:a}),e.jsx(P,{color:"blue",children:p.type})]})},{title:"Quantity",dataIndex:"calculatedQuantity",key:"calculatedQuantity",width:120,render:a=>e.jsxs(P,{color:"green",children:[a," ",a===1?"unit":"units"]})},{title:"Allocation",dataIndex:"perSqm",key:"perSqm",width:180,render:(a,p)=>e.jsx("div",{title:p.description,children:e.jsxs(g.Text,{type:"secondary",children:[e.jsx(Ne,{style:{marginRight:5}}),"1 ",p.quantity>1?`set of ${p.quantity}`:"unit"," per ",a," sqm"]})})},{title:"Status",key:"status",width:100,align:"right",render:()=>e.jsx(g.Text,{type:"success",children:"Included"})}],pagination:!1,size:"small",locale:{emptyText:e.jsx(g.Text,{children:"No basic amenities qualify based on the selected stall area."})}}),e.jsx(ce,{style:{margin:"16px 0"}})]}),i?.amenities&&i.amenities.length>0&&e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(g.Title,{level:5,style:{margin:0},children:e.jsxs(C,{children:[e.jsx("span",{children:"Additional Amenities"}),e.jsx(P,{color:"blue",children:"Optional"})]})}),e.jsx(g.Text,{type:"secondary",children:"Select any additional amenities for the booking."})]}),e.jsx(q,{mode:"multiple",placeholder:"Select amenities",style:{width:"100%",marginBottom:16},onChange:n,value:l,options:i?.amenities?.map(a=>({label:`${a.name} (${a.rate?`â‚¹${a.rate.toLocaleString()}`:"N/A"})`,value:a._id||a.id,key:a._id||a.id}))}),l.length>0&&e.jsxs("div",{style:{marginTop:16},children:[e.jsx(g.Text,{strong:!0,children:"Selected Amenities:"}),e.jsx(N,{dataSource:b(),columns:[{title:"Name",dataIndex:"name",key:"name",render:(a,p)=>e.jsxs(C,{align:"center",children:[e.jsx(g.Text,{strong:!0,children:a}),e.jsx(P,{color:"blue",children:p.type}),e.jsx(g.Text,{type:"secondary",style:{fontSize:"13px"},children:p.description||""})]})},{title:"Rate",dataIndex:"rate",key:"rate",width:120,align:"right",render:a=>e.jsxs(g.Text,{strong:!0,style:{color:"#1890ff"},children:["â‚¹",a.toLocaleString("en-IN")]})},{title:"Quantity",dataIndex:"quantity",key:"quantity",width:120,render:(a,p)=>e.jsx($e,{min:1,value:s[p.id]||1,onChange:c=>m(p.id,c||1),style:{width:"100%"}})},{title:"Total",key:"total",width:120,align:"right",render:(a,p)=>{const c=s[p.id]||1,T=p.rate*c;return e.jsxs(g.Text,{strong:!0,style:{color:"#1890ff"},children:["â‚¹",T.toLocaleString("en-IN")]})}}],pagination:!1,size:"small"})]})]}),!i?.basicAmenities?.length&&!i?.amenities?.length&&e.jsx(g.Text,{type:"secondary",children:"No amenities have been configured for this exhibition."})]}),{Text:A}=g,Le=({selectedExhibition:i,selectedDiscountId:o,onDiscountChange:d,calculateAmounts:l})=>{const s=l();return e.jsxs(R,{title:"Price Calculations",size:"small",style:{marginBottom:16},children:[e.jsxs(E,{gutter:[16,16],children:[e.jsx(S,{span:12,children:e.jsx(q,{placeholder:"Select discount",allowClear:!0,style:{width:"100%"},value:o,onChange:d,options:i?.discountConfig?.map(n=>({label:`${n.name} (${n.type==="percentage"?n.value+"%":"â‚¹"+n.value})${n.isActive?"":" - Inactive"}`,value:`${n.name}-${n.value}-${n.type}`,disabled:!n.isActive}))})}),e.jsx(S,{span:12,children:e.jsx("div",{style:{textAlign:"right"},children:e.jsx(A,{type:"secondary",children:"Discount Available"})})})]}),e.jsx("div",{style:{background:"#fafafa",padding:"16px",borderRadius:"8px",marginTop:"16px"},children:e.jsxs(C,{direction:"vertical",style:{width:"100%"},size:"small",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(A,{children:"Total Base Amount:"}),e.jsxs(A,{strong:!0,children:["â‚¹",s.baseAmount.toLocaleString()]})]}),s.selectedDiscount&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(A,{children:["Discount (",s.selectedDiscount.type==="percentage"?`${s.selectedDiscount.value}%`:`â‚¹${s.selectedDiscount.value.toLocaleString()}`,"):"]}),e.jsxs(A,{type:"danger",children:["-â‚¹",s.discountAmount.toLocaleString()]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(A,{children:"Amount after Discount:"}),e.jsxs(A,{children:["â‚¹",s.amountAfterDiscount.toLocaleString()]})]}),e.jsx(ce,{style:{margin:"8px 0"}}),s.taxes.map(n=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(A,{children:[n.name," (",n.rate,"%):"]}),e.jsxs(A,{children:["â‚¹",n.amount.toLocaleString()]})]},`tax-${n.name}`)),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"8px"},children:[e.jsx(A,{strong:!0,children:"Total Amount (incl. Taxes):"}),e.jsxs(A,{strong:!0,style:{color:"#1890ff",fontSize:"16px"},children:["â‚¹",s.totalAmount.toLocaleString()]})]})]})})]})},Re=i=>{if(!i)return 0;const o=i.shapeType||"rectangle";if(o==="rectangle")return i.width*i.height;if(o==="l-shape"&&i.lShape){const{rect1Width:d,rect1Height:l,rect2Width:s,rect2Height:n}=i.lShape;return d*l+s*n}return i.width*i.height},V=i=>{const o=Re(i.dimensions);return Math.round(i.ratePerSqm*o*100)/100},We=(i,o,d)=>{if(!d?.isActive)return 0;let l=0;if(d.type==="percentage")l=i*(Math.max(0,Math.min(100,d.value))/100);else{const s=i/o*d.value;l=Math.min(s,i)}return Math.round(l*100)/100},re=(i,o,d)=>{const l=i.reduce((c,T)=>c+V(T),0),s=o?.discountConfig?.find(c=>`${c.name}-${c.value}-${c.type}`===d&&c.isActive),n=s?s.type==="percentage"?Math.round(l*s.value/100*100)/100:Math.min(s.value,l):0,m=Math.round((l-n)*100)/100,b=o?.taxConfig?.filter(c=>c.isActive).map(c=>({name:c.name,rate:c.rate,amount:Math.round(m*c.rate/100*100)/100}))||[],a=b.reduce((c,T)=>c+T.amount,0),p=Math.round((m+a)*100)/100;return{baseAmount:l,selectedDiscount:s,discountAmount:n,amountAfterDiscount:m,taxes:b,totalTaxAmount:a,totalAmount:p}},Me=(i,o)=>i.map(d=>{const l=Math.floor(o/d.perSqm)*d.quantity;return{...d,calculatedQuantity:l>0?l:0,key:d._id||d.id}}),{Title:_e,Text:Qe}=g,Je=()=>{const[i]=x.useForm(),[o]=x.useForm(),[d,l]=f.useState(!1),[s,n]=f.useState([]),[m,b]=f.useState(!1),[a,p]=f.useState([]),[c,T]=f.useState(null),[D,Z]=f.useState(),[z,H]=f.useState([]),[W,O]=f.useState({}),[M,G]=f.useState([]),[de,K]=f.useState(0),$=ke(),k=oe(),{loading:ue}=L(t=>t.booking),{exhibitions:he=[],loading:me}=L(t=>t.exhibition),{exhibitors:U=[],loading:xe}=L(t=>t.exhibitor),{isAuthenticated:J}=L(t=>t.auth);f.useEffect(()=>{if(!J){w.error("Please login to create a booking"),$("/login");return}k(Te()),k(le({}))},[k,J,$]);const pe=async t=>{try{b(!0),i.setFieldValue("stallIds",[]),i.setFieldValue("discountId",void 0),i.setFieldValue("extraAmenities",[]),p([]),H([]),G([]),K(0),Z(void 0);const[r,h]=await Promise.all([se.getExhibition(t),se.getStalls(t)]);T(r.data);const y=h.data.stalls.filter(v=>v.status==="available");n(y)}catch(r){console.error("Failed to fetch exhibition data:",r),w.error("Failed to fetch exhibition data")}finally{b(!1)}},ge=t=>{const r=s.filter(y=>{const v=y._id||y.id;return v&&t.includes(v)});p(r);const h=r.reduce((y,v)=>y+ne(v.dimensions),0);if(K(h),c?.basicAmenities?.length){const y=Me(c.basicAmenities,h);G(y)}},ye=async t=>{try{const r=U.find(u=>u._id===t.exhibitorId);if(!r)throw new Error("Selected exhibitor not found");const h=c?.discountConfig?.find(u=>`${u.name}-${u.value}-${u.type}`===D),y=re(a,c,D),v=a.map(u=>{const I=u._id||u.id;if(!I)throw new Error(`Invalid stall ID for stall number ${u.number}`);return{stall:u,stallId:I,baseAmount:V(u)}}),X=v.reduce((u,{baseAmount:I})=>u+I,0),ee=v.map(({stall:u,stallId:I,baseAmount:Q})=>{const te=h?We(Q,X,h):0;return{stallId:I,number:u.number,baseAmount:Q,discount:h?{name:h.name,type:h.type,value:h.value,amount:te}:null,amountAfterDiscount:Math.round((Q-te)*100)/100}}),_={exhibitionId:t.exhibitionId,exhibitorId:t.exhibitorId,stallIds:ee.map(u=>u.stallId),customerName:r.contactPerson,customerEmail:r.email,customerPhone:r.phone,customerAddress:r.address||"N/A",customerGSTIN:r.gstNumber||"N/A",customerPAN:r.panNumber||"N/A",companyName:r.companyName,discount:h?{name:h.name,type:h.type,value:h.value}:null,amount:y.totalAmount,calculations:{stalls:ee,totalBaseAmount:X,totalDiscountAmount:y.discountAmount,totalAmountAfterDiscount:y.amountAfterDiscount,taxes:y.taxes,totalTaxAmount:y.totalTaxAmount,totalAmount:y.totalAmount}};M.length&&(_.basicAmenities=M.filter(u=>u.calculatedQuantity>0).map(u=>({name:u.name,type:u.type,perSqm:u.perSqm,quantity:u.quantity,calculatedQuantity:u.calculatedQuantity,description:u.description}))),z.length&&(_.extraAmenities=Y());const F=await k(Ie(_)).unwrap();k(ie.util.invalidateTags(["Invoice"])),F&&F.invoiceId?(w.success("Booking created successfully! Redirecting to invoice..."),setTimeout(()=>{$(`/invoice/${F.invoiceId}`)},2e3)):(w.success("Booking created successfully"),k(ie.util.invalidateTags(["Invoice"])),$("/bookings")),F&&F.warning&&w.warning(F.warning)}catch(r){console.error("Error creating booking:",r),w.error("Failed to create booking")}},be=t=>{Z(t),i.setFieldValue("discountId",t)},je=t=>{const r={...W};t.forEach(h=>{z.includes(h)||(r[h]=1)}),Object.keys(r).forEach(h=>{t.includes(h)||delete r[h]}),O(r),H(t)},fe=(t,r)=>{O(h=>({...h,[t]:r}))},Ae=t=>{i.setFieldValue("exhibitorId",t)},Y=()=>c?.amenities?.length?c.amenities.filter(t=>{const r=t._id||t.id;return r&&z.includes(r.toString())}).map(t=>{const r=(t._id||t.id).toString();return{id:r,name:t.name,type:t.type,rate:t.rate,description:t.description,quantity:W[r]||1}}):[],Se=()=>re(a,c,D),ve=he.filter(t=>t.status==="published"&&t.isActive).map(t=>({label:t.name,value:t._id||t.id})),we=U.map(t=>({label:`${t.companyName} (${t.contactPerson})`,value:t._id}));return e.jsxs("div",{style:{padding:"24px",maxWidth:"1000px",margin:"0 auto"},children:[e.jsxs(E,{gutter:[24,24],children:[e.jsx(S,{span:24,children:e.jsxs(C,{direction:"vertical",size:4,children:[e.jsx(_e,{level:2,style:{margin:0,color:"#1890ff"},children:"Create Booking"}),e.jsx(Qe,{type:"secondary",children:"Create a new stall booking with enhanced interface"})]})}),e.jsx(S,{span:24,children:e.jsx(R,{style:{borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:e.jsxs(x,{form:i,layout:"vertical",onFinish:ye,size:"large",children:[e.jsxs(E,{gutter:16,style:{marginBottom:24},children:[e.jsx(S,{span:12,children:e.jsx(x.Item,{name:"exhibitionId",label:"Exhibition",rules:[{required:!0,message:"Please select an exhibition"}],children:e.jsx(q,{placeholder:"Select exhibition",loading:me,options:ve,onChange:pe,style:{borderRadius:"8px"}})})}),e.jsx(S,{span:12,children:e.jsx(x.Item,{name:"exhibitorId",label:e.jsxs(C,{children:[e.jsx("span",{children:"Exhibitor"}),e.jsx(B,{type:"link",icon:e.jsx(Pe,{}),onClick:()=>l(!0),style:{padding:0,fontSize:"12px"},children:"Add New"})]}),rules:[{required:!0,message:"Please select an exhibitor"}],children:e.jsx(q,{showSearch:!0,placeholder:"Select exhibitor",loading:xe,options:we,style:{borderRadius:"8px"},filterOption:(t,r)=>(r?.label?.toString()??"").toLowerCase().includes(t.toLowerCase())})})})]}),e.jsx(E,{gutter:16,style:{marginBottom:24},children:e.jsx(S,{span:24,children:e.jsx(x.Item,{name:"stallIds",label:"Select Stalls",rules:[{required:!0,message:"Please select at least one stall"}],children:e.jsx(q,{mode:"multiple",placeholder:m?"Loading stalls...":"Select stalls",loading:m,onChange:ge,style:{borderRadius:"8px"},options:s.map(t=>{const r=ne(t.dimensions),h=t.dimensions.shapeType==="l-shape"?`L-Shape = ${r.toFixed(2)} sqm`:`${t.dimensions.width}m x ${t.dimensions.height}m = ${r.toFixed(2)} sqm`;return{label:`${t.number} (${h}) - â‚¹${t.ratePerSqm.toLocaleString()}/sq.m`,value:t._id||t.id}})})})})}),e.jsx(De,{selectedStalls:a,calculateBaseAmount:V}),a.length>0&&e.jsx(ze,{selectedExhibition:c,basicAmenitiesWithQuantities:M,totalStallArea:de,selectedExtraAmenities:z,extraAmenityQuantities:W,onExtraAmenitiesChange:je,onExtraAmenityQuantityChange:fe,getSelectedExtraAmenities:Y}),a.length>0&&e.jsx(Le,{selectedExhibition:c,selectedDiscountId:D,onDiscountChange:be,calculateAmounts:Se}),e.jsx(x.Item,{name:"discountId",style:{display:"none"},children:e.jsx("input",{type:"hidden"})}),e.jsx(E,{justify:"center",style:{marginTop:32},children:e.jsx(S,{children:e.jsxs(C,{size:"middle",children:[e.jsx(B,{onClick:()=>$("/bookings"),size:"large",style:{borderRadius:"8px",minWidth:"120px"},children:"Cancel"}),e.jsx(B,{type:"primary",htmlType:"submit",loading:ue,size:"large",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none",borderRadius:"8px",minWidth:"140px",boxShadow:"0 4px 15px 0 rgba(116, 79, 168, 0.75)"},children:"Create Booking"})]})})})]})})})]}),e.jsx(Be,{visible:d,onCancel:()=>{l(!1),o.resetFields()},onExhibitorAdded:Ae,form:o})]})};export{Je as default};
