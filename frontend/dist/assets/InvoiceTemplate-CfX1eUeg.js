import{j as e,a as p}from"./index-ZeXq6Cnq.js";import{r as b,i as G}from"./vendor-react-BNeW3y6d.js";const q=({booking:s})=>{var f,L,E;const[A,r]=b.useState(null),[C,y]=b.useState(!0),d=G(a=>a.settings.settings);b.useEffect(()=>{(async()=>{y(!0);try{if(s.exhibitionId.headerLogo){const l=s.exhibitionId.headerLogo;r(`${p.defaults.baseURL}/public/uploads/${l}`),console.log("Using exhibition header logo:",l)}else if(d!=null&&d.logo){const l=d.logo;r(`${p.defaults.baseURL}/public/uploads/${l}`),console.log("Using global settings logo:",l)}else{const l=`${p.defaults.baseURL}/public/logo`;r(l),console.log("Using public logo endpoint:",l)}}catch(l){console.error("Error loading logo:",l),r(null)}finally{y(!1)}})()},[s.exhibitionId.headerLogo,d==null?void 0:d.logo]);const O=()=>{const a=new Date(s.exhibitionId.startDate||""),l=new Date(s.exhibitionId.endDate||""),n={};let i=new Date(a);for(;i<=l;){const c=i.toLocaleString("default",{month:"short",year:"numeric"});n[c]||(n[c]=[]),n[c].push(i.getDate().toString().padStart(2,"0")),i=new Date(i),i.setDate(i.getDate()+1)}const I=Object.entries(n).map(([c,F])=>`${F.join(", ")} ${c}`);return`${s.exhibitionId.name||"ABSE"} (${I.join(" & ")})`},S=a=>{const l=new Date(a);return{date:l.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}),time:l.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}},g=s.stallIds.map((a,l)=>{var c;const n=a,i=a.dimensions.width*a.dimensions.height,I=i*a.ratePerSqm;return{key:a._id,sn:l+1,stallNo:a.number,stallType:((c=n.stallTypeId)==null?void 0:c.name)||"Standard",dimensions:`${a.dimensions.width}x${a.dimensions.height}m`,area:i.toFixed(0),rate:a.ratePerSqm.toFixed(0),amount:I}}),m=g.reduce((a,l)=>a+l.amount,0),h=s.calculations,N=((f=h.stalls[0])==null?void 0:f.discount)!==void 0&&((L=h.stalls[0])==null?void 0:L.discount)!==null,t=N?(E=h.stalls[0])==null?void 0:E.discount:null,v=(t==null?void 0:t.type)||"percentage",o=(t==null?void 0:t.value)||0;let x=0;N&&o>0&&(v==="percentage"?x=Math.round(m*o/100*100)/100:v==="fixed"&&(x=Math.min(o,m)));const u=m-x,D=h.taxes.find(a=>a.name.includes("GST")),w=D?D.rate:18,T=Math.round(u*w/100*100)/100,R=u+T,P=m,j=x,B=u,$=T,M=R;return e.jsx("div",{className:"invoice-container",children:e.jsxs("div",{className:"proforma-invoice",children:[e.jsxs("div",{className:"header-section",children:[e.jsx("div",{className:"logo-cell",children:C?e.jsx("div",{className:"logo-loading",children:"Loading..."}):A?e.jsx("img",{src:A,alt:s.exhibitionId.companyName,className:"logo-image",onError:()=>r(null)}):s.exhibitionId.companyName}),e.jsxs("div",{className:"title-company",children:[e.jsx("div",{className:"title-cell",children:"PROFORMA INVOICE"}),e.jsx("div",{className:"company-cell",children:s.exhibitionId.companyName})]})]}),e.jsxs("div",{className:"bill-to-section",children:[e.jsx("div",{className:"bill-to-cell",children:"Bill To"}),e.jsxs("div",{className:"bill-to-info",children:[e.jsxs("div",{className:"info-row",children:[e.jsx("div",{className:"label-cell",children:"Company Name"}),e.jsx("div",{className:"value-cell",children:s.companyName}),e.jsx("div",{className:"date-label-cell",children:"Date"}),e.jsx("div",{className:"date-value-cell",children:S(s.createdAt).date})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("div",{className:"label-cell",children:"Phone No."}),e.jsx("div",{className:"value-cell",children:s.customerPhone}),e.jsx("div",{className:"date-label-cell",children:"Time"}),e.jsx("div",{className:"date-value-cell",children:S(s.createdAt).time})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("div",{className:"label-cell",children:"GST No."}),e.jsx("div",{className:"value-cell",children:s.customerGSTIN}),e.jsx("div",{className:"date-label-cell",children:"Invoice No"}),e.jsx("div",{className:"date-value-cell",children:s.invoiceNumber})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("div",{className:"label-cell",children:"Address"}),e.jsx("div",{className:"value-cell",children:s.customerAddress})]})]})]}),e.jsxs("div",{className:"expo-venue-section",children:[e.jsxs("div",{className:"expo-column",children:[e.jsx("div",{className:"heading",children:"Expo Name"}),e.jsx("div",{className:"content",children:O()})]}),e.jsxs("div",{className:"venue-column",children:[e.jsx("div",{className:"heading",children:"Venue"}),e.jsx("div",{className:"content",children:s.exhibitionId.venue})]})]}),e.jsx("div",{className:"section-header stall-summary-header",children:"Stall Summary"}),e.jsxs("div",{className:"stall-table",children:[e.jsxs("div",{className:"stall-header",children:[e.jsx("div",{className:"stall-header-cell",children:"S/N"}),e.jsx("div",{className:"stall-header-cell",children:"Stall No."}),e.jsx("div",{className:"stall-header-cell",children:"Stall Type"}),e.jsx("div",{className:"stall-header-cell",children:"Dimensions"}),e.jsx("div",{className:"stall-header-cell",children:"Area (sqm)"}),e.jsx("div",{className:"stall-header-cell",children:"Rate (per sqm)"}),e.jsx("div",{className:"stall-header-cell",children:"Amount"})]}),g.map(a=>e.jsxs("div",{className:"stall-row",children:[e.jsx("div",{className:"stall-cell",children:a.sn}),e.jsx("div",{className:"stall-cell",children:a.stallNo}),e.jsx("div",{className:"stall-cell",children:a.stallType}),e.jsx("div",{className:"stall-cell",children:a.dimensions}),e.jsx("div",{className:"stall-cell",children:a.area}),e.jsx("div",{className:"stall-cell",children:Number(a.rate).toLocaleString("en-IN")}),e.jsx("div",{className:"stall-cell",children:a.amount.toLocaleString("en-IN")})]},a.key))]}),e.jsx("div",{className:"section-header",children:"Calculation Summary"}),e.jsxs("div",{className:"calc-table",children:[e.jsxs("div",{className:"calc-row",children:[e.jsx("div",{className:"calc-label",children:"Total Basic Amount"}),e.jsxs("div",{className:"calc-value",children:["₹",P.toLocaleString("en-IN")]})]}),N&&j>0&&e.jsxs("div",{className:"calc-row",children:[e.jsx("div",{className:"calc-label",children:v==="percentage"?`Discount (${o}%)`:`Discount (Fixed ₹${o.toLocaleString("en-IN")})`}),e.jsxs("div",{className:"calc-value",children:["-₹",j.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"calc-row",children:[e.jsx("div",{className:"calc-label",children:N&&j>0?"Amount after Discount":"Net Amount"}),e.jsxs("div",{className:"calc-value",children:["₹",B.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"calc-row",children:[e.jsxs("div",{className:"calc-label",children:["GST (",w,"%)"]}),e.jsxs("div",{className:"calc-value",children:["₹",$.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"calc-row total-row",children:[e.jsx("div",{className:"calc-label",children:"Total Amount"}),e.jsxs("div",{className:"calc-value",children:["₹",M.toLocaleString("en-IN")]})]})]}),e.jsxs("div",{className:"details-section",children:[e.jsxs("div",{className:"bank-details",children:[e.jsx("div",{className:"details-header",children:"Bank Details"}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"Bank Name"}),e.jsx("div",{className:"detail-value",children:s.exhibitionId.bankName})]}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"Account No."}),e.jsx("div",{className:"detail-value",children:s.exhibitionId.bankAccount})]}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"Name"}),e.jsx("div",{className:"detail-value",children:s.exhibitionId.bankAccountName})]}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"Branch"}),e.jsx("div",{className:"detail-value",children:s.exhibitionId.bankBranch})]}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"IFSC CODE"}),e.jsx("div",{className:"detail-value",children:s.exhibitionId.bankIFSC})]})]}),e.jsxs("div",{className:"company-details",children:[e.jsx("div",{className:"details-header",children:"Company Details"}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"CIN No."}),e.jsx("div",{className:"detail-value",children:s.exhibitionId.companyCIN})]}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"Pan No."}),e.jsx("div",{className:"detail-value",children:s.exhibitionId.companyPAN})]}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"SAC CODE"}),e.jsx("div",{className:"detail-value",children:s.exhibitionId.companySAC})]}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"GST No."}),e.jsx("div",{className:"detail-value",children:s.exhibitionId.companyGST})]}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"Email"}),e.jsx("div",{className:"detail-value",children:s.exhibitionId.companyEmail})]}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"Website"}),e.jsx("div",{className:"detail-value",children:s.exhibitionId.companyWebsite})]}),e.jsxs("div",{className:"details-row",children:[e.jsx("div",{className:"detail-label",children:"Address"}),e.jsx("div",{className:"detail-value",children:s.exhibitionId.companyAddress})]})]})]}),e.jsxs("div",{className:"instruction-section",children:[e.jsx("div",{className:"instruction-header",children:"PI Instruction"}),e.jsx("div",{className:"instruction-content",dangerouslySetInnerHTML:{__html:s.exhibitionId.piInstructions||"THIS INVOICE IS PROFORMA INVOICE DO NOT CLAIM ANY GOVERNMENT CREDITS ON THIS PROFORMA INVOICE. FINAL INVOICE WOULD BE RAISED AFTER 100% PAYMENT."}})]}),e.jsxs("div",{className:"instruction-section",children:[e.jsx("div",{className:"instruction-header",children:"Terms & Conditions"}),e.jsx("div",{className:"instruction-content",dangerouslySetInnerHTML:{__html:s.exhibitionId.termsAndConditions||'All cheques / Drafts should be payable to "AAKAR EXHIBITION Private Limited". This bill is payable as per agreed terms. All delayed payments will be charged interest @ 18% p.a. All Complaints / Disputes, if any on this bill should reach us within 15 days on receipt of bill, failing which the bill becomes fully payable. Subject to Ahmedabad Jurisdiction.'}})]}),e.jsx("div",{className:"signature-section",children:e.jsx("div",{className:"signature-text",children:"Authorised Signature"})})]})})};export{q as I};
