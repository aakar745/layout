import{r as e,j as l}from"./vendor-others-aeGeD6f-.js";import{a as s}from"./vendor-react-i7tvbPTl.js";import{a}from"./services-DHEt1Qtz.js";const i=({booking:i})=>{var c,d,n;const[t,r]=e.useState(null),[o,m]=e.useState(!0),h=s((e=>e.settings.settings));e.useEffect((()=>{(async()=>{m(!0);try{if(i.exhibitionId.headerLogo){const e=i.exhibitionId.headerLogo;r(`${a.defaults.baseURL}/public/uploads/${e}`)}else if(null==h?void 0:h.logo){const e=h.logo;r(`${a.defaults.baseURL}/public/uploads/${e}`)}else{const e=`${a.defaults.baseURL}/public/logo`;r(e)}}catch(e){r(null)}finally{m(!1)}})()}),[i.exhibitionId.headerLogo,null==h?void 0:h.logo]);const N=e=>{const l=new Date(e);return{date:l.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}),time:l.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}},v=i.stallIds.map(((e,l)=>{var s;const a=e,i=e.dimensions.width*e.dimensions.height,c=i*e.ratePerSqm;return{key:e._id,sn:l+1,stallNo:e.number,stallType:(null==(s=a.stallTypeId)?void 0:s.name)||"Standard",dimensions:`${e.dimensions.width}x${e.dimensions.height}m`,area:i.toFixed(0),rate:e.ratePerSqm.toFixed(0),amount:c}})),x=v.reduce(((e,l)=>e+l.amount),0),j=i.calculations,u=void 0!==(null==(c=j.stalls[0])?void 0:c.discount)&&null!==(null==(d=j.stalls[0])?void 0:d.discount),b=u?null==(n=j.stalls[0])?void 0:n.discount:null,I=(null==b?void 0:b.type)||"percentage",p=(null==b?void 0:b.value)||0;let g=0;u&&p>0&&("percentage"===I?g=Math.round(x*p/100*100)/100:"fixed"===I&&(g=Math.min(p,x)));const S=x-g,y=j.taxes.find((e=>e.name.includes("GST"))),A=y?y.rate:18,w=Math.round(S*A/100*100)/100,f=x,T=g,D=S,L=w,C=S+w;return l.jsx("div",{className:"invoice-container",children:l.jsxs("div",{className:"proforma-invoice",children:[l.jsxs("div",{className:"header-section",children:[l.jsx("div",{className:"logo-cell",children:o?l.jsx("div",{className:"logo-loading",children:"Loading..."}):t?l.jsx("img",{src:t,alt:i.exhibitionId.companyName,className:"logo-image",onError:()=>r(null)}):i.exhibitionId.companyName}),l.jsxs("div",{className:"title-company",children:[l.jsx("div",{className:"title-cell",children:"PROFORMA INVOICE"}),l.jsx("div",{className:"company-cell",children:i.exhibitionId.companyName})]})]}),l.jsxs("div",{className:"bill-to-section",children:[l.jsx("div",{className:"bill-to-cell",children:"Bill To"}),l.jsxs("div",{className:"bill-to-info",children:[l.jsxs("div",{className:"info-row",children:[l.jsx("div",{className:"label-cell",children:"Company Name"}),l.jsx("div",{className:"value-cell",children:i.companyName}),l.jsx("div",{className:"date-label-cell",children:"Date"}),l.jsx("div",{className:"date-value-cell",children:N(i.createdAt).date})]}),l.jsxs("div",{className:"info-row",children:[l.jsx("div",{className:"label-cell",children:"Phone No."}),l.jsx("div",{className:"value-cell",children:i.customerPhone}),l.jsx("div",{className:"date-label-cell",children:"Time"}),l.jsx("div",{className:"date-value-cell",children:N(i.createdAt).time})]}),l.jsxs("div",{className:"info-row",children:[l.jsx("div",{className:"label-cell",children:"GST No."}),l.jsx("div",{className:"value-cell",children:i.customerGSTIN}),l.jsx("div",{className:"date-label-cell",children:"Invoice No"}),l.jsx("div",{className:"date-value-cell",children:i.invoiceNumber})]}),l.jsxs("div",{className:"info-row",children:[l.jsx("div",{className:"label-cell",children:"Address"}),l.jsx("div",{className:"value-cell",children:i.customerAddress})]})]})]}),l.jsxs("div",{className:"expo-venue-section",children:[l.jsxs("div",{className:"expo-column",children:[l.jsx("div",{className:"heading",children:"Expo Name"}),l.jsx("div",{className:"content",children:(()=>{const e=new Date(i.exhibitionId.startDate||""),l=new Date(i.exhibitionId.endDate||""),s={};let a=new Date(e);for(;a<=l;){const e=a.toLocaleString("default",{month:"short",year:"numeric"});s[e]||(s[e]=[]),s[e].push(a.getDate().toString().padStart(2,"0")),a=new Date(a),a.setDate(a.getDate()+1)}const c=Object.entries(s).map((([e,l])=>`${l.join(", ")} ${e}`));return`${i.exhibitionId.name||"ABSE"} (${c.join(" & ")})`})()})]}),l.jsxs("div",{className:"venue-column",children:[l.jsx("div",{className:"heading",children:"Venue"}),l.jsx("div",{className:"content",children:i.exhibitionId.venue})]})]}),l.jsx("div",{className:"section-header stall-summary-header",children:"Stall Summary"}),l.jsxs("div",{className:"stall-table",children:[l.jsxs("div",{className:"stall-header",children:[l.jsx("div",{className:"stall-header-cell",children:"S/N"}),l.jsx("div",{className:"stall-header-cell",children:"Stall No."}),l.jsx("div",{className:"stall-header-cell",children:"Stall Type"}),l.jsx("div",{className:"stall-header-cell",children:"Dimensions"}),l.jsx("div",{className:"stall-header-cell",children:"Area (sqm)"}),l.jsx("div",{className:"stall-header-cell",children:"Rate (per sqm)"}),l.jsx("div",{className:"stall-header-cell",children:"Amount"})]}),v.map((e=>l.jsxs("div",{className:"stall-row",children:[l.jsx("div",{className:"stall-cell",children:e.sn}),l.jsx("div",{className:"stall-cell",children:e.stallNo}),l.jsx("div",{className:"stall-cell",children:e.stallType}),l.jsx("div",{className:"stall-cell",children:e.dimensions}),l.jsx("div",{className:"stall-cell",children:e.area}),l.jsx("div",{className:"stall-cell",children:Number(e.rate).toLocaleString("en-IN")}),l.jsx("div",{className:"stall-cell",children:e.amount.toLocaleString("en-IN")})]},e.key)))]}),l.jsx("div",{className:"section-header",children:"Calculation Summary"}),l.jsxs("div",{className:"calc-table",children:[l.jsxs("div",{className:"calc-row",children:[l.jsx("div",{className:"calc-label",children:"Total Basic Amount"}),l.jsxs("div",{className:"calc-value",children:["₹",f.toLocaleString("en-IN")]})]}),u&&T>0&&l.jsxs("div",{className:"calc-row",children:[l.jsx("div",{className:"calc-label",children:"percentage"===I?`Discount (${p}%)`:`Discount (Fixed ₹${p.toLocaleString("en-IN")})`}),l.jsxs("div",{className:"calc-value",children:["-₹",T.toLocaleString("en-IN")]})]}),l.jsxs("div",{className:"calc-row",children:[l.jsx("div",{className:"calc-label",children:u&&T>0?"Amount after Discount":"Net Amount"}),l.jsxs("div",{className:"calc-value",children:["₹",D.toLocaleString("en-IN")]})]}),l.jsxs("div",{className:"calc-row",children:[l.jsxs("div",{className:"calc-label",children:["GST (",A,"%)"]}),l.jsxs("div",{className:"calc-value",children:["₹",L.toLocaleString("en-IN")]})]}),l.jsxs("div",{className:"calc-row total-row",children:[l.jsx("div",{className:"calc-label",children:"Total Amount"}),l.jsxs("div",{className:"calc-value",children:["₹",C.toLocaleString("en-IN")]})]})]}),l.jsxs("div",{className:"details-section",children:[l.jsxs("div",{className:"bank-details",children:[l.jsx("div",{className:"details-header",children:"Bank Details"}),l.jsxs("div",{className:"details-row",children:[l.jsx("div",{className:"detail-label",children:"Bank Name"}),l.jsx("div",{className:"detail-value",children:i.exhibitionId.bankName})]}),l.jsxs("div",{className:"details-row",children:[l.jsx("div",{className:"detail-label",children:"Account No."}),l.jsx("div",{className:"detail-value",children:i.exhibitionId.bankAccount})]}),l.jsxs("div",{className:"details-row",children:[l.jsx("div",{className:"detail-label",children:"Name"}),l.jsx("div",{className:"detail-value",children:i.exhibitionId.bankAccountName})]}),l.jsxs("div",{className:"details-row",children:[l.jsx("div",{className:"detail-label",children:"Branch"}),l.jsx("div",{className:"detail-value",children:i.exhibitionId.bankBranch})]}),l.jsxs("div",{className:"details-row",children:[l.jsx("div",{className:"detail-label",children:"IFSC CODE"}),l.jsx("div",{className:"detail-value",children:i.exhibitionId.bankIFSC})]})]}),l.jsxs("div",{className:"company-details",children:[l.jsx("div",{className:"details-header",children:"Company Details"}),l.jsxs("div",{className:"details-row",children:[l.jsx("div",{className:"detail-label",children:"CIN No."}),l.jsx("div",{className:"detail-value",children:i.exhibitionId.companyCIN})]}),l.jsxs("div",{className:"details-row",children:[l.jsx("div",{className:"detail-label",children:"Pan No."}),l.jsx("div",{className:"detail-value",children:i.exhibitionId.companyPAN})]}),l.jsxs("div",{className:"details-row",children:[l.jsx("div",{className:"detail-label",children:"SAC CODE"}),l.jsx("div",{className:"detail-value",children:i.exhibitionId.companySAC})]}),l.jsxs("div",{className:"details-row",children:[l.jsx("div",{className:"detail-label",children:"GST No."}),l.jsx("div",{className:"detail-value",children:i.exhibitionId.companyGST})]}),l.jsxs("div",{className:"details-row",children:[l.jsx("div",{className:"detail-label",children:"Email"}),l.jsx("div",{className:"detail-value",children:i.exhibitionId.companyEmail})]}),l.jsxs("div",{className:"details-row",children:[l.jsx("div",{className:"detail-label",children:"Website"}),l.jsx("div",{className:"detail-value",children:i.exhibitionId.companyWebsite})]}),l.jsxs("div",{className:"details-row",children:[l.jsx("div",{className:"detail-label",children:"Address"}),l.jsx("div",{className:"detail-value",children:i.exhibitionId.companyAddress})]})]})]}),l.jsxs("div",{className:"instruction-section",children:[l.jsx("div",{className:"instruction-header",children:"PI Instruction"}),l.jsx("div",{className:"instruction-content",dangerouslySetInnerHTML:{__html:i.exhibitionId.piInstructions||"THIS INVOICE IS PROFORMA INVOICE DO NOT CLAIM ANY GOVERNMENT CREDITS ON THIS PROFORMA INVOICE. FINAL INVOICE WOULD BE RAISED AFTER 100% PAYMENT."}})]}),l.jsxs("div",{className:"instruction-section",children:[l.jsx("div",{className:"instruction-header",children:"Terms & Conditions"}),l.jsx("div",{className:"instruction-content",dangerouslySetInnerHTML:{__html:i.exhibitionId.termsAndConditions||'All cheques / Drafts should be payable to "AAKAR EXHIBITION Private Limited". This bill is payable as per agreed terms. All delayed payments will be charged interest @ 18% p.a. All Complaints / Disputes, if any on this bill should reach us within 15 days on receipt of bill, failing which the bill becomes fully payable. Subject to Ahmedabad Jurisdiction.'}})]}),l.jsx("div",{className:"signature-section",children:l.jsx("div",{className:"signature-text",children:"Authorised Signature"})})]})})};export{i as I};
