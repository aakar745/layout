import{A as $,B as A,C as N,j as e,x as U,w as L}from"./index-aoH9EzMk.js";import{aX as V,u as M,F as H,p as W,r as m,ab as d,ad as X,a4 as F,T as O,a9 as c,aa as i,S as g,av as _,e as x,as as q,D as v,ac as p,n as G,a3 as J,i as y,ay as K,bC as Q,bu as Z,h as R,aC as ee,O as te,P as se,bU as ae,A as ie,l as ne,bz as re}from"./vendor-Be5M1UDi.js";import"./apis-CU9I9MMq.js";import"./canvas-C-A9eff5.js";const{Title:I,Text:a,Paragraph:S}=O,k=()=>{const o=M();return e.jsxs("div",{style:{marginBottom:"24px",position:"sticky",top:"16px",zIndex:10},children:[e.jsx(y,{icon:e.jsx(re,{}),onClick:()=>o("/exhibition"),type:"default",size:"large",style:{borderRadius:"8px",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",background:"white",borderColor:"transparent",fontWeight:500,padding:"0 16px",height:"42px",display:"flex",alignItems:"center",transition:"all 0.3s ease"},className:"back-button-hover",children:e.jsx("span",{style:{marginLeft:8},children:"Back to List"})}),e.jsx("style",{children:`
        .back-button-hover:hover {
          transform: translateX(-5px);
          box-shadow: 0 4px 12px rgba(0,0,0,0.1);
          background: #f0f5ff;
          border-color: #d6e4ff;
        }
      `})]})},xe=()=>{const{id:o}=V(),E=M(),h=H(),{currentExhibition:t,halls:Y,stalls:C,loading:T}=W(s=>s.exhibition),[B,j]=m.useState(0);m.useEffect(()=>{o&&(h($(o)),h(A(o)),h(N({exhibitionId:o})))},[o,h]),m.useEffect(()=>{t&&P()},[t]);const u=()=>{if(!t)return{hallCount:0,stallCount:0,bookedStallCount:0,availableStallCount:0};const s=Y.length||0;let n=C.length||0,r=C.filter(l=>l.status==="booked"||l.status==="reserved").length;return n===0&&(t.stalls&&t.stalls.length>0?(n=t.stalls.length,r=t.stalls.filter(l=>l.status==="booked"||l.status==="reserved").length):(n=t.stallCount||0,r=t.bookedStallCount||0)),{hallCount:s,stallCount:n,bookedStallCount:r,availableStallCount:n-r}},P=()=>{if(!t)return 0;const s=new Date,n=new Date(t.startDate),r=new Date(t.endDate);if(s<n)return j(0);if(s>r)return j(100);const l=r.getTime()-n.getTime(),b=s.getTime()-n.getTime();j(Math.round(b/l*100))},D=s=>{switch(s.toLowerCase()){case"published":return"#52c41a";case"draft":return"#faad14";case"completed":return"#1890ff";default:return"#d9d9d9"}},z=()=>{if(!t)return{text:"",count:0,isPast:!1};const s=new Date,n=new Date(t.startDate),r=new Date(t.endDate);return s>r?{text:"Ended",count:Math.ceil((s.getTime()-r.getTime())/864e5),isPast:!0}:s>=n&&s<=r?{text:"Days Remaining",count:Math.ceil((r.getTime()-s.getTime())/864e5),isPast:!1}:{text:"Days Until Start",count:Math.ceil((n.getTime()-s.getTime())/(1e3*60*60*24)),isPast:!1}},w=s=>{E(L(t,s))};if(T)return e.jsxs("div",{style:{padding:"24px"},children:[e.jsx(k,{}),e.jsx(d,{children:e.jsx(X,{active:!0,avatar:!0,paragraph:{rows:6}})})]});if(!t)return e.jsxs("div",{style:{padding:"24px"},children:[e.jsx(k,{}),e.jsx(d,{children:e.jsxs("div",{style:{textAlign:"center",padding:"40px 0"},children:[e.jsx(F,{style:{fontSize:"48px",color:"#d9d9d9",marginBottom:"16px"}}),e.jsx(I,{level:4,children:"Exhibition not found"}),e.jsx(S,{type:"secondary",children:"The exhibition you are looking for does not exist or has been removed."})]})})]});const f=z();return e.jsxs("div",{style:{padding:"24px",background:"#f5f7fa",minHeight:"calc(100vh - 64px)"},children:[e.jsx(k,{}),e.jsx(d,{className:"exhibition-header-card",style:{marginBottom:"24px",borderRadius:"12px",overflow:"hidden"},bodyStyle:{padding:"0"},children:e.jsx("div",{style:{background:"linear-gradient(135deg, #1a365d 0%, #44337a 100%)",padding:"40px 24px",position:"relative"},children:e.jsxs(c,{gutter:[24,24],align:"middle",children:[e.jsxs(i,{xs:24,md:16,children:[e.jsx(I,{level:2,style:{color:"white",marginBottom:"8px",marginTop:0},children:t.name}),e.jsx(S,{style:{color:"rgba(255, 255, 255, 0.8)",fontSize:"16px",marginBottom:"24px"},children:t.description}),e.jsxs(g,{split:e.jsx(v,{type:"vertical",style:{background:"rgba(255,255,255,0.3)"}}),children:[e.jsxs(g,{children:[e.jsx(_,{style:{color:"rgba(255,255,255,0.8)"}}),e.jsxs(a,{style:{color:"rgba(255,255,255,0.8)"},children:[x(t.startDate).format("MMM D, YYYY")," - ",x(t.endDate).format("MMM D, YYYY")]})]}),t.venue&&e.jsxs(g,{children:[e.jsx(q,{style:{color:"rgba(255,255,255,0.8)"}}),e.jsx(a,{style:{color:"rgba(255,255,255,0.8)"},children:t.venue})]})]})]}),e.jsx(i,{xs:24,md:8,children:e.jsxs(d,{style:{borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",position:"relative",overflow:"visible"},children:[e.jsx("div",{style:{position:"absolute",top:"-12px",right:"-12px",zIndex:2,background:D(t.status),color:"white",padding:"4px 12px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",boxShadow:"0 2px 6px rgba(0,0,0,0.15)"},children:t.status.toUpperCase()}),e.jsx(p,{title:f.text,value:f.count,suffix:"days",valueStyle:{color:f.isPast?"#8c8c8c":"#1890ff",fontWeight:600},prefix:e.jsx(G,{})}),e.jsx(v,{style:{margin:"16px 0"}}),e.jsx("div",{style:{marginBottom:"8px"},children:e.jsx(a,{type:"secondary",children:"Exhibition Progress"})}),e.jsx(J,{percent:B,status:B===100?"success":"active",strokeColor:{"0%":"#108ee9","100%":"#87d068"}})]})})]})})}),e.jsxs(c,{gutter:[16,16],style:{marginBottom:"24px"},children:[e.jsx(i,{xs:24,sm:8,children:e.jsx(y,{type:"primary",icon:e.jsx(K,{}),onClick:()=>w(`${o}/layout`),block:!0,size:"large",style:{height:"48px"},children:"Manage Layout"})}),e.jsx(i,{xs:24,sm:8,children:e.jsx(y,{icon:e.jsx(Q,{}),onClick:()=>w(`${o}/edit`),block:!0,size:"large",style:{height:"48px"},children:"Edit Exhibition"})}),e.jsx(i,{xs:24,sm:8,children:e.jsx(y,{icon:e.jsx(Z,{}),onClick:()=>window.open(U(t),"_blank"),block:!0,size:"large",style:{height:"48px"},disabled:t.status!=="published",children:"View Public Page"})})]}),e.jsxs(c,{gutter:[24,24],children:[e.jsx(i,{xs:24,lg:16,children:e.jsxs(d,{title:"Exhibition Details",style:{borderRadius:"12px",height:"100%"},children:[e.jsxs(c,{gutter:[24,24],children:[e.jsxs(i,{xs:24,sm:12,children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx(a,{type:"secondary",style:{display:"block",marginBottom:"8px"},children:"Start Date"}),e.jsx(a,{strong:!0,style:{fontSize:"16px"},children:x(t.startDate).format("MMMM D, YYYY")})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx(a,{type:"secondary",style:{display:"block",marginBottom:"8px"},children:"End Date"}),e.jsx(a,{strong:!0,style:{fontSize:"16px"},children:x(t.endDate).format("MMMM D, YYYY")})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx(a,{type:"secondary",style:{display:"block",marginBottom:"8px"},children:"Created At"}),e.jsx(a,{strong:!0,style:{fontSize:"16px"},children:x(t.createdAt).format("MMMM D, YYYY")})]})]}),e.jsxs(i,{xs:24,sm:12,children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx(a,{type:"secondary",style:{display:"block",marginBottom:"8px"},children:"Status"}),e.jsx(R,{color:D(t.status),style:{padding:"4px 12px",borderRadius:"4px",fontSize:"14px"},children:t.status.toUpperCase()})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx(a,{type:"secondary",style:{display:"block",marginBottom:"8px"},children:"Active Status"}),e.jsx(R,{color:t.isActive?"#52c41a":"#f5222d",style:{padding:"4px 12px",borderRadius:"4px",fontSize:"14px"},children:t.isActive?"ACTIVE":"INACTIVE"})]}),t.venue&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx(a,{type:"secondary",style:{display:"block",marginBottom:"8px"},children:"Venue"}),e.jsx(a,{strong:!0,style:{fontSize:"16px"},children:t.venue})]})]})]}),e.jsx(v,{}),e.jsxs("div",{children:[e.jsx(a,{type:"secondary",style:{display:"block",marginBottom:"8px"},children:"Description"}),e.jsx(S,{children:t.description||"No description provided."})]})]})}),e.jsxs(i,{xs:24,lg:8,children:[e.jsx(d,{title:"Exhibition Stats",style:{borderRadius:"12px",marginBottom:"24px"},children:e.jsxs(c,{gutter:[16,24],children:[e.jsx(i,{span:12,children:e.jsx(p,{title:"Halls",value:u().hallCount,prefix:e.jsx(ee,{})})}),e.jsx(i,{span:12,children:e.jsx(p,{title:"Stalls",value:u().stallCount,prefix:e.jsx(te,{})})}),e.jsx(i,{span:12,children:e.jsx(p,{title:"Booked Stalls",value:u().bookedStallCount,prefix:e.jsx(se,{})})}),e.jsx(i,{span:12,children:e.jsx(p,{title:"Available Stalls",value:u().availableStallCount,prefix:e.jsx(ae,{})})})]})}),e.jsx(d,{title:"Created By",style:{borderRadius:"12px"},children:t.createdBy?e.jsxs(g,{children:[e.jsx(ie,{icon:e.jsx(ne,{})}),e.jsx(a,{children:t.createdByName||"Administrator"})]}):e.jsx(a,{type:"secondary",children:"Information not available"})})]})]})]})};export{xe as default};
