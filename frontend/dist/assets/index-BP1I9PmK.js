const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-DL-eelry.js","assets/vendor-react-BNeW3y6d.js","assets/vendor-antd-DhcJxEc5.js","assets/vendor-utils-j652IAQy.js","assets/vendor-styling-BBrlYwaV.js","assets/vendor-canvas-BRbMLhVA.js","assets/Dashboard-CUgo7HtP.css","assets/Dashboard-1w7ThspS.js","assets/Bookings-s8adGA61.js","assets/BookingDetails-DXSRLoHX.js","assets/Profile-CE17Aqxh.js","assets/InvoiceDetails-B3iqPApu.js","assets/InvoiceTemplate-czfGRThk.js","assets/InvoiceTemplate-BaZgAriD.css","assets/Support-C4PUXcG1.js","assets/Profile-B-pu6AYg.js","assets/Settings-9DVnS3_I.js","assets/index-BUHaTf_C.js","assets/reduxHooks-D3iepLCM.js","assets/index-CpTJ6nQu.js","assets/index-xLzoI74h.js","assets/index-D9ov2tDF.js","assets/index-DauFcO_k.js","assets/ExhibitionForm-zPlnMTSr.js","assets/index-BJOkrlrN.js","assets/edit-CdDdkDG4.js","assets/index-Ch_tAd4A.js","assets/index-YK0oBO-6.js","assets/index-BaQP7GYl.js","assets/index-DsO6UQTd.js","assets/index-D06dNjNz.js","assets/index-vzguTJo1.js","assets/vendor-export-CrAKd1if.js","assets/index-8on0sh1I.js","assets/index-C7XVPPxK.js","assets/index-Bxg61e_I.js","assets/index-CMAPMNew.js","assets/index-f_XpeFrr.css","assets/index-C_-o9WQR.js","assets/index-ySuoVAwO.js","assets/index-D41rIQal.js","assets/index-XVcQs4cz.css","assets/index-BICjc9kl.js"])))=>i.map(i=>d[i]);
var ia=Object.defineProperty;var oa=(n,e,r)=>e in n?ia(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r;var Ws=(n,e,r)=>oa(n,typeof e!="symbol"?e+"":e,r);import{r as h,c as aa,f as re,h as ze,e as la,g as ca,u as He,i as Ne,j as ht,k as Ui,R as Ie,L as nt,l as Vi,B as da,m as ua,n as ne,N as Ss,w as Ys,o as Hi,p as Qi,q as nn,s as ha,t as Ut,v as Wi,x as ks,y as Yt,z as Ln,A as Es,C as _t,D as Ks,E as pa,S as Yi,F as tr,G as Cs,H as Ki,I as fa,J as Gi,K as ga,M as Gs,O as ma,P as xa,Q as ba,T as ya,U as en,V as wa,W as va}from"./vendor-react-BNeW3y6d.js";import{a as Le}from"./vendor-utils-j652IAQy.js";import{d as Is,T as Ee,L as as,a as yt,S as ue,b as qe,B as dt,A as Hn,c as G,R as Bt,e as Xi,f as De,g as ja,h as Mn,i as ls,j as Sa,k as Ji,l as cs,m as ka,n as _s,o as ut,E as Be,D as Pe,p as Qn,q as ye,M as cn,r as Zi,s as eo,t as Bn,u as rn,v as to,w as Ve,x as lt,y as Ea,z as sn,C as Ca,F as Wn,G as Ia,H as _a,I as xe,J as W,K as Ra,N as Ta,O as Ke,P as Dt,Q as Aa,U as Vt,V as ce,W as on,X as st,Y as Ge,Z as Rs,$ as Ts,a0 as Pa,a1 as Na,a2 as tt,a3 as Ot,a4 as $a,a5 as za,a6 as be,a7 as Ae,a8 as ie,a9 as Da,aa as Fa,ab as Xs,ac as La,ad as Ma,ae as Ba,af as As,ag as Oa,ah as qa,ai as zt,aj as dn,ak as Ft,al as Ua,am as Js,an as Va,ao as Ha,ap as no,aq as ro,ar as Qa,as as Wa,at as Zs,au as so,av as Ue,aw as Ya,ax as Ka,ay as Ga,az as Xa,aA as Ja,aB as Za,aC as el,aD as tl,aE as nl,aF as ei,aG as ti,aH as hn,aI as rl,aJ as sl,aK as St,aL as il,aM as ol,aN as al,aO as ll,aP as cl,aQ as dl,aR as ul}from"./vendor-antd-DhcJxEc5.js";import{n as D,k as vt}from"./vendor-styling-BBrlYwaV.js";import{L as On,G as qt,R as Yn,T as It,u as hl,a as pl,I as fl,C as gl,b as ml,c as xl,K as nr,S as bl,F as yl,d as wl}from"./vendor-canvas-BRbMLhVA.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var io={exports:{}},Kn={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vl=h,jl=Symbol.for("react.element"),Sl=Symbol.for("react.fragment"),kl=Object.prototype.hasOwnProperty,El=vl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Cl={key:!0,ref:!0,__self:!0,__source:!0};function oo(n,e,r){var s,i={},o=null,d=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(d=e.ref);for(s in e)kl.call(e,s)&&!Cl.hasOwnProperty(s)&&(i[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps,e)i[s]===void 0&&(i[s]=e[s]);return{$$typeof:jl,type:n,key:o,ref:d,props:i,_owner:El.current}}Kn.Fragment=Sl;Kn.jsx=oo;Kn.jsxs=oo;io.exports=Kn;var t=io.exports,ds={},ni=aa;ds.createRoot=ni.createRoot,ds.hydrateRoot=ni.hydrateRoot;const Il="modulepreload",_l=function(n){return"/"+n},ri={},le=function(e,r,s){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),u=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));i=Promise.allSettled(r.map(p=>{if(p=_l(p),p in ri)return;ri[p]=!0;const g=p.endsWith(".css"),R=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${R}`))return;const j=document.createElement("link");if(j.rel=g?"stylesheet":Il,g||(j.as="script"),j.crossOrigin="",j.href=p,u&&j.setAttribute("nonce",u),document.head.appendChild(j),g)return new Promise((x,w)=>{j.addEventListener("load",x),j.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(d){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=d,window.dispatchEvent(u),!u.defaultPrevented)throw d}return i.then(d=>{for(const u of d||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})},Gn="/api",Q=Le.create({baseURL:Gn,headers:{"Content-Type":"application/json",Accept:"application/json"}}),gt=Le.create({baseURL:Gn,headers:{"Content-Type":"application/json",Accept:"application/json"}}),Ps=Le.create({baseURL:Gn,headers:{"Content-Type":"application/json",Accept:"application/json"}});Q.interceptors.request.use(n=>{var o,d,u,p,g,R,j,x,w;const e=localStorage.getItem("token"),r=localStorage.getItem("exhibitor_token"),s=((o=n.url)==null?void 0:o.startsWith("/bookings/"))&&n.method==="patch"||((d=n.url)==null?void 0:d.includes("/exhibition/"))||((u=n.url)==null?void 0:u.includes("/stalls/"))||((p=n.url)==null?void 0:p.includes("/halls/"))||((g=n.url)==null?void 0:g.includes("/users/"))||((R=n.url)==null?void 0:R.includes("/roles/")),i=((j=n.url)==null?void 0:j.includes("/test-booking"))||((x=n.url)==null?void 0:x.includes("/exhibitor-bookings"))||((w=n.url)==null?void 0:w.startsWith("/exhibitors/"));return s?e?n.headers.Authorization=`Bearer ${e}`:console.warn("Admin token required but not found for:",n.url):i&&r?n.headers.Authorization=`Bearer ${r}`:e?n.headers.Authorization=`Bearer ${e}`:r&&(n.headers.Authorization=`Bearer ${r}`),n},n=>Promise.reject(n));Ps.interceptors.request.use(n=>{const e=localStorage.getItem("exhibitor_token");return e&&(n.headers.Authorization=`Bearer ${e}`),n},n=>Promise.reject(n));Q.interceptors.response.use(n=>n,n=>{var r,s,i,o,d,u;((r=n.response)==null?void 0:r.status)===401?(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.pathname!=="/login"&&(window.location.href="/login")):((s=n.response)==null?void 0:s.status)===403&&((o=(i=n.response)==null?void 0:i.data)==null?void 0:o.code)==="ACCOUNT_INACTIVE"&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.pathname!=="/login"&&(localStorage.setItem("loginMessage",n.response.data.message),window.location.href="/login"));const e=((u=(d=n.response)==null?void 0:d.data)==null?void 0:u.message)||n.message;return Promise.reject(new Error(e))});Ps.interceptors.response.use(n=>n,n=>{var r,s,i;((r=n.response)==null?void 0:r.status)===401&&localStorage.removeItem("exhibitor_token");const e=((i=(s=n.response)==null?void 0:s.data)==null?void 0:i.message)||n.message;return Promise.reject(new Error(e))});const Rl=async(n,e=!1,r)=>{const s=e?localStorage.getItem("exhibitor_token"):localStorage.getItem("token");return Le.get(`${Gn}${n}`,{responseType:"blob",headers:{Authorization:`Bearer ${s}`},onDownloadProgress:r})},qf=Object.freeze(Object.defineProperty({__proto__:null,default:Q,downloadFile:Rl,exhibitorApi:Ps,publicApi:gt},Symbol.toStringTag,{value:"Module"})),ao={login:async n=>await Q.post("/auth/login",n),getProfile:async()=>await Q.get("/auth/me"),changePassword:async n=>await Q.post("/auth/change-password",n)},si=localStorage.getItem("token"),rr=localStorage.getItem("user");let lo=null;try{lo=rr&&rr!=="undefined"?JSON.parse(rr):null}catch(n){console.error("Failed to parse user data from localStorage",n),localStorage.removeItem("user")}const Tl={isAuthenticated:!!si,user:lo,token:si,loading:!1,error:null},_n=re("auth/refreshUser",async(n,{rejectWithValue:e})=>{var r,s;try{return(await ao.getProfile()).data}catch(i){return e(((s=(r=i.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to refresh user data")}}),co=ze({name:"auth",initialState:Tl,reducers:{setCredentials:(n,e)=>{n.user=e.payload.user,n.token=e.payload.token,n.isAuthenticated=!0,localStorage.setItem("token",e.payload.token),localStorage.setItem("user",JSON.stringify(e.payload.user))},logout:n=>{n.user=null,n.token=null,n.isAuthenticated=!1,localStorage.removeItem("token"),localStorage.removeItem("user")}},extraReducers:n=>{n.addCase(_n.pending,e=>{e.loading=!0,e.error=null}).addCase(_n.fulfilled,(e,r)=>{e.loading=!1,e.user=r.payload,localStorage.setItem("user",JSON.stringify(r.payload))}).addCase(_n.rejected,(e,r)=>{e.loading=!1,e.error=r.payload})}}),{setCredentials:Al,logout:sr}=co.actions,Pl=co.reducer,it=Object.create(null);it.open="0";it.close="1";it.ping="2";it.pong="3";it.message="4";it.upgrade="5";it.noop="6";const Rn=Object.create(null);Object.keys(it).forEach(n=>{Rn[it[n]]=n});const us={type:"error",data:"parser error"},uo=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",ho=typeof ArrayBuffer=="function",po=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,Ns=({type:n,data:e},r,s)=>uo&&e instanceof Blob?r?s(e):ii(e,s):ho&&(e instanceof ArrayBuffer||po(e))?r?s(e):ii(new Blob([e]),s):s(it[n]+(e||"")),ii=(n,e)=>{const r=new FileReader;return r.onload=function(){const s=r.result.split(",")[1];e("b"+(s||""))},r.readAsDataURL(n)};function oi(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}let ir;function Nl(n,e){if(uo&&n.data instanceof Blob)return n.data.arrayBuffer().then(oi).then(e);if(ho&&(n.data instanceof ArrayBuffer||po(n.data)))return e(oi(n.data));Ns(n,!1,r=>{ir||(ir=new TextEncoder),e(ir.encode(r))})}const ai="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Zt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let n=0;n<ai.length;n++)Zt[ai.charCodeAt(n)]=n;const $l=n=>{let e=n.length*.75,r=n.length,s,i=0,o,d,u,p;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);const g=new ArrayBuffer(e),R=new Uint8Array(g);for(s=0;s<r;s+=4)o=Zt[n.charCodeAt(s)],d=Zt[n.charCodeAt(s+1)],u=Zt[n.charCodeAt(s+2)],p=Zt[n.charCodeAt(s+3)],R[i++]=o<<2|d>>4,R[i++]=(d&15)<<4|u>>2,R[i++]=(u&3)<<6|p&63;return g},zl=typeof ArrayBuffer=="function",$s=(n,e)=>{if(typeof n!="string")return{type:"message",data:fo(n,e)};const r=n.charAt(0);return r==="b"?{type:"message",data:Dl(n.substring(1),e)}:Rn[r]?n.length>1?{type:Rn[r],data:n.substring(1)}:{type:Rn[r]}:us},Dl=(n,e)=>{if(zl){const r=$l(n);return fo(r,e)}else return{base64:!0,data:n}},fo=(n,e)=>{switch(e){case"blob":return n instanceof Blob?n:new Blob([n]);case"arraybuffer":default:return n instanceof ArrayBuffer?n:n.buffer}},go="",Fl=(n,e)=>{const r=n.length,s=new Array(r);let i=0;n.forEach((o,d)=>{Ns(o,!1,u=>{s[d]=u,++i===r&&e(s.join(go))})})},Ll=(n,e)=>{const r=n.split(go),s=[];for(let i=0;i<r.length;i++){const o=$s(r[i],e);if(s.push(o),o.type==="error")break}return s};function Ml(){return new TransformStream({transform(n,e){Nl(n,r=>{const s=r.length;let i;if(s<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,s);else if(s<65536){i=new Uint8Array(3);const o=new DataView(i.buffer);o.setUint8(0,126),o.setUint16(1,s)}else{i=new Uint8Array(9);const o=new DataView(i.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(s))}n.data&&typeof n.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(r)})}})}let or;function pn(n){return n.reduce((e,r)=>e+r.length,0)}function fn(n,e){if(n[0].length===e)return n.shift();const r=new Uint8Array(e);let s=0;for(let i=0;i<e;i++)r[i]=n[0][s++],s===n[0].length&&(n.shift(),s=0);return n.length&&s<n[0].length&&(n[0]=n[0].slice(s)),r}function Bl(n,e){or||(or=new TextDecoder);const r=[];let s=0,i=-1,o=!1;return new TransformStream({transform(d,u){for(r.push(d);;){if(s===0){if(pn(r)<1)break;const p=fn(r,1);o=(p[0]&128)===128,i=p[0]&127,i<126?s=3:i===126?s=1:s=2}else if(s===1){if(pn(r)<2)break;const p=fn(r,2);i=new DataView(p.buffer,p.byteOffset,p.length).getUint16(0),s=3}else if(s===2){if(pn(r)<8)break;const p=fn(r,8),g=new DataView(p.buffer,p.byteOffset,p.length),R=g.getUint32(0);if(R>Math.pow(2,21)-1){u.enqueue(us);break}i=R*Math.pow(2,32)+g.getUint32(4),s=3}else{if(pn(r)<i)break;const p=fn(r,i);u.enqueue($s(o?p:or.decode(p),e)),s=0}if(i===0||i>n){u.enqueue(us);break}}}})}const mo=4;function ke(n){if(n)return Ol(n)}function Ol(n){for(var e in ke.prototype)n[e]=ke.prototype[e];return n}ke.prototype.on=ke.prototype.addEventListener=function(n,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(e),this};ke.prototype.once=function(n,e){function r(){this.off(n,r),e.apply(this,arguments)}return r.fn=e,this.on(n,r),this};ke.prototype.off=ke.prototype.removeListener=ke.prototype.removeAllListeners=ke.prototype.removeEventListener=function(n,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+n];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var s,i=0;i<r.length;i++)if(s=r[i],s===e||s.fn===e){r.splice(i,1);break}return r.length===0&&delete this._callbacks["$"+n],this};ke.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),r=this._callbacks["$"+n],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(r){r=r.slice(0);for(var s=0,i=r.length;s<i;++s)r[s].apply(this,e)}return this};ke.prototype.emitReserved=ke.prototype.emit;ke.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};ke.prototype.hasListeners=function(n){return!!this.listeners(n).length};const Xn=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,r)=>r(e,0),Oe=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),ql="arraybuffer";function xo(n,...e){return e.reduce((r,s)=>(n.hasOwnProperty(s)&&(r[s]=n[s]),r),{})}const Ul=Oe.setTimeout,Vl=Oe.clearTimeout;function Jn(n,e){e.useNativeTimers?(n.setTimeoutFn=Ul.bind(Oe),n.clearTimeoutFn=Vl.bind(Oe)):(n.setTimeoutFn=Oe.setTimeout.bind(Oe),n.clearTimeoutFn=Oe.clearTimeout.bind(Oe))}const Hl=1.33;function Ql(n){return typeof n=="string"?Wl(n):Math.ceil((n.byteLength||n.size)*Hl)}function Wl(n){let e=0,r=0;for(let s=0,i=n.length;s<i;s++)e=n.charCodeAt(s),e<128?r+=1:e<2048?r+=2:e<55296||e>=57344?r+=3:(s++,r+=4);return r}function bo(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Yl(n){let e="";for(let r in n)n.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(n[r]));return e}function Kl(n){let e={},r=n.split("&");for(let s=0,i=r.length;s<i;s++){let o=r[s].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}class Gl extends Error{constructor(e,r,s){super(e),this.description=r,this.context=s,this.type="TransportError"}}class zs extends ke{constructor(e){super(),this.writable=!1,Jn(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,r,s){return super.emitReserved("error",new Gl(e,r,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const r=$s(e,this.socket.binaryType);this.onPacket(r)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,r={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const r=Yl(e);return r.length?"?"+r:""}}class Xl extends zs{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const r=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||r()})),this.writable||(s++,this.once("drain",function(){--s||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const r=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};Ll(e,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Fl(e,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=bo()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(e,r)}}let yo=!1;try{yo=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Jl=yo;function Zl(){}class ec extends Xl{constructor(e){if(super(e),typeof location<"u"){const r=location.protocol==="https:";let s=location.port;s||(s=r?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||s!==e.port}}doWrite(e,r){const s=this.request({method:"POST",data:e});s.on("success",r),s.on("error",(i,o)=>{this.onError("xhr post error",i,o)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(r,s)=>{this.onError("xhr poll error",r,s)}),this.pollXhr=e}}let Lt=class Tn extends ke{constructor(e,r,s){super(),this.createRequest=e,Jn(this,s),this._opts=s,this._method=s.method||"GET",this._uri=r,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var e;const r=xo(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(r);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&s.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var i;s.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=Tn.requestsCount++,Tn.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Zl,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Tn.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Lt.requestsCount=0;Lt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",li);else if(typeof addEventListener=="function"){const n="onpagehide"in Oe?"pagehide":"unload";addEventListener(n,li,!1)}}function li(){for(let n in Lt.requests)Lt.requests.hasOwnProperty(n)&&Lt.requests[n].abort()}const tc=function(){const n=wo({xdomain:!1});return n&&n.responseType!==null}();class nc extends ec{constructor(e){super(e);const r=e&&e.forceBase64;this.supportsBinary=tc&&!r}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Lt(wo,this.uri(),e)}}function wo(n){const e=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Jl))return new XMLHttpRequest}catch{}if(!e)try{return new Oe[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const vo=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class rc extends zs{get name(){return"websocket"}doOpen(){const e=this.uri(),r=this.opts.protocols,s=vo?{}:xo(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,r,s)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let r=0;r<e.length;r++){const s=e[r],i=r===e.length-1;Ns(s,this.supportsBinary,o=>{try{this.doWrite(s,o)}catch{}i&&Xn(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=bo()),this.supportsBinary||(r.b64=1),this.createUri(e,r)}}const ar=Oe.WebSocket||Oe.MozWebSocket;class sc extends rc{createSocket(e,r,s){return vo?new ar(e,r,s):r?new ar(e,r):new ar(e)}doWrite(e,r){this.ws.send(r)}}class ic extends zs{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const r=Bl(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=e.readable.pipeThrough(r).getReader(),i=Ml();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const o=()=>{s.read().then(({done:u,value:p})=>{u||(this.onPacket(p),o())}).catch(u=>{})};o();const d={type:"open"};this.query.sid&&(d.data=`{"sid":"${this.query.sid}"}`),this._writer.write(d).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let r=0;r<e.length;r++){const s=e[r],i=r===e.length-1;this._writer.write(s).then(()=>{i&&Xn(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const oc={websocket:sc,webtransport:ic,polling:nc},ac=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,lc=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function hs(n){if(n.length>8e3)throw"URI too long";const e=n,r=n.indexOf("["),s=n.indexOf("]");r!=-1&&s!=-1&&(n=n.substring(0,r)+n.substring(r,s).replace(/:/g,";")+n.substring(s,n.length));let i=ac.exec(n||""),o={},d=14;for(;d--;)o[lc[d]]=i[d]||"";return r!=-1&&s!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=cc(o,o.path),o.queryKey=dc(o,o.query),o}function cc(n,e){const r=/\/{2,9}/g,s=e.replace(r,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&s.splice(0,1),e.slice(-1)=="/"&&s.splice(s.length-1,1),s}function dc(n,e){const r={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,i,o){i&&(r[i]=o)}),r}const ps=typeof addEventListener=="function"&&typeof removeEventListener=="function",An=[];ps&&addEventListener("offline",()=>{An.forEach(n=>n())},!1);class wt extends ke{constructor(e,r){if(super(),this.binaryType=ql,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(r=e,e=null),e){const s=hs(e);r.hostname=s.host,r.secure=s.protocol==="https"||s.protocol==="wss",r.port=s.port,s.query&&(r.query=s.query)}else r.host&&(r.hostname=hs(r.host).host);Jn(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(s=>{const i=s.prototype.name;this.transports.push(i),this._transportsByName[i]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Kl(this.opts.query)),ps&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},An.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const r=Object.assign({},this.opts.query);r.EIO=mo,r.transport=e,this.id&&(r.sid=this.id);const s=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&wt.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(e);r.open(),this.setTransport(r)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",wt.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=e.data,this._onError(r);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let s=0;s<this.writeBuffer.length;s++){const i=this.writeBuffer[s].data;if(i&&(r+=Ql(i)),s>0&&r>this._maxPayload)return this.writeBuffer.slice(0,s);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Xn(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,r,s){return this._sendPacket("message",e,r,s),this}send(e,r,s){return this._sendPacket("message",e,r,s),this}_sendPacket(e,r,s,i){if(typeof r=="function"&&(i=r,r=void 0),typeof s=="function"&&(i=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const o={type:e,data:r,options:s};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),e()},s=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}_onError(e){if(wt.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ps&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=An.indexOf(this._offlineEventListener);s!==-1&&An.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,r),this.writeBuffer=[],this._prevBufferLen=0}}}wt.protocol=mo;class uc extends wt{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let r=this.createTransport(e),s=!1;wt.priorWebsocketSuccess=!1;const i=()=>{s||(r.send([{type:"ping",data:"probe"}]),r.once("packet",j=>{if(!s)if(j.type==="pong"&&j.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;wt.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(R(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const x=new Error("probe error");x.transport=r.name,this.emitReserved("upgradeError",x)}}))};function o(){s||(s=!0,R(),r.close(),r=null)}const d=j=>{const x=new Error("probe error: "+j);x.transport=r.name,o(),this.emitReserved("upgradeError",x)};function u(){d("transport closed")}function p(){d("socket closed")}function g(j){r&&j.name!==r.name&&o()}const R=()=>{r.removeListener("open",i),r.removeListener("error",d),r.removeListener("close",u),this.off("close",p),this.off("upgrading",g)};r.once("open",i),r.once("error",d),r.once("close",u),this.once("close",p),this.once("upgrading",g),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{s||r.open()},200):r.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const r=[];for(let s=0;s<e.length;s++)~this.transports.indexOf(e[s])&&r.push(e[s]);return r}}let hc=class extends uc{constructor(e,r={}){const s=typeof e=="object"?e:r;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(i=>oc[i]).filter(i=>!!i)),super(e,s)}};function pc(n,e="",r){let s=n;r=r||typeof location<"u"&&location,n==null&&(n=r.protocol+"//"+r.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=r.protocol+n:n=r.host+n),/^(https?|wss?):\/\//.test(n)||(typeof r<"u"?n=r.protocol+"//"+n:n="https://"+n),s=hs(n)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const o=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+o+":"+s.port+e,s.href=s.protocol+"://"+o+(r&&r.port===s.port?"":":"+s.port),s}const fc=typeof ArrayBuffer=="function",gc=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,jo=Object.prototype.toString,mc=typeof Blob=="function"||typeof Blob<"u"&&jo.call(Blob)==="[object BlobConstructor]",xc=typeof File=="function"||typeof File<"u"&&jo.call(File)==="[object FileConstructor]";function Ds(n){return fc&&(n instanceof ArrayBuffer||gc(n))||mc&&n instanceof Blob||xc&&n instanceof File}function Pn(n,e){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let r=0,s=n.length;r<s;r++)if(Pn(n[r]))return!0;return!1}if(Ds(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return Pn(n.toJSON(),!0);for(const r in n)if(Object.prototype.hasOwnProperty.call(n,r)&&Pn(n[r]))return!0;return!1}function bc(n){const e=[],r=n.data,s=n;return s.data=fs(r,e),s.attachments=e.length,{packet:s,buffers:e}}function fs(n,e){if(!n)return n;if(Ds(n)){const r={_placeholder:!0,num:e.length};return e.push(n),r}else if(Array.isArray(n)){const r=new Array(n.length);for(let s=0;s<n.length;s++)r[s]=fs(n[s],e);return r}else if(typeof n=="object"&&!(n instanceof Date)){const r={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=fs(n[s],e));return r}return n}function yc(n,e){return n.data=gs(n.data,e),delete n.attachments,n}function gs(n,e){if(!n)return n;if(n&&n._placeholder===!0){if(typeof n.num=="number"&&n.num>=0&&n.num<e.length)return e[n.num];throw new Error("illegal attachments")}else if(Array.isArray(n))for(let r=0;r<n.length;r++)n[r]=gs(n[r],e);else if(typeof n=="object")for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(n[r]=gs(n[r],e));return n}const wc=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],vc=5;var se;(function(n){n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK"})(se||(se={}));class jc{constructor(e){this.replacer=e}encode(e){return(e.type===se.EVENT||e.type===se.ACK)&&Pn(e)?this.encodeAsBinary({type:e.type===se.EVENT?se.BINARY_EVENT:se.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let r=""+e.type;return(e.type===se.BINARY_EVENT||e.type===se.BINARY_ACK)&&(r+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(r+=e.nsp+","),e.id!=null&&(r+=e.id),e.data!=null&&(r+=JSON.stringify(e.data,this.replacer)),r}encodeAsBinary(e){const r=bc(e),s=this.encodeAsString(r.packet),i=r.buffers;return i.unshift(s),i}}function ci(n){return Object.prototype.toString.call(n)==="[object Object]"}class Fs extends ke{constructor(e){super(),this.reviver=e}add(e){let r;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(e);const s=r.type===se.BINARY_EVENT;s||r.type===se.BINARY_ACK?(r.type=s?se.EVENT:se.ACK,this.reconstructor=new Sc(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Ds(e)||e.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(e),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let r=0;const s={type:Number(e.charAt(0))};if(se[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===se.BINARY_EVENT||s.type===se.BINARY_ACK){const o=r+1;for(;e.charAt(++r)!=="-"&&r!=e.length;);const d=e.substring(o,r);if(d!=Number(d)||e.charAt(r)!=="-")throw new Error("Illegal attachments");s.attachments=Number(d)}if(e.charAt(r+1)==="/"){const o=r+1;for(;++r&&!(e.charAt(r)===","||r===e.length););s.nsp=e.substring(o,r)}else s.nsp="/";const i=e.charAt(r+1);if(i!==""&&Number(i)==i){const o=r+1;for(;++r;){const d=e.charAt(r);if(d==null||Number(d)!=d){--r;break}if(r===e.length)break}s.id=Number(e.substring(o,r+1))}if(e.charAt(++r)){const o=this.tryParse(e.substr(r));if(Fs.isPayloadValid(s.type,o))s.data=o;else throw new Error("invalid payload")}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,r){switch(e){case se.CONNECT:return ci(r);case se.DISCONNECT:return r===void 0;case se.CONNECT_ERROR:return typeof r=="string"||ci(r);case se.EVENT:case se.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&wc.indexOf(r[0])===-1);case se.ACK:case se.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Sc{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const r=yc(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const kc=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Fs,Encoder:jc,get PacketType(){return se},protocol:vc},Symbol.toStringTag,{value:"Module"}));function Ye(n,e,r){return n.on(e,r),function(){n.off(e,r)}}const Ec=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class So extends ke{constructor(e,r,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=r,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Ye(e,"open",this.onopen.bind(this)),Ye(e,"packet",this.onpacket.bind(this)),Ye(e,"error",this.onerror.bind(this)),Ye(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...r){var s,i,o;if(Ec.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(r.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const d={type:se.EVENT,data:r};if(d.options={},d.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const R=this.ids++,j=r.pop();this._registerAckCallback(R,j),d.id=R}const u=(i=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||i===void 0?void 0:i.writable,p=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!u||(p?(this.notifyOutgoingListeners(d),this.packet(d)):this.sendBuffer.push(d)),this.flags={},this}_registerAckCallback(e,r){var s;const i=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(i===void 0){this.acks[e]=r;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let u=0;u<this.sendBuffer.length;u++)this.sendBuffer[u].id===e&&this.sendBuffer.splice(u,1);r.call(this,new Error("operation has timed out"))},i),d=(...u)=>{this.io.clearTimeoutFn(o),r.apply(this,u)};d.withError=!0,this.acks[e]=d}emitWithAck(e,...r){return new Promise((s,i)=>{const o=(d,u)=>d?i(d):s(u);o.withError=!0,r.push(o),this.emit(e,...r)})}_addToQueue(e){let r;typeof e[e.length-1]=="function"&&(r=e.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...o)=>s!==this._queue[0]?void 0:(i!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(i)):(this._queue.shift(),r&&r(null,...o)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!e||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:se.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(s=>String(s.id)===e)){const s=this.acks[e];delete this.acks[e],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case se.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case se.EVENT:case se.BINARY_EVENT:this.onevent(e);break;case se.ACK:case se.BINARY_ACK:this.onack(e);break;case se.DISCONNECT:this.ondisconnect();break;case se.CONNECT_ERROR:this.destroy();const s=new Error(e.data.message);s.data=e.data.data,this.emitReserved("connect_error",s);break}}onevent(e){const r=e.data||[];e.id!=null&&r.push(this.ack(e.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const s of r)s.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const r=this;let s=!1;return function(...i){s||(s=!0,r.packet({type:se.ACK,id:e,data:i}))}}onack(e){const r=this.acks[e.id];typeof r=="function"&&(delete this.acks[e.id],r.withError&&e.data.unshift(null),r.apply(this,e.data))}onconnect(e,r){this.id=e,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:se.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const r=this._anyListeners;for(let s=0;s<r.length;s++)if(e===r[s])return r.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const r=this._anyOutgoingListeners;for(let s=0;s<r.length;s++)if(e===r[s])return r.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const s of r)s.apply(this,e.data)}}}function Ht(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}Ht.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*n);n=Math.floor(e*10)&1?n+r:n-r}return Math.min(n,this.max)|0};Ht.prototype.reset=function(){this.attempts=0};Ht.prototype.setMin=function(n){this.ms=n};Ht.prototype.setMax=function(n){this.max=n};Ht.prototype.setJitter=function(n){this.jitter=n};class ms extends ke{constructor(e,r){var s;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(r=e,e=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Jn(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((s=r.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new Ht({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=e;const i=r.parser||kc;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var r;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(r=this.backoff)===null||r===void 0||r.setMin(e),this)}randomizationFactor(e){var r;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(r=this.backoff)===null||r===void 0||r.setJitter(e),this)}reconnectionDelayMax(e){var r;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(r=this.backoff)===null||r===void 0||r.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new hc(this.uri,this.opts);const r=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const i=Ye(r,"open",function(){s.onopen(),e&&e()}),o=u=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",u),e?e(u):this.maybeReconnectOnOpen()},d=Ye(r,"error",o);if(this._timeout!==!1){const u=this._timeout,p=this.setTimeoutFn(()=>{i(),o(new Error("timeout")),r.close()},u);this.opts.autoUnref&&p.unref(),this.subs.push(()=>{this.clearTimeoutFn(p)})}return this.subs.push(i),this.subs.push(d),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Ye(e,"ping",this.onping.bind(this)),Ye(e,"data",this.ondata.bind(this)),Ye(e,"error",this.onerror.bind(this)),Ye(e,"close",this.onclose.bind(this)),Ye(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(r){this.onclose("parse error",r)}}ondecoded(e){Xn(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,r){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new So(this,e,r),this.nsps[e]=s),s}_destroy(e){const r=Object.keys(this.nsps);for(const s of r)if(this.nsps[s].active)return;this._close()}_packet(e){const r=this.encoder.encode(e);for(let s=0;s<r.length;s++)this.engine.write(r[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,r){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},r);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Kt={};function Nn(n,e){typeof n=="object"&&(e=n,n=void 0),e=e||{};const r=pc(n,e.path||"/socket.io"),s=r.source,i=r.id,o=r.path,d=Kt[i]&&o in Kt[i].nsps,u=e.forceNew||e["force new connection"]||e.multiplex===!1||d;let p;return u?p=new ms(s,e):(Kt[i]||(Kt[i]=new ms(s,e)),p=Kt[i]),r.query&&!e.query&&(e.query=r.queryKey),p.socket(r.path,e)}Object.assign(Nn,{Manager:ms,Socket:So,io:Nn,connect:Nn});const Cc=window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1",et=Cc?"https://aakardata.in/api":"http://localhost:5000/api",Vf="ma7o6bmjpok2nhnhq6jgcwrlg446a2hnyxqih70ni695pvm5";class Ic{constructor(){this.socket=null,this.subscribedToNotifications=!1,this.reconnectTimer=null,this.listeners={},this.unreadCount=0,this.isExhibitor=!1,this.lastToken="",this.handleConnect=()=>{setTimeout(()=>{this.subscribedToNotifications&&this.socket&&this.socket.emit("subscribe_notifications"),this.fetchUnreadCount(),this.triggerEvent("connected",!0)},500)},this.handleDisconnect=e=>{this.triggerEvent("disconnected",e),e!=="io client disconnect"&&e!=="transport close"&&this.scheduleReconnect()},this.handleConnectError=e=>{console.error("Notification socket connection error:",e),this.scheduleReconnect()},this.handleError=e=>{console.error("Notification socket error:",e),this.scheduleReconnect()},this.scheduleReconnect=()=>{this.reconnectTimer||(this.reconnectTimer=setTimeout(()=>{this.refreshAndReconnect(),this.reconnectTimer=null},5e3))},this.refreshAndReconnect=async()=>{try{const e=this.isExhibitor?"exhibitor_token":"token",r=localStorage.getItem(e);r?this.init(r,this.isExhibitor):console.error(`No ${this.isExhibitor?"exhibitor":"admin"} token found for reconnection`)}catch(e){console.error("Error refreshing token for socket reconnection:",e)}},this.handleNewNotification=e=>{this.unreadCount=e.unreadCount,this.triggerEvent("notification",e.notification),this.triggerEvent("unreadCount",this.unreadCount)},this.handleNotificationUpdate=e=>{this.unreadCount=e.unreadCount,this.triggerEvent("unreadCount",this.unreadCount),e.newNotifications&&e.newNotifications.length>0&&e.newNotifications.forEach(r=>{this.triggerEvent("notification",r)})},this.handleUserDeactivated=e=>{console.warn("User deactivated event received:",e.message),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("exhibitor_token"),localStorage.removeItem("exhibitor"),localStorage.setItem("loginMessage",e.message||"Your account has been deactivated. Please contact the administrator."),this.disconnect(),this.triggerEvent("user_deactivated",e),window.location.pathname!=="/login"&&(window.location.href="/login")}}init(e,r=!1){var s;if(!((s=this.socket)!=null&&s.connected&&this.lastToken===e&&this.isExhibitor===r)){this.isExhibitor=r,this.lastToken=e,this.socket&&(this.socket.disconnect(),this.socket=null),this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null);try{if(!e||typeof e!="string")throw new Error("Invalid token provided for socket connection");const i=et.replace("/api",""),o=e.startsWith("Bearer ")?e.substring(7):e;this.socket=Nn(i,{auth:{token:o,type:r?"exhibitor":"admin"},forceNew:!0,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:3e3,timeout:2e4,autoConnect:!0,transports:["polling","websocket"]}),this.socket.on("connect",this.handleConnect),this.socket.on("disconnect",this.handleDisconnect),this.socket.on("connect_error",this.handleConnectError),this.socket.on("error",this.handleError),this.socket.on("new_notification",this.handleNewNotification),this.socket.on("notification_update",this.handleNotificationUpdate),this.socket.on("user_deactivated",this.handleUserDeactivated)}catch(i){console.error("Error initializing notification socket:",i),this.scheduleReconnect()}}}subscribeToNotifications(){this.subscribedToNotifications=!0,this.socket&&this.socket.connected&&this.socket.emit("subscribe_notifications")}unsubscribeFromNotifications(){this.subscribedToNotifications=!1,this.socket&&this.socket.connected&&this.socket.emit("unsubscribe_notifications")}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null),this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.unreadCount=0,this.subscribedToNotifications=!1}addEventListener(e,r){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(r)}removeEventListener(e,r){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter(s=>s!==r))}triggerEvent(e,r){this.listeners[e]&&this.listeners[e].forEach(s=>{try{s(r)}catch(i){console.error(`Error in notification ${e} listener:`,i)}})}getUnreadCount(){return this.unreadCount}async fetchUnreadCount(){try{const e=this.isExhibitor?"notifications/exhibitor":"notifications/admin",r={limit:1,page:1,unreadOnly:!0},s=this.isExhibitor?"exhibitor_token":"token",i=localStorage.getItem(s);if(!i)return console.error(`No ${this.isExhibitor?"exhibitor":"admin"} token available for notification requests`),0;const o=await Le.get(e,{baseURL:et,params:r,headers:{Authorization:`Bearer ${i}`}});return o.data&&o.data.success?(this.unreadCount=o.data.data.unreadCount,this.triggerEvent("unreadCount",this.unreadCount),this.unreadCount):0}catch(e){return console.error("Error fetching unread count:",e),0}}async getNotifications(e=1,r=10,s=!1){try{const i=this.isExhibitor?"notifications/exhibitor":"notifications/admin",o={page:e,limit:r,unreadOnly:s},d=this.isExhibitor?"exhibitor_token":"token",u=localStorage.getItem(d);if(!u)throw new Error(`No ${this.isExhibitor?"exhibitor":"admin"} token available for notification requests`);return(await Le.get(i,{baseURL:et,params:o,headers:{Authorization:`Bearer ${u}`}})).data}catch(i){return console.error("Error fetching notifications:",i),{success:!1,data:{notifications:[],pagination:{total:0,page:1,limit:10,pages:0},unreadCount:0}}}}async markAsRead(e){try{const r=this.isExhibitor?`notifications/exhibitor/mark-read/${e}`:`notifications/admin/mark-read/${e}`,s=this.isExhibitor?"exhibitor_token":"token",i=localStorage.getItem(s);if(!i)throw new Error(`No ${this.isExhibitor?"exhibitor":"admin"} token available for notification requests`);const o=await Le.put(r,{},{baseURL:et,headers:{Authorization:`Bearer ${i}`}});return o.data&&o.data.success&&(this.unreadCount=o.data.data.unreadCount,this.triggerEvent("unreadCount",this.unreadCount)),o.data}catch(r){throw console.error("Error marking notification as read:",r),r}}async markAllAsRead(){try{const e=this.isExhibitor?"notifications/exhibitor/mark-all-read":"notifications/admin/mark-all-read",r=this.isExhibitor?"exhibitor_token":"token",s=localStorage.getItem(r);if(!s)throw new Error(`No ${this.isExhibitor?"exhibitor":"admin"} token available for notification requests`);const i=await Le.put(e,{},{baseURL:et,headers:{Authorization:`Bearer ${s}`}});return i.data&&i.data.success&&(this.unreadCount=0,this.triggerEvent("unreadCount",this.unreadCount)),i.data}catch(e){throw console.error("Error marking all notifications as read:",e),e}}async deleteNotification(e){try{const r=this.isExhibitor?`notifications/exhibitor/${e}`:`notifications/admin/${e}`,s=await Le.delete(r,{baseURL:et,headers:{Authorization:`Bearer ${localStorage.getItem(this.isExhibitor?"exhibitor_token":"token")}`}});if(s.data.success)return s.data.data.unreadCount!==void 0&&(this.unreadCount=s.data.data.unreadCount,this.triggerEvent("unreadCount",this.unreadCount)),s.data;throw new Error("Failed to delete notification")}catch(r){throw console.error("Error deleting notification:",r),r}}async deleteAllNotifications(){try{const e=this.isExhibitor?"notifications/exhibitor/delete-all":"notifications/admin/delete-all",r=await Le.delete(e,{baseURL:et,headers:{Authorization:`Bearer ${localStorage.getItem(this.isExhibitor?"exhibitor_token":"token")}`}});if(r.data.success)return this.unreadCount=0,this.triggerEvent("unreadCount",this.unreadCount),r.data;throw new Error("Failed to delete all notifications")}catch(e){throw console.error("Error deleting all notifications:",e),e}}}const _e=new Ic;var rt=(n=>(n.NEW_LEAD="New Lead",n.FOLLOWUP_DUE="Follow-up Due",n.STATUS_CHANGE="Status Changed",n.ASSIGNMENT="Lead Assigned",n.NEW_BOOKING="NEW_BOOKING",n.BOOKING_CONFIRMED="BOOKING_CONFIRMED",n.BOOKING_CANCELLED="BOOKING_CANCELLED",n.PAYMENT_RECEIVED="PAYMENT_RECEIVED",n.INVOICE_GENERATED="INVOICE_GENERATED",n.EXHIBITION_UPDATE="EXHIBITION_UPDATE",n.SYSTEM_MESSAGE="SYSTEM_MESSAGE",n.EXHIBITOR_MESSAGE="EXHIBITOR_MESSAGE",n.EXHIBITOR_REGISTERED="EXHIBITOR_REGISTERED",n))(rt||{}),bt=(n=>(n.HIGH="HIGH",n.MEDIUM="MEDIUM",n.LOW="LOW",n))(bt||{}),xs=(n=>(n.READ="Read",n.UNREAD="Unread",n))(xs||{}),ko={exports:{}};(function(n,e){(function(r,s){n.exports=s()})(la,function(){return function(r,s,i){r=r||{};var o=s.prototype,d={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function u(g,R,j,x){return o.fromToBase(g,R,j,x)}i.en.relativeTime=d,o.fromToBase=function(g,R,j,x,w){for(var A,T,P,S=j.$locale().relativeTime||d,N=r.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],C=N.length,a=0;a<C;a+=1){var l=N[a];l.d&&(A=x?i(g).diff(j,l.d,!0):j.diff(g,l.d,!0));var c=(r.rounding||Math.round)(Math.abs(A));if(P=A>0,c<=l.r||!l.r){c<=1&&a>0&&(l=N[a-1]);var f=S[l.l];w&&(c=w(""+c)),T=typeof f=="string"?f.replace("%d",c):f(c,R,l.l,P);break}}if(R)return T;var m=P?S.future:S.past;return typeof m=="function"?m(T):m.replace("%s",T)},o.to=function(g,R){return u(g,R,this,!0)},o.from=function(g,R){return u(g,R,this)};var p=function(g){return g.$u?i.utc():i()};o.toNow=function(g){return this.to(p(this),g)},o.fromNow=function(g){return this.from(p(this),g)}}})})(ko);var _c=ko.exports;const Rc=ca(_c);Is.extend(Rc);const di=n=>{switch(n){case bt.HIGH:return"#f5222d";case bt.MEDIUM:return"#faad14";case bt.LOW:return"#52c41a";default:return"#1677ff"}},Tc=n=>Is(n).fromNow(),Ac=n=>Is(n).format("YYYY-MM-DD HH:mm"),Hf=n=>n.filter(e=>e.isRead===!1).length,Qf=n=>{if(!n.entityId||!n.entityType)return"/notifications";switch(n.entityType){case"lead":return`/leads/${n.entityId}`;case"followup":return`/followups/${n.entityId}`;case"Booking":return"/bookings";case"Invoice":return`/invoice/${n.entityId}`;case"Exhibition":return`/exhibition/${n.entityId}`;case"Exhibitor":return`/exhibitors?id=${n.entityId}`;default:return"/notifications"}},{Text:ui,Paragraph:Pc}=Ee,Nc=({notification:n,onView:e,onMarkAsRead:r,onDelete:s})=>{const i=()=>{switch(n.type){case rt.NEW_LEAD:return t.jsx(ls,{style:{color:"#1677ff"}});case rt.FOLLOWUP_DUE:return t.jsx(Mn,{style:{color:"#faad14"}});case rt.STATUS_CHANGE:return t.jsx(ja,{style:{color:"#722ed1"}});case rt.ASSIGNMENT:return t.jsx(De,{style:{color:"#52c41a"}});default:return t.jsx(Xi,{style:{color:"#1677ff"}})}},o=()=>{n.isRead||r(n),e(n)},d=u=>{u.stopPropagation(),s(n)};return t.jsx(as.Item,{onClick:o,className:n.isRead?"":"notification-unread",style:{cursor:"pointer",backgroundColor:n.isRead?"transparent":"#f0f5ff",padding:"16px",borderRadius:"4px",transition:"background-color 0.3s"},actions:[t.jsx(yt,{title:"Delete notification",children:t.jsx(G,{type:"text",danger:!0,icon:t.jsx(Bt,{}),onClick:d,"aria-label":"Delete notification"})})],children:t.jsx(as.Item.Meta,{avatar:t.jsx(dt,{dot:!n.isRead,color:di(n.priority),children:t.jsx(Hn,{icon:i(),size:"large",style:{backgroundColor:"white",border:`1px solid ${di(n.priority)}`}})}),title:t.jsxs(ue,{children:[t.jsx(ui,{strong:!0,children:n.title}),!n.isRead&&t.jsx(qe,{color:"blue",children:"New"})]}),description:t.jsxs("div",{children:[t.jsx(Pc,{ellipsis:{rows:2},style:{marginBottom:4},children:n.message}),t.jsx(yt,{title:Ac(n.createdAt),children:t.jsx(ui,{type:"secondary",style:{fontSize:12},children:Tc(n.createdAt)})})]})})})},{Title:$c,Text:Wf}=Ee,zc=n=>{switch(n){case"NEW_BOOKING":return rt.NEW_LEAD;case"BOOKING_CONFIRMED":case"INVOICE_GENERATED":case"PAYMENT_RECEIVED":return rt.STATUS_CHANGE;case"EXHIBITOR_MESSAGE":return rt.FOLLOWUP_DUE;case"EXHIBITOR_REGISTERED":return rt.NEW_LEAD;default:return rt.STATUS_CHANGE}},Dc=n=>{switch(n){case"HIGH":return bt.HIGH;case"MEDIUM":return bt.MEDIUM;case"LOW":return bt.LOW;default:return bt.MEDIUM}},Fc=({isExhibitor:n=!1})=>{const e=He(),[r,s]=h.useState([]),[i,o]=h.useState(!1),[d,u]=h.useState(!1),[p,g]=h.useState(0),[R,j]=h.useState(!1),[x,w]=h.useState("all"),A=h.useRef(null),{isAuthenticated:T,user:P}=Ne(v=>v.auth),{isAuthenticated:S}=Ne(v=>v.exhibitorAuth||{isAuthenticated:!1}),N=n?S:T,[C,a]=h.useState(!1);h.useEffect(()=>{if(N){const v=n?"exhibitor_token":"token",z=localStorage.getItem(v);if(z){_e.init(z,n),_e.subscribeToNotifications();const O=V=>{g(V),V>0&&!d&&(j(!0),setTimeout(()=>{j(!1)},2e3))},H=V=>{s(q=>[V,...q])},F=()=>{a(!0),l()},L=()=>{a(!1)};return _e.addEventListener("unreadCount",O),_e.addEventListener("notification",H),_e.addEventListener("connected",F),_e.addEventListener("disconnected",L),l(),()=>{_e.removeEventListener("unreadCount",O),_e.removeEventListener("notification",H),_e.removeEventListener("connected",F),_e.removeEventListener("disconnected",L),_e.unsubscribeFromNotifications()}}else console.error(`No ${n?"exhibitor":"admin"} token found in localStorage`)}},[N,n]);const l=async()=>{if(N){o(!0);try{const v=await _e.getNotifications(1,10);v.success&&(s(v.data.notifications),g(v.data.unreadCount))}catch(v){console.error("Error fetching notifications:",v)}finally{o(!1)}}},c=v=>{u(v),v&&(A.current&&A.current.classList.remove("bell-animate"),l())},f=async v=>{if(v.isRead||await m(v),u(!1),v.entityId&&v.entityType){let z="";switch(v.entityType){case"Booking":z=n?`/exhibitor/bookings/${v.entityId}`:"/bookings";break;case"Invoice":z=n?`/exhibitor/invoice/${v.entityId}`:`/invoice/${v.entityId}`;break;case"Exhibition":z=`/exhibition/${v.entityId}`;break;case"Exhibitor":z=`/exhibitors?id=${v.entityId}`;break;default:z=""}e(z||"/notifications")}else e("/notifications")},m=async v=>{try{await _e.markAsRead(v._id),s(r.map(z=>z._id===v._id?{...z,isRead:!0}:z))}catch(z){console.error("Error marking notification as read:",z)}},E=async v=>{try{await _e.deleteNotification(v._id),s(r.filter(z=>z._id!==v._id)),v.isRead||g(z=>Math.max(0,z-1))}catch(z){console.error("Error deleting notification:",z)}},y=()=>{u(!1),e("/notifications")},b=async()=>{try{await _e.markAllAsRead(),s(r.map(v=>({...v,isRead:!0}))),g(0)}catch(v){console.error("Error marking all notifications as read:",v)}},k=async()=>{try{await _e.deleteAllNotifications(),s([]),g(0)}catch(v){console.error("Error deleting all notifications:",v)}},I=()=>x==="unread"?r.filter(v=>!v.isRead):r.slice(0,10),_=v=>{w(v)},B=v=>{var z;return{_id:v._id,recipient:v.recipient,recipientType:v.recipientType||"admin",title:v.title,message:v.message,type:zc(v.type),priority:Dc(v.priority),isRead:v.isRead,readAt:v.readAt,entityId:v.entityId,entityType:v.entityType,data:v.data,createdAt:v.createdAt,updatedAt:v.updatedAt||v.createdAt,id:v._id,userId:v.recipient,source:(z=v.data)==null?void 0:z.source,status:v.isRead?xs.READ:xs.UNREAD}},$=t.jsxs("div",{className:"notification-dropdown",children:[t.jsxs("div",{className:"notification-header",children:[t.jsx($c,{level:5,style:{margin:0},children:"Notifications"}),t.jsxs(ue,{children:[t.jsx(G,{type:"text",size:"small",icon:t.jsx(Sa,{}),onClick:l,loading:i,className:"header-btn",title:"Refresh notifications"}),t.jsx(G,{type:"text",size:"small",icon:t.jsx(Ji,{}),onClick:b,disabled:p===0,className:"header-btn",title:"Mark all as read"}),t.jsx(G,{type:"text",size:"small",danger:!0,icon:t.jsx(Bt,{}),onClick:k,disabled:r.length===0,className:"header-btn",title:"Clear all notifications"}),t.jsx(G,{type:"text",size:"small",icon:t.jsx(cs,{}),onClick:()=>e("/notifications"),className:"header-btn",title:"Notification Settings"}),t.jsx(G,{type:"text",size:"small",icon:t.jsx(ka,{}),onClick:()=>u(!1),className:"header-btn",title:"Close"})]})]}),t.jsx(_s,{activeKey:x,onChange:_,size:"small",className:"notification-tabs",items:[{key:"all",label:t.jsx("span",{children:"All"})},{key:"unread",label:t.jsxs("span",{className:"tab-label",children:["Unread",t.jsx(dt,{count:p,size:"small",offset:[5,-3],style:{backgroundColor:"#1677ff"}})]})}]}),t.jsx("div",{className:"notification-list",children:t.jsx(ut,{spinning:i,children:I().length===0?t.jsx(Be,{image:Be.PRESENTED_IMAGE_SIMPLE,description:x==="unread"?"No unread notifications":"No notifications",style:{padding:"20px 0"}}):t.jsx(as,{dataSource:I(),renderItem:v=>t.jsx(Nc,{notification:B(v),onView:()=>f(v),onMarkAsRead:()=>m(v),onDelete:E})})})}),t.jsx(Pe,{style:{margin:"0"}}),t.jsx("div",{className:"notification-footer",children:t.jsx(G,{type:"link",onClick:y,children:"View All Notifications"})})]});return t.jsx("div",{ref:A,className:`bell-container ${R?"bell-animate":""}`,children:t.jsx(Qn,{overlay:$,trigger:["click"],open:d,onOpenChange:c,placement:"bottomRight",getPopupContainer:v=>v.parentNode,overlayClassName:"notification-dropdown-overlay",children:t.jsx("div",{className:"bell-trigger",children:t.jsx(dt,{count:p,className:"notification-badge",size:"default",overflowCount:99,children:t.jsx(Xi,{className:"notification-bell-icon"})})})})})};class Lc{async getSettings(){return(await Q.get("/settings")).data}async updateSettings(e){return(await Q.put("/settings",e)).data}async uploadLogo(e){const r=new FormData;return r.append("file",e),(await Q.post("/settings/upload/logo",r,{headers:{"Content-Type":"multipart/form-data"}})).data}}const Ls=new Lc,Mc={settings:null,loading:!1,error:null},$n=re("settings/fetchSettings",async(n,{rejectWithValue:e})=>{var r,s;try{return await Ls.getSettings()}catch(i){return e(((s=(r=i.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to fetch settings")}}),zn=re("settings/updateSettings",async(n,{rejectWithValue:e})=>{var r,s;try{return await Ls.updateSettings(n)}catch(i){return e(((s=(r=i.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to update settings")}}),lr=re("settings/uploadLogo",async(n,{dispatch:e,rejectWithValue:r})=>{var s,i;try{const o=await Ls.uploadLogo(n);return o.path&&await e(zn({logo:o.path})),o}catch(o){return r(((i=(s=o.response)==null?void 0:s.data)==null?void 0:i.message)||"Failed to upload logo")}}),Bc=ze({name:"settings",initialState:Mc,reducers:{},extraReducers:n=>{n.addCase($n.pending,e=>{e.loading=!0,e.error=null}).addCase($n.fulfilled,(e,r)=>{e.settings=r.payload,e.loading=!1}).addCase($n.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(zn.pending,e=>{e.loading=!0,e.error=null}).addCase(zn.fulfilled,(e,r)=>{e.settings=r.payload,e.loading=!1}).addCase(zn.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(lr.pending,e=>{e.loading=!0,e.error=null}).addCase(lr.fulfilled,e=>{e.loading=!1}).addCase(lr.rejected,(e,r)=>{e.loading=!1,e.error=r.payload})}}),Oc=Bc.reducer,qc=()=>{const{user:n}=Ne(r=>r.auth),e=r=>{if(!n||!n.role||!n.role.permissions)return!1;const s=n.role.permissions;if(s.includes(r)||s.includes("*")||s.includes("all")||s.includes("admin")||s.includes("superadmin")||s.includes("full_access")||s.includes("manage_all"))return!0;const i=r.split("_");if(i.length===2){const o=i[0],d=i[1],u=[`${o}.*`,`*.${d}`,`view_${o}`,`${o}_view`,`${o}s_${d}`,`${d}_${o}`,`${o}`,`${d}`,o.endsWith("s")?`${o.slice(0,-1)}_${d}`:`${o}s_${d}`,`${o}_${d==="view"?"read":d}`,`${d==="view"?"read":d}_${o}`];for(const p of u)if(s.includes(p))return!0}return!1};return{hasPermission:e,hasAnyPermission:r=>r.some(s=>e(s)),hasAllPermissions:r=>r.every(s=>e(s))}},{Header:Uc,Sider:Vc,Content:Hc}=ye,Qc=D.div`
  height: 65px;
  padding: 0 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-bottom: 1px solid #E5E7EB;
  transition: all 0.3s;
`,Wc=D.div`
  border-radius: 8px;
  padding: 10px;
  display: flex;
  justify-content: center;
  align-items: center;
  transition: all 0.2s ease;
`,Yc=D.img`
  height: auto;
  width: 100%;
  max-width: 150px;
  max-height: auto;
  object-fit: contain;
`;D.span`
  margin-left: 12px;
  font-size: 18px;
  font-weight: 600;
  color: #111827;
  white-space: nowrap;
  transition: opacity 0.3s, margin-left 0.3s;
`;const fe=({children:n})=>{const[e,r]=h.useState(!1),s=He(),i=ht(),o=Ui(),d=Ne(l=>l.auth.user),{settings:u}=Ne(l=>l.settings),[p,g]=h.useState("/logo.png"),[R,j]=h.useState(!1),{hasPermission:x}=qc(),w=h.useCallback(async()=>{try{j(!0),await i(_n()).unwrap()}catch{}finally{j(!1)}},[i]);h.useEffect(()=>{const l=setInterval(()=>{w()},3e5);return()=>clearInterval(l)},[w]),h.useEffect(()=>{w()},[o.pathname,w]),h.useEffect(()=>{},[d,x]),h.useEffect(()=>{i($n())},[i]),h.useEffect(()=>{const l=()=>{i(sr())};return _e.addEventListener("user_deactivated",l),()=>{_e.removeEventListener("user_deactivated",l)}},[i]);const A=[{key:"dashboard",icon:t.jsx(rn,{}),label:"Dashboard",requiredPermission:"dashboard_view",onClick:()=>s("/dashboard")},{key:"exhibition",icon:t.jsx(to,{}),label:"Exhibitions",requiredPermission:"exhibitions_view",onClick:()=>s("/exhibition")},{key:"stalls",icon:t.jsx(Ve,{}),label:"Stalls",requiredPermission:"view_stalls",children:[{key:"stall/list",label:"Stall List",requiredPermission:"view_stalls",onClick:()=>s("/stall/list")},{key:"stall-types",label:"Stall Types",requiredPermission:"view_stall_types",onClick:()=>s("/stall-types")}]},{key:"bookings",icon:t.jsx(lt,{}),label:"Stall Bookings",requiredPermission:"view_bookings",onClick:()=>s("/bookings")},{key:"amenities",icon:t.jsx(Ea,{}),label:"Amenities",requiredPermission:"view_amenities",onClick:()=>s("/amenities")},{key:"letters",icon:t.jsx(sn,{}),label:"Letters",requiredPermission:"view_letters",onClick:()=>s("/letters")},{key:"invoices",icon:t.jsx(Ca,{}),label:"Invoices",requiredPermission:"view_invoices",onClick:()=>s("/invoices")},{key:"exhibitors",icon:t.jsx(Wn,{}),label:"Exhibitors",requiredPermission:"view_exhibitors",onClick:()=>s("/exhibitors")},{key:"index",icon:t.jsx(De,{}),label:"Users",requiredPermission:"users_view",onClick:()=>s("/index")},{key:"roles",icon:t.jsx(Ia,{}),label:"Roles",requiredPermission:"roles_view",onClick:()=>s("/roles")},{key:"settings",icon:t.jsx(cs,{}),label:"Settings",requiredPermission:"settings_view",onClick:()=>s("/settings")}],T=l=>l.filter(c=>{if(c.requiredPermission&&!x(c.requiredPermission))return!1;if(c.children){const f=T(c.children);if(f.length===0)return!1;c.children=f}return!0}),P=T(A),S=l=>l.map(c=>{const{requiredPermission:f,...m}=c;return m.children&&(m.children=S(m.children)),m}),N=S(P);h.useEffect(()=>{const l={dashboard:"dashboard_view",exhibition:"exhibitions_view","stall/list":"view_stalls","stall-types":"view_stall_types",bookings:"view_bookings",amenities:"view_amenities",letters:"view_letters",invoices:"view_invoices",exhibitors:"view_exhibitors",index:"users_view",roles:"roles_view",settings:"settings_view"},c=o.pathname.substring(1)||"dashboard",f=l[c];if(f&&!x(f)){const m=P.length>0?P[0]:null;m?s(`/${m.key}`):(i(sr()),s("/login"))}},[o.pathname,x,P,s,i]),h.useEffect(()=>{const l=localStorage.getItem("cachedLogoUrl"),c=localStorage.getItem("logoTimestamp"),f=new Date().getTime();if(l&&c&&f-parseInt(c)<36e5)g(l);else if(u!=null&&u.logo){const m=`${Q.defaults.baseURL}/public/logo`;g(m),localStorage.setItem("cachedLogoUrl",m),localStorage.setItem("logoTimestamp",f.toString());const E=new Image;E.src=m}},[u]);const C=[{key:"profile",label:"Profile",icon:t.jsx(De,{}),onClick:()=>s("/account")},{key:"settings",label:"Settings",icon:t.jsx(cs,{}),onClick:()=>s("/settings")},{key:"divider",type:"divider"},{key:"logout",label:"Logout",icon:t.jsx(Bn,{}),onClick:()=>{i(sr()),s("/login")}}],a=()=>{const l=o.pathname.substring(1);return l.charAt(0).toUpperCase()+l.slice(1)};return t.jsxs(ye,{style:{minHeight:"100vh"},children:[t.jsxs(Vc,{trigger:null,collapsible:!0,collapsed:e,style:{background:"#fff",borderRight:"1px solid #E5E7EB",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1)",position:"fixed",left:0,top:0,bottom:0,zIndex:100,overflow:"hidden"},width:256,collapsedWidth:80,children:[t.jsx(Qc,{children:t.jsx(Wc,{children:t.jsx(Yc,{src:p,alt:"Logo",onError:()=>g("/logo.png")})})}),t.jsx(cn,{mode:"inline",selectedKeys:[o.pathname.substring(1)||"dashboard"],items:N,style:{border:"none",padding:"16px 0",background:"transparent"},className:"main-nav-menu",inlineCollapsed:e})]}),t.jsxs(ye,{style:{marginLeft:e?80:256,transition:"all 0.2s"},children:[t.jsxs(Uc,{style:{padding:"0 24px",background:"#fff",display:"flex",alignItems:"center",justifyContent:"space-between",boxShadow:"0 1px 0 0 rgb(0 0 0 / 0.05)",position:"fixed",top:0,right:0,left:e?80:256,zIndex:99,transition:"left 0.2s"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[t.jsx(G,{type:"text",icon:e?t.jsx(Zi,{}):t.jsx(eo,{}),onClick:()=>r(!e),style:{fontSize:16}}),t.jsx("span",{style:{marginLeft:24,fontSize:20,fontWeight:600,color:"#111827"},children:a()})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[t.jsx("div",{style:{marginRight:20},children:t.jsx(Fc,{isExhibitor:!1})}),t.jsx(Qn,{menu:{items:C},placement:"bottomRight",children:t.jsxs(ue,{align:"center",style:{cursor:"pointer"},children:[t.jsx(Hn,{size:"small",icon:t.jsx(De,{}),style:{backgroundColor:"#5046e5"}}),t.jsx("span",{style:{maxWidth:120,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(d==null?void 0:d.username)||"User"})]})})]})]}),t.jsx(Hc,{style:{margin:"88px 16px 24px 16px",padding:24,minHeight:280,background:"#fff",borderRadius:8,boxShadow:"0 1px 2px 0 rgb(0 0 0 / 0.05)"},children:n})]})]})},hi=localStorage.getItem("exhibitor_token"),Kc=localStorage.getItem("exhibitor")?JSON.parse(localStorage.getItem("exhibitor")):null,Gc={isAuthenticated:!!hi,exhibitor:Kc,token:hi,showLoginModal:!1,showForgotPasswordModal:!1,loginContext:null},Eo=ze({name:"exhibitorAuth",initialState:Gc,reducers:{setExhibitorCredentials:(n,e)=>{n.exhibitor=e.payload.exhibitor,n.token=e.payload.token,n.isAuthenticated=!0,localStorage.setItem("exhibitor_token",e.payload.token),localStorage.setItem("exhibitor",JSON.stringify(e.payload.exhibitor))},exhibitorLogout:n=>{n.exhibitor=null,n.token=null,n.isAuthenticated=!1,localStorage.removeItem("exhibitor_token"),localStorage.removeItem("exhibitor")},showLoginModal:(n,e)=>{n.showLoginModal=!0,n.showForgotPasswordModal=!1,n.loginContext=e.payload||null},hideLoginModal:n=>{n.showLoginModal=!1,n.loginContext=null},showForgotPasswordModal:n=>{n.showForgotPasswordModal=!0,n.showLoginModal=!1},hideForgotPasswordModal:n=>{n.showForgotPasswordModal=!1}}}),{setExhibitorCredentials:Xc,exhibitorLogout:Co,showLoginModal:Rt,hideLoginModal:gn,showForgotPasswordModal:Jc,hideForgotPasswordModal:cr}=Eo.actions,Zc=Eo.reducer,{Header:ed,Sider:td,Content:nd}=ye,At=({children:n})=>{var j;const[e,r]=h.useState(!1),s=He(),i=ht(),o=Ui(),d=Ne(x=>x.exhibitorAuth.exhibitor),u=()=>{const x=o.pathname;return x.includes("/exhibitor/dashboard")?"dashboard":x.includes("/exhibitor/bookings")?"bookings":x.includes("/exhibitor/profile")?"profile":x.includes("/exhibitions")?"exhibitions":x.includes("/exhibitor/support")?"help":"dashboard"},p=[{key:"dashboard",icon:t.jsx(rn,{}),label:"Dashboard",onClick:()=>s("/exhibitor/dashboard")},{key:"bookings",icon:t.jsx(Ve,{}),label:"My Bookings",onClick:()=>s("/exhibitor/bookings")},{key:"profile",icon:t.jsx(De,{}),label:"My Profile",onClick:()=>s("/exhibitor/profile")},{key:"help",icon:t.jsx(_a,{}),label:"Help & Support",onClick:()=>s("/exhibitor/support")}],g=[{key:"profile",label:"My Profile",icon:t.jsx(De,{}),onClick:()=>s("/exhibitor/profile")},{key:"bookings",label:"My Bookings",icon:t.jsx(Ve,{}),onClick:()=>s("/exhibitor/bookings")},{key:"divider",type:"divider"},{key:"logout",label:"Logout",icon:t.jsx(Bn,{}),onClick:()=>{i(Co()),s("/")}}],R=()=>{const x=o.pathname.replace("/exhibitor/","");return x==="dashboard"?"Dashboard":x.startsWith("bookings")?x.includes("/")?"Booking Details":"My Bookings":x==="profile"?"My Profile":x==="support"?"Help & Support":x.charAt(0).toUpperCase()+x.slice(1)};return t.jsxs(ye,{style:{minHeight:"100vh"},children:[t.jsxs(td,{trigger:null,collapsible:!0,collapsed:e,style:{background:"#fff",borderRight:"1px solid #E5E7EB",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1)",position:"fixed",left:0,top:0,bottom:0,zIndex:100,overflow:"hidden"},width:256,collapsedWidth:80,children:[t.jsx("div",{style:{height:65,padding:"0 50px",display:"flex",alignItems:"center",justifyContent:e?"center":"flex-start",borderBottom:"1px solid #E5E7EB"},children:!e&&t.jsx("span",{style:{fontSize:20,fontWeight:600,color:"#2a5378",whiteSpace:"nowrap"},children:"Exhibitor Portal"})}),t.jsx(cn,{mode:"inline",selectedKeys:[u()],items:p,style:{border:"none",padding:e?"16px 0":"16px 8px",background:"transparent"},className:"main-nav-menu",inlineCollapsed:e})]}),t.jsxs(ye,{style:{marginLeft:e?80:256,transition:"all 0.2s"},children:[t.jsxs(ed,{style:{padding:"0 24px",background:"#fff",display:"flex",alignItems:"center",justifyContent:"space-between",boxShadow:"0 1px 0 0 rgb(0 0 0 / 0.05)",zIndex:99},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[t.jsx(G,{type:"text",icon:e?t.jsx(Zi,{}):t.jsx(eo,{}),onClick:()=>r(!e),style:{fontSize:16}}),t.jsx("span",{style:{marginLeft:24,fontSize:20,fontWeight:600,color:"#111827"},children:R()})]}),t.jsx(Qn,{menu:{items:g},placement:"bottomRight",children:t.jsxs(ue,{align:"center",style:{cursor:"pointer"},children:[t.jsx(Hn,{size:"small",style:{backgroundColor:"#5046e5"},children:((j=d==null?void 0:d.companyName)==null?void 0:j.charAt(0).toUpperCase())||"E"}),t.jsx("span",{style:{maxWidth:120,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(d==null?void 0:d.companyName)||"Exhibitor"})]})})]}),t.jsx(nd,{style:{margin:"24px 16px",padding:24,minHeight:280,background:"#fff",borderRadius:8,boxShadow:"0 1px 2px 0 rgb(0 0 0 / 0.05)"},children:n})]})]})},{Title:Io,Text:Gt,Paragraph:rd}=Ee,un=vt`
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
`,sd=vt`
  from { opacity: 0; transform: translateX(-30px); }
  to { opacity: 1; transform: translateX(0); }
`,id=vt`
  from { opacity: 0; transform: translateX(30px); }
  to { opacity: 1; transform: translateX(0); }
`,Ms=vt`
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
`,_o=vt`
  0% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0px); }
`,od=vt`
  0% { transform: rotate(0deg) translateY(0) scaleY(1); opacity: 0; }
  20% { opacity: 0.5; }
  100% { transform: rotate(25deg) translateY(-260px) scaleY(1.2); opacity: 0; }
`,ad=vt`
  0% { transform: rotate(-25deg) translateY(260px) scaleY(1.2); opacity: 0; }
  20% { opacity: 0.5; }
  100% { transform: rotate(0deg) translateY(0) scaleY(1); opacity: 0; }
`,ld=vt`
  0% { stroke-dashoffset: 1000; }
  100% { stroke-dashoffset: 0; }
`,cd=D.div`
  min-height: 100vh;
  display: flex;
  overflow: hidden;
  
  @media (max-width: 768px) {
    flex-direction: column;
  }
`,dd=D.div`
  flex: 1;
  background-image: linear-gradient(135deg, rgba(35, 92, 169, 0.85), rgba(13, 71, 161, 0.9)), url('/exhibition-background.jpg');
  background-size: cover;
  background-position: center;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  color: white;
  padding: 2rem;
  position: relative;
  overflow: hidden;
  animation: ${sd} 0.8s ease-out forwards;
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);
  
  @media (max-width: 768px) {
    min-height: 200px;
  }
`,ud=D.div`
  position: absolute;
  width: 2px;
  height: 600px;
  background: linear-gradient(to bottom, transparent, rgba(255, 255, 255, ${n=>.1+n.index%3*.05}), transparent);
  left: ${n=>20+n.index*10}%;
  top: 0;
  z-index: 1;
  opacity: 0;
  transform-origin: top;
  animation: ${n=>n.isHovered?od:ad} ${n=>1.5+n.index*.2}s ease-out;
  animation-delay: ${n=>n.index*.1}s;
  animation-fill-mode: forwards;
`,hd=D.div`
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 2rem;
  background-color: #ffffff;
  animation: ${id} 0.8s ease-out forwards;
`,pd=D.div`
  position: relative;
  width: 100%;
  height: 50px;
  display: flex;
  justify-content: center;
  align-items: center;
`,fd=D.svg`
  width: 40px;
  height: 40px;
  
  .path {
    stroke: #1890ff;
    stroke-width: 2;
    fill: none;
    stroke-dasharray: 1000;
    stroke-dashoffset: 0;
    animation: ${ld} 2s linear infinite;
  }
  
  .dot {
    fill: #1890ff;
    animation: ${Ms} 2s ease-in-out infinite;
  }
`,gd=D.span`
  margin-left: 10px;
  animation: ${un} 0.5s ease-out;
`,md=D.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1;
`,xd=D.div`
  position: relative;
  z-index: 2;
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
  max-width: 600px;
`,bd=D.div`
  position: absolute;
  top: 25px;
  left: 30px;
  z-index: 10;
  display: flex;
  align-items: center;
  animation: ${un} 0.8s ease-out forwards;
`,yd=D.div`
  background-color: rgba(255, 255, 255, 0.9);
  border-radius: 8px;
  padding: 12px;
  display: flex;
  justify-content: center;
  align-items: center;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
  transition: all 0.3s ease;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
  }
`,wd=D.img`
  width: 140px;
  height: auto;
  animation: ${_o} 6s ease-in-out infinite;
  filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.4));
`;D.div({fontSize:"1.25rem",fontWeight:600,marginLeft:"14px",color:"#1a3e72",letterSpacing:"0.5px"});const vd=D.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-bottom: 2.5rem;
  animation: ${un} 0.8s ease-out forwards;
`,jd=D.div`
  font-size: 2.5rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
  color: #ffffff;
  letter-spacing: 1px;
`,Sd=D(Io)`
  color: #ffffff !important;
  font-weight: 400 !important;
  text-align: center;
  margin-top: 0 !important;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
`,kd=D(rd)`
  color: rgba(255, 255, 255, 0.9) !important;
  font-size: 16px;
  line-height: 1.6;
  text-align: center;
  max-width: 500px;
  margin: 1.5rem auto 0;
`,Ed=D.div`
  width: 100%;
  max-width: 400px;
  animation: ${un} 0.6s ease-out;
`,Cd=D(xe)`
  height: 50px;
  border-radius: 8px;
  border: 1px solid #d9d9d9;
  background-color: #f8f8f8;
  transition: all 0.3s;
  
  &:hover, &:focus {
    background-color: white;
    border-color: #40a9ff;
    box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);
    transform: translateY(-2px);
  }
`,Id=D(xe.Password)`
  height: 50px;
  border-radius: 8px;
  border: 1px solid #d9d9d9;
  background-color: #f8f8f8;
  transition: all 0.3s;
  
  &:hover, &:focus {
    background-color: white;
    border-color: #40a9ff;
    box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);
    transform: translateY(-2px);
  }
`,_d=D(G)`
  height: 50px;
  border-radius: 8px;
  font-weight: 600;
  box-shadow: 0 2px 0 rgba(0, 0, 0, 0.045);
  transition: all 0.3s;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }
  
  &.success {
    animation: ${Ms} 0.5s ease-in-out;
  }
`,Rd=D.div`
  margin-bottom: 2rem;
  text-align: center;
`,mn=D(W.Item)`
  margin-bottom: 24px;
`,Td=D.div`
  margin-top: 8px;
`,Ad=D.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
`,Pd=D(Ra)`
  .ant-checkbox-checked .ant-checkbox-inner {
    background-color: #1890ff;
    border-color: #1890ff;
  }
  
  .ant-checkbox-inner:hover {
    border-color: #1890ff;
  }
  
  .ant-checkbox-wrapper:hover .ant-checkbox-inner {
    border-color: #1890ff;
  }
`,Nd=D.div`
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(82, 196, 26, 0.1);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 100;
  animation: ${un} 0.3s ease-out;
  
  svg {
    font-size: 80px;
    color: #52c41a;
    animation: ${Ms} 0.5s ease-in-out;
  }
`,pi=()=>t.jsxs(pd,{children:[t.jsxs(fd,{viewBox:"0 0 50 50",children:[t.jsx("path",{className:"path",d:"M10,10 L40,10 L40,40 L10,40 L10,10 Z M10,25 L40,25 M20,10 L20,40 M30,10 L30,40"}),t.jsx("circle",{className:"dot",cx:"15",cy:"15",r:"2"}),t.jsx("circle",{className:"dot",cx:"25",cy:"15",r:"2"}),t.jsx("circle",{className:"dot",cx:"35",cy:"15",r:"2"}),t.jsx("circle",{className:"dot",cx:"15",cy:"35",r:"2"}),t.jsx("circle",{className:"dot",cx:"25",cy:"35",r:"2"}),t.jsx("circle",{className:"dot",cx:"35",cy:"35",r:"2"})]}),t.jsx(gd,{children:"Signing in..."})]}),$d=D.div`
  position: absolute;
  width: ${n=>n.size}px;
  height: ${n=>n.size}px;
  background-color: rgba(255, 255, 255, 0.07);
  border-radius: 50%;
  animation: ${_o} ${n=>n.duration}s ease-in-out infinite;
  animation-delay: ${n=>n.delay}s;
  top: ${n=>n.top}%;
  left: ${n=>n.left}%;
  z-index: 1;
`,zd=n=>{if(!n)return 0;const e=n.length>=8,r=/[A-Z]/.test(n),s=/[a-z]/.test(n),i=/\d/.test(n),o=/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/.test(n),d=[e,r,s,i,o];return d.filter(p=>p).length/d.length*100},Dd=n=>n<30?"#ff4d4f":n<60?"#faad14":n<80?"#1890ff":"#52c41a",Fd=n=>n<30?"Weak":n<60?"Fair":n<80?"Good":"Strong",Ld=["At least 8 characters long","Contains uppercase letters","Contains lowercase letters","Contains numbers","Contains special characters"],Md=()=>{const n=He(),e=ht(),[r,s]=h.useState(null),[i,o]=h.useState(!1),[d,u]=h.useState(!1),[p,g]=h.useState(""),[R,j]=h.useState(!1),x=Ne(v=>v.auth.isAuthenticated),w=h.useRef(null),[A,T]=h.useState({x:0,y:0}),[P,S]=h.useState(!1),[N,C]=h.useState(!1),[a]=W.useForm(),[l,c]=h.useState("/logo.png"),[f,m]=h.useState("EXHIBITION MANAGER");h.useEffect(()=>{const v=localStorage.getItem("cachedLogoUrl"),z=localStorage.getItem("logoTimestamp"),O=new Date().getTime();if(v&&z&&O-parseInt(z)<36e5)c(v);else{const H=`${Q.defaults.baseURL}/public/logo`;c(H),localStorage.setItem("cachedLogoUrl",H),localStorage.setItem("logoTimestamp",O.toString());const F=new Image;F.src=H}fetch(`${Q.defaults.baseURL}/public/site-info`).then(H=>H.json()).then(H=>{H.siteName&&m(H.siteName)}).catch(H=>{console.error("Error fetching site info:",H)})},[]),h.useEffect(()=>{const v=localStorage.getItem("rememberedUser");if(v)try{const O=JSON.parse(v);a.setFieldsValue({username:O.username,password:O.password,remember:!0})}catch{localStorage.removeItem("rememberedUser")}const z=localStorage.getItem("loginMessage");z&&(s({title:"Account Inactive",message:z}),localStorage.removeItem("loginMessage"))},[a]),h.useEffect(()=>{const v=setTimeout(()=>{S(!0)},100);return()=>clearTimeout(v)},[]),h.useEffect(()=>{x&&n("/dashboard")},[x,n]),h.useEffect(()=>{const v=z=>{if(w.current){const O=w.current.getBoundingClientRect(),H=z.clientX-O.left,F=z.clientY-O.top;H>=0&&H<=O.width&&F>=0&&F<=O.height&&T({x:H,y:F})}};return window.addEventListener("mousemove",v),()=>{window.removeEventListener("mousemove",v)}},[]);const E=async v=>{var z;try{s(null),o(!0);const O=await ao.login({username:v.username,password:v.password}),{user:H,token:F}=O.data;if(!H||!F)throw new Error("Invalid response from server");v.remember?(localStorage.setItem("rememberedUser",JSON.stringify({username:v.username,password:v.password})),localStorage.setItem("rememberUser","true")):(localStorage.removeItem("rememberedUser"),localStorage.removeItem("rememberUser")),u(!0),setTimeout(()=>{e(Al({user:H,token:F})),ce.success("Login successful!"),n("/dashboard")},1200)}catch(O){console.error("Login Error:",O),console.error("Response Data:",(z=O.response)==null?void 0:z.data);let H="Authentication Error",F="Invalid username or password.";if(O.response&&typeof O.response=="object"){const{status:L,data:V}=O.response;L===401?(H="Invalid Credentials",F="The username or password you entered is incorrect."):L===403?(H="Access Denied",F="You do not have permission to access this resource."):L===400?(H="Invalid Request",F="Please check your input and try again."):L===500&&(H="Server Error",F="A server error occurred. Please try again later."),V&&typeof V=="object"&&V.message&&(F=V.message)}else O.request?(H="Connection Error",F="Unable to connect to the server. Please check your internet connection."):O.message&&(F=O.message);s({title:H,message:F})}finally{o(!1)}},y=zd(p),b=Dd(y),k=Fd(y),I=localStorage.getItem("rememberUser")==="true";if(x)return t.jsxs("div",{style:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",background:"#f0f5ff"},children:[t.jsx(pi,{}),t.jsx(Gt,{style:{marginTop:16},children:"Redirecting to dashboard..."})]});const _=v=>{const z=[];for(let O=0;O<v;O++){const H=Math.random()*20+8,F=Math.random()*3,L=Math.random()*10+6,V=Math.random()*100,q=Math.random()*100;z.push(t.jsx($d,{size:H,delay:F,duration:L,top:V,left:q,style:{transform:`translate(${A.x/50*(O%5-2)}px, ${A.y/50*(O%5-2)}px)`,opacity:N?0:1,transition:"opacity 0.5s ease-out",backgroundColor:"rgba(255, 255, 255, 0.07)"}},O))}return z},B=v=>{const z=[];for(let O=0;O<v;O++)z.push(t.jsx(ud,{index:O,isHovered:N},O));return z},$=v=>{C(v)};return t.jsxs(cd,{style:{opacity:P?1:0,transition:"opacity 0.3s ease-out"},children:[d&&t.jsx(Nd,{children:t.jsx(Ta,{})}),t.jsxs(dd,{onMouseEnter:()=>$(!0),onMouseLeave:()=>$(!1),children:[t.jsx(bd,{children:t.jsx(yd,{children:t.jsx(wd,{src:l,alt:"Exhibition Manager Logo",onError:()=>c("/logo.png")})})}),t.jsxs(md,{ref:w,children:[_(12),B(8)]}),t.jsxs(xd,{children:[t.jsx(vd,{children:t.jsx(jd,{children:f})}),t.jsx(Sd,{level:4,children:"Your complete solution for managing exhibitions, stalls, and exhibitors"}),t.jsx(kd,{children:"Create floor plans, manage exhibitors, handle bookings, and generate invoices - all in one platform."})]})]}),t.jsx(hd,{children:t.jsxs(Ed,{children:[t.jsxs(Rd,{children:[t.jsx(Io,{level:2,style:{marginBottom:"0.5rem"},children:"Admin Login"}),t.jsx(Gt,{type:"secondary",children:"Enter your credentials to access the admin dashboard"})]}),r&&t.jsx(Ke,{message:r.title,description:r.message,type:"error",showIcon:!0,style:{marginBottom:24,borderRadius:8,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.05)"},action:t.jsx(G,{size:"small",type:"text",onClick:()=>s(null),children:"Dismiss"})}),t.jsxs(W,{form:a,name:"login",initialValues:{remember:I},onFinish:E,layout:"vertical",children:[t.jsx(mn,{name:"username",rules:[{required:!0,message:"Please input your username!"}],label:"Username",children:t.jsx(Cd,{prefix:t.jsx(De,{style:{color:"#bfbfbf"}}),placeholder:"Enter your username",disabled:i,autoComplete:"username"})}),t.jsx(mn,{name:"password",rules:[{required:!0,message:"Please input your password!"}],label:"Password",help:R&&t.jsxs(Td,{children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[t.jsx(Gt,{type:"secondary",children:"Password Strength:"}),t.jsx(Gt,{strong:!0,style:{color:b},children:k})]}),t.jsx(Aa,{percent:y,showInfo:!1,strokeColor:b,size:"small"}),t.jsx("div",{style:{marginTop:"8px"},children:t.jsx(yt,{title:t.jsx("ul",{style:{paddingLeft:"20px",margin:"0"},children:Ld.map((v,z)=>t.jsx("li",{children:v},z))}),children:t.jsxs(Gt,{type:"secondary",style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[t.jsx(Vt,{style:{marginRight:"4px"}}),"Password requirements"]})})})]}),children:t.jsx(Id,{prefix:t.jsx(Dt,{style:{color:"#bfbfbf"}}),placeholder:"Enter your password",disabled:i,autoComplete:"current-password",onChange:v=>g(v.target.value),onFocus:()=>j(!0),onBlur:()=>j(!1)})}),t.jsx(Ad,{children:t.jsx(mn,{name:"remember",valuePropName:"checked",noStyle:!0,children:t.jsx(Pd,{children:"Remember me"})})}),t.jsx(mn,{children:i?t.jsx(pi,{}):t.jsx(_d,{type:"primary",htmlType:"submit",block:!0,className:d?"success":"",children:"Sign in"})})]})]})})]})};class bs extends Ie.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.error("Error caught by boundary:",e,r)}render(){var e;return this.state.hasError?t.jsx(on,{status:"error",title:"Something went wrong",subTitle:((e=this.state.error)==null?void 0:e.message)||"An unexpected error occurred",extra:[t.jsx(G,{type:"primary",onClick:()=>window.location.href="/dashboard",children:"Go to Dashboard"},"home"),t.jsx(G,{onClick:()=>window.location.reload(),children:"Reload Page"},"reload")]}):this.props.children}}const xt={getExhibitions:()=>gt.get("/public/exhibitions"),getExhibition:n=>gt.get(`/public/exhibitions/${n}`),getLayout:n=>gt.get(`/public/exhibitions/${n}/layout`),getStallDetails:(n,e)=>gt.get(`/public/exhibitions/${n}/stalls/${e}`),bookStall:(n,e,r)=>gt.post(`/public/exhibitions/${n}/stalls/${e}/book`,r),bookMultipleStalls:(n,e)=>gt.post(`/public/exhibitions/${n}/stalls/book-multiple`,e),searchExhibitors:n=>gt.get("/public/exhibitors/search",{params:{query:n}}),exhibitorBookStalls:n=>Q.post(`/exhibitor-bookings/${n.exhibitionId}`,n),getExhibitorBookings:()=>Q.get("/exhibitor-bookings/my-bookings"),getExhibitorBooking:n=>Q.get(`/exhibitor-bookings/${n}`),cancelExhibitorBooking:n=>Q.patch(`/exhibitor-bookings/${n}/cancel`),getExhibitorBookingInvoice:n=>Q.get(`/exhibitor-bookings/${n}/invoice`)},fi=({width:n,height:e,scale:r=1,position:s={x:0,y:0},isSelected:i=!1,onSelect:o=()=>{},onChange:d=()=>{},children:u,isEditable:p=!0})=>{const g=j=>{p&&(o(),j.cancelBubble=!0)},R=Ie.useMemo(()=>{const j=[];for(let w=0;w<=n;w+=5)j.push(t.jsx(On,{points:[w,0,w,e],stroke:"#e8e8e8",strokeWidth:1/r,dash:[5/r]},`v${w}`));for(let w=0;w<=e;w+=5)j.push(t.jsx(On,{points:[0,w,n,w],stroke:"#e8e8e8",strokeWidth:1/r,dash:[5/r]},`h${w}`));return j},[n,e,r]);return t.jsxs(qt,{x:s.x,y:s.y,width:n,height:e,onClick:g,children:[t.jsx(Yn,{width:n,height:e,fill:"#ffffff",stroke:i&&p?"#1890ff":"#d9d9d9",strokeWidth:i&&p?2/r:1/r,shadowColor:"rgba(0,0,0,0.1)",shadowBlur:10/r,shadowOffset:{x:0,y:0},shadowOpacity:.5,cornerRadius:4/r}),t.jsx(qt,{children:R}),t.jsx(It,{text:`${n}m  ${e}m`,fontSize:14/r,fill:"#666666",x:5,y:5}),u]})},Bd=({visible:n,width:e,height:r,onCancel:s,onSubmit:i})=>{const[o]=W.useForm();Ie.useEffect(()=>{n&&o.setFieldsValue({width:e,height:r})},[n,e,r,o]);const d=()=>{o.validateFields().then(u=>{i(u),o.resetFields()})};return t.jsx(st,{title:"Edit Exhibition Space",open:n,onCancel:()=>{o.resetFields(),s()},onOk:d,destroyOnClose:!0,children:t.jsxs(W,{form:o,layout:"vertical",initialValues:{width:e,height:r},children:[t.jsx(W.Item,{name:"width",label:"Width (meters)",rules:[{required:!0,message:"Please enter width"},{type:"number",min:10,message:"Width must be at least 10 meters"}],children:t.jsx(Ge,{min:10,max:1e3,style:{width:"100%"},placeholder:"Enter width in meters"})}),t.jsx(W.Item,{name:"height",label:"Height (meters)",rules:[{required:!0,message:"Please enter height"},{type:"number",min:10,message:"Height must be at least 10 meters"}],children:t.jsx(Ge,{min:10,max:1e3,style:{width:"100%"},placeholder:"Enter height in meters"})})]})})},Ro=({hall:n,isSelected:e=!1,onSelect:r,onChange:s,scale:i=1,position:o={x:0,y:0},exhibitionWidth:d=100,exhibitionHeight:u=100,isStallMode:p=!1})=>{const g=Ie.useRef(null),R=Ie.useRef(null),j=Ie.useMemo(()=>{const S=[],{width:N,height:C}=n.dimensions,a=1;for(let l=0;l<=N;l+=a)S.push(t.jsx(On,{points:[l,0,l,C],stroke:"#ddd",strokeWidth:1/i,dash:[2/i,2/i],listening:!1},`v${l}`));for(let l=0;l<=C;l+=a)S.push(t.jsx(On,{points:[0,l,N,l],stroke:"#ddd",strokeWidth:1/i,dash:[2/i,2/i],listening:!1},`h${l}`));return S},[n.dimensions.width,n.dimensions.height,i]);Ie.useEffect(()=>{var S;e&&R.current&&g.current&&(R.current.nodes([g.current]),(S=R.current.getLayer())==null||S.batchDraw())},[e]);const x=S=>{S.cancelBubble=!0;const N=S.target,C=N.x(),a=N.y(),l=Math.max(0,Math.min(C,d-n.dimensions.width)),c=Math.max(0,Math.min(a,u-n.dimensions.height));N.x(Math.round(l)),N.y(Math.round(c))},w=S=>{S.cancelBubble=!0;const N=S.target,C=Math.max(0,Math.min(N.x(),d-n.dimensions.width)),a=Math.max(0,Math.min(N.y(),u-n.dimensions.height));s==null||s({...n,_id:n._id,id:n.id||n._id,exhibitionId:n.exhibitionId,dimensions:{...n.dimensions,x:Math.round(C),y:Math.round(a)}})},A=S=>{S.cancelBubble=!0},T=S=>{if(!g.current)return;const N=g.current,C=N.scaleX(),a=N.scaleY();N.scaleX(1),N.scaleY(1);const l=Math.round(N.width()*C),c=Math.round(N.height()*a),f=N.x(),m=N.y(),E=Math.max(0,Math.min(f,d-l)),y=Math.max(0,Math.min(m,u-c));s==null||s({...n,_id:n._id,id:n.id||n._id,exhibitionId:n.exhibitionId,dimensions:{x:E,y,width:Math.max(5,Math.min(l,d-E)),height:Math.max(5,Math.min(c,u-y))}})},P=S=>{S.cancelBubble=!0,r==null||r(n)};return t.jsxs(qt,{ref:g,x:n.dimensions.x,y:n.dimensions.y,width:n.dimensions.width,height:n.dimensions.height,draggable:!p&&!!s,onClick:P,onTap:P,onDragStart:A,onDragMove:x,onDragEnd:w,onTransformEnd:T,children:[t.jsx(Yn,{width:n.dimensions.width,height:n.dimensions.height,fill:"#ffffff",stroke:e?"#1890ff":"#d9d9d9",strokeWidth:e?2/i:1/i,shadowColor:"rgba(0,0,0,0.1)",shadowBlur:5/i,shadowOffset:{x:2/i,y:2/i},shadowOpacity:.5}),t.jsx(qt,{children:j}),t.jsx(It,{text:n.name,fontSize:14/i,fill:"#000000",width:n.dimensions.width,align:"center",y:n.dimensions.height/2-7/i})]})},Od=n=>{if(!n)return"";const e=window.location.origin,r=n.replace(/^\/?(api\/uploads\/)?/,"");if(r.includes("fixtures/"))return`${e}/api/uploads/${r}`;const s=localStorage.getItem("token");return s?`${e}/api/uploads/${r}?token=${s}`:""},To=({fixture:n,isSelected:e=!1,onSelect:r,onChange:s,scale:i=1,position:o={x:0,y:0},exhibitionWidth:d=100,exhibitionHeight:u=100,isEditable:p=!0})=>{const g=Ie.useRef(null),R=Ie.useRef(null),[j,x]=h.useState("");h.useEffect(()=>{if(n.icon){const c=Od(n.icon);x(c)}else x("")},[n.icon]);const[w]=hl(j);Ie.useEffect(()=>{var c;e&&R.current&&g.current&&(R.current.nodes([g.current]),(c=R.current.getLayer())==null||c.batchDraw())},[e]);const A=c=>{c.cancelBubble=!0},T=c=>{c.cancelBubble=!0;const f=c.target,m=f.x(),E=f.y(),y=Math.max(0,Math.min(m,d-n.dimensions.width)),b=Math.max(0,Math.min(E,u-n.dimensions.height));f.x(Math.round(y)),f.y(Math.round(b))},P=c=>{c.cancelBubble=!0;const f=c.target,m=f.x(),E=f.y(),y=Math.max(0,Math.min(m,d-n.dimensions.width)),b=Math.max(0,Math.min(E,u-n.dimensions.height)),k=n._id||n.id;s==null||s({...n,_id:k,id:k,exhibitionId:n.exhibitionId,position:{x:Math.round(y),y:Math.round(b)}})},S=c=>{if(!g.current)return;const f=g.current,m=f.scaleX(),E=f.scaleY(),y=f.rotation();f.scaleX(1),f.scaleY(1);const b=Math.round(n.dimensions.width*m),k=Math.round(n.dimensions.height*E),I=f.x(),_=f.y(),B=Math.max(0,Math.min(I,d-b)),$=Math.max(0,Math.min(_,u-k)),v=n._id||n.id;s==null||s({...n,_id:v,id:v,exhibitionId:n.exhibitionId,position:{x:B,y:$},dimensions:{width:Math.max(.5,Math.min(b,d-B)),height:Math.max(.5,Math.min(k,u-$))},rotation:y})},N=c=>{c.cancelBubble=!0,r==null||r(n)},C=()=>{const c=n.borderColor||(e?"#1890ff":"#d9d9d9"),f=n.borderRadius!==void 0?n.borderRadius/i:3/i;return w?t.jsx(fl,{image:w,width:n.dimensions.width,height:n.dimensions.height,fill:n.color||"#ffffff",stroke:c,strokeWidth:e?2/i:1/i,cornerRadius:f,shadowColor:"rgba(0,0,0,0.1)",shadowBlur:5/i,shadowOffset:{x:2/i,y:2/i},shadowOpacity:.5}):t.jsx(Yn,{width:n.dimensions.width,height:n.dimensions.height,fill:n.color||"#f0f2f5",stroke:c,strokeWidth:e?2/i:1/i,cornerRadius:f,shadowColor:"rgba(0,0,0,0.1)",shadowBlur:5/i,shadowOffset:{x:2/i,y:2/i},shadowOpacity:.5})},a=(c,f)=>`${Math.round(c)} m x ${Math.round(f)} m`,l=(c,f)=>{const m=Math.min(c,f)*.12,E=8/i,y=16/i;return Math.max(E,Math.min(y,m))};return t.jsxs(t.Fragment,{children:[t.jsxs(qt,{ref:g,x:n.position.x,y:n.position.y,width:n.dimensions.width,height:n.dimensions.height,rotation:n.rotation||0,draggable:p&&!!s,onClick:N,onTap:N,onDragStart:A,onDragMove:T,onDragEnd:P,onTransformEnd:S,children:[C(),w&&n.name&&n.showName!==!1&&t.jsx(It,{text:n.name,fontSize:12/i,fill:"#000000",width:n.dimensions.width,align:"center",y:-16/i}),!w&&t.jsxs(t.Fragment,{children:[n.name&&t.jsx(It,{text:n.name,fontSize:l(n.dimensions.width,n.dimensions.height),fill:"#333333",fontStyle:"bold",width:n.dimensions.width,height:n.dimensions.height*.6,align:"center",verticalAlign:"middle",wrap:"word",x:0,y:n.dimensions.height*.2}),t.jsx(It,{text:a(n.dimensions.width,n.dimensions.height),fontSize:l(n.dimensions.width,n.dimensions.height)*.8,fill:"#666666",width:n.dimensions.width,align:"center",x:0,y:n.dimensions.height*.75})]})]}),e&&p&&t.jsx(pl,{ref:R,rotateEnabled:!0,enabledAnchors:["top-left","top-right","bottom-left","bottom-right"],boundBoxFunc:(c,f)=>f.width<.5||f.height<.5?c:f})]})},qd=({visible:n,x:e,y:r,onExhibitionClick:s,onHallClick:i,onStallClick:o,onFixtureClick:d,onClose:u})=>{if(!n)return null;const p=[{key:"exhibition",icon:t.jsx(Rs,{}),label:"Exhibition Space",onClick:()=>{s(),u()}},{key:"hall",icon:t.jsx(Ts,{}),label:"Add Hall",onClick:()=>{i(),u()}}];return o&&p.push({key:"stall",icon:t.jsx(Ve,{}),label:"Add Stall",onClick:()=>{o(),u()}}),d&&p.push({key:"fixture",icon:t.jsx(to,{}),label:"Add Fixture",onClick:()=>{d(),u()}}),t.jsx("div",{style:{position:"fixed",top:r,left:e,zIndex:1e3,boxShadow:"0 2px 8px rgba(0,0,0,0.15)",borderRadius:"4px",backgroundColor:"#fff",width:"200px"},children:t.jsx(cn,{items:p})})},Ud=({stall:n,isSelected:e=!1,onSelect:r,onChange:s,hallWidth:i=0,hallHeight:o=0,hallX:d=0,hallY:u=0,scale:p=1,isDragging:g=!1})=>{var B,$;const R=h.useRef(null),[j,x]=h.useState(!1),[w,A]=h.useState(!1),[T,P]=h.useState(!1);h.useEffect(()=>{P(window.innerWidth<768);const v=()=>{P(window.innerWidth<768)};return window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]),h.useEffect(()=>{if(j&&!g)A(!0);else if(g)A(!1);else{const v=setTimeout(()=>{A(!1)},100);return()=>clearTimeout(v)}},[j,g]),h.useEffect(()=>{if(j&&R.current&&!g){if(T&&!e)return;R.current.getStage()&&R.current.moveToTop()}},[j,e,T,g]);const S=e||n.isSelected,N=h.useCallback(v=>{switch(v){case"available":return"#52c41a";case"booked":return"#faad14";case"reserved":return"#1890ff";default:return"#d9d9d9"}},[]),C=h.useCallback(v=>{switch(v){case"available":return"rgba(82, 196, 26, 0.2)";case"booked":return"rgba(250, 173, 20, 0.2)";case"reserved":return"rgba(24, 144, 255, 0.2)";default:return"rgba(217, 217, 217, 0.2)"}},[]),a=h.useCallback(v=>{v.cancelBubble=!0;const z=v.target,O=z.x()-d,H=z.y()-u,F=Math.max(0,Math.min(O,i-n.dimensions.width)),L=Math.max(0,Math.min(H,o-n.dimensions.height));z.x(Math.round(F+d)),z.y(Math.round(L+u))},[d,u,i,o,n.dimensions.width,n.dimensions.height]),l=h.useCallback(v=>{if(v.cancelBubble=!0,!s)return;const z=v.target,O=z.x()-d,H=z.y()-u,F=Math.max(0,Math.min(O,i-n.dimensions.width)),L=Math.max(0,Math.min(H,o-n.dimensions.height));s({...n,id:n.id||n._id,_id:n._id||n.id,dimensions:{...n.dimensions,x:Math.round(F),y:Math.round(L)}})},[s,d,u,i,o,n]),c=h.useCallback(v=>{v.cancelBubble=!0},[]),f=h.useCallback(v=>{v.cancelBubble=!0,r&&!g&&r()},[r,g]),m=h.useCallback(()=>{T&&!S||g||x(!0)},[T,S,g]),E=h.useCallback(()=>{x(!1)},[]),y={x:0,y:0,width:10,height:10},b=n.dimensions||y,k=n.typeName||((B=n.stallType)==null?void 0:B.name)||(typeof n.stallTypeId=="object"?($=n.stallTypeId)==null?void 0:$.name:null)||"Standard";n.ratePerSqm*b.width*b.height;const I=0,_=h.useMemo(()=>n.status!=="available"&&n.companyName?`${k} - ${b.width}${b.height}m - ${n.companyName}`:`${k} - ${b.width}${b.height}m`,[k,b.width,b.height,n.status,n.companyName]);return t.jsxs(qt,{ref:R,x:b.x+d,y:b.y+u,width:b.width,height:b.height,draggable:!!s,onClick:f,onTap:f,onDragStart:c,onDragMove:a,onDragEnd:l,opacity:n.status==="available"?1:.7,cursor:n.status==="available"?"pointer":"default",onMouseEnter:m,onMouseLeave:E,listening:g?!1:!T||n.status==="available",transformsEnabled:g||T?"position":"all",children:[t.jsx(Yn,{width:b.width,height:b.height,fill:S?"rgba(24, 144, 255, 0.1)":C(n.status),stroke:S?"#1890ff":N(n.status),strokeWidth:S?2/p:1/p,shadowColor:"rgba(0,0,0,0.1)",shadowBlur:g?0:T?2:3,shadowOffset:{x:1,y:1},shadowOpacity:g?0:.3,rotation:I,perfectDrawEnabled:!g,transformsEnabled:g?"position":"all",cornerRadius:.05}),t.jsx(It,{text:n.number,fontSize:Math.min(b.width,b.height)*.25,fill:"#000000",width:b.width,height:b.height,align:"center",verticalAlign:"middle",transformsEnabled:"position",perfectDrawEnabled:!g,fontStyle:"bold",listening:!1}),S&&!g&&t.jsx(gl,{x:b.width-2,y:2,radius:Math.min(.8,b.width*.05),fill:"#1890ff",stroke:"#ffffff",strokeWidth:.2/p,transformsEnabled:"position",listening:!1}),w&&!g&&t.jsxs(ml,{x:b.width/2,y:0,opacity:1,listening:!1,children:[t.jsx(xl,{fill:"rgba(0, 0, 0, 1.0)",cornerRadius:.5,pointerDirection:"down",pointerWidth:4,pointerHeight:2,lineJoin:"round",y:-7,listening:!1}),t.jsx(It,{text:_,fontSize:1.2,fill:"#ffffff",align:"center",padding:2,y:-7,offsetY:0,width:Math.max(_.length*.7,25),height:3,verticalAlign:"middle",listening:!1})]})]})},Ao=h.memo(Ud),Vd=({width:n,height:e,exhibitionWidth:r=100,exhibitionHeight:s=100,halls:i=[],stalls:o=[],fixtures:d=[],selectedHall:u=null,selectedFixture:p=null,onSelectHall:g=()=>{},onSelectFixture:R=()=>{},onHallChange:j=()=>{},onFixtureChange:x=()=>{},onExhibitionChange:w=()=>{},onAddHall:A=()=>{},onAddStall:T=()=>{},onAddFixture:P=()=>{},children:S,isStallMode:N=!1,isFixtureMode:C=!1,isPublicView:a=!1})=>{const l=h.useRef(null),c=h.useRef(null),f=h.useRef(null),[m,E]=h.useState(1),[y,b]=h.useState({x:0,y:0}),[k,I]=h.useState(!1),[_,B]=h.useState(!1),[$,v]=h.useState({visible:!1,x:0,y:0}),[z,O]=h.useState(!1),[H,F]=h.useState(!1),[L,V]=h.useState(!1),[q,U]=h.useState(void 0);h.useEffect(()=>{const K=()=>{V(window.innerWidth<768)};return K(),window.addEventListener("resize",K),()=>{window.removeEventListener("resize",K)}},[]);const X=h.useCallback(K=>{if(K.evt.preventDefault(),!l.current)return;const te=l.current,he=m,Z=te.getPointerPosition(),Re={x:(Z.x-te.x())/he,y:(Z.y-te.y())/he},$e=1.15,Me=K.evt.deltaY<0?he*$e:he/$e,jt=Math.min(Math.max(.1,Me),20),Wt={x:Z.x-Re.x*jt,y:Z.y-Re.y*jt};E(jt),b(Wt)},[m]),Y=h.useCallback(()=>{if(!l.current)return;const K=l.current,te=Math.min(m*1.15,20),he=K.width()/2,Z=K.height()/2,Re={x:(he-y.x)/m,y:(Z-y.y)/m},$e={x:he-Re.x*te,y:Z-Re.y*te};E(te),b($e)},[m,y]),pe=h.useCallback(()=>{if(!l.current)return;const K=l.current,te=Math.max(m/1.15,.1),he=K.width()/2,Z=K.height()/2,Re={x:(he-y.x)/m,y:(Z-y.y)/m},$e={x:he-Re.x*te,y:Z-Re.y*te};E(te),b($e)},[m,y]),we=h.useCallback(K=>{K?(U(nr.pixelRatio),nr.pixelRatio=L?.8:1):q&&(nr.pixelRatio=q)},[q,L]),oe=h.useCallback(K=>{if(K.target===l.current&&(v({...$,visible:!1}),B(!0),we(!0),c.current)){if(a){const te=L?{x:-10,y:-10,width:n+20,height:e+20}:void 0;c.current.cache(te)}if(c.current.hitGraphEnabled(!1),a&&l.current){const te=l.current.container();te.style.cursor="grabbing",te.classList.add("dragging"),l.current.batchDraw(),c.current.getChildren().forEach(Z=>{if(Z.shadowForStrokeEnabled&&(Z._savedShadowForStroke=Z.shadowForStrokeEnabled(),Z.shadowForStrokeEnabled(!1)),Z.perfectDrawEnabled&&(Z._savedPerfectDraw=Z.perfectDrawEnabled(),Z.perfectDrawEnabled(!1)),Z.cache&&!Z.isCached&&Z.width&&Z.height){Z._dragCached=!0;try{L?Z.cache({offset:10,pixelRatio:.8}):Z.cache()}catch{Z._dragCached=!1}}})}}},[$,a,we,L,n,e]),ee=h.useCallback(K=>{if(a&&K.target===l.current){if(K.evt&&K.evt._dragSkipUpdate)return;if(K.evt&&(K.evt._dragSkipUpdate=!0),l.current&&c.current){const te=L?.85:.7;Math.random()>te&&l.current.batchDraw()}return}K.target===l.current&&L&&c.current&&(K.cancelBubble=!0)},[L,a]),de=h.useCallback(K=>{if(K.target===l.current){if(b({x:K.target.x(),y:K.target.y()}),we(!1),c.current&&(c.current.hitGraphEnabled(!0),a&&c.current.clearCache(),a&&l.current)){const te=l.current.container();te.style.cursor="",te.classList.remove("dragging"),c.current.getChildren().forEach(Z=>{Z._savedShadowForStroke!==void 0&&(Z.shadowForStrokeEnabled(Z._savedShadowForStroke),delete Z._savedShadowForStroke),Z._savedPerfectDraw!==void 0&&(Z.perfectDrawEnabled(Z._savedPerfectDraw),delete Z._savedPerfectDraw),Z._dragCached&&(Z.clearCache(),delete Z._dragCached)})}setTimeout(()=>{l.current&&l.current.batchDraw()},50),B(!1)}},[a,we]),Te=h.useCallback(()=>{I(!0),document.body.style.cursor=_?"grabbing":"grab"},[_]),M=h.useCallback(()=>{I(!1),document.body.style.cursor="default"},[]),J=K=>{var he,Z,Re;const te=K.target.getClassName();if(te==="Stage"||te==="Layer"){v({...$,visible:!1});return}if(te==="Group"||te==="Rect"){if(g(null),R(null),C){v({...$,visible:!1});return}const $e=(he=l.current)==null?void 0:he.getPointerPosition();if($e&&ae($e)){const{x:Me,y:jt}=$e,{x:Wt,y:ea}=((Z=l.current)==null?void 0:Z.position())||{x:0,y:0},{x:ta,y:na}=((Re=l.current)==null?void 0:Re.scale())||{x:1,y:1},ra=(Me-Wt)/ta,sa=(jt-ea)/na;v({x:ra,y:sa,visible:!0})}else v({...$,visible:!1})}else v({...$,visible:!1})},ae=K=>{if(!r||!s||!l.current)return!1;const{x:te,y:he}=K,{x:Z,y:Re}=l.current.position(),{x:$e}=l.current.scale(),Me={x:(te-Z)/$e,y:(he-Re)/$e};return Me.x>=0&&Me.x<=r&&Me.y>=0&&Me.y<=s},Se=h.useCallback(()=>{g(null),R(null),O(!0),F(!0),v({...$,visible:!1})},[g,R,$]),Ce=h.useCallback(K=>{w(K),F(!1)},[w]),Fe=()=>{O(!0),F(!0),v({...$,visible:!1})},Qt=()=>{A(),v({...$,visible:!1})},Tt=()=>{T(),v({...$,visible:!1})};h.useEffect(()=>{if(n>0&&e>0&&r>0&&s>0){const K=N?20:40,te=n-K*2,he=e-K*2,Z=te/r,Re=he/s,Me=Math.min(Z,Re),jt=(n-r*Me)/2,Wt=(e-s*Me)/2;E(Me),b({x:jt,y:Wt}),l.current&&l.current.batchDraw()}},[n,e,r,s,N]);const pt=Ie.Children.map(S,K=>Ie.isValidElement(K)?Ie.cloneElement(K,{scale:m,position:y}):K),Zo=t.jsx(fi,{width:r,height:s,scale:m,position:{x:0,y:0},isSelected:!1,onSelect:void 0,onChange:void 0,isEditable:!1});return n<=0||e<=0||r<=0||s<=0?t.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"#fafafa"},children:"Loading..."}):t.jsxs("div",{style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",background:"#fafafa",cursor:k?_?"grabbing":"grab":"default"},children:[t.jsx("div",{style:{position:"absolute",top:16,right:16,zIndex:1,display:"flex",gap:"8px"},children:t.jsxs(ue,{style:{background:"rgba(255, 255, 255, 0.9)",padding:"8px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",backdropFilter:"blur(8px)"},children:[t.jsx(G,{icon:t.jsx(Pa,{}),onClick:pe,disabled:m<=.1,style:{borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center"}}),t.jsxs("div",{style:{padding:"0 8px",fontSize:"14px",color:"#666",userSelect:"none"},children:[Math.round(m*100),"%"]}),t.jsx(G,{icon:t.jsx(Na,{}),onClick:Y,disabled:m>=20,style:{borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center"}})]})}),t.jsxs(bl,{ref:l,width:n,height:e,onClick:J,draggable:!0,onDragStart:oe,onDragMove:ee,onDragEnd:de,onMouseEnter:Te,onMouseLeave:M,onWheel:X,x:y.x,y:y.y,scaleX:m,scaleY:m,perfectDrawEnabled:!_&&!a,hitGraphEnabled:!_,pixelRatio:_?L?.8:1:Math.min(1.5,window.devicePixelRatio||1),dragDistance:a?L?5:3:0,children:[a&&t.jsx(yl,{ref:f,listening:!1,children:Zo}),t.jsxs(wl,{ref:c,imageSmoothingEnabled:!_||!a,children:[!a&&t.jsx(fi,{width:r,height:s,scale:m,position:{x:0,y:0},isSelected:z,onSelect:C?void 0:Se,onChange:N||C?void 0:w,isEditable:!N&&!C}),i.map(K=>t.jsx(Ro,{hall:K,isSelected:(u==null?void 0:u.id)===K.id,onSelect:()=>g(K),onChange:N||C?void 0:j,scale:m,position:{x:0,y:0},exhibitionWidth:r,exhibitionHeight:s,isStallMode:N||C},K._id||K.id)),o.map(K=>{const te=K._id||K.id,he=i.find(Z=>Z.id===K.hallId||Z._id===K.hallId);return he?t.jsx(Ao,{stall:{...K,_id:te,id:te},hallX:he.dimensions.x,hallY:he.dimensions.y,hallWidth:he.dimensions.width,hallHeight:he.dimensions.height,scale:m,isDragging:_&&a},te):null}),[...d].sort((K,te)=>(K.zIndex||1)-(te.zIndex||1)).map(K=>{const te=K._id||K.id,Z=((p==null?void 0:p._id)||(p==null?void 0:p.id))===te;return t.jsx(To,{fixture:{...K,_id:te,id:te},isSelected:Z,onSelect:()=>R(K),onChange:C?x:void 0,scale:m,position:{x:0,y:0},exhibitionWidth:r,exhibitionHeight:s,isEditable:C},te)}),pt]})]}),t.jsx(qd,{visible:$.visible,x:$.x,y:$.y,onExhibitionClick:Fe,onHallClick:Qt,onStallClick:Tt,onClose:()=>v({...$,visible:!1})}),t.jsx(Bd,{visible:H,width:r,height:s,onCancel:()=>F(!1),onSubmit:Ce})]})},Po={getStallTypes:async()=>Q.get("/stall-types"),createStallType:async n=>Q.post("/stall-types",n),updateStallType:async(n,e)=>Q.put(`/stall-types/${n}`,e),deleteStallType:async n=>Q.delete(`/stall-types/${n}`)},Yf=Object.freeze(Object.defineProperty({__proto__:null,default:Po},Symbol.toStringTag,{value:"Module"})),{Title:Hd}=Ee,Kf=({visible:n,stall:e,hall:r,exhibition:s,onCancel:i,onSubmit:o,onDelete:d})=>{const[u]=W.useForm(),[p,g]=h.useState([]),[R,j]=h.useState(!1),x=(S,N,C,a,l)=>{const f=[...C].sort((E,y)=>{const b=Math.floor(E.dimensions.y/5),k=Math.floor(y.dimensions.y/5);return b===k?E.dimensions.x-y.dimensions.x:E.dimensions.y-y.dimensions.y}),m=(E,y)=>E+S>a||y+N>l?!1:!f.some(b=>{const k=b.dimensions.x,I=b.dimensions.y,_=b.dimensions.width,B=b.dimensions.height,$=1;return!(E+S+$<=k||E>=k+_+$||y+N+$<=I||y>=I+B+$)});for(const E of f){const y=E.dimensions.x+E.dimensions.width+1,b=E.dimensions.y;if(m(y,b))return{x:y,y:b};const k=E.dimensions.x,I=E.dimensions.y+E.dimensions.height+1;if(m(k,I))return{x:k,y:I}}for(let E=0;E<l;E+=5)for(let y=0;y<a;y+=5)if(m(y,E))return{x:y,y:E};return{x:0,y:0}};h.useEffect(()=>{if(e){console.log("Setting form values for stall:",e);const S={number:e.number,stallTypeId:e.stallTypeId,width:e.dimensions.width,height:e.dimensions.height,ratePerSqm:e.ratePerSqm,status:e.status};console.log("Form values to set:",S),u.setFieldsValue(S)}else r&&!u.getFieldValue("status")&&u.setFieldsValue({status:"available",width:Math.min(20,r.dimensions.width/4),height:Math.min(20,r.dimensions.height/4),ratePerSqm:0})},[e,r,u]),h.useEffect(()=>{n&&(async()=>{var N;try{j(!0);const C=await Po.getStallTypes();console.log("Fetched stall types:",C.data);const a=((N=s.stallRates)==null?void 0:N.map(c=>c.stallTypeId))||[];console.log("Configured stall type IDs:",a);const l=C.data.filter(c=>c.status==="active"&&c._id&&a.includes(c._id));console.log("Filtered stall types:",l),g(l)}catch(C){console.error("Failed to fetch stall types:",C)}finally{j(!1)}})()},[n,s.stallRates]);const w=S=>{var C;console.log("Stall type changed to:",S);const N=(C=s.stallRates)==null?void 0:C.find(a=>a.stallTypeId===S);console.log("Found stall rate:",N),N&&u.setFieldsValue({ratePerSqm:N.rate})},A=()=>{u.resetFields(),i()},T=()=>{if(console.log("Hall data:",r),!r||!r._id&&!r.id){ce.error("Invalid hall selected. Please try again.");return}u.validateFields().then(S=>{var l;const N=r._id||r.id;if(!N){ce.error("Hall ID is missing. Please select a hall again.");return}const C=e?{x:e.dimensions.x,y:e.dimensions.y}:x(S.width,S.height,((l=s.stalls)==null?void 0:l.filter(c=>c.hallId===N))||[],r.dimensions.width,r.dimensions.height),a={id:e==null?void 0:e.id,_id:e==null?void 0:e._id,number:S.number,stallTypeId:S.stallTypeId,dimensions:{x:C.x,y:C.y,width:S.width,height:S.height},ratePerSqm:S.ratePerSqm,status:S.status,hallId:N};console.log("Submitting stall data:",a),o(a)})},P=S=>{switch(S){case"available":return"#52c41a";case"booked":return"#faad14";case"reserved":return"#1890ff";default:return"#d9d9d9"}};return t.jsx(t.Fragment,{children:t.jsx(st,{title:t.jsxs(ue,{children:[t.jsx(Ve,{style:{fontSize:"20px"}}),t.jsx(Hd,{level:4,style:{margin:0},children:e?"Edit Stall":"Add Stall"})]}),open:n,onCancel:A,destroyOnClose:!0,forceRender:!0,width:480,centered:!0,footer:[t.jsxs(ue,{size:"middle",children:[e&&d&&t.jsx(G,{danger:!0,icon:t.jsx(Bt,{}),onClick:()=>d(e),children:"Delete"}),t.jsx(G,{onClick:A,children:"Cancel"}),t.jsx(G,{type:"primary",onClick:T,children:e?"Save Changes":"Create"})]},"footer-buttons")],children:t.jsxs(W,{form:u,layout:"vertical",preserve:!1,requiredMark:"optional",style:{padding:"12px 0"},children:[t.jsx(W.Item,{name:"number",label:"Stall Number",rules:[{required:!0,message:"Please enter stall number"}],children:t.jsx(xe,{placeholder:"Enter stall number",size:"large",style:{borderRadius:"6px"}})}),t.jsx(W.Item,{name:"stallTypeId",label:"Stall Type",rules:[{required:!0,message:"Please select stall type"}],children:t.jsx(tt,{loading:R,placeholder:"Select stall type",size:"large",onChange:w,children:p.map(S=>t.jsx(tt.Option,{value:S._id,children:S.name},S._id))})}),t.jsx(Pe,{orientation:"left",plain:!0,style:{margin:"24px 0"},children:"Dimensions"}),t.jsxs(ue,{style:{width:"100%",gap:"16px"},children:[t.jsx(W.Item,{name:"width",label:"Width (meters)",rules:[{required:!0,message:"Please enter width"},{type:"number",min:1,message:"Width must be at least 1 meter"},{type:"number",max:(r==null?void 0:r.dimensions.width)||100,message:"Width cannot exceed hall width"}],style:{flex:1},children:t.jsx(Ge,{min:1,max:(r==null?void 0:r.dimensions.width)||100,style:{width:"100%"},size:"large",placeholder:"Width",addonAfter:"m"})}),t.jsx(W.Item,{name:"height",label:"Height (meters)",rules:[{required:!0,message:"Please enter height"},{type:"number",min:1,message:"Height must be at least 1 meter"},{type:"number",max:(r==null?void 0:r.dimensions.height)||100,message:"Height cannot exceed hall height"}],style:{flex:1},children:t.jsx(Ge,{min:1,max:(r==null?void 0:r.dimensions.height)||100,style:{width:"100%"},size:"large",placeholder:"Height",addonAfter:"m"})})]}),t.jsx(Pe,{orientation:"left",plain:!0,style:{margin:"24px 0"},children:"Details"}),t.jsx(W.Item,{name:"ratePerSqm",label:"Rate per sq.m ()",rules:[{required:!0,message:"Please select a stall type to set the rate"}],children:t.jsx(Ge,{min:0,style:{width:"100%"},size:"large",placeholder:"Rate will be set based on stall type",prefix:"",disabled:!0,formatter:S=>`${S}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:S=>{const N=S?Number(S.replace(/\\s?|(,*)/g,"")):0;return isNaN(N)?0:N}})}),t.jsx(W.Item,{name:"status",label:"Status",rules:[{required:!0,message:"Please select status"}],children:t.jsxs(tt,{placeholder:"Select status",size:"large",style:{borderRadius:"6px"},children:[t.jsx(tt.Option,{value:"available",children:t.jsxs(ue,{children:[t.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:P("available")}}),"Available"]})}),t.jsx(tt.Option,{value:"booked",children:t.jsxs(ue,{children:[t.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:P("booked")}}),"Booked"]})}),t.jsx(tt.Option,{value:"reserved",children:t.jsxs(ue,{children:[t.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:P("reserved")}}),"Reserved"]})})]})})]})})})},gi=n=>{if(!n)return"";const e=window.location.origin,r=n.replace(/^\/?(api\/uploads\/)?/,"");if(r.includes("fixtures/"))return`${e}/api/uploads/${r}`;const s=localStorage.getItem("token");return s?`${e}/api/uploads/${r}?token=${s}`:""},Qd=({name:n,type:e,color:r,rotation:s,showName:i,iconUrl:o,defaultIcons:d,borderColor:u=null,borderRadius:p=0})=>{h.useEffect(()=>{console.log("FixturePreview rendering with props:",{name:n,type:e,color:r,rotation:s,showName:i,iconUrl:o,defaultIconAvailable:!!d[e],borderColor:u,borderRadius:p})},[n,e,r,s,i,o,d,u,p]);const g=d[e]||"";return t.jsxs("div",{style:{padding:"24px",textAlign:"center",backgroundColor:"#fafafa",borderBottom:"1px solid #f0f0f0",borderRadius:"8px 8px 0 0"},children:[t.jsx("div",{style:{display:"inline-flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"120px",height:"120px",borderRadius:`${p||4}px`,backgroundColor:r||"#f0f0f0",transform:`rotate(${s}deg)`,transition:"all 0.3s ease",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",overflow:"hidden",position:"relative",border:u?`1px solid ${u}`:"1px solid rgba(0,0,0,0.05)"},children:o?t.jsx("img",{src:o,alt:n,style:{width:"100%",height:"100%",objectFit:"contain",padding:"8px"}}):t.jsx("div",{style:{fontSize:"48px",lineHeight:"1",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:g})}),i&&t.jsx("div",{style:{marginTop:"12px",fontSize:"16px",fontWeight:500,color:"#333"},children:n}),t.jsxs("div",{style:{marginTop:"4px",fontSize:"14px",color:"#888",display:"flex",gap:"8px",justifyContent:"center",alignItems:"center"},children:[t.jsx("span",{children:e.charAt(0).toUpperCase()+e.slice(1)}),t.jsx("span",{children:""}),t.jsx("span",{children:r}),s>0&&t.jsxs(t.Fragment,{children:[t.jsx("span",{children:""}),t.jsxs("span",{children:[s,""]})]}),u&&t.jsxs(t.Fragment,{children:[t.jsx("span",{children:""}),t.jsxs("span",{children:["Border: ",u]})]}),p>0&&t.jsxs(t.Fragment,{children:[t.jsx("span",{children:""}),t.jsxs("span",{children:["Radius: ",p,"px"]})]})]})]})},{Text:Wd}=Ee,dr=({activeKey:n,form:e,fixture:r,exhibitionWidth:s,exhibitionHeight:i,selectedType:o,showName:d,iconFileList:u,fixtureTypes:p,fixtureIcons:g,defaultColors:R,defaultDimensions:j,colorPresets:x,uploadProps:w,iconPreviewVisible:A=!1,previewImage:T="",onTypeChange:P,onColorChange:S,onShowNameChange:N,onIconPreviewCancel:C=()=>{}})=>{switch(n){case"basic":return a();case"position":return l();case"appearance":return c();default:return a()}function a(){return t.jsxs("div",{className:"tab-content",children:[t.jsx(W.Item,{name:"name",label:"Fixture Name",rules:[{required:!0,message:"Please enter fixture name"}],children:t.jsx(xe,{placeholder:"Enter fixture name",prefix:t.jsx(Vt,{style:{color:"#aaa"}}),style:{borderRadius:"8px"}})}),t.jsx(W.Item,{name:"showName",label:"Show Name on Layout",tooltip:"Toggle whether the fixture name appears on the layout",valuePropName:"checked",children:t.jsx(za,{defaultChecked:!0,checkedChildren:"Visible",unCheckedChildren:"Hidden",onChange:f=>{N(f),console.log("Form values after showName toggle:",e.getFieldsValue(!0))}})}),t.jsx(W.Item,{name:"type",label:"Fixture Type",rules:[{required:!0,message:"Please select fixture type"}],children:t.jsx(tt,{placeholder:"Select fixture type",onChange:P,options:p.map(f=>({...f,label:t.jsxs(ue,{children:[t.jsx("span",{style:{fontSize:16},children:g[f.value]}),t.jsx("span",{children:f.label})]})})),style:{width:"100%",borderRadius:"8px"},listHeight:300,dropdownStyle:{borderRadius:"8px"}})})]})}function l(){return t.jsxs("div",{className:"tab-content",children:[t.jsx(be,{size:"small",title:"Position (meters)",style:{marginBottom:16,borderRadius:8},styles:{body:{padding:"12px 16px"}},children:t.jsxs(Ae,{gutter:16,children:[t.jsx(ie,{span:12,children:t.jsx(W.Item,{name:["position","x"],label:"X Position",rules:[{required:!0,message:"X position is required"}],children:t.jsx(Ge,{style:{width:"100%",borderRadius:"8px"},min:0,max:s,step:.1,precision:1,placeholder:"X position"})})}),t.jsx(ie,{span:12,children:t.jsx(W.Item,{name:["position","y"],label:"Y Position",rules:[{required:!0,message:"Y position is required"}],children:t.jsx(Ge,{style:{width:"100%",borderRadius:"8px"},min:0,max:i,step:.1,precision:1,placeholder:"Y position"})})})]})}),t.jsx(be,{size:"small",title:"Dimensions (meters)",style:{marginBottom:16,borderRadius:8},styles:{body:{padding:"12px 16px"}},children:t.jsxs(Ae,{gutter:16,children:[t.jsx(ie,{span:12,children:t.jsx(W.Item,{name:["dimensions","width"],label:"Width",rules:[{required:!0,message:"Width is required"}],children:t.jsx(Ge,{style:{width:"100%",borderRadius:"8px"},min:.5,max:20,step:.1,precision:1,placeholder:"Width"})})}),t.jsx(ie,{span:12,children:t.jsx(W.Item,{name:["dimensions","height"],label:"Height",rules:[{required:!0,message:"Height is required"}],children:t.jsx(Ge,{style:{width:"100%",borderRadius:"8px"},min:.5,max:20,step:.1,precision:1,placeholder:"Height"})})})]})}),t.jsx(be,{size:"small",title:t.jsxs("span",{children:[t.jsx(Fa,{})," Rotation (degrees)"]}),style:{borderRadius:8},styles:{body:{padding:"12px 16px"}},children:t.jsx(W.Item,{name:"rotation",noStyle:!0,children:t.jsx(Da,{min:0,max:360,marks:{0:"0",90:"90",180:"180",270:"270",360:"360"},tooltip:{formatter:f=>`${f}`},style:{marginTop:10},keyboard:!1})})})]})}function c(){return t.jsxs("div",{className:"tab-content",children:[t.jsx(W.Item,{name:"color",label:"Color",tooltip:"Choose a color for the fixture. This affects the background color and tint applied to SVG icons.",rules:[{validator:(f,m)=>{try{return m?Promise.resolve():Promise.reject("Please select a color")}catch{return Promise.reject("Please enter a valid color value")}}}],children:t.jsx(Xs,{format:"hex",allowClear:!0,showText:!0,disabledAlpha:!0,presets:x,onChange:S,style:{width:"100%"}})}),t.jsx(W.Item,{name:"borderColor",label:"Border Color",tooltip:"Choose a border color for the fixture. Leave empty for default borders.",children:t.jsx(Xs,{format:"hex",allowClear:!0,showText:!0,disabledAlpha:!0,presets:x,style:{width:"100%"}})}),t.jsx(W.Item,{name:"borderRadius",label:"Border Radius",tooltip:"Set the corner radius in pixels. Higher values make more rounded corners.",children:t.jsx(Ge,{min:0,max:20,step:1,style:{width:"100%",borderRadius:"8px"},addonAfter:"px"})}),t.jsxs(be,{size:"small",title:"Icon Upload",style:{borderRadius:8,marginBottom:16,marginTop:16},styles:{body:{padding:"16px"}},children:[t.jsx("div",{style:{marginBottom:0},children:t.jsx(La,{...w,children:u.length<1&&t.jsxs("div",{children:[t.jsx(Ma,{style:{fontSize:20}}),t.jsx("div",{style:{marginTop:8},children:"Upload Icon"})]})})}),t.jsx(Wd,{type:"secondary",style:{display:"block",marginTop:12},children:"Upload a custom icon or use the default icon for the selected fixture type. Supported formats: PNG, JPG, SVG. SVG icons are preferred for better quality at all sizes."})]}),t.jsx(W.Item,{name:"icon",label:"Icon URL",tooltip:"URL to an icon image for this fixture. Will be used if no icon is uploaded.",children:t.jsx(xe,{placeholder:"https://example.com/icon.png",prefix:t.jsx(Ba,{style:{color:"#aaa"}}),style:{borderRadius:"8px"}})}),t.jsx(st,{open:A,title:"Icon Preview",footer:null,onCancel:C,children:t.jsx("img",{alt:"Icon Preview",style:{width:"100%"},src:T})})]})}},Yd=n=>[{key:"basic",label:t.jsxs("span",{children:[t.jsx(Ts,{}),"Basic Info"]}),children:t.jsx(dr,{...n,activeKey:"basic"})},{key:"position",label:t.jsxs("span",{children:[t.jsx(Ot,{}),"Position"]}),children:t.jsx(dr,{...n,activeKey:"position"})},{key:"appearance",label:t.jsxs("span",{children:[t.jsx($a,{}),"Appearance"]}),children:t.jsx(dr,{...n,activeKey:"appearance"})}],{Text:Gf,Title:Xf}=Ee,{TabPane:Jf}=_s,Kd=[{value:"sofa",label:"Sofa"},{value:"chair",label:"Chair"},{value:"table",label:"Table"},{value:"desk",label:"Desk"},{value:"plant",label:"Plant"},{value:"entrance",label:"Entrance"},{value:"exit",label:"Exit"},{value:"info",label:"Information"},{value:"restroom",label:"Restroom"},{value:"food",label:"Food Area"},{value:"custom",label:"Custom"}],xn={sofa:{width:2,height:1},chair:{width:5,height:5},table:{width:1,height:1},desk:{width:2,height:.8},plant:{width:.5,height:.5},entrance:{width:1.5,height:.2},exit:{width:1.5,height:.2},info:{width:1,height:1},restroom:{width:1,height:1},food:{width:2,height:2},custom:{width:1,height:1}},ft={sofa:"#a0d0ff",chair:"#a0d0ff",table:"#e0e0e0",desk:"#e0e0e0",plant:"#90ee90",entrance:"#98fb98",exit:"#ffcccb",info:"#add8e6",restroom:"#d8bfd8",food:"#ffe4b5",custom:"#f0f0f0"},ur={sofa:"",chair:"",table:"",desk:"",plant:"",entrance:"",exit:"",info:"",restroom:"",food:"",custom:""},Zf=({visible:n,fixture:e,onCancel:r,onSubmit:s,onDelete:i,exhibitionWidth:o,exhibitionHeight:d})=>{const[u]=W.useForm(),[p,g]=h.useState(!1),[R,j]=h.useState(""),[x,w]=h.useState("basic"),[A,T]=h.useState(""),[P,S]=h.useState([]),[N,C]=h.useState(!1),[a,l]=h.useState(""),{message:c}=As.useApp(),[f,m]=h.useState("#f0f0f0"),[E,y]=h.useState("New Fixture"),[b,k]=h.useState("chair"),[I,_]=h.useState(0),[B,$]=h.useState(!0),[v,z]=h.useState(null),[O,H]=h.useState(0);h.useEffect(()=>{if(n)if(e){const M=Y(e.color),J=ft[e.type]||"#f0f0f0",ae=M||J;console.log("Setting up fixture colors:",{original:e.color,normalized:M,fallback:J,final:ae}),m(ae),y(e.name),k(e.type),_(e.rotation||0),j(e.type),$(e.showName!==!1),z(e.borderColor||null),H(e.borderRadius||0)}else{const M="chair",J=ft[M];m(J),y("New Fixture"),k(M),_(0),j(M),$(!0),z(null),H(0)}},[n,e]),h.useEffect(()=>{if(n&&u){if(e){const M=Y(e.color),J=ft[e.type]||"#f0f0f0",ae=M||J;u.setFieldsValue({name:e.name,type:e.type,position:{x:e.position.x,y:e.position.y},dimensions:{width:e.dimensions.width,height:e.dimensions.height},rotation:e.rotation||0,color:ae,icon:e.icon||"",showName:e.showName!==!1,borderColor:e.borderColor||null,borderRadius:e.borderRadius||0});const Se=e.icon?gi(e.icon):"";T(Se),e.icon?S([{uid:"-1",name:e.icon.split("/").pop()||"icon",status:"done",url:Se,thumbUrl:Se}]):S([])}else{const M="chair",J=ft[M];u.setFieldsValue({name:"New Fixture",type:M,position:{x:Math.floor(o/2),y:Math.floor(d/2)},dimensions:xn[M],rotation:0,color:J,icon:"",showName:!0,borderColor:null,borderRadius:0}),T(""),S([])}w("basic")}},[n,e,u,o,d]);const F=()=>{if(u&&n)try{const M=u.getFieldsValue(!0);if(M.name&&y(M.name),M.type&&k(M.type),M.rotation!==void 0&&_(M.rotation),M.color){const J=Y(M.color);J&&m(J)}if(M.showName!==void 0&&$(M.showName),M.borderColor!==void 0){const J=M.borderColor?Y(M.borderColor):null;z(J)}M.borderRadius!==void 0&&H(M.borderRadius)}catch(M){console.log("Error updating preview",M)}};h.useEffect(()=>{if(u&&n)return u.getFieldsValue,F(),()=>{}},[u,n]);const L=M=>{if(j(M),k(M),!e){const J=ft[M]||ft.custom;u.setFieldsValue({dimensions:xn[M]||xn.custom,color:J}),m(J)}},V=M=>{const J=Y(M);u.setFieldValue("color",J),m(J);const ae=Object.entries(ft).find(([Se,Ce])=>Ce.toLowerCase()===J.toLowerCase());ae&&!e&&(u.setFieldValue("type",ae[0]),j(ae[0]),k(ae[0]))},q=()=>(console.log("Rendering fixture preview with:",{name:E,type:b,color:f,rotation:I,showName:B,iconUrl:A,borderColor:v,borderRadius:O}),t.jsx(Qd,{name:E,type:b,color:f,rotation:I,showName:B,iconUrl:A,defaultIcons:ur,borderColor:v,borderRadius:O})),U=({file:M,fileList:J})=>{var ae;if(M.status==="uploading"&&S(J),M.status==="done"){c.success(`${M.name} uploaded successfully`);let Ce=(((ae=M.response)==null?void 0:ae.url)||"").replace(/^\/api\/uploads\//,"");Ce&&!Ce.startsWith("fixtures/")&&(Ce=`fixtures/${Ce.replace(/^\//,"")}`),console.log("Icon path stored in form:",Ce),u.setFieldValue("icon",Ce);const Fe=gi(Ce);console.log("Using direct backend URL:",Fe),T(Fe);const Qt=M.name.toLowerCase().endsWith(".svg"),Tt=J.map(pt=>pt.uid===M.uid?{...pt,url:Fe,thumbUrl:Fe,type:Qt?"image/svg+xml":pt.type}:pt);S(Tt),console.log("Form values after icon upload:",u.getFieldsValue(!0))}M.status==="error"&&(c.error(`${M.name} upload failed.`),S(J.filter(Se=>Se.uid!==M.uid)))},X={name:"file",action:`${Q.defaults.baseURL}/fixtures/upload/icons`,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},accept:"image/png,image/jpeg,image/jpg,image/svg+xml",listType:"picture-card",fileList:P,onChange:U,onPreview:M=>{l(M.url||M.thumbUrl||""),C(!0)},onRemove:()=>(T(""),S([]),u.setFieldValue("icon",""),console.log("Form values after icon removal:",u.getFieldsValue(!0)),!0),maxCount:1,showUploadList:{showPreviewIcon:!0,showRemoveIcon:!0,showDownloadIcon:!1,removeIcon:t.jsx(Bt,{style:{color:"#ff4d4f"}})}},Y=M=>{try{if(!M)return"#f0f0f0";if(typeof M=="object"&&M!==null){if(typeof M.toHexString=="function")return M.toHexString();if(M.rgb||M.hex)return M.hex||`rgb(${M.rgb.r},${M.rgb.g},${M.rgb.b})`}if(typeof M=="string"){if(/^#([0-9A-F]{3}){1,2}$/i.test(M))return M;if(/^([0-9A-F]{3}){1,2}$/i.test(M))return`#${M}`;if(/^rgb\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*\)$/.test(M))return M}return"#f0f0f0"}catch(J){return console.error("Error normalizing color:",J),"#f0f0f0"}},pe=[{label:"Primary Colors",colors:["#1890ff","#52c41a","#faad14","#f5222d","#722ed1"]},{label:"Neutrals",colors:["#000000","#262626","#595959","#8c8c8c","#bfbfbf","#d9d9d9","#f0f0f0","#ffffff"]}],we=Ie.useCallback(()=>{e&&i&&i(e)},[e,i]),oe=M=>{w(M),document.activeElement instanceof HTMLElement&&document.activeElement.blur()},ee=Yd({form:u,fixture:e,exhibitionWidth:o,exhibitionHeight:d,selectedType:R,showName:B,iconFileList:P,fixtureTypes:Kd,fixtureIcons:ur,defaultColors:ft,defaultDimensions:xn,colorPresets:pe,uploadProps:X,iconPreviewVisible:N,previewImage:a,onTypeChange:L,onColorChange:V,onShowNameChange:M=>$(M),onIconPreviewCancel:()=>C(!1),activeKey:x}),de=async()=>{try{g(!0);const M=await u.validateFields();y(M.name),k(M.type),_(M.rotation||0),m(Y(M.color)),$(M.showName),z(M.borderColor?Y(M.borderColor):null),H(M.borderRadius||0);let J="";M.icon!==void 0?J=M.icon?Te(M.icon):"":e!=null&&e.icon&&(J=e.icon),console.log("Form values being submitted:",{name:M.name,type:M.type,color:M.color,icon:M.icon,originalIcon:e==null?void 0:e.icon,cleanedIcon:J,showName:M.showName,borderColor:M.borderColor,borderRadius:M.borderRadius});const ae=(e==null?void 0:e._id)||(e==null?void 0:e.id)||"",Se=M.color?Y(M.color):(e==null?void 0:e.color)||"#f0f0f0",Ce=M.borderColor?Y(M.borderColor):null,Fe={...e,id:ae,_id:ae,name:M.name,type:M.type,position:M.position,dimensions:M.dimensions,rotation:M.rotation,color:Se,icon:J,zIndex:(e==null?void 0:e.zIndex)||1,isActive:(e==null?void 0:e.isActive)!==void 0?e.isActive:!0,borderColor:Ce,borderRadius:M.borderRadius||0};ae&&(Fe.showName=M.showName),console.log("Submitting fixture with icon path:",J),console.log("Color being submitted:",Se),await s(Fe),r()}catch(M){console.error("Fixture submission failed:",M),c.error("Failed to save fixture. Please check the form and try again.")}finally{g(!1)}},Te=M=>{if(!M||typeof M!="string")return"";if(M.startsWith("fixtures/")&&!M.includes("?")&&!M.includes("http"))return M;let J=M.replace(/^\/api\/uploads\//,"");if(J=J.replace(/^\//,""),J.includes("?")||J.includes("http")){const ae=J.split("?")[0].split("/").pop()||"";if(ae)return`fixtures/${ae}`}return J&&!J.startsWith("fixtures/")?`fixtures/${J}`:J};return t.jsxs(st,{title:t.jsxs("div",{style:{padding:"8px 0",display:"flex",alignItems:"center"},children:[t.jsx("span",{style:{fontSize:24,marginRight:8},children:e?ur[e.type]:""}),t.jsx("span",{children:e?`Edit ${e.name}`:"Add New Fixture"})]}),open:n,onCancel:r,confirmLoading:p,footer:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("div",{children:e&&i&&t.jsx(G,{danger:!0,icon:t.jsx(Bt,{}),onClick:we,style:{borderRadius:"6px"},children:"Delete"})}),t.jsxs("div",{style:{display:"flex",gap:"8px"},children:[t.jsx(G,{onClick:r,icon:t.jsx(Oa,{}),style:{borderRadius:"6px"},children:"Cancel"}),t.jsx(G,{type:"primary",onClick:de,icon:t.jsx(qa,{}),style:{borderRadius:"6px"},children:e?"Update":"Create"})]})]}),width:560,centered:!0,styles:{header:{borderBottom:"1px solid #f0f0f0",padding:"16px 24px"},body:{backgroundColor:"#fff",borderRadius:"0 0 8px 8px",padding:"0"},footer:{borderTop:"1px solid #f0f0f0",padding:"12px 24px",margin:0}},children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:`
        .svg-icon {
          filter: drop-shadow(0px 1px 2px rgba(0,0,0,0.2));
        }
        
        /* Fix for passive event listener warnings */
        .ant-slider, .ant-slider-handle, .ant-color-picker-trigger, .ant-color-picker-dropdown {
          touch-action: none !important;
        }
        
        .ant-slider-rail, .ant-slider-track {
          touch-action: pan-y !important;
        }
        
        .ant-tabs-tab, .ant-select-selector, .ant-input-number-input, .ant-color-picker-slider, .ant-color-picker-palette {
          touch-action: manipulation !important;
        }
        
        /* Fix circular references warning */
        .ant-color-picker-trigger-disabled .ant-color-picker-clear {
          display: none;
        }
      `}}),q(),t.jsx(W,{form:u,layout:"vertical",initialValues:{name:"New Fixture",type:"chair",position:{x:0,y:0},dimensions:{width:1,height:1},rotation:0,color:"#f0f0f0",icon:"",showName:!0,borderColor:null,borderRadius:0},style:{padding:"0 24px 20px"},onValuesChange:F,children:t.jsx(_s,{activeKey:x,onChange:oe,items:ee,tabBarStyle:{marginBottom:16},centered:!0})})]})},Gd=D(st)`
  .ant-modal-content {
    padding: 0;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
  }
  .ant-modal-header {
    padding: 24px 32px;
    margin: 0;
    border-bottom: 1px solid rgba(0, 0, 0, 0.06);
    background: linear-gradient(to right, #4b47b9, #3f51b5);
    
    .ant-modal-title {
      color: white;
      font-weight: 600;
      font-size: 18px;
    }
  }
  .ant-modal-body {
    padding: 0;
  }
  .ant-modal-close {
    color: white;
  }
`,Xd=D.div`
  display: flex;
  border-bottom: 1px solid #eee;
  background-color: #f9f9fa;
  margin-bottom: 24px;
  
  .step-item {
    padding: 16px 24px;
    position: relative;
    display: flex;
    align-items: center;
    font-size: 15px;
    color: #666;
    gap: 10px;
    
    &.active {
      color: #4b47b9;
      font-weight: 500;
      
      &:after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 2px;
        background-color: #4b47b9;
      }
      
      .step-icon {
        background-color: #4b47b9;
        color: white;
      }
    }
    
    &.completed {
      .step-icon {
        background-color: #52c41a;
        color: white;
      }
    }
    
    .step-icon {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background-color: #eee;
      display: flex;
      align-items: center;
      justify-content: center;
    }
  }
`,tn=D.div`
  padding: 24px 32px 32px;
`,Jd=D.h2`
  font-size: 24px;
  font-weight: 600;
  color: #1f1f1f;
  margin-bottom: 8px;
`,Zd=D.p`
  font-size: 14px;
  color: #666;
  margin-bottom: 24px;
`;D.div`
  display: flex;
  gap: 12px;
  margin-bottom: 24px;
  
  .search-input {
    width: 240px;
    border-radius: 8px;
  }
  
  .filter-select {
    width: 160px;
    border-radius: 8px;
  }
`;D.div`
  margin-bottom: 24px;
  
  .tab-header {
    display: flex;
    margin-bottom: 24px;
    border-bottom: 1px solid #f0f0f0;
    
    .tab-item {
      padding: 12px 24px;
      font-size: 15px;
      font-weight: 500;
      color: #666;
      cursor: pointer;
      position: relative;
      display: flex;
      align-items: center;
      gap: 8px;
      
      &.active {
        color: #4b47b9;
        
        &:after {
          content: '';
          position: absolute;
          bottom: -1px;
          left: 0;
          right: 0;
          height: 2px;
          background: #4b47b9;
          border-radius: 2px 2px 0 0;
        }
      }
      
      .badge {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        background: #f0f0f0;
        color: #666;
        font-size: 12px;
        height: 20px;
        min-width: 20px;
        padding: 0 8px;
        border-radius: 10px;
        margin-left: 8px;
        
        &.active {
          background: #4b47b9;
          color: white;
        }
      }
    }
  }
`;D.div`
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 16px;
  margin-bottom: 24px;
`;D.div`
  border: 1px solid ${n=>n.selected?"#4b47b9":"#e6e6f0"};
  background: ${n=>n.selected?"rgba(75, 71, 185, 0.05)":"white"};
  border-radius: 12px;
  padding: 20px;
  padding-left: 48px;
  position: relative;
  transition: all 0.2s ease;
  box-shadow: ${n=>n.selected?"0 4px 12px rgba(75, 71, 185, 0.15)":"0 2px 8px rgba(0, 0, 0, 0.04)"};
  cursor: pointer;
  
  &:hover {
    border-color: #4b47b9;
    box-shadow: 0 4px 12px rgba(75, 71, 185, 0.15);
    transform: translateY(-2px);
  }
  
  .stall-price {
    position: absolute;
    top: 16px;
    right: 16px;
    background: ${n=>n.selected?"#4b47b9":"#52c41a"};
    color: white;
    font-weight: 600;
    padding: 6px 14px;
    border-radius: 20px;
    font-size: 14px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
  }
  
  .stall-number {
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 8px;
    color: #1f1f1f;
    display: flex;
    align-items: center;
    
    .hall-label {
      font-size: 13px;
      color: #666;
      margin-left: 8px;
      font-weight: normal;
    }
  }
  
  .stall-details {
    display: flex;
    gap: 16px;
    margin-top: 16px;
    
    .detail-item {
      flex: 1;
      
      .label {
        font-size: 12px;
        color: #666;
        margin-bottom: 4px;
      }
      
      .value {
        font-size: 15px;
        font-weight: 500;
      }
    }
  }
  
  .selection-indicator {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 26px;
    height: 26px;
    border-radius: 50%;
    position: absolute;
    top: 50%;
    left: 12px;
    transform: translateY(-50%);
    background: ${n=>n.selected?"#4b47b9":"white"};
    border: 2px solid ${n=>n.selected?"#4b47b9":"#d9d9d9"};
    color: white;
    transition: all 0.2s ease;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }
`;const eu=D(be)`
  background: #f9fafc;
  border-radius: 12px;
  margin-top: 24px;
  border: 1px solid #eaecf0;
  overflow: hidden;
  box-shadow: 0 1px 3px rgba(16, 24, 40, 0.1), 0 1px 2px rgba(16, 24, 40, 0.06);
  
  .ant-card-head {
    background: #f2f4f7;
    border-bottom-color: #eaecf0;
    padding: 16px 24px;
    min-height: 48px;
    
    .ant-card-head-title {
      padding: 0;
      font-size: 16px;
      font-weight: 600;
      color: #101828;
    }
  }
  
  .ant-card-body {
    padding: 16px 24px 24px;
  }
  
  .summary-row {
    display: flex;
    justify-content: space-between;
    padding: 12px 0;
    
    &:not(:last-child) {
      border-bottom: 1px solid #eaecf0;
    }
    
    .label {
      color: #475467;
      font-weight: 500;
    }
    
    .value {
      font-weight: 600;
      text-align: right;
      color: #1f2937;
    }
    
    &.discount {
      color: #ef4444;
      
      .value {
        color: #ef4444;
      }
    }
    
    &.total {
      font-weight: 600;
      font-size: 16px;
      color: #101828;
      border-top: 1px solid #eaecf0;
      margin-top: 8px;
      padding-top: 16px;
      
      .label, .value {
        font-size: 16px;
        font-weight: 700;
        color: #101828;
      }
    }
  }
`;D(G)`
  &.ant-btn-primary {
    background: #4b47b9;
    border-color: #4b47b9;
    
    &:hover, &:focus {
      background: #3b37a9;
      border-color: #3b37a9;
    }
  }
  
  &.ant-btn-lg {
    height: 48px;
    padding: 0 24px;
    font-size: 16px;
    border-radius: 8px;
  }
`;D.div`
  display: flex;
  justify-content: flex-end;
  margin-top: 24px;
  padding-top: 16px;
  border-top: 1px solid #f0f0f0;
`;D(be)`
  background: #f8f8fc;
  border-radius: 12px;
  border: 1px solid #e6e6f0;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
  
  .ant-card-body {
    padding: 24px;
  }
  
  .ant-form-item:last-child {
    margin-bottom: 0;
  }
`;D(xe)`
  &.ant-input-lg {
    border-radius: 8px;
    border: 1px solid #e6e6f0;
    background: white;
    padding: 12px 16px;
    height: auto;
    
    &:hover, &:focus {
      border-color: #4b47b9;
      box-shadow: 0 0 0 2px rgba(75, 71, 185, 0.1);
    }
  }
  
  .anticon {
    color: #4b47b9;
  }
`;const hr=D(G)`
  &.ant-btn-lg {
    height: 40px;
    padding: 0 24px;
    font-size: 14px;
    border-radius: 6px;
    font-weight: 500;
    
    &.ant-btn-primary {
      background: #4b47b9;
      border-color: #4b47b9;
      
      &:hover {
        background: #3f3fa0;
        border-color: #3f3fa0;
      }
    }

    &:not(.ant-btn-primary) {
      border-color: #d9d9d9;
      
      &:hover {
        color: #4b47b9;
        border-color: #4b47b9;
      }
    }
  }
`;D(zt)`
  .ant-descriptions-item-label {
    background: #f8f8fc !important;
    font-weight: 600;
    color: #1f1f1f;
  }
  
  .ant-descriptions-item-content {
    background: white !important;
  }
`;D.div`
  background: #f8f8fc;
  padding: 32px 0;
  border-bottom: 1px solid #e6e6f0;
  margin: -32px -32px 32px;
`;D(dn)`
  max-width: 900px;
  margin: 0 auto;

  .ant-steps-item {
    padding: 0 12px;
    margin: 0;
    
    &:first-of-type {
      padding-left: 0;
    }
    
    &:last-of-type {
      padding-right: 0;
    }
  }

  .ant-steps-item-container {
    position: relative;
  }

  .ant-steps-item-tail {
    padding: 0;
    top: 13px;
    margin: 0;
    
    &::after {
      height: 1px;
      margin: 0;
      background: #e6e6f0;
    }
  }

  .ant-steps-item-icon {
    width: 28px;
    height: 28px;
    line-height: 28px;
    margin-right: 8px;
    font-size: 14px;
    border: none;
    background: #e6e6f0;
    
    .anticon {
      font-size: 14px;
      top: 0;
    }
  }

  .ant-steps-item-content {
    display: inline-block;
  }

  .ant-steps-item-title {
    font-size: 14px;
    line-height: 28px;
    padding-right: 8px;
    color: rgba(0, 0, 0, 0.45);
    font-weight: normal;
    
    &::after {
      height: 1px;
      top: 14px;
      background: #e6e6f0 !important;
    }
  }

  .ant-steps-item-description {
    max-width: 140px;
    font-size: 12px;
    color: rgba(0, 0, 0, 0.45);
  }

  .ant-steps-item-active {
    .ant-steps-item-icon {
      background: #4b47b9;
      border: none;
      
      .ant-steps-icon {
        color: white;
      }
    }
    
    .ant-steps-item-title {
      color: rgba(0, 0, 0, 0.85);
      font-weight: 500;
      
      &::after {
        background: #e6e6f0;
      }
    }
    
    .ant-steps-item-description {
      color: rgba(0, 0, 0, 0.65);
    }
  }

  .ant-steps-item-finish {
    .ant-steps-item-icon {
      background: #4b47b9;
      border: none;
      
      .ant-steps-icon {
        color: white;
      }
    }
    
    .ant-steps-item-title {
      color: rgba(0, 0, 0, 0.85);
      
      &::after {
        background: #4b47b9 !important;
      }
    }
    
    .ant-steps-item-tail::after {
      background: #4b47b9;
    }
  }

  .ant-steps-item-wait {
    .ant-steps-item-icon {
      background: #e6e6f0;
      border: none;
      
      .ant-steps-icon {
        color: rgba(0, 0, 0, 0.45);
      }
    }
  }
`;D.div`
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 4px 0;

  .company-name {
    font-weight: 500;
    color: rgba(0, 0, 0, 0.85);
  }

  .contact-details {
    font-size: 12px;
    color: rgba(0, 0, 0, 0.45);
  }
`;D.div`
  margin-bottom: 32px;

  &:last-child {
    margin-bottom: 0;
  }

  .section-title {
    margin-bottom: 16px;
    padding-bottom: 8px;
    border-bottom: 1px solid #e6e6f0;
  }
`;D.div`
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
`;D.div`
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: 24px;
  margin-top: 24px;
`;D.div`
  display: flex;
  flex-direction: column;
  gap: 16px;
  max-height: 338px; /* Height for 3 cards: (102px  3) + (16px  2 gaps) */
  overflow-y: auto;
  padding-right: 8px;
  
  &::-webkit-scrollbar {
    width: 6px;
  }
  
  &::-webkit-scrollbar-track {
    background: #f0f0f0;
    border-radius: 3px;
  }
  
  &::-webkit-scrollbar-thumb {
    background: #ccc;
    border-radius: 3px;
    
    &:hover {
      background: #bbb;
    }
  }
`;D(be)`
  &.ant-card {
    background: #f8f8fc;
    border: 1px solid #e6e6f0;
    border-radius: 8px;
    position: sticky;
    top: 24px;
  }

  .calculation-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 12px;
    
    &:last-child {
      margin-bottom: 0;
    }
  }

  .total-row {
    border-top: 1px solid #e6e6f0;
    margin-top: 16px;
    padding-top: 16px;
    font-weight: 600;
  }
`;const mi=({form:n,stallDetails:e=[],selectedStallId:r,selectedStallIds:s=[],exhibition:i})=>{const[o,d]=h.useState([]);h.useEffect(()=>{let w=[...(n.getFieldValue("selectedStalls")||[]).map(A=>String(A))];if(r){const A=String(r);w.some(T=>T===A)||w.push(A)}s.length>0&&s.forEach(A=>{const T=String(A);w.some(P=>P===T)||w.push(T)}),console.log("StallDetailsStep - Initial stalls after normalization:",w),n.setFieldsValue({selectedStalls:w}),d(w)},[n,r,s]),h.useEffect(()=>{if(o.length>0){const j=n.getFieldValue("selectedStalls")||[],x=new Set(j.map(T=>String(T))),w=new Set(o.map(T=>String(T)));let A=x.size!==w.size;if(!A){for(const T of w)if(!x.has(T)){A=!0;break}}if(A){console.log("Syncing form with selected stalls:",o);const T=o.map(P=>String(P));n.setFieldsValue({selectedStalls:T}),n.validateFields(["selectedStalls"]).catch(P=>{})}}},[o,n]);const u=h.useMemo(()=>!e||e.length===0?[]:e.filter(j=>o.includes(j.id)),[e,o]),p=h.useMemo(()=>{var a,l,c;if(!e||e.length===0)return{baseAmount:0,discounts:[],totalDiscountAmount:0,amountAfterDiscount:0,taxes:[],totalTaxAmount:0,total:0,selectedStallNumbers:""};const j=e.filter(f=>o.includes(f.id)),x=j.reduce((f,m)=>f+(m.price||m.ratePerSqm*m.dimensions.width*m.dimensions.height),0),A=(((a=i==null?void 0:i.publicDiscountConfig)==null?void 0:a.filter(f=>f.isActive))||[]).map(f=>{const m=f.type==="percentage"?x*(Math.min(Math.max(0,f.value),100)/100):Math.min(f.value,x);return{name:f.name,type:f.type,value:f.value,amount:m}}),T=A.reduce((f,m)=>f+m.amount,0),P=x-T,S=((c=(l=i==null?void 0:i.taxConfig)==null?void 0:l.filter(f=>f.isActive))==null?void 0:c.map(f=>({name:f.name,rate:f.rate,amount:P*(f.rate/100)})))||[],N=S.reduce((f,m)=>f+m.amount,0),C=P+N;return{baseAmount:x,discounts:A,totalDiscountAmount:T,amountAfterDiscount:P,taxes:S,totalTaxAmount:N,total:C,selectedStallNumbers:j.map(f=>`${f.number||f.stallNumber||`Stall ${f.id}`} (${f.hallName||`Hall ${f.hallId||1}`})`).join(", ")}},[e,o,i==null?void 0:i.taxConfig,i==null?void 0:i.publicDiscountConfig]),g=j=>{const x=String(j);if(o.some(A=>String(A)===x)){const A=o.filter(T=>String(T)!==x);d(A),n.setFieldsValue({selectedStalls:A}),ce.info("Stall removed from selection")}},R=j=>`${j.toLocaleString("en-IN")}`;return t.jsxs(tn,{children:[t.jsx(Jd,{children:"Your Selected Stalls"}),t.jsx(Zd,{children:"Review your selected stalls. You can remove a stall by clicking the delete button."}),t.jsx(W.Item,{name:"selectedStalls",rules:[{required:!0,message:"Please select at least one stall"}],style:{display:"none"},children:t.jsx(tt,{mode:"multiple"})}),u.length>0?t.jsx("div",{style:{marginBottom:24,background:"#fff",borderRadius:"8px",padding:"16px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)"},children:t.jsx(Ft,{dataSource:u.map(j=>({...j,key:j.id,price:j.price||j.ratePerSqm*j.dimensions.width*j.dimensions.height,area:j.dimensions.width*j.dimensions.height,dimensions:`${j.dimensions.width}m  ${j.dimensions.height}m`,size:`${j.dimensions.width}m  ${j.dimensions.height}m`,stallType:j.stallType||{name:j.typeName||j.type||"Standard"},type:j.typeName||j.type||"Standard"})),pagination:!1,size:"middle",rowClassName:()=>"stall-table-row",className:"selected-stalls-table",style:{borderRadius:"6px",overflow:"hidden"},columns:[{title:"Stall",dataIndex:"number",key:"number",render:(j,x)=>t.jsxs("span",{style:{fontWeight:600,fontSize:"15px"},children:["Stall ",j||x.stallNumber]})},{title:"Hall",dataIndex:"hallName",key:"hallName",render:(j,x)=>t.jsx(qe,{color:"blue",style:{borderRadius:"4px"},children:j||`Hall ${x.hallId}`})},{title:"Stall Type",dataIndex:"stallType",key:"stallType",align:"center",render:(j,x)=>{var A;const w=((A=x.stallType)==null?void 0:A.name)||x.type||"Standard";return t.jsx(qe,{color:"purple",style:{borderRadius:"4px",padding:"2px 8px"},children:w})}},{title:"Dimensions",dataIndex:"dimensions",key:"dimensions",align:"center",render:(j,x)=>t.jsxs(ue,{direction:"vertical",size:0,children:[t.jsx("span",{style:{fontWeight:500},children:j}),t.jsxs("span",{style:{color:"#888",fontSize:"13px"},children:[x.area," sqm"]})]})},{title:"Rate",dataIndex:"ratePerSqm",key:"ratePerSqm",align:"right",render:(j,x)=>t.jsxs("span",{style:{color:"#555"},children:["",(x.ratePerSqm||0).toLocaleString("en-IN"),"/sqm"]})},{title:"Price",dataIndex:"price",key:"price",align:"right",render:j=>t.jsx("span",{style:{fontWeight:600,color:"#1890ff",fontSize:"15px",display:"block",padding:"4px 8px",background:"rgba(24, 144, 255, 0.1)",borderRadius:"4px",textAlign:"right"},children:R(j)})},{title:"",key:"action",width:70,align:"center",render:(j,x)=>t.jsx(yt,{title:"Remove from selection",children:t.jsx(G,{type:"text",danger:!0,icon:t.jsx(Bt,{}),onClick:()=>g(x.id),size:"middle",style:{borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"}})})}]})}):t.jsx(Be,{description:"No stalls selected yet. Please select stalls from the layout.",image:Be.PRESENTED_IMAGE_SIMPLE,style:{margin:"32px 0"}}),o.length>0&&t.jsxs(eu,{title:t.jsx("span",{style:{fontSize:"16px",fontWeight:600},children:"Booking Summary"}),style:{borderRadius:"8px",overflow:"hidden",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)"},headStyle:{background:"#f6f8fa",borderBottom:"1px solid #eee"},bodyStyle:{padding:"16px 24px"},children:[t.jsxs("div",{className:"summary-row",children:[t.jsx("div",{className:"label",children:"Selected Stalls"}),t.jsxs("div",{className:"value",children:[o.length," stall(s) selected"]})]}),t.jsxs("div",{className:"summary-row",children:[t.jsx("div",{className:"label",children:"Stall Numbers"}),t.jsx("div",{className:"value",style:{maxWidth:"60%",wordBreak:"break-word"},children:p.selectedStallNumbers})]}),t.jsxs("div",{className:"summary-row",children:[t.jsx("div",{className:"label",children:"Base Amount"}),t.jsx("div",{className:"value",children:R(p.baseAmount)})]}),p.discounts.map((j,x)=>t.jsxs("div",{className:"summary-row discount",children:[t.jsxs("div",{className:"label",children:[j.name,j.type==="percentage"?` (${j.value}%)`:""]}),t.jsxs("div",{className:"value",style:{color:"#52c41a"},children:["- ",R(j.amount)]})]},`discount-${x}`)),t.jsxs("div",{className:"summary-row",children:[t.jsx("div",{className:"label",children:"Amount after Discount"}),t.jsx("div",{className:"value",style:{fontWeight:500},children:R(p.amountAfterDiscount)})]}),p.taxes.map((j,x)=>t.jsxs("div",{className:"summary-row",children:[t.jsxs("div",{className:"label",children:[j.name," (",j.rate,"%)"]}),t.jsxs("div",{className:"value",style:{color:"#faad14"},children:["+ ",R(j.amount)]})]},`tax-${x}`)),t.jsxs("div",{className:"summary-row total",style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid #f0f0f0"},children:[t.jsx("div",{className:"label",style:{fontSize:"16px",fontWeight:600},children:"Total"}),t.jsx("div",{className:"value",style:{fontSize:"18px",fontWeight:700,color:"#1890ff"},children:R(p.total)})]})]})]})},{Title:tu,Paragraph:xi,Text:ot}=Ee,{Panel:eg}=Ua,{Option:nu}=tt,bi=({form:n,formValues:e,selectedStallIds:r=[],exhibition:s,stallDetails:i=[]})=>{const o=n.getFieldValue("selectedStalls")||r||[],[d,u]=h.useState(n.getFieldValue("amenities")||[]),[p,g]=h.useState({}),R=h.useMemo(()=>i!=null&&i.length?i.filter(c=>o.includes(c.id)):[],[i,o]),j=h.useMemo(()=>R.reduce((c,f)=>c+f.dimensions.width*f.dimensions.height,0),[R]),x=(s==null?void 0:s.basicAmenities)&&s.basicAmenities.length>0,w=(s==null?void 0:s.amenities)&&s.amenities.length>0,A=h.useMemo(()=>!x||j===0?[]:((s==null?void 0:s.basicAmenities)||[]).map(c=>{const f=Math.floor(j/c.perSqm)*c.quantity;return{...c,calculatedQuantity:f>0?f:0,key:c._id||c.id}}),[s,x,j]),T=c=>{const f={...p};c.forEach(m=>{d.includes(m)||(f[m]=1)}),Object.keys(f).forEach(m=>{c.includes(m)||delete f[m]}),g(f),u(c)},P=c=>(c._id||c.id||"").toString(),S=(c,f)=>{g(m=>({...m,[c]:f}))};Ie.useEffect(()=>{const c=d.map(f=>({id:f,quantity:p[f]||1}));n.setFieldsValue({amenities:c})},[d,p,n]);const N=c=>`${c.toLocaleString("en-IN")}`,C=h.useMemo(()=>w?((s==null?void 0:s.amenities)||[]).filter(c=>d.includes(P(c))).map(c=>({...c,key:P(c),quantity:p[P(c)]||1})):[],[s,w,d,p]),a=[{title:"Name",dataIndex:"name",key:"name",render:(c,f)=>t.jsxs(ue,{children:[t.jsx(ot,{strong:!0,children:c}),t.jsx(qe,{color:"blue",children:f.type})]})},{title:"Quantity",dataIndex:"calculatedQuantity",key:"calculatedQuantity",width:120,render:c=>t.jsxs(qe,{color:"green",children:[c," ",c===1?"unit":"units"]})},{title:"Allocation",dataIndex:"perSqm",key:"perSqm",width:180,render:(c,f)=>t.jsx(yt,{title:f.description,children:t.jsxs(ot,{type:"secondary",children:[t.jsx(Vt,{style:{marginRight:5}}),"1 ",f.quantity>1?`set of ${f.quantity}`:"unit"," per ",c," sqm"]})})}],l=[{title:"Name",dataIndex:"name",key:"name",render:(c,f)=>t.jsxs(ue,{align:"center",children:[t.jsx(ot,{strong:!0,children:c}),t.jsx(qe,{color:"blue",children:f.type}),t.jsx(ot,{type:"secondary",style:{fontSize:"13px"},children:f.description})]})},{title:"Rate",dataIndex:"rate",key:"rate",width:120,render:c=>t.jsx(ot,{strong:!0,style:{color:"#1890ff"},children:N(c)})},{title:"Quantity",dataIndex:"quantity",key:"quantity",width:120,render:(c,f)=>t.jsx(Ge,{min:1,value:p[f.key]||1,onChange:m=>S(f.key,m||1),style:{width:"100%"}})},{title:"Total",key:"total",width:120,render:(c,f)=>{const m=p[f.key]||1,E=f.rate*m;return t.jsx(ot,{strong:!0,style:{color:"#1890ff"},children:N(E)})}}];return t.jsxs(tn,{children:[t.jsx(tu,{level:4,children:"Stall Amenities"}),t.jsx(xi,{type:"secondary",style:{marginBottom:24},children:"Review included amenities and select additional amenities for your exhibition stalls."}),t.jsx(be,{title:`Selected Stalls: ${o.length}`,style:{marginBottom:24},children:o.length>0?t.jsxs(xi,{children:["You've selected ",o.length," stall(s) with a total area of ",j," sq. meters."]}):t.jsx(Be,{image:Be.PRESENTED_IMAGE_SIMPLE,description:"No stalls selected"})}),t.jsx(be,{title:t.jsxs(ue,{children:[t.jsx(dt,{status:"success"}),"Included Amenities"]}),style:{marginBottom:24},children:o.length===0?t.jsx(Ke,{message:"Select stalls first",description:"Please select stalls to see what amenities are included.",type:"info",showIcon:!0}):x?t.jsx(Ft,{dataSource:A.filter(c=>c.calculatedQuantity>0),columns:a,pagination:!1,size:"small",locale:{emptyText:t.jsx(Be,{image:Be.PRESENTED_IMAGE_SIMPLE,description:"Your stall area is too small to qualify for any basic amenities."})}}):t.jsx(Be,{image:t.jsx(Js,{style:{fontSize:60,color:"#cccccc"}}),description:"No basic amenities have been configured for this exhibition."})}),t.jsx(Pe,{}),t.jsx(be,{title:"Additional Amenities (Extra Charges)",children:w?t.jsxs("div",{children:[t.jsx(W.Item,{label:"Select Additional Amenities",style:{marginBottom:24},children:t.jsx(tt,{mode:"multiple",style:{width:"100%"},placeholder:"Select amenities",value:d,onChange:T,optionLabelProp:"label",children:((s==null?void 0:s.amenities)||[]).map(c=>t.jsxs(nu,{value:P(c),label:`${c.name} (${N(c.rate)})`,children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsxs(ue,{children:[t.jsx(ot,{strong:!0,children:c.name}),t.jsx(qe,{color:"blue",children:c.type})]}),t.jsx(ot,{style:{color:"#1890ff"},children:N(c.rate)})]}),t.jsx("div",{children:t.jsx(ot,{type:"secondary",children:c.description})})]},P(c)))})}),C.length>0&&t.jsxs("div",{style:{marginTop:16},children:[t.jsx(Pe,{orientation:"left",children:"Selected Amenities"}),t.jsx(Ft,{dataSource:C,columns:l,pagination:!1,size:"small"})]})]}):t.jsx(Be,{image:t.jsx(Js,{style:{fontSize:60,color:"#cccccc"}}),description:"No additional amenities are available for this exhibition."})}),t.jsx(W.Item,{name:"amenities",hidden:!0,children:t.jsx(xe,{type:"hidden"})}),t.jsx(W.Item,{name:"selectedStalls",hidden:!0,children:t.jsx(xe,{type:"hidden"})})]})},{Title:pr,Paragraph:yi,Text:ve}=Ee,wi=({form:n,stallDetails:e=[],selectedStallId:r,selectedStallIds:s=[],selectedStalls:i=[],exhibition:o,onPrev:d,onFinish:u,loading:p=!1,formValues:g={}})=>{const[R,j]=h.useState([]),x=h.useMemo(()=>{const l=(n.getFieldValue("selectedStalls")||[]).map(f=>String(f));if(console.log("ReviewStep - Form has selectedStalls:",l),console.log("ReviewStep - Props selectedStallIds:",s),console.log("ReviewStep - Props selectedStalls:",i),l.length>0)return l;const c=[];if(r){const f=String(r);c.push(f)}return s&&s.length&&s.forEach(f=>{const m=String(f);c.includes(m)||c.push(m)}),i&&i.length&&i.forEach(f=>{const m=String(f);c.includes(m)||c.push(m)}),console.log("ReviewStep - Final consolidated stall IDs:",c),c},[n,r,s,i]);h.useEffect(()=>{if(console.log("ReviewStep - Processing stall details with IDs:",x),console.log("ReviewStep - Available stall details:",e),e&&e.length&&x.length){const a=e.filter(c=>x.includes(String(c.id)));console.log("ReviewStep - Matched stalls:",a.length);const l=a.map(c=>({key:c.id,id:c.id,number:c.number||c.stallNumber||`Stall ${c.id}`,hallName:c.hallName||`Hall ${c.hallId}`,size:`${c.dimensions.width}m  ${c.dimensions.height}m`,area:c.dimensions.width*c.dimensions.height,rate:c.ratePerSqm,price:c.price||c.ratePerSqm*c.dimensions.width*c.dimensions.height,type:c.typeName||c.type||"Standard"}));j(l)}},[e,x]);const w=h.useMemo(()=>{var v,z,O,H;const a=R.reduce((F,L)=>F+L.price,0),l=R.reduce((F,L)=>F+(L.area||0),0),c=((v=o==null?void 0:o.basicAmenities)==null?void 0:v.map(F=>{const L=Math.floor(l/F.perSqm)*F.quantity;return{...F,calculatedQuantity:L>0?L:0}}))||[],f=n.getFieldValue("amenities")||[];console.log("ReviewStep - Selected amenities with quantities:",f);let m=0;const E=f.map(F=>{var U;const L=F.id,V=F.quantity||1,q=(U=o==null?void 0:o.amenities)==null?void 0:U.find(X=>X.id===L||X._id===L);if(q){const X=(q.rate||0)*V;return m+=X,{name:q.name,rate:q.rate,type:q.type,description:q.description,quantity:V,total:X}}return null}).filter(Boolean);console.log("ReviewStep - Processed amenity items:",E);const b=(((z=o==null?void 0:o.publicDiscountConfig)==null?void 0:z.filter(F=>F.isActive))||[]).map(F=>{const L=F.type==="percentage"?a*(Math.min(Math.max(0,F.value),100)/100):Math.min(F.value,a);return{name:F.name,type:F.type,value:F.value,amount:L}}),k=b.reduce((F,L)=>F+L.amount,0),I=a-k,_=I,B=((H=(O=o==null?void 0:o.taxConfig)==null?void 0:O.filter(F=>F.isActive))==null?void 0:H.map(F=>({name:F.name,rate:F.rate,amount:_*(F.rate/100)})))||[],$=B.reduce((F,L)=>F+L.amount,0);return{baseAmount:a,basicAmenities:c,totalStallArea:l,amenities:E,amenitiesTotal:m,discounts:b,totalDiscountAmount:k,amountAfterDiscount:I,subtotal:_,taxes:B,totalTaxAmount:$,total:_+$,stallCount:R.length}},[R,n,o]);h.useEffect(()=>{var l;const a=((l=o==null?void 0:o.publicDiscountConfig)==null?void 0:l.filter(c=>c.isActive))||[];if(a.length>0){const c=a[0];console.log("Setting discountId in form to:",c),n.setFieldsValue({discountId:{name:c.name,type:c.type,value:c.value}})}},[o,n]);const A=[{title:"Stall Number",dataIndex:"number",key:"number"},{title:"Hall",dataIndex:"hallName",key:"hallName"},{title:"Stall Type",dataIndex:"type",key:"type",render:(a,l)=>t.jsx(qe,{color:"purple",children:a},`stall-type-${l.key}`)},{title:"Size",dataIndex:"size",key:"size"},{title:"Area",dataIndex:"area",key:"area",render:(a,l)=>t.jsxs("span",{children:[a," sqm"]},`stall-area-${l.key}`)},{title:"Rate",dataIndex:"rate",key:"rate",render:(a,l)=>t.jsxs("span",{children:["",a,"/sqm"]},`stall-rate-${l.key}`)},{title:"Price",dataIndex:"price",key:"price",render:(a,l)=>t.jsxs("span",{children:["",a.toLocaleString()]},`stall-price-${l.key}`)}],T=a=>`${a.toLocaleString("en-IN")}`,P=g.customerName||n.getFieldValue("customerName"),S=g.customerPhone||n.getFieldValue("customerPhone"),N=g.email||n.getFieldValue("email"),C=g.companyName||n.getFieldValue("companyName");return console.log("ReviewStep - Exhibitor Info:",{customerName:P,companyName:C,customerPhone:S,customerEmail:N,formValues:g,formFieldValues:{customerName:n.getFieldValue("customerName"),companyName:n.getFieldValue("companyName"),customerPhone:n.getFieldValue("customerPhone"),email:n.getFieldValue("email")}}),p?t.jsx(tn,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"300px"},children:t.jsx(ut,{size:"large",tip:"Processing your booking..."})}):x.length===0?t.jsxs(tn,{children:[t.jsx(Ke,{message:"No Stalls Selected",description:"Please go back and select at least one stall to book.",type:"warning",showIcon:!0}),t.jsx("div",{style:{marginTop:24,textAlign:"right"},children:t.jsx(G,{onClick:d,children:"Back to Stall Selection"})})]}):t.jsxs(tn,{children:[t.jsx(W.Item,{name:"discountId",hidden:!0,children:t.jsx(xe,{})}),t.jsx(pr,{level:4,children:"Booking Summary"}),t.jsx(yi,{type:"secondary",style:{marginBottom:24},children:"Please review your booking details before submitting."}),t.jsx(be,{title:"Exhibitor Information",style:{marginBottom:24},children:t.jsxs(zt,{column:2,children:[t.jsx(zt.Item,{label:"Name",children:P||"Not provided"}),t.jsx(zt.Item,{label:"Company",children:C||"Not provided"}),t.jsx(zt.Item,{label:"Phone",children:S||"Not provided"}),t.jsx(zt.Item,{label:"Email",children:N||"Not provided"})]})}),t.jsxs(be,{title:"Selected Stalls",className:"review-card",size:"small",children:[t.jsx(Ft,{dataSource:R,columns:A,pagination:!1,size:"small",style:{marginBottom:16}}),t.jsxs(ve,{strong:!0,children:["Total Base Amount: ",T(w.baseAmount)]})]}),w.basicAmenities&&w.basicAmenities.length>0&&t.jsxs(be,{title:t.jsxs(ue,{children:[t.jsx(dt,{status:"success"}),"Included Basic Amenities"]}),style:{marginBottom:24},children:[t.jsxs(yi,{type:"secondary",style:{marginBottom:16},children:["The following amenities are included based on your total stall area of ",w.totalStallArea," sqm."]}),t.jsx(Ft,{dataSource:w.basicAmenities.filter(a=>a.calculatedQuantity>0).map((a,l)=>({...a,key:`basic-${l}`})),columns:[{title:"Name",dataIndex:"name",key:"name",render:(a,l)=>t.jsxs(ue,{children:[t.jsx(ve,{strong:!0,children:a}),t.jsx(qe,{color:"blue",children:l.type})]},`name-${l.key}`)},{title:"Quantity",dataIndex:"calculatedQuantity",key:"calculatedQuantity",width:120,render:(a,l)=>t.jsxs(qe,{color:"green",children:[a," ",a===1?"unit":"units"]},`quantity-${l.key}`)},{title:"Allocation",dataIndex:"perSqm",key:"perSqm",width:180,render:(a,l)=>t.jsxs(ve,{type:"secondary",children:[t.jsx(Vt,{style:{marginRight:5}}),"1 ",l.quantity>1?`set of ${l.quantity}`:"unit"," per ",a," sqm"]},`allocation-${l.key}`)},{title:"Status",key:"status",width:100,align:"right",render:(a,l)=>t.jsx(ve,{type:"success",children:"Included"},`status-${l.key}`)}],pagination:!1,size:"small",locale:{emptyText:t.jsx(Ke,{message:"No basic amenities",description:"Your stall area is too small to qualify for any basic amenities.",type:"info",showIcon:!0})}})]}),w.amenities&&w.amenities.length>0&&t.jsxs(be,{title:"Selected Amenities",style:{marginBottom:24},children:[t.jsx(Ft,{dataSource:w.amenities.map((a,l)=>({...a,key:l})),columns:[{title:"Name",dataIndex:"name",key:"name",render:(a,l)=>t.jsxs(ue,{children:[t.jsx(ve,{strong:!0,children:a}),t.jsx(qe,{color:"blue",children:l.type})]},`amenity-name-${l.key}`)},{title:"Description",dataIndex:"description",key:"description",render:(a,l)=>t.jsx(ve,{type:"secondary",style:{fontSize:"13px"},children:a||"No description provided"},`amenity-desc-${l.key}`)},{title:"Rate",dataIndex:"rate",key:"rate",width:110,align:"right",render:(a,l)=>t.jsx(ve,{strong:!0,style:{color:"#1890ff"},children:T(a)},`amenity-rate-${l.key}`)},{title:"Quantity",dataIndex:"quantity",key:"quantity",width:90,align:"center",render:(a,l)=>t.jsx(qe,{color:"green",children:a},`amenity-qty-${l.key}`)},{title:"Total",dataIndex:"total",key:"total",width:110,align:"right",render:(a,l)=>t.jsx(ve,{strong:!0,style:{color:"#1890ff"},children:T(a)},`amenity-total-${l.key}`)}],pagination:!1,size:"small"}),t.jsx(Pe,{}),t.jsx("div",{style:{textAlign:"right"},children:t.jsxs(ve,{strong:!0,children:["Amenities Total: ",T(w.amenitiesTotal)]})})]}),t.jsxs(be,{title:"Price Calculation",style:{marginBottom:24},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[t.jsx(ve,{children:"Base Amount:"}),t.jsx(ve,{children:T(w.baseAmount)})]}),w.discounts.length>0&&t.jsxs(t.Fragment,{children:[w.discounts.map((a,l)=>t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[t.jsxs(ve,{children:[a.name," (",a.type==="percentage"?`${a.value}%`:T(a.value),"):"]}),t.jsxs(ve,{type:"danger",children:["- ",T(a.amount)]})]},l)),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[t.jsx(ve,{children:"Amount after Discount:"}),t.jsx(ve,{children:T(w.amountAfterDiscount)})]})]}),w.amenitiesTotal>0&&t.jsxs("div",{style:{background:"#f9f9f9",padding:"8px",borderRadius:"4px",marginBottom:"8px",border:"1px dashed #d9d9d9"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[t.jsx(ve,{type:"secondary",children:"Selected Amenities (for information only):"}),t.jsx(ve,{type:"secondary",children:T(w.amenitiesTotal)})]}),t.jsx(ve,{type:"secondary",style:{fontSize:"12px",fontStyle:"italic"},children:"Note: Amenities are not included in the total calculation"})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[t.jsx(ve,{strong:!0,children:"Subtotal:"}),t.jsx(ve,{strong:!0,children:T(w.subtotal)})]}),w.taxes.length>0&&t.jsx(t.Fragment,{children:w.taxes.map((a,l)=>t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[t.jsxs(ve,{children:[a.name," (",a.rate,"%):"]}),t.jsx(ve,{children:T(a.amount)})]},l))}),t.jsx(Pe,{}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx(pr,{level:5,children:"Total:"}),t.jsx(pr,{level:5,children:T(w.total)})]})]})]})},{confirm:tg}=st,ru=({visible:n,stallDetails:e,selectedStallId:r,selectedStallIds:s,loading:i,exhibition:o,onCancel:d,onSubmit:u})=>{const[p]=W.useForm(),[g,R]=h.useState(0),[j]=h.useState(3),[x,w]=h.useState({}),[A,T]=h.useState(!1),[P,S]=h.useState(!1),[N,C]=h.useState(!1),a=Ne(B=>B.exhibitorAuth.exhibitor);h.useEffect(()=>{if(n){R(0),T(!1),w({}),p.resetFields();const B=s.map(z=>String(z));r&&B.push(String(r));const $=[...new Set(B)],v={selectedStalls:$,exhibitionId:o==null?void 0:o._id};a&&(v.customerName=a.contactPerson||"",v.companyName=a.companyName||"",v.email=a.email||"",v.customerPhone=a.phone||""),p.setFieldsValue(v),w(v),console.log("Booking form initialized with stalls:",$),console.log("Exhibitor profile data:",a)}},[n,p,r,s,o,a]);const l=()=>{T(!0)},c=()=>{A?C(!0):d()},f=()=>{C(!1),d()},m=()=>{C(!1)},E=()=>{S(!0),p.validateFields().then(B=>{const $={...x,...B},v={customerName:p.getFieldValue("customerName"),companyName:p.getFieldValue("companyName"),email:p.getFieldValue("email"),customerPhone:p.getFieldValue("customerPhone")},z={...$,...v};w(z),console.log("Step completed, saving form values:",z),console.log("Selected stalls are:",z.selectedStalls||[]),console.log("Exhibitor info:",v),R(g+1),S(!1)}).catch(B=>{S(!1),console.error("Form validation failed:",B),ce.error("Please complete all required fields")})},y=()=>{R(g-1)},b=()=>{p.validateFields().then(B=>{const $={customerName:p.getFieldValue("customerName"),companyName:p.getFieldValue("companyName"),email:p.getFieldValue("email"),customerPhone:p.getFieldValue("customerPhone")},v=p.getFieldValue("selectedStalls")||[],z=p.getFieldValue("amenities")||[],H=e.filter(q=>v.includes(String(q.id))).reduce((q,U)=>q+U.dimensions.width*U.dimensions.height,0);let F=[];o!=null&&o.basicAmenities&&o.basicAmenities.length>0&&(F=o.basicAmenities.filter(q=>Math.floor(H/q.perSqm)*q.quantity>0).map(q=>{const U=Math.floor(H/q.perSqm)*q.quantity;return{name:q.name,type:q.type,perSqm:q.perSqm,quantity:q.quantity,calculatedQuantity:U,description:q.description||""}}));let L=[];z&&z.length>0&&(L=z.map(q=>{var X;const U=(X=o==null?void 0:o.amenities)==null?void 0:X.find(Y=>String(Y._id||Y.id)===String(q.id));return U?{id:String(U._id||U.id),name:U.name,type:U.type,rate:U.rate,quantity:q.quantity||1,description:U.description||""}:null}).filter(Boolean));const V={...x,...B,...$,basicAmenities:F,extraAmenities:L};console.log("Submitting booking with values:",V),console.log("Basic amenities:",F),console.log("Extra amenities:",L),u(V)}).catch(B=>{console.error("Form validation failed:",B),ce.error("Please complete all required fields")})},k=["Stall Details","Amenities","Review"],I=[{title:"Stall Details",icon:t.jsx(Va,{}),content:t.jsx(mi,{form:p,stallDetails:e,selectedStallId:r,selectedStallIds:s,exhibition:o})},{title:"Amenities",icon:t.jsx(Ts,{}),content:t.jsx(bi,{form:p,stallDetails:e,selectedStallIds:p.getFieldValue("selectedStalls")||[],exhibition:o,formValues:x})},{title:"Review",icon:t.jsx(lt,{}),content:t.jsx(wi,{form:p,formValues:x,loading:i,exhibition:o,selectedStalls:p.getFieldValue("selectedStalls")||[],selectedStallIds:p.getFieldValue("selectedStalls")||[],stallDetails:e})}];h.useEffect(()=>{const B=p.getFieldValue("selectedStalls");console.log(`Step ${g} - Form has selectedStalls:`,B)},[g,p]);const _=B=>{const $=p.getFieldValue("selectedStalls")||[],v={customerName:p.getFieldValue("customerName"),companyName:p.getFieldValue("companyName"),email:p.getFieldValue("email"),customerPhone:p.getFieldValue("customerPhone")},z={...x,...v};switch(console.log(`Rendering step ${B} with:`,{selectedStalls:$,exhibitorInfo:v}),B){case 0:return t.jsx(mi,{form:p,stallDetails:e,selectedStallId:r,selectedStallIds:s,exhibition:o});case 1:return t.jsx(bi,{form:p,stallDetails:e,selectedStallIds:$,exhibition:o,formValues:z});case 2:return t.jsx(wi,{form:p,formValues:z,loading:i,exhibition:o,selectedStalls:$,selectedStallIds:$,stallDetails:e,onPrev:y,onFinish:b});default:return null}};return t.jsxs(t.Fragment,{children:[t.jsx(Gd,{title:`Book Exhibition Stall - ${k[g]}`,open:n,onCancel:c,footer:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"12px 24px"},children:[g>0&&t.jsx(hr,{onClick:y,disabled:P||i,size:"large",children:"Back"}),t.jsx("div",{children:g<j-1?t.jsx(hr,{type:"primary",onClick:E,loading:P,disabled:i,size:"large",children:"Next"}):t.jsx(hr,{type:"primary",onClick:b,loading:i,disabled:P,size:"large",children:"Submit Booking"})})]}),width:900,destroyOnClose:!0,maskClosable:!1,className:"booking-modal",children:t.jsxs(ut,{spinning:i||P,tip:i?"Processing your booking...":"Validating...",children:[t.jsx(Xd,{children:I.map((B,$)=>t.jsxs("div",{className:`step-item ${g===$?"active":""} ${g>$?"completed":""}`,onClick:()=>g>$?R($):null,style:{cursor:g>$?"pointer":"default"},children:[t.jsx("span",{className:"step-icon",children:g>$?t.jsx(Ji,{}):$+1}),B.title]},$))}),t.jsx(W,{form:p,layout:"vertical",preserve:!0,onFieldsChange:l,children:_(g)},`form-step-${g}`)]})}),t.jsx(st,{title:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx(Ha,{style:{color:"#faad14",fontSize:"18px"}}),t.jsx("span",{children:"Discard Changes?"})]}),open:N,onCancel:m,footer:t.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",padding:"8px 0"},children:[t.jsx(G,{onClick:m,size:"large",style:{minWidth:"100px"},children:"Keep Editing"}),t.jsx(G,{type:"primary",danger:!0,onClick:f,size:"large",style:{minWidth:"100px"},children:"Discard Changes"})]}),width:480,centered:!0,maskClosable:!1,children:t.jsxs("div",{style:{padding:"16px 0"},children:[t.jsx("p",{style:{margin:0,fontSize:"14px",lineHeight:"1.6",color:"#666"},children:"You have unsaved changes in your booking form. If you close now, all your progress will be lost."}),t.jsx("p",{style:{margin:"12px 0 0 0",fontSize:"14px",lineHeight:"1.6",color:"#666"},children:"Are you sure you want to discard your changes and close the form?"})]})})]})},ys=Le.create({baseURL:et}),Pt=Le.create({baseURL:et});ys.interceptors.request.use(n=>{const e=localStorage.getItem("exhibitor_token");return e&&(n.headers.Authorization=`Bearer ${e}`),n},n=>Promise.reject(n));const Ct=Le.create({baseURL:et});Ct.interceptors.request.use(n=>{const e=localStorage.getItem("token");return e&&(n.headers.Authorization=`Bearer ${e}`),n},n=>Promise.reject(n));const ct={sendRegistrationOTP:async n=>await Pt.post("/exhibitors/send-otp",{email:n}),verifyOTP:async n=>await Pt.post("/exhibitors/verify-otp",n),register:async n=>await Pt.post("/exhibitors/register",n),login:async n=>await Pt.post("/exhibitors/login",n),requestPasswordReset:async n=>await Pt.post("/exhibitors/forgot-password",n),resetPassword:async n=>await Pt.post("/exhibitors/reset-password",n),getProfile:async()=>await ys.get("/exhibitors/profile"),updateProfile:async n=>await ys.put("/exhibitors/profile",n),getExhibitors:async n=>{const e=new URLSearchParams;n!=null&&n.page&&e.append("page",n.page.toString()),n!=null&&n.limit&&e.append("limit",n.limit.toString()),n!=null&&n.status&&e.append("status",n.status),(n==null?void 0:n.isActive)!==void 0&&e.append("isActive",n.isActive.toString()),n!=null&&n.search&&e.append("search",n.search),n!=null&&n.sortBy&&e.append("sortBy",n.sortBy),n!=null&&n.sortOrder&&e.append("sortOrder",n.sortOrder);const r=`/exhibitors/admin/exhibitors${e.toString()?`?${e.toString()}`:""}`;return await Ct.get(r)},getExhibitor:async n=>await Ct.get(`/exhibitors/admin/exhibitors/${n}`),createExhibitor:async n=>await Ct.post("/exhibitors/admin/exhibitors",n),updateStatus:async(n,e,r)=>await Ct.put(`/exhibitors/admin/exhibitors/${n}/status`,{status:e,rejectionReason:r}),updateExhibitor:async(n,e)=>await Ct.put(`/exhibitors/admin/exhibitors/${n}`,e),deleteExhibitor:async n=>await Ct.delete(`/exhibitors/admin/exhibitors/${n}`)},{Step:fr}=dn,{Text:su}=Ee,iu=({loginModalVisible:n,registerModalVisible:e,setRegisterModalVisible:r,setExhibitorCredentials:s,onForgotPassword:i})=>{const o=ht(),d=Ne(F=>F.exhibitorAuth),[u,p]=h.useState(!1),[g,R]=h.useState(null),[j]=W.useForm(),[x]=W.useForm(),[w]=W.useForm(),[A,T]=h.useState(0),[P,S]=h.useState(""),[N,C]=h.useState(!1),[a,l]=h.useState(!1),[c,f]=h.useState(0),[m,E]=h.useState({companyName:"",contactPerson:""}),y=h.useRef(null),b=async F=>{var L,V,q,U,X,Y,pe,we,oe;try{R(null),p(!0);const ee=await ct.login(F),{exhibitor:de,token:Te}=ee.data;if(!de||!Te)throw new Error("Invalid response from server");s({exhibitor:de,token:Te}),o(gn()),j.resetFields(),ce.success("Login successful!")}catch(ee){if(((L=ee.response)==null?void 0:L.status)===403){const de=(q=(V=ee.response)==null?void 0:V.data)==null?void 0:q.status;if(de==="pending")R("Your account is pending approval. You will be able to log in after admin approval.");else if(de==="rejected"){const Te=(X=(U=ee.response)==null?void 0:U.data)==null?void 0:X.rejectionReason;R(Te?`Your registration has been rejected. Reason: ${Te}`:"Your registration has been rejected. Please contact the administrator for more details.")}else R(((pe=(Y=ee.response)==null?void 0:Y.data)==null?void 0:pe.message)||"Access denied. Please contact administrator.")}else R(((oe=(we=ee.response)==null?void 0:we.data)==null?void 0:oe.message)||"Login failed. Please try again.")}finally{p(!1)}},k=async()=>{var F,L;try{const V=await x.validateFields(["email","companyName","contactPerson"]);p(!0),R(null),S(V.email),E({companyName:V.companyName,contactPerson:V.contactPerson}),await ct.sendRegistrationOTP(V.email),C(!0),ce.success("OTP sent to your email address"),f(60),I(),T(1)}catch(V){if(V.name==="ValidationError")return;const q=((L=(F=V.response)==null?void 0:F.data)==null?void 0:L.message)||"Failed to send OTP. Please try again.";R(q),ce.error(q)}finally{p(!1)}},I=()=>{y.current&&clearInterval(y.current),y.current=setInterval(()=>{f(F=>F<=1?(y.current&&clearInterval(y.current),0):F-1)},1e3)},_=async()=>{var F,L;try{p(!0),R(null),await ct.sendRegistrationOTP(P),ce.success("New OTP sent to your email address"),f(60),I()}catch(V){const q=((L=(F=V.response)==null?void 0:F.data)==null?void 0:L.message)||"Failed to resend OTP. Please try again.";R(q),ce.error(q)}finally{p(!1)}},B=async F=>{var L,V;try{p(!0),R(null);const q={email:P,otp:F.otp};await ct.verifyOTP(q),l(!0),ce.success("Email verified successfully"),y.current&&clearInterval(y.current),T(2)}catch(q){const U=((V=(L=q.response)==null?void 0:L.data)==null?void 0:V.message)||"Invalid OTP. Please try again.";R(U),ce.error(U)}finally{p(!1)}},$=()=>{C(!1),l(!1),S(""),f(0),T(0),E({companyName:"",contactPerson:""}),y.current&&clearInterval(y.current),w.resetFields()},v=async F=>{var L,V,q;try{if(R(null),p(!0),!a){R("Email verification required");return}const{confirmPassword:U,...X}=F,Y={...X,email:P,companyName:m.companyName,contactPerson:m.contactPerson};console.log("Sending registration data:",Y);const pe=await ct.register(Y);ce.success("Registration successful! You can log in and book a stall only after admin approval."),r(!1),x.resetFields(),$(),setTimeout(()=>{o(Rt(void 0))},500)}catch(U){console.error("Registration error:",U),console.error("Response data:",(L=U.response)==null?void 0:L.data);const X=((q=(V=U.response)==null?void 0:V.data)==null?void 0:q.message)||"Registration failed. Please try again.";R(X),ce.error(X)}finally{p(!1)}};Ie.useEffect(()=>()=>{y.current&&clearInterval(y.current)},[]);const z=()=>{r(!1),R(null),x.resetFields(),$()},O=()=>{o(gn()),r(!0),j.resetFields()},H=()=>{r(!1),o(Rt(void 0)),x.resetFields()};return t.jsxs(t.Fragment,{children:[t.jsxs(st,{title:"Exhibitor Login",open:n,onCancel:()=>{o(gn()),R(null),j.resetFields()},footer:null,width:400,children:[d.loginContext==="stall-booking"&&t.jsx(Ke,{message:"Login Required for Stall Booking",description:"Please log in to your exhibitor account to select and book stalls for this exhibition.",type:"info",showIcon:!0,style:{marginBottom:16}}),g&&t.jsx(Ke,{message:g,type:"error",showIcon:!0,style:{marginBottom:16}}),t.jsxs(W,{form:j,name:"exhibitor_login_modal",onFinish:b,layout:"vertical",children:[t.jsx(W.Item,{name:"email",rules:[{required:!0,message:"Please input your email!"},{type:"email",message:"Please enter a valid email address!"}],children:t.jsx(xe,{prefix:t.jsx(sn,{}),placeholder:"Email",size:"large",disabled:u})}),t.jsx(W.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}],children:t.jsx(xe.Password,{prefix:t.jsx(Dt,{}),placeholder:"Password",size:"large",disabled:u})}),t.jsxs(W.Item,{children:[t.jsx("div",{style:{textAlign:"right",marginBottom:10},children:t.jsx(G,{type:"link",onClick:()=>{o(gn()),i()},style:{padding:0},children:"Forgot password?"})}),t.jsx(G,{type:"primary",htmlType:"submit",block:!0,size:"large",loading:u,children:"Login"})]})]}),t.jsx(Pe,{children:t.jsx("span",{style:{fontSize:"14px",color:"#888"},children:"Don't have an account?"})}),t.jsx(G,{type:"default",block:!0,onClick:O,children:"Register as Exhibitor"})]}),t.jsxs(st,{title:"Exhibitor Registration",open:e,onCancel:z,footer:null,width:500,children:[t.jsxs(dn,{current:A,style:{marginBottom:24},children:[t.jsx(fr,{title:"Basic Info"}),t.jsx(fr,{title:"Verify Email"}),t.jsx(fr,{title:"Complete"})]}),g&&t.jsx(Ke,{message:g,type:"error",showIcon:!0,style:{marginBottom:16}}),A===0&&t.jsxs(t.Fragment,{children:[t.jsx(Ke,{message:"Email Verification Required",description:"We'll send a one-time password (OTP) to verify your email before completing registration.",type:"info",showIcon:!0,style:{marginBottom:16}}),t.jsxs(W,{form:x,name:"exhibitor_register_step1",layout:"vertical",children:[t.jsx(W.Item,{name:"companyName",rules:[{required:!0,message:"Please input your company name!"}],children:t.jsx(xe,{prefix:t.jsx(no,{}),placeholder:"Company Name",size:"large",disabled:u})}),t.jsx(W.Item,{name:"contactPerson",rules:[{required:!0,message:"Please input contact person name!"}],children:t.jsx(xe,{prefix:t.jsx(De,{}),placeholder:"Contact Person",size:"large",disabled:u})}),t.jsx(W.Item,{name:"email",rules:[{required:!0,message:"Please input your email!"},{type:"email",message:"Please enter a valid email address!"}],children:t.jsx(xe,{prefix:t.jsx(sn,{}),placeholder:"Email",size:"large",disabled:u})}),t.jsx(W.Item,{children:t.jsx(G,{type:"primary",onClick:k,block:!0,size:"large",loading:u,children:"Continue & Verify Email"})})]}),t.jsx(Pe,{children:t.jsx("span",{style:{fontSize:"14px",color:"#888"},children:"Already have an account?"})}),t.jsx(G,{type:"default",block:!0,onClick:H,children:"Login"})]}),A===1&&t.jsxs(t.Fragment,{children:[t.jsx(Ke,{message:"Email Verification",description:`We've sent a verification code to ${P}. Please enter it below to continue.`,type:"info",showIcon:!0,style:{marginBottom:16}}),t.jsxs(W,{form:w,name:"verify_otp",onFinish:B,layout:"vertical",children:[t.jsx(W.Item,{name:"otp",rules:[{required:!0,message:"Please enter the verification code!"}],children:t.jsx(xe,{size:"large",placeholder:"Enter OTP",maxLength:6,style:{textAlign:"center",letterSpacing:"8px",fontSize:"20px"},disabled:u})}),t.jsx(W.Item,{children:t.jsx(G,{type:"primary",htmlType:"submit",block:!0,size:"large",loading:u,children:"Verify & Continue"})})]}),t.jsxs(Ae,{justify:"space-between",align:"middle",style:{marginTop:16},children:[t.jsx(ie,{children:t.jsx(G,{type:"link",disabled:c>0||u,onClick:_,children:"Resend Code"})}),t.jsx(ie,{children:c>0&&t.jsxs(su,{type:"secondary",children:["Resend in ",c,"s"]})})]}),t.jsx(Pe,{}),t.jsx(G,{type:"default",block:!0,onClick:()=>T(0),children:"Back"})]}),A===2&&t.jsxs(t.Fragment,{children:[t.jsx(Ke,{message:"Email Verified Successfully",description:"Please complete your registration by providing the remaining details.",type:"success",showIcon:!0,style:{marginBottom:16}}),t.jsxs(W,{form:x,name:"exhibitor_register_step2",onFinish:v,layout:"vertical",children:[t.jsx(W.Item,{name:"phone",rules:[{required:!0,message:"Please input your phone number!"}],children:t.jsx(xe,{prefix:t.jsx(ro,{}),placeholder:"Phone Number",size:"large",disabled:u})}),t.jsx(W.Item,{name:"address",rules:[{required:!0,message:"Please input your address!"}],children:t.jsx(xe.TextArea,{placeholder:"Address",rows:3,disabled:u})}),t.jsx(W.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"},{min:6,message:"Password must be at least 6 characters!"}],children:t.jsx(xe.Password,{prefix:t.jsx(Dt,{}),placeholder:"Password",size:"large",disabled:u})}),t.jsx(W.Item,{name:"confirmPassword",dependencies:["password"],rules:[{required:!0,message:"Please confirm your password!"},({getFieldValue:F})=>({validator(L,V){return!V||F("password")===V?Promise.resolve():Promise.reject(new Error("The two passwords do not match!"))}})],children:t.jsx(xe.Password,{prefix:t.jsx(Dt,{}),placeholder:"Confirm Password",size:"large",disabled:u})}),t.jsx(W.Item,{children:t.jsx(G,{type:"primary",htmlType:"submit",block:!0,size:"large",loading:u,children:"Complete Registration"})})]})]})]})]})},{Step:ng}=dn,{Text:rg}=Ee,ou=({visible:n})=>{const e=ht(),[r,s]=h.useState(!1),[i,o]=h.useState(null),[d,u]=h.useState(0),[p,g]=h.useState(""),[R,j]=h.useState(!1),[x,w]=h.useState(0),A=W.useForm()[0],T=W.useForm()[0],P=W.useForm()[0],S=h.useRef(null),N=async y=>{var b,k;try{s(!0),o(null);const I=await ct.requestPasswordReset(y);g(y.email),j(!0),u(1),ce.success("Password reset code sent to your email"),w(60),C()}catch(I){const _=((k=(b=I.response)==null?void 0:b.data)==null?void 0:k.message)||"Failed to send password reset code. Please try again.";o(_)}finally{s(!1)}},C=()=>{S.current&&clearInterval(S.current),S.current=setInterval(()=>{w(y=>y<=1?(S.current&&clearInterval(S.current),0):y-1)},1e3)},a=async()=>{var y,b;try{s(!0),o(null),await ct.requestPasswordReset({email:p}),ce.success("New password reset code sent to your email"),w(60),C()}catch(k){const I=((b=(y=k.response)==null?void 0:y.data)==null?void 0:b.message)||"Failed to resend password reset code. Please try again.";o(I)}finally{s(!1)}},l=async y=>{var b,k;try{s(!0),o(null),u(2),S.current&&clearInterval(S.current)}catch(I){const _=((k=(b=I.response)==null?void 0:b.data)==null?void 0:k.message)||"Invalid code. Please try again.";o(_)}finally{s(!1)}},c=async y=>{var b,k;try{s(!0),o(null);const I=T.getFieldValue("otp"),_={email:p,otp:I,newPassword:y.newPassword};await ct.resetPassword(_),ce.success("Password reset successful. You can now log in with your new password."),f(),e(cr()),e(Rt())}catch(I){const _=((k=(b=I.response)==null?void 0:b.data)==null?void 0:k.message)||"Failed to reset password. Please try again.";o(_)}finally{s(!1)}},f=()=>{u(0),g(""),j(!1),w(0),S.current&&clearInterval(S.current),A.resetFields(),T.resetFields(),P.resetFields()},m=()=>{f(),e(cr())},E=()=>{f(),e(cr()),e(Rt())};return Ie.useEffect(()=>()=>{S.current&&clearInterval(S.current)},[]),t.jsxs(st,{title:"Forgot Password",open:n,onCancel:m,footer:null,width:400,children:[i&&t.jsx(Ke,{message:i,type:"error",style:{marginBottom:16}}),t.jsx(dn,{current:d,size:"small",style:{marginBottom:20},items:[{title:"Email"},{title:"Verify"},{title:"Reset"}]}),d===0&&t.jsxs(W,{form:A,onFinish:N,layout:"vertical",children:[t.jsx(W.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please enter your email"},{type:"email",message:"Please enter a valid email"}],children:t.jsx(xe,{prefix:t.jsx(sn,{}),placeholder:"Email"})}),t.jsx(W.Item,{children:t.jsx(G,{type:"primary",htmlType:"submit",block:!0,loading:r,children:"Send Reset Code"})}),t.jsx(Pe,{style:{margin:"12px 0"},children:t.jsx("span",{style:{fontSize:"12px",color:"#8c8c8c"},children:"Remember your password?"})}),t.jsx(G,{type:"link",onClick:E,block:!0,children:"Back to Login"})]}),d===1&&t.jsxs(W,{form:T,onFinish:l,layout:"vertical",children:[t.jsxs("p",{children:["We've sent a verification code to ",t.jsx("strong",{children:p}),". Please check your email and enter the code below."]}),t.jsx(W.Item,{name:"otp",rules:[{required:!0,message:"Please enter the verification code"},{pattern:/^\d{6}$/,message:"Please enter a valid 6-digit code"}],children:t.jsx(xe,{placeholder:"Enter 6-digit code",maxLength:6,style:{letterSpacing:"0.5em",textAlign:"center",fontWeight:"bold"}})}),t.jsx(W.Item,{children:t.jsx(G,{type:"primary",htmlType:"submit",block:!0,loading:r,children:"Verify Code"})}),t.jsx("div",{style:{textAlign:"center",marginTop:8},children:x>0?t.jsxs(Ee.Text,{type:"secondary",children:["Resend code in ",x,"s"]}):t.jsx(G,{type:"link",onClick:a,disabled:r,children:"Resend Code"})}),t.jsx(Pe,{style:{margin:"12px 0"},children:t.jsx("span",{style:{fontSize:"12px",color:"#8c8c8c"},children:"Back to beginning"})}),t.jsx(G,{type:"link",onClick:()=>{u(0),S.current&&(clearInterval(S.current),w(0))},block:!0,children:"Change Email"})]}),d===2&&t.jsxs(W,{form:P,onFinish:c,layout:"vertical",children:[t.jsx(W.Item,{name:"newPassword",label:"New Password",rules:[{required:!0,message:"Please enter your new password"},{min:6,message:"Password must be at least 6 characters"}],hasFeedback:!0,children:t.jsx(xe.Password,{prefix:t.jsx(Dt,{}),placeholder:"New Password"})}),t.jsx(W.Item,{name:"confirmPassword",label:"Confirm Password",dependencies:["newPassword"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password"},({getFieldValue:y})=>({validator(b,k){return!k||y("newPassword")===k?Promise.resolve():Promise.reject(new Error("The two passwords do not match"))}})],children:t.jsx(xe.Password,{prefix:t.jsx(Dt,{}),placeholder:"Confirm Password"})}),t.jsx(W.Item,{children:t.jsx(G,{type:"primary",htmlType:"submit",block:!0,loading:r,children:"Reset Password"})})]})]})},{Header:au}=ye,lu=D(au)`
  background: #fff;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
  padding: 0 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: fixed;
  width: 100%;
  z-index: 1000;
  
  @media (max-width: 768px) {
    padding: 0 1rem;
  }
`,cu=D.div`
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  display: flex;
  justify-content: space-between;
  align-items: center;
  
  @media (max-width: 768px) {
    justify-content: space-between;
  }
`,du=D.div`
  display: flex;
  align-items: center;
  justify-content: center;
  
  @media (max-width: 768px) {
    position: static;
    transform: none;
    justify-content: flex-start;
  }
`,uu=D.div`
  border-radius: 8px;
  padding: 10px;
  display: flex;
  justify-content: center;
  align-items: center;
  
  @media (max-width: 768px) {
    padding: 8px;
  }
`,hu=D.img`
  height: auto;
  width: 100%;
  max-width: 140px;
  max-height: auto;
  object-fit: contain;
  
  @media (max-width: 768px) {
    max-width: 120px;
  }
`,vi=D(Hn)`
  background-color: #1890ff;
  cursor: pointer;
  transition: all 0.3s;
  border: 2px solid transparent;
  
  &:hover {
    background-color: #40a9ff;
    border-color: #e6f7ff;
    transform: scale(1.05);
    box-shadow: 0 0 10px rgba(24, 144, 255, 0.3);
  }
`,ji=D(cn)`
  background: white;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  padding: 8px 0;
  
  .ant-dropdown-menu-item {
    padding: 10px 16px;
    transition: all 0.2s;
    
    &:hover {
      background-color: #fafafa;
    }
  }
`,pu=D(cn)`
  border: none;
  display: flex;
  justify-content: center;
  font-size: 15px;
  
  @media (max-width: 768px) {
    display: none !important;
  }
`,fu=D(G)`
  display: none;
  font-size: 18px;
  background: transparent;
  border: none;
  padding: 8px;
  transition: all 0.3s ease;
  
  @media (max-width: 768px) {
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 5;
  }
  
  &:hover {
    transform: rotate(90deg);
    color: #4158D0;
  }
  
  &:active {
    transform: scale(0.9) rotate(90deg);
  }
`,gu=D.div`
  .ant-drawer-header {
    padding: 16px 24px;
  }
  
  .ant-drawer-title {
    font-size: 16px;
    font-weight: 600;
  }
  
  .ant-drawer-body {
    padding: 24px 16px;
  }
  
  .ant-drawer-content-wrapper {
    max-width: 80%;
  }
`,mu=D(nt)`
  display: block;
  padding: 16px 8px;
  margin-bottom: 8px;
  color: #333;
  font-size: 16px;
  border-bottom: 1px solid #f0f0f0;
  
  &:hover {
    color: #1890ff;
  }
`,bn=D(G)`
  width: 100%;
  margin-bottom: 12px;
  height: auto;
  padding: 12px 16px;
  font-size: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  
  svg {
    margin-right: 10px;
    font-size: 18px;
  }
`,xu=D.div`
  display: flex;
  align-items: center;
  
  @media (max-width: 768px) {
    display: none;
  }
`,bu=D.span`
  margin-right: 8px;
  display: none;
  
  @media (min-width: 768px) {
    display: inline;
  }
`,Xe=()=>{var m;const n=He(),e=ht(),[r,s]=h.useState(!1),[i,o]=h.useState(!1),[d,u]=h.useState(!1),[p,g]=h.useState("/logo.png"),[R,j]=h.useState("Exhibition Manager"),x=Ne(E=>E.exhibitorAuth),{exhibitor:w,isAuthenticated:A,showLoginModal:T,showForgotPasswordModal:P}=x;h.useEffect(()=>{const E=localStorage.getItem("cachedLogoUrl"),y=localStorage.getItem("logoTimestamp"),b=new Date().getTime();if(E&&y&&b-parseInt(y)<36e5)g(E);else{const k=`${Q.defaults.baseURL}/public/logo`;g(k),localStorage.setItem("cachedLogoUrl",k),localStorage.setItem("logoTimestamp",b.toString());const I=new Image;I.src=k}fetch(`${Q.defaults.baseURL}/public/site-info`).then(k=>k.json()).then(k=>{k.siteName&&j(k.siteName)}).catch(k=>{console.error("Error fetching site info:",k)})},[]),h.useEffect(()=>(ce.config({top:84,duration:3,maxCount:1}),()=>{ce.destroy()}),[]);const S=()=>{e(Co()),ce.success("Successfully logged out"),n("/"),s(!1),o(!1)},N=()=>{e(Rt(void 0)),s(!1),o(!1)},C=()=>{u(!0),s(!1),o(!1)},a=()=>{e(Jc())},l=[{key:"exhibitions",label:"Exhibitions",path:"/exhibitions"},{key:"about",label:"About",path:"/about"},{key:"contact",label:"Contact",path:"/contact"}],c=t.jsx(ji,{items:[{key:"exhibitor-login",icon:t.jsx(Zs,{}),label:t.jsx("a",{onClick:N,children:"Exhibitor Login"})},{key:"exhibitor-register",icon:t.jsx(ls,{}),label:t.jsx("a",{onClick:C,children:"Register as Exhibitor"})}]}),f=t.jsx(ji,{items:[{key:"exhibitor-dashboard",icon:t.jsx(rn,{}),label:t.jsx(nt,{to:"/exhibitor/dashboard",children:"Dashboard"})},{key:"exhibitor-profile",icon:t.jsx(De,{}),label:t.jsx(nt,{to:"/exhibitor/profile",children:"My Profile"})},{key:"exhibitor-bookings",icon:t.jsx(Ve,{}),label:t.jsx(nt,{to:"/exhibitor/bookings",children:"My Bookings"})},{key:"divider",type:"divider"},{key:"exhibitor-logout",icon:t.jsx(Bn,{}),label:t.jsx("a",{onClick:S,children:"Logout"})}]});return t.jsxs(t.Fragment,{children:[t.jsx(lu,{children:t.jsxs(cu,{children:[t.jsx(du,{children:t.jsx(nt,{to:"/",style:{display:"flex",alignItems:"center",textDecoration:"none"},children:t.jsx(uu,{children:t.jsx(hu,{src:p,alt:"Logo",onError:()=>g("/logo.png")})})})}),t.jsx(pu,{mode:"horizontal",selectedKeys:[],style:{flex:1,display:"flex",justifyContent:"center"},items:l.map(E=>({key:E.key,label:t.jsx(nt,{to:E.path,children:E.label})}))}),t.jsx(xu,{children:t.jsx(Qn,{overlay:x.isAuthenticated?f:c,trigger:["click"],placement:"bottomRight",open:r,onOpenChange:s,overlayStyle:{minWidth:"150px",marginTop:"10px"},children:x.isAuthenticated?t.jsxs(ue,{style:{cursor:"pointer"},children:[t.jsx(bu,{children:((m=x.exhibitor)==null?void 0:m.companyName)||"Exhibitor"}),t.jsx(vi,{icon:t.jsx(De,{}),size:"large"})]}):t.jsx(vi,{icon:t.jsx(De,{}),size:"large"})})}),t.jsx(fu,{icon:t.jsx(Qa,{}),onClick:()=>o(!0)})]})}),t.jsx(gu,{children:t.jsxs(Wa,{title:"Exhibition Management System",placement:"right",onClose:()=>o(!1),open:i,width:280,closeIcon:t.jsx("span",{style:{fontSize:"16px"},children:""}),children:[t.jsx("div",{style:{marginBottom:24},children:l.map(E=>t.jsx(mu,{to:E.path,onClick:()=>o(!1),children:E.label},E.key))}),t.jsx("div",{style:{marginTop:40},children:x.isAuthenticated?t.jsxs(t.Fragment,{children:[t.jsx(bn,{type:"primary",icon:t.jsx(rn,{}),onClick:()=>{n("/exhibitor/dashboard"),o(!1)},children:"Dashboard"}),t.jsx(bn,{type:"default",icon:t.jsx(Bn,{}),onClick:S,children:"Logout"})]}):t.jsxs(t.Fragment,{children:[t.jsx(bn,{type:"primary",style:{background:"#7E57C2",borderColor:"#7E57C2"},icon:t.jsx(Zs,{}),onClick:()=>{N(),o(!1)},children:"Exhibitor Login"}),t.jsx(bn,{type:"default",icon:t.jsx(ls,{}),onClick:()=>{C(),o(!1)},children:"Register as Exhibitor"})]})})]})}),t.jsx(iu,{loginModalVisible:T,registerModalVisible:d,setRegisterModalVisible:u,setExhibitorCredentials:E=>e(Xc(E)),onForgotPassword:a}),t.jsx(ou,{visible:P})]})},{Content:yn}=ye,{Title:sg}=Ee,yu=n=>{if(!n)return"";if(n.startsWith("http"))return n;const e=n.startsWith("/")?n.substring(1):n;if(e.includes("logos/"))return`${Q.defaults.baseURL}/public/images/${e}`;const r=localStorage.getItem("token"),s=`uploads/${e}`;return r?`${Q.defaults.baseURL}/${s}?token=${r}`:`${Q.defaults.baseURL}/${s}`},wu=()=>{var z,O,H,F;const{id:n}=Vi(),e=He(),r=ht(),[s,i]=h.useState(null),[o,d]=h.useState(null),[u,p]=h.useState(null),[g,R]=h.useState([]),[j,x]=h.useState(!1),[w,A]=h.useState(!0),[T,P]=h.useState(null),[S,N]=h.useState(!1),[C,a]=h.useState(null),l=h.useRef(null),[c,f]=h.useState({width:800,height:600}),[m,E]=h.useState(!1),[y]=W.useForm(),{isAuthenticated:b}=Ne(L=>L.exhibitorAuth);h.useEffect(()=>{const L=()=>{E(window.innerWidth<768)};return L(),window.addEventListener("resize",L),()=>{window.removeEventListener("resize",L)}},[]);const k=h.useCallback(L=>L.status==="booked"||L.status==="reserved",[]),I=h.useCallback(()=>{if(l.current){const{clientWidth:L,clientHeight:V}=l.current,q=m?320:800,U=m?480:600,X=Math.max(L||q,q),Y=Math.max(V||U,U);(Math.abs(X-c.width)>5||Math.abs(Y-c.height)>5)&&f({width:X,height:Y})}},[c.width,c.height,m]);h.useEffect(()=>{let L=null;const V=()=>{L===null&&(L=window.setTimeout(()=>{L=null,I()},m?100:50))};I();const q=new ResizeObserver(V);return l.current&&q.observe(l.current),window.addEventListener("resize",V),()=>{L!==null&&window.clearTimeout(L),q.disconnect(),window.removeEventListener("resize",V)}},[I,m]),h.useEffect(()=>{(async()=>{try{if(!n){P("Exhibition ID is missing"),A(!1);return}A(!0),P(null);const V=await xt.getLayout(n);i(V.data)}catch(V){P(V.message||"Failed to fetch layout"),console.error("Error fetching exhibition:",V)}finally{A(!1)}})()},[n]),h.useEffect(()=>{s&&I()},[s]),h.useEffect(()=>{b&&s&&(p(null),R([]),I(),ce.info("You can now select stalls to book.",3))},[b]);const _=h.useCallback(async L=>{if(k(L)){ce.info(`This stall (${L.stallNumber}) is already booked.`);return}if(!b){r(Rt("stall-booking"));return}const q=L._id||L.id;R(U=>U.includes(q)?(ce.info(`Stall ${L.stallNumber} removed from selection`),U.filter(X=>X!==q)):(ce.success(`Stall ${L.stallNumber} added to selection`),[...U,q]))},[k,b,r]),B=async L=>{try{N(!0);const V={...L,exhibitionId:s==null?void 0:s.exhibition._id,stallIds:L.selectedStalls};if(b){const q=await xt.exhibitorBookStalls(V);ce.success("Your booking request has been submitted successfully! It is pending review by the admin.")}else{const q=await xt.bookMultipleStalls(n,V);ce.success("Your booking request has been submitted successfully!")}if(x(!1),R([]),n)try{const q=await xt.getLayout(n);i(q.data)}catch(q){console.error("Error refreshing layout data:",q)}}catch(V){console.error("Error booking stall",V),ce.error("Failed to book stall. Please try again.")}finally{N(!1)}},$=async()=>{var L;try{if(!s)return;N(!0);let V=null;if(u){const U=s.layout.find(X=>X.stalls.some(Y=>Y.id===u));U?V=U.stalls.find(X=>X.id===u)||null:console.error("Selected stall not found in any hall")}const q=s.layout.flatMap(U=>U.stalls.map(X=>({...X,hallId:U.id,hallName:U.name}))).filter(U=>U.status==="available");if(g.length===0&&u===null&&q.length===0){ce.error("No stalls are available for booking");return}if(!s.exhibition.basicAmenities)try{const U=await xt.getExhibition(n||"");(L=U==null?void 0:U.data)!=null&&L.basicAmenities&&i({...s,exhibition:{...s.exhibition,basicAmenities:U.data.basicAmenities}})}catch(U){console.error("Error fetching exhibition details with amenities:",U)}a(q),x(!0)}catch(V){console.error("Error opening booking modal:",V),ce.error("Failed to open booking form")}finally{N(!1)}};h.useCallback(L=>{L.cancelBubble=!0},[]);const v=h.useMemo(()=>{var L;return s?{halls:s.layout.map(V=>t.jsx(Ro,{hall:{...V,exhibitionId:n||""},isSelected:!1,onSelect:()=>{},isStallMode:!0},V.id)),stalls:s.layout.flatMap(V=>V.stalls.map(q=>{var U,X,Y,pe,we,oe,ee,de;return t.jsx(Ao,{stall:{...q,hallId:V.id,hallName:V.name,isSelected:g.includes(q.id),stallTypeId:"default",number:q.stallNumber,typeName:q.type||"Standard",ratePerSqm:q.price||0,rotation:0,dimensions:{x:((U=q.position)==null?void 0:U.x)||0,y:((X=q.position)==null?void 0:X.y)||0,width:((Y=q.dimensions)==null?void 0:Y.width)||0,height:((pe=q.dimensions)==null?void 0:pe.height)||0},status:q.status==="maintenance"?"booked":q.status},isSelected:u===q.id||g.includes(q.id),onSelect:q.status==="available"?()=>_(q):void 0,hallWidth:((we=V.dimensions)==null?void 0:we.width)||0,hallHeight:((oe=V.dimensions)==null?void 0:oe.height)||0,hallX:((ee=V.dimensions)==null?void 0:ee.x)||0,hallY:((de=V.dimensions)==null?void 0:de.y)||0},q.id)})),fixtures:(L=s.fixtures)==null?void 0:L.map(V=>{var q,U;return t.jsx(To,{fixture:{...V,id:V.id||V._id,_id:V._id||V.id,exhibitionId:n||"",isActive:!0,zIndex:5},scale:1,position:{x:0,y:0},exhibitionWidth:((q=s.exhibition.dimensions)==null?void 0:q.width)||0,exhibitionHeight:((U=s.exhibition.dimensions)==null?void 0:U.height)||0},V.id||V._id)})}:null},[s,n,u,g,_]);return w?t.jsxs(ye,{children:[t.jsx(Xe,{}),t.jsx(yn,{style:{paddingTop:"64px"},children:t.jsxs("div",{style:{textAlign:"center",padding:"48px"},children:[t.jsx(ut,{size:"large"}),t.jsx("p",{style:{marginTop:16},children:"Loading exhibition layout..."})]})})]}):T||!s?t.jsxs(ye,{children:[t.jsx(Xe,{}),t.jsx(yn,{style:{paddingTop:"64px"},children:t.jsx(on,{status:"error",title:"Failed to load exhibition layout",subTitle:T||"The exhibition layout couldn't be loaded.",extra:[t.jsx(G,{type:"primary",onClick:()=>e("/exhibitions"),children:"Back to Exhibitions"},"back")]})})]}):!((z=s.exhibition.dimensions)!=null&&z.width)||!((O=s.exhibition.dimensions)!=null&&O.height)?t.jsxs(ye,{children:[t.jsx(Xe,{}),t.jsx(yn,{style:{paddingTop:"64px"},children:t.jsx(be,{children:t.jsx(on,{status:"error",title:"Invalid Exhibition Layout",subTitle:"Exhibition dimensions are not properly configured"})})})]}):t.jsxs(ye,{children:[t.jsx(Xe,{}),t.jsxs(yn,{style:{paddingTop:"64px",background:"#f7f8fa"},children:[m&&t.jsx("div",{style:{height:"16px",width:"100%"}}),t.jsxs(be,{className:"exhibition-card",style:{borderRadius:"8px",overflow:"hidden",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.08)",margin:m?"40px 0px 10px 0px":"10px 0px",border:"none"},bodyStyle:{padding:m?"5px":"24px"},children:[t.jsxs(Ae,{gutter:[24,24],style:{marginBottom:m?16:32},children:[t.jsx(ie,{xs:24,sm:24,md:12,children:t.jsxs("div",{style:{padding:m?"12px":"16px",background:"linear-gradient(145deg, #ffffff, #f8faff)",borderRadius:"8px",border:"1px solid rgba(230, 235, 245, 0.8)",height:"100%",display:"flex",flexDirection:m?"column":"row",alignItems:m?"flex-start":"center",gap:m?"12px":"16px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.03)"},children:[t.jsx("div",{style:{flexShrink:0,display:"flex",justifyContent:m?"center":"flex-start",width:m?"100%":"auto"},children:s.exhibition.headerLogo?t.jsx(so,{src:yu(s.exhibition.headerLogo),alt:`${s.exhibition.name} logo`,style:{maxHeight:m?70:90,maxWidth:m?200:250,objectFit:"contain"},preview:!1,fallback:"/exhibition-placeholder.jpg",placeholder:t.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:m?200:250,height:m?70:90,backgroundColor:"#f5f5f5",borderRadius:"8px"},children:t.jsx(ut,{size:"small"})})}):t.jsx("div",{style:{width:m?70:90,height:m?70:90,display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(145deg, #f0f0f0, #e6e6e6)",borderRadius:"8px",boxShadow:"inset 0 2px 4px rgba(0, 0, 0, 0.05)"},children:t.jsx(Ue,{style:{fontSize:m?24:32,color:"#aaa"}})})}),!m&&t.jsx(Pe,{type:"vertical",style:{height:"90px",margin:"0 16px",opacity:.6}}),t.jsxs("div",{style:{flex:1,width:m?"100%":"auto"},children:[t.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:m?"18px":"22px",fontWeight:600,background:"linear-gradient(90deg, #333, #666)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:s.exhibition.name}),t.jsxs("p",{style:{margin:"0 0 8px 0",display:"flex",alignItems:"center",gap:"8px",color:"#555",fontSize:m?"13px":"14px"},children:[t.jsx(Ue,{style:{fontSize:m?"14px":"16px",color:"#1890ff"}}),t.jsxs("span",{children:[new Date(s.exhibition.startDate).toLocaleDateString()," -",new Date(s.exhibition.endDate).toLocaleDateString()]})]}),t.jsxs("p",{style:{margin:0,display:"flex",alignItems:"center",gap:"8px",color:"#555",fontSize:m?"13px":"14px"},children:[t.jsx(Vt,{style:{fontSize:m?"14px":"16px",color:"#1890ff"}}),t.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:m?"nowrap":"normal",maxWidth:m?"260px":"none"},children:s.exhibition.venue})]})]})]})}),t.jsx(ie,{xs:24,sm:24,md:12,children:t.jsxs("div",{style:{padding:m?"16px 5px":"24px",background:"linear-gradient(145deg, #ffffff, #f9fbfd)",borderRadius:"8px",border:"1px solid rgba(230, 235, 245, 0.8)",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.03)"},children:[t.jsx("div",{style:{marginBottom:"16px",fontSize:m?"15px":"16px",fontWeight:600,color:"#444",textAlign:"center"},children:"Stall Status:"}),t.jsxs("div",{style:{display:"flex",flexDirection:m?"column":"row",justifyContent:"center",alignItems:"center",gap:m?"10px":"16px",width:"100%"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"10px",borderRadius:"8px",background:"#f6ffed",border:"1px solid #b7eb8f",width:m?"90%":"30%",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)"},children:[t.jsx(dt,{status:"success"}),t.jsx("span",{style:{marginLeft:"8px",fontWeight:500},children:"Available"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"10px",borderRadius:"8px",background:"#e6f7ff",border:"1px solid #91d5ff",width:m?"90%":"30%",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)"},children:[t.jsx(dt,{status:"processing",color:"#1890ff"}),t.jsx("span",{style:{marginLeft:"8px",fontWeight:500},children:"Reserved"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"10px",borderRadius:"8px",background:"#fff7e6",border:"1px solid #ffd591",width:m?"90%":"30%",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)"},children:[t.jsx(dt,{status:"warning"}),t.jsx("span",{style:{marginLeft:"8px",fontWeight:500},children:"Booked"})]})]})]})})]}),t.jsxs("div",{ref:l,style:{width:"100%",height:m?"70vh":"80vh",minHeight:m?"400px":"600px",background:"#ffffff",borderRadius:"12px",overflow:"hidden",position:"relative",border:"1px solid rgba(230, 235, 245, 0.8)",boxShadow:"inset 0 2px 6px rgba(0, 0, 0, 0.03)",willChange:"transform",contain:"content",isolation:"isolate"},className:"public-canvas-container",children:[t.jsx("style",{children:`
                /* Hide only canvas context menu in public view */
                .konvajs-content .ant-menu {
                  display: none !important;
                }
                
                /* Base canvas optimization */
                .konvajs-content {
                  will-change: transform;
                  transform: translateZ(0);
                  backface-visibility: hidden;
                  transition: filter 0.2s ease-out;
                }
                
                /* Fast layer for static background */
                .public-canvas-container .konvajs-content canvas:first-child {
                  image-rendering: auto;
                }
                
                /* Canvas optimization for all canvases */
                .public-canvas-container canvas {
                  backface-visibility: hidden;
                  -webkit-backface-visibility: hidden;
                  transition: filter 0.15s linear;
                }
                
                /* Dragging state - apply blur effect with better control */
                .public-canvas-container .konvajs-content.dragging {
                  filter: blur(1px);
                }
                
                /* Mobile-specific blur - slightly stronger */
                @media (max-width: 768px) {
                  .public-canvas-container .konvajs-content.dragging {
                    filter: blur(1.5px);
                  }
                }
                
                /* Performance optimizations for dragging */
                .public-canvas-container .konvajs-content:active canvas {
                  image-rendering: optimizeSpeed;
                }
                
                /* Touch device optimizations */
                @media (pointer: coarse) {
                  .public-canvas-container .konvajs-content:active {
                    touch-action: none;
                  }
                  
                  .public-canvas-container .konvajs-content.dragging {
                    filter: blur(2px); /* Stronger blur for touch devices */
                  }
                }
                
                /* Animation smoothing to reduce flickering */
                .public-canvas-container .konvajs-content canvas {
                  will-change: filter;
                  transform: translateZ(0);
                }
                
                /* Low-end device optimizations */
                @media (max-width: 480px), 
                       (resolution: 150dpi),
                       (any-pointer: coarse) {
                  .public-canvas-container .konvajs-content:active canvas {
                    image-rendering: optimizeSpeed;
                  }
                }
              `}),t.jsxs(Vd,{width:c.width,height:c.height,exhibitionWidth:((H=s==null?void 0:s.exhibition.dimensions)==null?void 0:H.width)||0,exhibitionHeight:((F=s==null?void 0:s.exhibition.dimensions)==null?void 0:F.height)||0,halls:(s==null?void 0:s.layout)||[],selectedHall:null,onSelectHall:()=>{},isStallMode:!0,onAddHall:()=>{},onAddStall:()=>{},onAddFixture:()=>{},onExhibitionChange:()=>{},isPublicView:!0,children:[v==null?void 0:v.halls,v==null?void 0:v.stalls,v==null?void 0:v.fixtures]})]})]})]}),g.length>0&&t.jsx(Ya,{offsetBottom:20,children:t.jsx("div",{style:{position:"fixed",bottom:20,right:20,zIndex:1e3},children:t.jsxs(G,{type:"primary",size:"large",icon:t.jsx(Ka,{}),onClick:$,loading:S,style:{borderRadius:"30px",boxShadow:"0 6px 16px rgba(24, 144, 255, 0.25)",display:"flex",alignItems:"center",gap:"8px",padding:"0 22px",height:"48px",fontSize:"16px",fontWeight:500,background:"linear-gradient(145deg, #1890ff, #40a9ff)",border:"none",transition:"all 0.3s ease"},children:["Book Selected Stalls (",g.length,")"]})})}),t.jsx(ru,{visible:j,stallDetails:C,selectedStallId:u,selectedStallIds:g,loading:S,exhibition:s==null?void 0:s.exhibition,onCancel:()=>{x(!1)},onSubmit:B})]})},vu=Ie.memo(wu),{Content:gr}=ye,{Title:mr,Text:kt,Paragraph:Si}=Ee,xr=n=>{if(!n)return"";if(n.startsWith("http"))return n;const e=n.startsWith("/")?n.substring(1):n;if(e.includes("logos/")||e.includes("sponsors/"))return`${Q.defaults.baseURL}/public/images/${e}`;const r=localStorage.getItem("token"),s=`uploads/${e}`;return r?`${Q.defaults.baseURL}/${s}?token=${r}`:`${Q.defaults.baseURL}/${s}`},ju=(n,e)=>{const r=new Date,s=new Date(n),i=new Date(e);return r<s?{status:"Upcoming",color:"#722ED1"}:r>i?{status:"Completed",color:"#8C8C8C"}:{status:"Active",color:"#52C41A"}},wn=n=>{const e={year:"numeric",month:"long",day:"numeric"};return new Date(n).toLocaleDateString(void 0,e)},Su=(n,e)=>{const r=new Date,s=new Date(n),i=new Date(e);if(r<s){const o=s.getTime()-r.getTime(),d=Math.ceil(o/(1e3*60*60*24));return{text:`Day${d!==1?"s":""} until start`,count:d,isPast:!1}}else if(r>i){const o=r.getTime()-i.getTime(),d=Math.ceil(o/(1e3*60*60*24));return{text:`Day${d!==1?"s":""} since end`,count:d,isPast:!0}}else{const o=i.getTime()-r.getTime(),d=Math.ceil(o/(1e3*60*60*24));return{text:`Day${d!==1?"s":""} remaining`,count:d,isPast:!1}}},ku=()=>{const{id:n}=Vi(),e=He(),[r,s]=h.useState(null),[i,o]=h.useState(!0),[d,u]=h.useState(null),[p,g]=h.useState("https://images.unsplash.com/photo-1567419099214-0dd03b43e8de?q=80&w=1932&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D");if(h.useEffect(()=>{(async()=>{try{if(!n){u("Exhibition ID is missing");return}o(!0),u(null);const A=await xt.getExhibition(n);if(s(A.data),A.data.headerBackground){const T=xr(A.data.headerBackground);g(T);const P=new window.Image;P.src=T}else if(A.data.headerLogo){const T=xr(A.data.headerLogo),P=new window.Image;P.src=T}}catch(A){console.error("Error fetching exhibition:",A),u(A.message||"Error fetching exhibition")}finally{o(!1)}})()},[n]),i)return t.jsxs(ye,{children:[t.jsx(Xe,{}),t.jsx(gr,{style:{paddingTop:"64px"},children:t.jsxs("div",{style:{textAlign:"center",padding:"48px"},children:[t.jsx(ut,{size:"large"}),t.jsx("p",{style:{marginTop:16},children:"Loading exhibition details..."})]})})]});if(d||!r)return t.jsxs(ye,{children:[t.jsx(Xe,{}),t.jsx(gr,{style:{paddingTop:"64px"},children:t.jsx(on,{status:"404",title:"Exhibition not found",subTitle:d||"The exhibition you're looking for doesn't exist or has been removed.",extra:t.jsx(G,{type:"primary",onClick:()=>e("/exhibitions"),children:"Back to Exhibitions"})})})]});const{status:R,color:j}=ju(r.startDate,r.endDate),x=Su(r.startDate,r.endDate);return t.jsxs(ye,{className:"exhibition-details-layout",children:[t.jsx(Xe,{}),t.jsxs(gr,{className:"exhibition-content",children:[t.jsx("div",{className:"breadcrumb-container",children:t.jsx(Ga,{items:[{title:t.jsx(nt,{to:"/",children:t.jsx(no,{})})},{title:t.jsx(nt,{to:"/exhibitions",children:"Exhibitions"})},{title:r.name}]})}),t.jsx("div",{className:"exhibition-hero",style:{backgroundImage:`url('${p}')`},children:t.jsx("div",{className:"hero-overlay",children:t.jsxs("div",{className:"hero-content",children:[t.jsxs("div",{className:"hero-main",children:[t.jsx(mr,{level:1,className:"exhibition-title",children:r.name}),t.jsxs(ue,{size:24,className:"exhibition-meta",children:[t.jsxs("div",{className:"meta-item",children:[t.jsx(Ue,{}),t.jsxs(kt,{children:[wn(r.startDate)," - ",wn(r.endDate)]})]}),r.venue&&t.jsxs("div",{className:"meta-item",children:[t.jsx(Ot,{}),t.jsx(kt,{children:r.venue})]}),t.jsxs("div",{className:"meta-item",children:[t.jsx(Mn,{}),t.jsxs(kt,{children:[x.text,": ",t.jsx("strong",{children:x.count})]})]})]})]}),t.jsxs("div",{className:"hero-actions",children:[t.jsx(G,{type:"primary",size:"large",icon:t.jsx(Rs,{}),onClick:()=>e(`/exhibitions/${n}/layout`),className:"action-button layout-button",children:"View Exhibition Layout"}),t.jsx(G,{size:"large",icon:t.jsx(Ve,{}),onClick:()=>e(`/exhibitions/${n}/layout`),className:"action-button book-button",children:"Book a Stall"}),x.isPast?null:t.jsx(G,{size:"large",icon:t.jsx(Wn,{}),onClick:()=>e("/exhibitor/login"),className:"action-button exhibitor-button",children:"Exhibitor Access"})]})]})})}),t.jsx("div",{className:"stats-container",children:t.jsxs(Ae,{gutter:[16,16],className:"stats-row",children:[t.jsx(ie,{xs:24,sm:8,children:t.jsxs("div",{className:"stat-card",children:[t.jsx("div",{className:"stat-icon duration-icon",children:t.jsx(Ue,{})}),t.jsxs("div",{className:"stat-content",children:[t.jsx("div",{className:"stat-value",children:Math.ceil((new Date(r.endDate).getTime()-new Date(r.startDate).getTime())/(1e3*60*60*24))}),t.jsx("div",{className:"stat-label",children:"Days Duration"})]})]})}),t.jsx(ie,{xs:24,sm:8,children:t.jsxs("div",{className:"stat-card",children:[t.jsx("div",{className:"stat-icon countdown-icon",children:t.jsx(Mn,{})}),t.jsxs("div",{className:"stat-content",children:[t.jsx("div",{className:"stat-value",children:x.count}),t.jsx("div",{className:"stat-label",children:x.text})]})]})}),t.jsx(ie,{xs:24,sm:8,children:t.jsxs("div",{className:"stat-card",children:[t.jsx("div",{className:"stat-icon status-icon",style:{backgroundColor:j+"20",color:j},children:t.jsx(Vt,{})}),t.jsxs("div",{className:"stat-content",children:[t.jsx("div",{className:"stat-value status-value",style:{color:j},children:R}),t.jsx("div",{className:"stat-label",children:"Status"})]})]})})]})}),r.sponsorLogos&&r.sponsorLogos.length>0&&t.jsxs("div",{className:"sponsors-section",children:[t.jsx("div",{className:"sponsors-header",children:t.jsx(kt,{type:"secondary",children:"PROUDLY SPONSORED BY"})}),t.jsx("div",{className:"sponsors-container",children:r.sponsorLogos.map((w,A)=>t.jsx("div",{className:"sponsor-logo-wrapper",children:t.jsx("div",{className:"sponsor-logo",children:t.jsx("img",{src:xr(w),alt:`Sponsor ${A+1}`,className:"sponsor-logo-img",onError:T=>{T.target.src="/placeholder-logo.png"}})})},A))})]}),t.jsx("div",{className:"exhibition-details-container",children:t.jsxs(Ae,{gutter:[24,24],children:[t.jsx(ie,{xs:24,lg:16,children:t.jsxs(be,{className:"details-card about-card",bordered:!1,children:[t.jsx(mr,{level:3,className:"section-title",children:"About This Exhibition"}),t.jsx(Si,{className:"main-description",children:r.description}),r.headerDescription&&t.jsx(Si,{className:"extended-description",children:r.headerDescription}),r.headerSubtitle&&t.jsxs("div",{className:"subtitle-section",children:[t.jsx(mr,{level:4,children:r.headerSubtitle}),t.jsx(Pe,{})]})]})}),t.jsx(ie,{xs:24,lg:8,children:t.jsx(ue,{direction:"vertical",style:{width:"100%"},size:24,children:t.jsx(be,{title:"Key Information",className:"details-card info-card",bordered:!1,children:t.jsxs("div",{className:"info-grid",children:[t.jsxs("div",{className:"info-item",children:[t.jsx("div",{className:"info-icon start-icon",children:t.jsx(Ue,{})}),t.jsxs("div",{className:"info-content",children:[t.jsx(kt,{type:"secondary",className:"info-label",children:"Start Date"}),t.jsx("div",{className:"info-value",children:wn(r.startDate)})]})]}),t.jsxs("div",{className:"info-item",children:[t.jsx("div",{className:"info-icon end-icon",children:t.jsx(Ue,{})}),t.jsxs("div",{className:"info-content",children:[t.jsx(kt,{type:"secondary",className:"info-label",children:"End Date"}),t.jsx("div",{className:"info-value",children:wn(r.endDate)})]})]}),r.venue&&t.jsxs("div",{className:"info-item",children:[t.jsx("div",{className:"info-icon venue-icon",children:t.jsx(Ot,{})}),t.jsxs("div",{className:"info-content",children:[t.jsx(kt,{type:"secondary",className:"info-label",children:"Venue"}),t.jsx("div",{className:"info-value",children:r.venue})]})]})]})})})})]})})]}),t.jsx("style",{children:`
        .exhibition-details-layout {
          background-color: #f9fafc;
        }
        
        .exhibition-content {
          padding-top: 64px;
          min-height: calc(100vh - 64px);
        }
        
        .breadcrumb-container {
          max-width: 1280px;
          margin: 0 auto;
          padding: 16px 24px;
        }
        
        /* Hero Section */
        .exhibition-hero {
          height: 500px;
          background-size: cover;
          background-position: center;
          position: relative;
          color: white;
          margin-bottom: 0;
        }
        
        .hero-overlay {
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: linear-gradient(to bottom, rgba(20, 20, 40, 0.7), rgba(20, 20, 40, 0.9));
          display: flex;
          align-items: center;
        }
        
        .hero-content {
          max-width: 1280px;
          width: 100%;
          margin: 0 auto;
          padding: 40px 24px;
          display: flex;
          flex-direction: column;
          gap: 40px;
        }
        
        .hero-main {
          max-width: 800px;
        }
        
        .exhibition-title {
          color: #fff !important;
          margin-bottom: 32px !important;
          font-size: 3.5rem !important;
          font-weight: 700 !important;
          line-height: 1.2 !important;
          letter-spacing: -0.5px;
          text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .exhibition-meta {
          margin-bottom: 24px;
        }
        
        .meta-item {
          display: flex;
          align-items: center;
          gap: 8px;
        }
        
        .meta-item .anticon {
          font-size: 18px;
          color: rgba(255, 255, 255, 0.9);
        }
        
        .meta-item span {
          color: rgba(255, 255, 255, 0.9);
          font-size: 16px;
        }
        
        .hero-actions {
          display: flex;
          flex-wrap: wrap;
          gap: 16px;
        }
        
        .action-button {
          padding: 0 24px;
          height: 48px;
          font-weight: 500;
          border-radius: 8px;
          transition: all 0.3s ease;
        }
        
        .layout-button {
          background: #4361ee;
          border-color: #4361ee;
        }
        
        .layout-button:hover {
          background: #3a56d4;
          border-color: #3a56d4;
          transform: translateY(-2px);
          box-shadow: 0 6px 12px rgba(67, 97, 238, 0.25);
        }
        
        .book-button {
          background: white;
          color: #111;
          border-color: transparent;
        }
        
        .book-button:hover {
          background: #f8f9fa;
          color: #4361ee;
          transform: translateY(-2px);
          box-shadow: 0 6px 12px rgba(0, 0, 0, 0.08);
        }
        
        .exhibitor-button {
          border-color: rgba(255, 255, 255, 0.3);
          color: white;
          background: transparent;
        }
        
        .exhibitor-button:hover {
          border-color: white;
          color: white;
          background: rgba(255, 255, 255, 0.1);
          transform: translateY(-2px);
        }
        
        /* Stats Section */
        .stats-container {
          max-width: 1280px;
          margin: 0 auto;
          padding: 0 24px;
          margin-top: -50px;
          margin-bottom: 40px;
          position: relative;
          z-index: 5;
        }
        
        .stats-row {
          margin: 0;
        }
        
        .stat-card {
          background: white;
          padding: 24px;
          border-radius: 12px;
          display: flex;
          gap: 20px;
          align-items: center;
          box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
          height: 100%;
          transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .stat-card:hover {
          transform: translateY(-5px);
          box-shadow: 0 15px 35px rgba(0, 0, 0, 0.12);
        }
        
        .stat-icon {
          width: 60px;
          height: 60px;
          border-radius: 12px;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 24px;
        }
        
        .duration-icon {
          background-color: #4361ee20;
          color: #4361ee;
        }
        
        .countdown-icon {
          background-color: #f7257520;
          color: #f72575;
        }
        
        .stat-content {
          flex: 1;
        }
        
        .stat-value {
          font-size: 28px;
          font-weight: 700;
          line-height: 1.2;
          color: #111827;
        }
        
        .stat-label {
          font-size: 14px;
          color: #6b7280;
          margin-top: 4px;
        }
        
        /* Sponsor Logos Styles */
        .sponsors-section {
          max-width: 1280px;
          margin: 0 auto 40px;
          padding: 36px 24px;
          background: #fff;
          border-radius: 16px;
          box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
        }
        
        .sponsors-header {
          text-align: center;
          margin-bottom: 30px;
        }
        
        .sponsors-header .ant-typography {
          font-size: 14px;
          letter-spacing: 2px;
          font-weight: 600;
          color: #6b7280;
          position: relative;
          display: inline-block;
        }
        
        .sponsors-header .ant-typography:before,
        .sponsors-header .ant-typography:after {
          content: "";
          position: absolute;
          top: 50%;
          width: 40px;
          height: 1px;
          background: #e5e7eb;
        }
        
        .sponsors-header .ant-typography:before {
          right: 100%;
          margin-right: 15px;
        }
        
        .sponsors-header .ant-typography:after {
          left: 100%;
          margin-left: 15px;
        }
        
        .sponsors-container {
          display: flex;
          flex-wrap: wrap;
          gap: 30px;
          justify-content: center;
          align-items: center;
        }
        
        .sponsor-logo-wrapper {
          display: inline-flex;
          transition: transform 0.3s ease;
        }
        
        .sponsor-logo-wrapper:hover {
          transform: translateY(-5px);
        }
        
        .sponsor-logo {
          width: 190px;
          height: auto;
          border-radius: 8px;
          overflow: hidden;
          display: flex;
          align-items: center;
          justify-content: center;
          background-color: #ffffff;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
          padding: 20px;
          transition: box-shadow 0.3s ease;
        }
        
        .sponsor-logo:hover {
          box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
        }
        
        .sponsor-logo-img {
          max-width: 100%;
          max-height: 100%;
          object-fit: contain;
        }
        
        /* Details Section */
        .exhibition-details-container {
          max-width: 1280px;
          margin: 0 auto;
          padding: 0 24px 60px;
        }
        
        .details-card {
          border-radius: 16px;
          box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
          overflow: hidden;
          height: 100%;
        }
        
        .about-card .ant-card-body {
          padding: 32px;
        }
        
        .section-title {
          margin-bottom: 24px !important;
          font-weight: 700 !important;
          color: #111827 !important;
          font-size: 28px !important;
          position: relative;
        }
        
        .section-title:after {
          content: "";
          position: absolute;
          left: 0;
          bottom: -12px;
          width: 60px;
          height: 4px;
          background: #4361ee;
          border-radius: 2px;
        }
        
        .main-description {
          font-size: 16px !important;
          line-height: 1.7 !important;
          margin-bottom: 24px !important;
          color: #374151 !important;
        }
        
        .extended-description {
          font-size: 16px !important;
          line-height: 1.7 !important;
          margin-bottom: 24px !important;
          color: #6b7280 !important;
        }
        
        .subtitle-section {
          margin: 24px 0;
        }
        
        .subtitle-section .ant-typography {
          color: #111827;
          font-weight: 600;
        }
        
        .info-card .ant-card-head {
          border-bottom: none;
          padding: 20px 24px 0;
        }
        
        .info-card .ant-card-head-title {
          font-weight: 600;
          font-size: 18px;
          color: #111827;
        }
        
        .info-card .ant-card-body {
          padding: 16px 24px 24px;
        }
        
        .info-grid {
          display: flex;
          flex-direction: column;
          gap: 24px;
        }
        
        .info-item {
          display: flex;
          align-items: flex-start;
          gap: 16px;
        }
        
        .info-icon {
          width: 40px;
          height: 40px;
          border-radius: 8px;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 18px;
        }
        
        .start-icon {
          background-color: #4361ee20;
          color: #4361ee;
        }
        
        .end-icon {
          background-color: #f7257520;
          color: #f72575;
        }
        
        .venue-icon {
          background-color: #0ea5e920;
          color: #0ea5e9;
        }
        
        .info-content {
          flex: 1;
        }
        
        .info-label {
          display: block;
          margin-bottom: 4px;
          font-size: 14px;
        }
        
        .info-value {
          font-size: 16px;
          font-weight: 500;
          color: #111827;
        }
        
        @media (max-width: 991px) {
          .exhibition-hero {
            height: auto;
            min-height: 350px;
          }
          
          .hero-overlay {
            position: relative;
            padding: 50px 0;
          }
          
          .exhibition-title {
            font-size: 2.5rem !important;
          }
          
          .stats-container {
            margin-top: 0;
          }
          
          .stat-card {
            margin-bottom: 16px;
          }
        }
        
        @media (max-width: 768px) {
          .exhibition-title {
            font-size: 2rem !important;
            margin-bottom: 24px !important;
          }
          
          .hero-content {
            padding: 40px 20px;
          }
          
          .hero-actions {
            flex-direction: column;
            width: 100%;
          }
          
          .hero-actions button {
            width: 100%;
          }
          
          .sponsors-container {
            gap: 20px;
          }
          
          .sponsor-logo {
            width: 150px;
          }
          
          .stats-container {
            padding: 0 16px;
          }
          
          .stat-card {
            padding: 16px;
          }
          
          .stat-icon {
            width: 50px;
            height: 50px;
            font-size: 20px;
          }
          
          .stat-value {
            font-size: 22px;
          }
          
          .exhibition-details-container {
            padding: 0 16px 40px;
          }
          
          .about-card .ant-card-body {
            padding: 24px;
          }
          
          .section-title {
            font-size: 24px !important;
          }
        }
        
        @media (max-width: 480px) {
          .exhibition-title {
            font-size: 1.75rem !important;
          }
          
          .meta-item {
            flex-direction: column;
            align-items: flex-start;
            gap: 4px;
          }
        }
        `})]})},{Footer:Eu}=ye,{Title:Cu,Paragraph:Iu,Text:_u}=Ee,Ru=D(Eu)`
  background: linear-gradient(to right, #242a38, #1a1f2c);
  padding: 60px 0 20px;
  color: rgba(255, 255, 255, 0.8);

  @media (max-width: 768px) {
    padding: 40px 0 20px;
  }
`,Tu=D.div`
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 24px;
`,vn=D(Cu)`
  color: white !important;
  font-size: 18px !important;
  margin-bottom: 20px !important;
  position: relative;
  
  &:after {
    content: '';
    position: absolute;
    left: 0;
    bottom: -8px;
    width: 40px;
    height: 3px;
    background: linear-gradient(90deg, #4158D0, #C850C0);
  }
`,Au=D.div`
  margin-bottom: 20px;
`,Pu=D.img`
  height: auto;
  width: 100%;
  max-width: 160px;
  margin-bottom: 16px;
`,Je=D(nt)`
  color: rgba(255, 255, 255, 0.8);
  display: block;
  margin-bottom: 12px;
  transition: all 0.3s ease;
  
  &:hover {
    color: white;
    transform: translateX(5px);
  }
`,br=D.div`
  display: flex;
  margin-bottom: 16px;
  align-items: flex-start;
`,yr=D.div`
  margin-right: 10px;
  color: #4158D0;
`,jn=D.a`
  font-size: 24px;
  margin-right: 16px;
  color: rgba(255, 255, 255, 0.7);
  transition: all 0.3s ease;
  
  &:hover {
    color: white;
    transform: translateY(-3px);
  }
`,Nu=D(xe)`
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: white;
  
  &::placeholder {
    color: rgba(255, 255, 255, 0.5);
  }
  
  &:focus {
    border-color: #4158D0;
    box-shadow: 0 0 0 2px rgba(65, 88, 208, 0.2);
  }
`,$u=D(G)`
  background: linear-gradient(90deg, #4158D0, #C850C0);
  border: none;
  
  &:hover {
    opacity: 0.9;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  }
`,zu=D(_u)`
  display: block;
  text-align: center;
  color: rgba(255, 255, 255, 0.6);
  margin-top: 20px;
  font-size: 14px;
`,Du=D(Pe)`
  background: rgba(255, 255, 255, 0.1);
  margin: 30px 0;
`,No=()=>{const[n,e]=h.useState("/logo.png"),[r,s]=h.useState("Exhibition Manager"),i=new Date().getFullYear();return h.useEffect(()=>{const o=`${Q.defaults.baseURL}/public/logo`;e(o),fetch(`${Q.defaults.baseURL}/public/site-info`).then(d=>d.json()).then(d=>{d.siteName&&s(d.siteName)}).catch(d=>{console.error("Error fetching site info:",d)})},[]),t.jsx(Ru,{children:t.jsxs(Tu,{children:[t.jsxs(Ae,{gutter:[48,40],children:[t.jsxs(ie,{xs:24,sm:24,md:8,lg:7,children:[t.jsx(Au,{children:t.jsx(nt,{to:"/",children:t.jsx(Pu,{src:n,alt:r,onError:()=>e("/logo.png")})})}),t.jsx(Iu,{style:{color:"rgba(255, 255, 255, 0.7)",marginBottom:24},children:"The premier platform for exhibition stall booking. Connect exhibitors with event organizers and simplify the booking process."}),t.jsxs(ue,{children:[t.jsx(jn,{href:"#",target:"_blank",rel:"noopener noreferrer",children:t.jsx(Xa,{})}),t.jsx(jn,{href:"#",target:"_blank",rel:"noopener noreferrer",children:t.jsx(Ja,{})}),t.jsx(jn,{href:"#",target:"_blank",rel:"noopener noreferrer",children:t.jsx(Za,{})}),t.jsx(jn,{href:"#",target:"_blank",rel:"noopener noreferrer",children:t.jsx(el,{})})]})]}),t.jsxs(ie,{xs:24,sm:12,md:5,lg:5,children:[t.jsx(vn,{level:4,children:"Quick Links"}),t.jsx(Je,{to:"/exhibitions",children:"Exhibitions"}),t.jsx(Je,{to:"/about",children:"About Us"}),t.jsx(Je,{to:"/contact",children:"Contact Us"}),t.jsx(Je,{to:"/privacy-policy",children:"Privacy Policy"}),t.jsx(Je,{to:"/terms",children:"Terms & Conditions"})]}),t.jsxs(ie,{xs:24,sm:12,md:5,lg:5,children:[t.jsx(vn,{level:4,children:"For Exhibitors"}),t.jsx(Je,{to:"/exhibitor/login",children:"Login"}),t.jsx(Je,{to:"/exhibitor/register",children:"Register"}),t.jsx(Je,{to:"/exhibitor/dashboard",children:"Dashboard"}),t.jsx(Je,{to:"/exhibitor/bookings",children:"My Bookings"}),t.jsx(Je,{to:"/faq",children:"FAQ"})]}),t.jsxs(ie,{xs:24,sm:24,md:6,lg:7,children:[t.jsx(vn,{level:4,children:"Contact Us"}),t.jsxs(br,{children:[t.jsx(yr,{children:t.jsx(Ot,{})}),t.jsx("div",{children:"123 Exhibition Street, New Delhi, India"})]}),t.jsxs(br,{children:[t.jsx(yr,{children:t.jsx(ro,{})}),t.jsx("div",{children:"+91 98765 43210"})]}),t.jsxs(br,{children:[t.jsx(yr,{children:t.jsx(sn,{})}),t.jsx("div",{children:"info@exhibitionmanager.com"})]}),t.jsxs("div",{style:{marginTop:24},children:[t.jsx(vn,{level:4,children:"Newsletter"}),t.jsx(W,{children:t.jsxs(ue.Compact,{style:{width:"100%"},children:[t.jsx(Nu,{placeholder:"Your email address"}),t.jsx($u,{type:"primary",icon:t.jsx(tl,{}),children:"Subscribe"})]})})]})]})]}),t.jsx(Du,{}),t.jsxs(zu,{children:[" ",i," ",r,". All rights reserved."]})]})})},ig=(n,e)=>{if(!n)return"";let s=`/exhibition/${n.slug||n._id||n.id}`;return e&&(s+=`/${e}`),s},$o=(n,e)=>n?`/exhibitions/${n.slug||n._id||n.id}`:"",{Title:ki,Text:wr,Paragraph:Ei}=Ee,{Content:vr}=ye,Fu=(n,e)=>{const r=new Date,s=new Date(n),i=new Date(e);return r<s?{status:"Upcoming",color:"#722ED1"}:r>i?{status:"Completed",color:"#8C8C8C"}:{status:"Active",color:"#52C41A"}},Ci=n=>{const e={year:"numeric",month:"short",day:"numeric"};return new Date(n).toLocaleDateString(void 0,e)},Lu=n=>{const e=new Date,s=new Date(n).getTime()-e.getTime();return Math.ceil(s/(1e3*60*60*24))},Ii=n=>{if(!n)return"/exhibition-placeholder.jpg";if(n.startsWith("/")||n.startsWith("http"))return n;const e=n.startsWith("/")?n.substring(1):n,r=e.includes("logos/")?e:`logos/${e}`;return`${Q.defaults.baseURL}/public/images/${r}`},Mu=()=>{const n=He(),[e,r]=h.useState([]),[s,i]=h.useState(!0),[o,d]=h.useState(null),[u,p]=h.useState({});return h.useEffect(()=>{(async()=>{try{i(!0),d(null);const R=await xt.getExhibitions();r(R.data);const j={};R.data.forEach(x=>{if(x.headerLogo){const w=Ii(x.headerLogo),A=new window.Image;A.onload=()=>{j[x._id]=!0,p(T=>({...T,[x._id]:!0}))},A.onerror=()=>{console.warn(`Failed to preload image: ${w}`),j[x._id]=!1,p(T=>({...T,[x._id]:!1}))},A.src=w}})}catch(R){d(R.message||"Failed to fetch exhibitions")}finally{i(!1)}})()},[]),s?t.jsxs(ye,{children:[t.jsx(Xe,{}),t.jsx(vr,{style:{paddingTop:"64px"},children:t.jsxs("div",{style:{textAlign:"center",padding:"48px"},children:[t.jsx(ut,{size:"large"}),t.jsx("p",{style:{marginTop:16},children:"Loading exhibitions..."})]})})]}):o?t.jsxs(ye,{children:[t.jsx(Xe,{}),t.jsx(vr,{style:{paddingTop:"64px"},children:t.jsx(on,{status:"error",title:"Failed to load exhibitions",subTitle:o,extra:[t.jsx(G,{type:"primary",onClick:()=>window.location.reload(),children:"Try Again"},"retry")]})})]}):t.jsxs(ye,{children:[t.jsx(Xe,{}),t.jsx(vr,{style:{paddingTop:"64px",background:"#f5f5f5"},children:t.jsxs("div",{style:{padding:"80px 16px"},children:[t.jsxs("div",{style:{textAlign:"center",marginBottom:40},children:[t.jsx(ki,{level:2,style:{marginBottom:12,fontSize:36},children:"Upcoming & Current Exhibitions"}),t.jsx(Ei,{type:"secondary",style:{fontSize:16,maxWidth:600,margin:"0 auto"},children:"Discover and explore our exhibitions. Click on any card to view details and book stalls."})]}),e.length>0?t.jsx(Ae,{gutter:[24,24],children:e.map(g=>{const{status:R,color:j}=Fu(g.startDate,g.endDate),x=Lu(g.startDate),w=g.headerLogo?Ii(g.headerLogo):void 0;return t.jsx(ie,{xs:24,sm:12,lg:8,children:t.jsxs(be,{hoverable:!0,onClick:()=>n($o(g)),className:"exhibition-card",styles:{body:{padding:"0",overflow:"hidden",display:"flex",flexDirection:"column"}},style:{borderRadius:"12px",overflow:"hidden",height:"100%",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.06), 0 2px 4px rgba(0, 0, 0, 0.06)"},children:[t.jsx(dt.Ribbon,{text:R,color:j,style:{right:"-1px",top:"10px",zIndex:2}}),t.jsxs("div",{className:"exhibition-card-container",children:[t.jsx("div",{className:"exhibition-card-logo-container",children:w&&t.jsx("div",{className:"exhibition-logo",children:t.jsx(so,{src:w,alt:`${g.name} logo`,preview:!1,fallback:"/exhibition-placeholder.jpg",placeholder:t.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",backgroundColor:"#f0f0f0"},children:t.jsx(ut,{size:"small"})}),style:{width:"100%",height:"100%",objectFit:"contain"}})})}),t.jsxs("div",{className:"exhibition-card-content",children:[t.jsx("div",{className:"exhibition-title",children:t.jsx(ki,{level:4,ellipsis:{rows:2},style:{marginBottom:8,fontSize:20,lineHeight:"28px"},children:g.name})}),t.jsx(Ei,{type:"secondary",ellipsis:{rows:2},style:{marginBottom:16,fontSize:14},children:g.description}),t.jsxs("div",{className:"exhibition-card-details",children:[t.jsxs("div",{className:"exhibition-card-detail-item",children:[t.jsx(Ue,{style:{color:"#722ED1"}}),t.jsx(yt,{title:"Exhibition Date Range",children:t.jsxs(wr,{style:{fontSize:14},children:[Ci(g.startDate)," - ",Ci(g.endDate)]})})]}),g.venue&&t.jsxs("div",{className:"exhibition-card-detail-item",children:[t.jsx(Ot,{style:{color:"#F5222D"}}),t.jsx(yt,{title:"Venue",children:t.jsx(wr,{style:{fontSize:14},ellipsis:!0,children:g.venue})})]}),R==="Upcoming"&&x>0&&t.jsxs("div",{className:"exhibition-card-detail-item",children:[t.jsx(Mn,{style:{color:"#1890FF"}}),t.jsx(yt,{title:"Time Remaining",children:t.jsxs(wr,{style:{fontSize:14},children:["Starts in ",x," day",x!==1?"s":""]})})]})]}),t.jsx("div",{className:"exhibition-card-footer",children:t.jsxs(G,{type:"link",className:"view-details-btn",style:{padding:0,height:"auto",fontSize:14,fontWeight:500},children:["View Details ",t.jsx(nl,{})]})})]})]})]})},g._id)})}):t.jsx(Be,{description:"No exhibitions currently available",style:{background:"#fff",padding:"48px",borderRadius:"12px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.06), 0 2px 4px rgba(0, 0, 0, 0.06)"},image:Be.PRESENTED_IMAGE_SIMPLE})]})}),t.jsx(No,{}),t.jsx("style",{children:`
        .exhibition-card {
          transition: all 0.3s ease;
        }
        
        .exhibition-card:hover {
          transform: translateY(-5px);
          box-shadow: 0 10px 20px rgba(0, 0, 0, 0.05), 0 6px 6px rgba(0, 0, 0, 0.06) !important;
        }
        
        .exhibition-card-container {
          display: flex;
          flex-direction: row;
          width: 100%;
          height: 100%;
        }
        
        .exhibition-card-logo-container {
          width: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 24px;
          background-color: #f9f9f9;
          border-right: 1px solid #eaeaea;
        }
        
        .exhibition-logo {
          position: relative;
          flex-shrink: 0;
          width: 100%;
          height: 172px;
          border-radius: 8px;
          overflow: hidden;
          display: flex;
          align-items: center;
          justify-content: center;
          background-color: #f0f0f0;
          border: 1px solid #e8e8e8;
        }
        
        .exhibition-card-content {
          width: 50%;
          padding: 24px;
          display: flex;
          flex-direction: column;
        }
        
        .exhibition-title {
          margin-right: 36px;
        }
        
        .exhibition-card-details {
          display: flex;
          flex-direction: column;
          gap: 8px;
          margin-bottom: 24px;
        }
        
        .exhibition-card-detail-item {
          display: flex;
          align-items: center;
          gap: 8px;
        }
        
        .exhibition-card-footer {
          margin-top: auto;
        }
        
        .view-details-btn {
          color: #722ED1;
        }
        
        .view-details-btn:hover {
          color: #9254DE;
        }
        
        .view-details-btn .anticon {
          transition: transform 0.3s ease;
        }
        
        .view-details-btn:hover .anticon {
          transform: translateX(4px);
        }
        
        @media (max-width: 575px) {
          .exhibition-card-container {
            flex-direction: column;
          }
          
          .exhibition-card-logo-container {
            width: 100%;
            border-right: none;
            border-bottom: 1px solid #eaeaea;
            padding: 20px;
          }
          
          .exhibition-logo {
            height: 140px;
          }
          
          .exhibition-card-content {
            width: 100%;
            padding: 20px;
          }
        }
        `})]})},{Title:Bu,Paragraph:Ou}=Ee,qu=D.div`
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  padding: 120px 0 100px;
  color: white;
  position: relative;
  overflow: hidden;
  min-height: 80vh;
  display: flex;
  align-items: center;
  
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: 
      radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
      radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
      radial-gradient(circle at 40% 40%, rgba(120, 119, 198, 0.2) 0%, transparent 50%);
    z-index: 1;
  }
  
  &::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    z-index: 1;
  }
  
  @media (max-width: 1200px) {
    padding: 100px 0 80px;
    min-height: 70vh;
  }
  
  @media (max-width: 768px) {
    padding: 80px 0 60px;
    min-height: 60vh;
  }
  
  @media (max-width: 480px) {
    padding: 60px 0 40px;
    min-height: 50vh;
  }
`,Uu=D.div`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.1);
  z-index: 2;
`,Vu=D.div`
  position: relative;
  z-index: 3;
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 24px;
  width: 100%;
  
  @media (max-width: 768px) {
    padding: 0 16px;
  }
`,Hu=D.div`
  position: relative;
  border-radius: 20px;
  overflow: hidden;
  box-shadow: 
    0 25px 50px rgba(0, 0, 0, 0.25),
    0 0 0 1px rgba(255, 255, 255, 0.1);
  transform: perspective(1000px) rotateY(-5deg) rotateX(5deg);
  transition: all 0.6s cubic-bezier(0.23, 1, 0.320, 1);
  
  &:hover {
    transform: perspective(1000px) rotateY(-2deg) rotateX(2deg) translateY(-10px);
    box-shadow: 
      0 35px 70px rgba(0, 0, 0, 0.3),
      0 0 0 1px rgba(255, 255, 255, 0.2);
  }
  
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, transparent 100%);
    z-index: 1;
    pointer-events: none;
  }
  
  img {
    width: 100%;
    height: 400px;
    object-fit: cover;
    transition: transform 0.6s ease;
  }
  
  &:hover img {
    transform: scale(1.05);
  }
  
  @media (max-width: 768px) {
    transform: none;
    border-radius: 16px;
    
    &:hover {
      transform: translateY(-5px);
    }
    
    img {
      height: 280px;
    }
  }
`,Qu=D(Bu)`
  font-size: 4rem !important;
  font-weight: 800 !important;
  line-height: 1.1 !important;
  margin-bottom: 24px !important;
  color: white !important;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  
  background: linear-gradient(135deg, #ffffff 0%, #f0f0f0 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  
  @media (max-width: 1200px) {
    font-size: 3.5rem !important;
  }
  
  @media (max-width: 768px) {
    font-size: 2.8rem !important;
    text-align: center;
  }
  
  @media (max-width: 480px) {
    font-size: 2.2rem !important;
  }
`,Wu=D(Ou)`
  font-size: 1.3rem !important;
  line-height: 1.6 !important;
  margin-bottom: 40px !important;
  color: rgba(255, 255, 255, 0.9) !important;
  font-weight: 400 !important;
  max-width: 600px;
  
  @media (max-width: 768px) {
    font-size: 1.1rem !important;
    text-align: center;
    margin: 0 auto 32px !important;
  }
  
  @media (max-width: 480px) {
    font-size: 1rem !important;
  }
`,Yu=D(ue)`
  @media (max-width: 768px) {
    width: 100%;
    justify-content: center;
    
    .ant-space-item {
      display: flex;
      justify-content: center;
    }
  }
`,Ku=D(G)`
  height: 56px !important;
  padding: 0 32px !important;
  font-size: 16px !important;
  font-weight: 600 !important;
  border-radius: 12px !important;
  border: none !important;
  background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%) !important;
  box-shadow: 
    0 8px 25px rgba(238, 90, 36, 0.3),
    0 3px 10px rgba(0, 0, 0, 0.2) !important;
  transition: all 0.3s cubic-bezier(0.23, 1, 0.320, 1) !important;
  position: relative;
  overflow: hidden;
  
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s;
  }
  
  &:hover {
    transform: translateY(-3px) !important;
    box-shadow: 
      0 12px 35px rgba(238, 90, 36, 0.4),
      0 5px 15px rgba(0, 0, 0, 0.3) !important;
    background: linear-gradient(135deg, #ff5252 0%, #d63031 100%) !important;
    
    &::before {
      left: 100%;
    }
  }
  
  &:active {
    transform: translateY(-1px) !important;
  }
  
  @media (max-width: 768px) {
    width: 100%;
    max-width: 280px;
  }
`,Gu=D(G)`
  height: 56px !important;
  padding: 0 32px !important;
  font-size: 16px !important;
  font-weight: 600 !important;
  border-radius: 12px !important;
  background: rgba(255, 255, 255, 0.1) !important;
  border: 2px solid rgba(255, 255, 255, 0.3) !important;
  color: white !important;
  backdrop-filter: blur(10px);
  transition: all 0.3s cubic-bezier(0.23, 1, 0.320, 1) !important;
  
  &:hover {
    background: rgba(255, 255, 255, 0.2) !important;
    border-color: rgba(255, 255, 255, 0.5) !important;
    color: white !important;
    transform: translateY(-3px) !important;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15) !important;
  }
  
  &:active {
    transform: translateY(-1px) !important;
  }
  
  @media (max-width: 768px) {
    width: 100%;
    max-width: 280px;
  }
`,Xu=D.div`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: 1;
  
  .floating-shape {
    position: absolute;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.1);
    animation: float 6s ease-in-out infinite;
    
    &:nth-of-type(1) {
      width: 80px;
      height: 80px;
      top: 20%;
      left: 10%;
      animation-delay: 0s;
    }
    
    &:nth-of-type(2) {
      width: 120px;
      height: 120px;
      top: 60%;
      right: 15%;
      animation-delay: 2s;
    }
    
    &:nth-of-type(3) {
      width: 60px;
      height: 60px;
      top: 80%;
      left: 20%;
      animation-delay: 4s;
    }
  }
  
  @keyframes float {
    0%, 100% {
      transform: translateY(0px) rotate(0deg);
      opacity: 0.7;
    }
    50% {
      transform: translateY(-20px) rotate(180deg);
      opacity: 1;
    }
  }
  
  @media (max-width: 768px) {
    display: none;
  }
`,Ju=({onRegisterClick:n,isAuthenticated:e=!1})=>{const r=He();return t.jsxs(qu,{children:[t.jsxs(Xu,{children:[t.jsx("div",{className:"floating-shape"}),t.jsx("div",{className:"floating-shape"}),t.jsx("div",{className:"floating-shape"})]}),t.jsx(Uu,{}),t.jsx(Vu,{children:t.jsxs(Ae,{gutter:[48,48],align:"middle",style:{minHeight:"60vh"},children:[t.jsx(ie,{xs:24,lg:13,xl:12,children:t.jsxs("div",{style:{animation:"fadeInUp 1s ease-out",animationFillMode:"both"},children:[t.jsx(Qu,{level:1,children:"Transform Your Exhibition Experience"}),t.jsx(Wu,{children:"Discover premium exhibition spaces, visualize your perfect stall placement, and book with confidence. Join thousands of successful exhibitors who trust our platform for their business growth."}),t.jsxs(Yu,{size:16,wrap:!0,direction:"vertical",children:[t.jsx(Ku,{onClick:()=>r("/exhibitions"),icon:t.jsx(Ve,{}),children:"Explore Exhibitions"}),t.jsx(Gu,{onClick:n,icon:t.jsx(De,{}),children:e?"Go to Dashboard":"Start Your Journey"})]})]})}),t.jsx(ie,{xs:24,lg:11,xl:12,children:t.jsxs("div",{style:{animation:"fadeInRight 1s ease-out 0.3s",animationFillMode:"both",opacity:0},children:[t.jsx(Hu,{children:t.jsx("img",{src:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?auto=format&fit=crop&q=80&w=1200&ixlib=rb-4.0.3",alt:"Modern Exhibition Hall",onError:s=>{const i=s.target;i.src="https://images.unsplash.com/photo-1559223607-a43f990c43d5?auto=format&fit=crop&q=80&w=1200&ixlib=rb-4.0.3",i.onerror=()=>{i.src="https://images.unsplash.com/photo-1497366216548-37526070297c?auto=format&fit=crop&q=80&w=1200&ixlib=rb-4.0.3",i.onerror=null}}})}),t.jsx("div",{style:{position:"absolute",top:"20px",right:"20px",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"12px",padding:"16px 20px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",animation:"fadeInDown 1s ease-out 0.8s",animationFillMode:"both",opacity:0,zIndex:2},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[t.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"18px"},children:t.jsx(Ve,{})}),t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"bold",color:"#333",fontSize:"18px"},children:"10,000+"}),t.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Happy Exhibitors"})]})]})}),t.jsx("div",{style:{position:"absolute",bottom:"20px",left:"20px",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"12px",padding:"16px 20px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",animation:"fadeInUp 1s ease-out 1s",animationFillMode:"both",opacity:0,zIndex:2},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[t.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"18px"},children:t.jsx(Ue,{})}),t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"bold",color:"#333",fontSize:"18px"},children:"50+"}),t.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Exhibitions"})]})]})})]})})]})}),t.jsx("style",{children:`
        @keyframes fadeInUp {
          from {
            opacity: 0;
            transform: translateY(30px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        @keyframes fadeInRight {
          from {
            opacity: 0;
            transform: translateX(30px);
          }
          to {
            opacity: 1;
            transform: translateX(0);
          }
        }
        
        @keyframes fadeInDown {
          from {
            opacity: 0;
            transform: translateY(-20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        @media (max-width: 768px) {
          .hero-stats-card {
            position: static !important;
            margin: 16px 0 !important;
            transform: none !important;
          }
        }
      `})]})},{Title:Ze,Paragraph:mt,Text:je}=Ee,Zu=D.div`
  padding: 100px 0;
  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
  position: relative;
  overflow: hidden;
  
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23667eea' fill-opacity='0.03'%3E%3Cpath d='M20 20c0-5.5-4.5-10-10-10s-10 4.5-10 10 4.5 10 10 10 10-4.5 10-10zm10 0c0-5.5-4.5-10-10-10s-10 4.5-10 10 4.5 10 10 10 10-4.5 10-10z'/%3E%3C/g%3E%3C/svg%3E");
    z-index: 1;
  }
  
  @media (max-width: 768px) {
    padding: 80px 0;
  }
`,eh=D.div`
  position: relative;
  z-index: 2;
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 24px;
  
  @media (max-width: 768px) {
    padding: 0 16px;
  }
`,th=D(Ze)`
  text-align: center;
  margin-bottom: 20px !important;
  font-size: 3rem !important;
  font-weight: 700 !important;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  
  @media (max-width: 768px) {
    font-size: 2.5rem !important;
  }
  
  @media (max-width: 480px) {
    font-size: 2rem !important;
  }
`,nh=D(mt)`
  text-align: center;
  font-size: 1.2rem !important;
  color: #666 !important;
  max-width: 800px;
  margin: 0 auto 60px !important;
  line-height: 1.6 !important;
  
  @media (max-width: 768px) {
    font-size: 1.1rem !important;
    margin-bottom: 40px !important;
  }
`,jr=D(be)`
  height: 100%;
  border-radius: 20px !important;
  border: none !important;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1) !important;
  transition: all 0.3s cubic-bezier(0.23, 1, 0.320, 1) !important;
  background: rgba(255, 255, 255, 0.9) !important;
  backdrop-filter: blur(10px) !important;
  
  &:hover {
    transform: translateY(-10px) !important;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15) !important;
  }
  
  .ant-card-body {
    padding: 40px !important;
  }
`,Sn=D.div`
  text-align: center;
  padding: 40px 20px;
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(10px);
  border-radius: 20px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
  transition: all 0.3s cubic-bezier(0.23, 1, 0.320, 1);
  height: 100%;
  
  &:hover {
    transform: translateY(-10px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
  }
`,Sr=D.div`
  width: 80px;
  height: 80px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 24px;
  font-size: 32px;
  color: white;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
`,kr=D.div`
  text-align: center;
  padding: 30px 20px;
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(10px);
  border-radius: 16px;
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
  transition: all 0.3s ease;
  height: 100%;
  
  &:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.12);
  }
`,rh=D.div`
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(10px);
  border-radius: 20px;
  padding: 40px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
  
  .ant-timeline-item-content {
    margin-left: 20px;
  }
  
  .ant-timeline-item-tail {
    border-left: 2px solid #667eea;
  }
  
  .ant-timeline-item-head {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border: none;
    width: 16px;
    height: 16px;
  }
`,sh=()=>t.jsx(Zu,{children:t.jsxs(eh,{children:[t.jsxs("div",{style:{marginBottom:"80px"},children:[t.jsx(th,{level:2,children:"About Aakar"}),t.jsx(nh,{children:"Transforming the exhibition industry through innovation, expertise, and unwavering commitment to excellence since 1998."})]}),t.jsxs(Ae,{gutter:[40,40],style:{marginBottom:"100px"},children:[t.jsx(ie,{xs:24,lg:12,children:t.jsxs(jr,{children:[t.jsx(Sr,{children:t.jsx(ei,{})}),t.jsx(Ze,{level:3,style:{textAlign:"center",marginBottom:"24px",color:"#333"},children:"Our Mission"}),t.jsx(mt,{style:{fontSize:"16px",lineHeight:"1.8",color:"#666",textAlign:"center"},children:"Aakar is about Knowledge, Ideas, Evaluations and Implementation in creating world class exhibitions - a marketplace where we bring together end users, traders & manufacturers under one roof to do business and get inspiration."}),t.jsx(mt,{style:{fontSize:"16px",lineHeight:"1.8",color:"#666",textAlign:"center"},children:"Our industry insight, coupled with our innovative and entrepreneurial approach provides the opportunity for business advantage."})]})}),t.jsx(ie,{xs:24,lg:12,children:t.jsxs(jr,{children:[t.jsx(Sr,{children:t.jsx(ti,{})}),t.jsx(Ze,{level:3,style:{textAlign:"center",marginBottom:"24px",color:"#333"},children:"Our Values"}),t.jsx(mt,{style:{fontSize:"16px",lineHeight:"1.8",color:"#666",textAlign:"center"},children:"Everything we do is driven by our customers' needs. We are their indispensable partner and have a passion for understanding our client, reaching and fulfilling our customers expectations."}),t.jsx(mt,{style:{fontSize:"16px",lineHeight:"1.8",color:"#666",textAlign:"center"},children:"We are committed to providing demonstrably superior products and services with the highest level of quality and excellence."})]})})]}),t.jsxs("div",{style:{marginBottom:"100px"},children:[t.jsx(Ze,{level:3,style:{textAlign:"center",marginBottom:"50px",color:"#333"},children:"Our Impact Since 1998"}),t.jsxs(Ae,{gutter:[30,30],children:[t.jsx(ie,{xs:12,sm:6,children:t.jsxs(Sn,{children:[t.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:"linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",color:"white",fontSize:"24px"},children:t.jsx(Ue,{})}),t.jsx(hn,{value:50,suffix:"+",valueStyle:{color:"#333",fontWeight:"bold",fontSize:"2rem"}}),t.jsx(je,{style:{color:"#666",fontSize:"14px"},children:"Exhibitions Organized"})]})}),t.jsx(ie,{xs:12,sm:6,children:t.jsxs(Sn,{children:[t.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",color:"white",fontSize:"24px"},children:t.jsx(Ve,{})}),t.jsx(hn,{value:1e4,suffix:"+",valueStyle:{color:"#333",fontWeight:"bold",fontSize:"2rem"}}),t.jsx(je,{style:{color:"#666",fontSize:"14px"},children:"Exhibitors Served"})]})}),t.jsx(ie,{xs:12,sm:6,children:t.jsxs(Sn,{children:[t.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:"linear-gradient(135deg, #52c41a 0%, #389e0d 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",color:"white",fontSize:"24px"},children:t.jsx(rl,{})}),t.jsx(hn,{value:20,suffix:"+",valueStyle:{color:"#333",fontWeight:"bold",fontSize:"2rem"}}),t.jsx(je,{style:{color:"#666",fontSize:"14px"},children:"Trade Associations"})]})}),t.jsx(ie,{xs:12,sm:6,children:t.jsxs(Sn,{children:[t.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:"linear-gradient(135deg, #fa8c16 0%, #d46b08 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",color:"white",fontSize:"24px"},children:t.jsx(Wn,{})}),t.jsx(hn,{value:1e6,suffix:"+",valueStyle:{color:"#333",fontWeight:"bold",fontSize:"1.8rem"}}),t.jsx(je,{style:{color:"#666",fontSize:"14px"},children:"Trade Visitors"})]})})]})]}),t.jsxs("div",{style:{marginBottom:"100px"},children:[t.jsx(Ze,{level:3,style:{textAlign:"center",marginBottom:"50px",color:"#333"},children:"What Drives Us"}),t.jsxs(Ae,{gutter:[30,30],children:[t.jsx(ie,{xs:24,sm:12,lg:8,children:t.jsxs(kr,{children:[t.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px",color:"white",fontSize:"20px"},children:t.jsx(sl,{})}),t.jsx(Ze,{level:5,style:{marginBottom:"16px",color:"#333"},children:"Excellence"}),t.jsx(mt,{style:{color:"#666",fontSize:"14px",margin:0},children:"We strive to be professional in all our client dealings and are highly valued and respected by our clients."})]})}),t.jsx(ie,{xs:24,sm:12,lg:8,children:t.jsxs(kr,{children:[t.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:"linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px",color:"white",fontSize:"20px"},children:t.jsx(ti,{})}),t.jsx(Ze,{level:5,style:{marginBottom:"16px",color:"#333"},children:"Customer Focus"}),t.jsx(mt,{style:{color:"#666",fontSize:"14px",margin:0},children:"Everything we do is driven by our customers' needs. We are their indispensable partner."})]})}),t.jsx(ie,{xs:24,sm:12,lg:8,children:t.jsxs(kr,{children:[t.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:"linear-gradient(135deg, #52c41a 0%, #389e0d 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px",color:"white",fontSize:"20px"},children:t.jsx(ei,{})}),t.jsx(Ze,{level:5,style:{marginBottom:"16px",color:"#333"},children:"Innovation"}),t.jsx(mt,{style:{color:"#666",fontSize:"14px",margin:0},children:"Our innovative and entrepreneurial approach provides opportunities for business advantage."})]})})]})]}),t.jsxs(Ae,{gutter:[40,40],children:[t.jsx(ie,{xs:24,lg:12,children:t.jsxs(rh,{children:[t.jsx(Ze,{level:4,style:{marginBottom:"30px",color:"#333",textAlign:"center"},children:"Our Journey"}),t.jsxs(St,{children:[t.jsx(St.Item,{children:t.jsxs("div",{children:[t.jsx(je,{strong:!0,style:{color:"#667eea"},children:"1998"}),t.jsx("br",{}),t.jsx(je,{children:"Founded with a vision to revolutionize the exhibition industry"})]})}),t.jsx(St.Item,{children:t.jsxs("div",{children:[t.jsx(je,{strong:!0,style:{color:"#667eea"},children:"2005"}),t.jsx("br",{}),t.jsx(je,{children:"Expanded to serve multiple trade associations"})]})}),t.jsx(St.Item,{children:t.jsxs("div",{children:[t.jsx(je,{strong:!0,style:{color:"#667eea"},children:"2010"}),t.jsx("br",{}),t.jsx(je,{children:"Reached milestone of 25 successful exhibitions"})]})}),t.jsx(St.Item,{children:t.jsxs("div",{children:[t.jsx(je,{strong:!0,style:{color:"#667eea"},children:"2015"}),t.jsx("br",{}),t.jsx(je,{children:"Served over 5,000 exhibitors across various industries"})]})}),t.jsx(St.Item,{children:t.jsxs("div",{children:[t.jsx(je,{strong:!0,style:{color:"#667eea"},children:"2020"}),t.jsx("br",{}),t.jsx(je,{children:"Launched digital platform for seamless exhibition management"})]})}),t.jsx(St.Item,{children:t.jsxs("div",{children:[t.jsx(je,{strong:!0,style:{color:"#667eea"},children:"Today"}),t.jsx("br",{}),t.jsx(je,{children:"Leading the industry with 50+ exhibitions and 10,000+ satisfied exhibitors"})]})})]})]})}),t.jsx(ie,{xs:24,lg:12,children:t.jsxs(jr,{children:[t.jsx(Sr,{children:t.jsx(il,{})}),t.jsx(Ze,{level:3,style:{textAlign:"center",marginBottom:"24px",color:"#333"},children:"Why Choose Aakar?"}),t.jsxs("div",{style:{textAlign:"left"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px"},children:[t.jsx(lt,{style:{color:"#52c41a",marginRight:"12px",fontSize:"16px"}}),t.jsx(je,{children:"25+ years of industry expertise"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px"},children:[t.jsx(lt,{style:{color:"#52c41a",marginRight:"12px",fontSize:"16px"}}),t.jsx(je,{children:"Proven track record with 50+ successful exhibitions"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px"},children:[t.jsx(lt,{style:{color:"#52c41a",marginRight:"12px",fontSize:"16px"}}),t.jsx(je,{children:"Strong network of 20+ trade associations"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px"},children:[t.jsx(lt,{style:{color:"#52c41a",marginRight:"12px",fontSize:"16px"}}),t.jsx(je,{children:"Customer-centric approach with personalized service"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px"},children:[t.jsx(lt,{style:{color:"#52c41a",marginRight:"12px",fontSize:"16px"}}),t.jsx(je,{children:"Innovative digital platform for seamless booking"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[t.jsx(lt,{style:{color:"#52c41a",marginRight:"12px",fontSize:"16px"}}),t.jsx(je,{children:"Commitment to quality and excellence"})]})]})]})})]})]})}),{Title:Bs,Paragraph:Os,Text:_i}=Ee,ih=n=>n?n.startsWith("http")?n:n.startsWith("/")?`${Q.defaults.baseURL}${n}`:`${Q.defaults.baseURL}/public/images/${n}`:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?auto=format&fit=crop&q=80&w=400&h=200",oh=D.div`
  padding: 120px 0;
  background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
  position: relative;
  overflow: hidden;
  
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23667eea' fill-opacity='0.02'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    z-index: 1;
  }
  
  @media (max-width: 768px) {
    padding: 80px 0;
  }
`,ah=D.div`
  position: relative;
  z-index: 2;
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 24px;
  
  @media (max-width: 768px) {
    padding: 0 16px;
  }
`,lh=D.div`
  text-align: center;
  margin-bottom: 80px;
  
  @media (max-width: 768px) {
    margin-bottom: 60px;
  }
`,ch=D(Bs)`
  margin-bottom: 20px !important;
  font-size: 3rem !important;
  font-weight: 700 !important;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  
  @media (max-width: 768px) {
    font-size: 2.5rem !important;
  }
  
  @media (max-width: 480px) {
    font-size: 2rem !important;
  }
`,dh=D(Os)`
  font-size: 1.2rem !important;
  color: #666 !important;
  max-width: 600px;
  margin: 0 auto !important;
  line-height: 1.6 !important;
  
  @media (max-width: 768px) {
    font-size: 1.1rem !important;
  }
`,uh=D(be)`
  height: 100%;
  border-radius: 24px !important;
  overflow: hidden !important;
  transition: all 0.4s cubic-bezier(0.23, 1, 0.320, 1) !important;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08) !important;
  border: none !important;
  cursor: pointer;
  background: rgba(255, 255, 255, 0.9) !important;
  backdrop-filter: blur(10px) !important;
  position: relative;
  
  &:hover {
    transform: translateY(-15px) !important;
    box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15) !important;
  }
  
  .ant-card-cover {
    overflow: hidden;
    position: relative;
  }
  
  .ant-card-cover img {
    transition: transform 0.6s ease !important;
    filter: brightness(0.95);
  }
  
  &:hover .ant-card-cover img {
    transform: scale(1.08) !important;
    filter: brightness(1);
  }
  
  .ant-card-body {
    padding: 30px !important;
    position: relative;
  }
`,hh=D.div`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    180deg,
    rgba(0, 0, 0, 0) 0%,
    rgba(0, 0, 0, 0.1) 50%,
    rgba(0, 0, 0, 0.3) 100%
  );
  z-index: 1;
`,ph=D.div`
  position: absolute;
  top: 16px;
  right: 16px;
  z-index: 10;
  background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
  color: white;
  padding: 8px 16px;
  border-radius: 50px;
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
  animation: pulse 2s infinite;
  
  @keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
  }
`,fh=D.div`
  position: absolute;
  top: 16px;
  left: 16px;
  z-index: 10;
  padding: 6px 14px;
  border-radius: 50px;
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  backdrop-filter: blur(10px);
  
  ${n=>{switch(n.status){case"Active":return`
          background: rgba(82, 196, 26, 0.9);
          color: white;
          box-shadow: 0 4px 15px rgba(82, 196, 26, 0.3);
        `;case"Upcoming":return`
          background: rgba(114, 46, 209, 0.9);
          color: white;
          box-shadow: 0 4px 15px rgba(114, 46, 209, 0.3);
        `;default:return`
          background: rgba(140, 140, 140, 0.9);
          color: white;
          box-shadow: 0 4px 15px rgba(140, 140, 140, 0.3);
        `}}}
`,gh=D(Bs)`
  margin-bottom: 16px !important;
  font-size: 1.4rem !important;
  font-weight: 600 !important;
  color: #333 !important;
  line-height: 1.3 !important;
  min-height: 56px;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
`,Ri=D.div`
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 12px;
  color: #666;
  font-size: 14px;
  
  .anticon {
    color: #667eea;
    font-size: 16px;
  }
`,mh=D(Os)`
  color: #666 !important;
  font-size: 14px !important;
  line-height: 1.5 !important;
  margin-bottom: 20px !important;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  min-height: 42px;
`,xh=D.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-top: 16px;
  border-top: 1px solid #f0f0f0;
`,bh=D(G)`
  border: none !important;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
  color: white !important;
  border-radius: 8px !important;
  font-weight: 500 !important;
  height: 36px !important;
  padding: 0 16px !important;
  display: flex !important;
  align-items: center !important;
  gap: 6px !important;
  transition: all 0.3s ease !important;
  
  &:hover {
    transform: translateY(-2px) !important;
    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.3) !important;
    background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%) !important;
  }
`;D.div`
  text-align: center;
  margin-top: 80px;
  padding: 60px 40px;
  background: rgba(255, 255, 255, 0.7);
  backdrop-filter: blur(20px);
  border-radius: 24px;
  border: 1px solid rgba(255, 255, 255, 0.2);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
  
  @media (max-width: 768px) {
    margin-top: 60px;
    padding: 40px 20px;
  }
`;const yh=D(G)`
  height: 56px !important;
  padding: 0 40px !important;
  font-size: 16px !important;
  font-weight: 600 !important;
  border-radius: 12px !important;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
  border: none !important;
  box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3) !important;
  transition: all 0.3s cubic-bezier(0.23, 1, 0.320, 1) !important;
  
  &:hover {
    transform: translateY(-3px) !important;
    box-shadow: 0 12px 35px rgba(102, 126, 234, 0.4) !important;
    background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%) !important;
  }
  
  @media (max-width: 768px) {
    width: 100%;
    max-width: 300px;
  }
`,wh=D.div`
  text-align: center;
  padding: 80px 20px;
  background: rgba(255, 255, 255, 0.7);
  backdrop-filter: blur(20px);
  border-radius: 24px;
  border: 1px solid rgba(255, 255, 255, 0.2);
`,vh=D.div`
  width: 80px;
  height: 80px;
  margin: 0 auto 24px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 32px;
  color: white;
`,jh=()=>{const n=He(),[e,r]=h.useState([]),[s,i]=h.useState(!0);h.useEffect(()=>{(async()=>{try{i(!0);const g=(await xt.getExhibitions()).data||[];r(g.slice(0,4))}catch(p){console.error("Failed to fetch exhibitions:",p)}finally{i(!1)}})()},[]);const o=u=>{const p={year:"numeric",month:"short",day:"numeric"};return new Date(u).toLocaleDateString(void 0,p)},d=(u,p)=>{const g=new Date,R=new Date(u),j=new Date(p);return g<R?{status:"Upcoming",color:"#722ED1"}:g>j?{status:"Completed",color:"#8C8C8C"}:{status:"Active",color:"#52C41A"}};return t.jsx(oh,{children:t.jsxs(ah,{children:[t.jsxs(lh,{children:[t.jsx(ch,{level:2,children:"Featured Exhibitions"}),t.jsx(dh,{children:"Discover premium exhibition opportunities and secure your perfect space at industry-leading events"})]}),s?t.jsx(Ae,{gutter:[32,32],children:[1,2,3,4].map(u=>t.jsx(ie,{xs:24,sm:12,lg:6,children:t.jsx(be,{style:{borderRadius:"24px",height:"400px",background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)"},children:t.jsx(ol,{active:!0,avatar:!0,paragraph:{rows:4}})})},u))}):e.length>0?t.jsx(Ae,{gutter:[32,32],children:e.map((u,p)=>{const{status:g}=d(u.startDate,u.endDate);return t.jsx(ie,{xs:24,sm:12,lg:6,children:t.jsxs(uh,{onClick:()=>n($o(u)),cover:t.jsxs("div",{style:{height:200,overflow:"hidden",position:"relative"},children:[t.jsx("img",{alt:u.name,src:ih(u.headerLogo),style:{width:"100%",height:"100%",objectFit:"contain"},onError:R=>{const j=R.target;j.src="https://images.unsplash.com/photo-1511578314322-379afb476865?auto=format&fit=crop&q=80&w=400&h=200"}}),t.jsx(hh,{}),t.jsx(fh,{status:g,children:g}),p===0&&t.jsx(ph,{children:"Featured"})]}),hoverable:!0,children:[t.jsx(gh,{level:5,children:u.name}),t.jsxs(Ri,{children:[t.jsx(Ue,{}),t.jsxs(_i,{children:[o(u.startDate)," - ",o(u.endDate)]})]}),u.venue&&t.jsxs(Ri,{children:[t.jsx(Ot,{}),t.jsx(_i,{ellipsis:!0,style:{flex:1},children:u.venue})]}),t.jsx(mh,{children:u.description||"Join us for an exciting exhibition experience with industry leaders and innovative solutions."}),t.jsxs(xh,{children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:"#666",fontSize:"12px"},children:[t.jsx(De,{style:{fontSize:"14px"}}),t.jsx("span",{children:"Open for booking"})]}),t.jsx(bh,{icon:t.jsx(al,{}),children:"View Details"})]})]})},u._id)})}):t.jsxs(wh,{children:[t.jsx(vh,{children:t.jsx(Ue,{})}),t.jsx(Bs,{level:4,style:{color:"#666",marginBottom:"16px"},children:"No Exhibitions Available"}),t.jsx(Os,{style:{fontSize:"16px",color:"#666",marginBottom:"24px"},children:"We're working on bringing you exciting exhibition opportunities. Check back soon!"}),t.jsx(G,{type:"primary",size:"large",onClick:()=>n("/exhibitions"),style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none",borderRadius:"8px"},children:"Browse All Exhibitions"})]}),e.length>0&&t.jsx("div",{style:{textAlign:"center",marginTop:"60px"},children:t.jsx(yh,{onClick:()=>n("/exhibitions"),icon:t.jsx(ll,{}),children:"View All Exhibitions"})})]})})},{Title:zo,Paragraph:Do}=Ee,Sh=D.div`
  padding: 100px 0;
  background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
  
  @media (max-width: 768px) {
    padding: 80px 0;
  }
`,kh=D.div`
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 24px;
  
  @media (max-width: 768px) {
    padding: 0 16px;
  }
`,Eh=D(zo)`
  text-align: center;
  margin-bottom: 20px !important;
  font-size: 2.5rem !important;
  font-weight: 700 !important;
  color: #333 !important;
  
  @media (max-width: 768px) {
    font-size: 2rem !important;
  }
`,Ch=D(Do)`
  text-align: center;
  font-size: 1.2rem !important;
  color: #666 !important;
  max-width: 700px;
  margin: 0 auto 60px !important;
  line-height: 1.6 !important;
  
  @media (max-width: 768px) {
    font-size: 1.1rem !important;
    margin-bottom: 40px !important;
  }
`,Ih=D(be)`
  height: 100%;
  border-radius: 20px !important;
  overflow: hidden !important;
  transition: all 0.4s cubic-bezier(0.23, 1, 0.320, 1) !important;
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08) !important;
  border: none !important;
  background: rgba(255, 255, 255, 0.9) !important;
  backdrop-filter: blur(10px) !important;
  
  &:hover {
    transform: translateY(-12px) !important;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15) !important;
  }
  
  .ant-card-body {
    padding: 40px 30px !important;
    text-align: center;
  }
`,_h=D.div`
  width: 80px;
  height: 80px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  margin: 0 auto 24px;
  font-size: 32px;
  color: white;
  position: relative;
  
  &::before {
    content: '';
    position: absolute;
    top: -4px;
    left: -4px;
    right: -4px;
    bottom: -4px;
    border-radius: 50%;
    background: linear-gradient(135deg, transparent, rgba(255, 255, 255, 0.3));
    z-index: -1;
  }
`,Rh=D(zo)`
  margin-bottom: 16px !important;
  font-size: 1.3rem !important;
  font-weight: 600 !important;
  color: #333 !important;
`,Th=D(Do)`
  font-size: 15px !important;
  line-height: 1.6 !important;
  color: #666 !important;
  margin: 0 !important;
`,Ah=[{icon:t.jsx(Rs,{}),title:"Interactive Layout Builder",description:"Visualize and design your exhibition space with our intuitive drag-and-drop layout builder. See exactly where your stall will be positioned.",gradient:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",shadowColor:"rgba(102, 126, 234, 0.3)"},{icon:t.jsx(Ve,{}),title:"Smart Stall Selection",description:"Choose from available stalls with real-time pricing, amenities, and location details. Book multiple stalls with ease.",gradient:"linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)",shadowColor:"rgba(255, 107, 107, 0.3)"},{icon:t.jsx(rn,{}),title:"Exhibitor Dashboard",description:"Manage all your bookings, payments, and exhibition details through our comprehensive exhibitor dashboard.",gradient:"linear-gradient(135deg, #52c41a 0%, #389e0d 100%)",shadowColor:"rgba(82, 196, 26, 0.3)"},{icon:t.jsx(Ue,{}),title:"Schedule Management",description:"Keep track of important dates, setup times, and exhibition schedules all in one organized place.",gradient:"linear-gradient(135deg, #fa8c16 0%, #d46b08 100%)",shadowColor:"rgba(250, 140, 22, 0.3)"},{icon:t.jsx(cl,{}),title:"Secure Payments",description:"Process payments securely with multiple payment options and get instant booking confirmations.",gradient:"linear-gradient(135deg, #722ed1 0%, #531dab 100%)",shadowColor:"rgba(114, 46, 209, 0.3)"},{icon:t.jsx(Wn,{}),title:"Multi-User Access",description:"Collaborate with your team members and manage multiple exhibitions from a single account.",gradient:"linear-gradient(135deg, #13c2c2 0%, #08979c 100%)",shadowColor:"rgba(19, 194, 194, 0.3)"},{icon:t.jsx(lt,{}),title:"Real-time Updates",description:"Get instant notifications about booking status, payment confirmations, and important exhibition updates.",gradient:"linear-gradient(135deg, #1890ff 0%, #096dd9 100%)",shadowColor:"rgba(24, 144, 255, 0.3)"},{icon:t.jsx(dl,{}),title:"24/7 Support",description:"Get expert assistance throughout the booking process and during exhibitions with our dedicated support team.",gradient:"linear-gradient(135deg, #eb2f96 0%, #c41d7f 100%)",shadowColor:"rgba(235, 47, 150, 0.3)"}],Ph=()=>t.jsx(Sh,{children:t.jsxs(kh,{children:[t.jsx(Eh,{level:2,children:"Why Choose Our Platform?"}),t.jsx(Ch,{children:"Discover the powerful features that make exhibition booking simple, efficient, and enjoyable for exhibitors worldwide."}),t.jsx(Ae,{gutter:[30,30],children:Ah.map((n,e)=>t.jsx(ie,{xs:24,sm:12,lg:6,children:t.jsxs(Ih,{children:[t.jsx(_h,{style:{background:n.gradient,boxShadow:`0 8px 25px ${n.shadowColor}`},children:n.icon}),t.jsx(Rh,{level:4,children:n.title}),t.jsx(Th,{children:n.description})]})},e))})]})}),{Title:Nh,Paragraph:$h}=Ee,zh=D.div`
  padding: 100px 0;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  position: relative;
  overflow: hidden;
  
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: 
      radial-gradient(circle at 20% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
      radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.05) 0%, transparent 50%);
    z-index: 1;
  }
  
  @media (max-width: 768px) {
    padding: 80px 0;
  }
`,Dh=D.div`
  position: relative;
  z-index: 2;
  max-width: 1000px;
  margin: 0 auto;
  padding: 60px 24px;
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(20px);
  border-radius: 24px;
  color: white;
  text-align: center;
  box-shadow: 
    0 25px 50px rgba(0, 0, 0, 0.1),
    0 0 0 1px rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.1);
  
  @media (max-width: 768px) {
    padding: 40px 16px;
    border-radius: 20px;
  }
`,Fh=D(Nh)`
  color: white !important;
  margin-bottom: 20px !important;
  font-size: 2.5rem !important;
  font-weight: 700 !important;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  
  @media (max-width: 768px) {
    font-size: 2rem !important;
  }
  
  @media (max-width: 480px) {
    font-size: 1.8rem !important;
  }
`,Lh=D($h)`
  font-size: 1.3rem !important;
  margin-bottom: 40px !important;
  color: rgba(255, 255, 255, 0.9) !important;
  line-height: 1.6 !important;
  max-width: 600px;
  margin-left: auto !important;
  margin-right: auto !important;
  
  @media (max-width: 768px) {
    font-size: 1.1rem !important;
    margin-bottom: 32px !important;
  }
`,Mh=D(ue)`
  @media (max-width: 768px) {
    width: 100%;
    
    .ant-space-item {
      display: flex;
      justify-content: center;
      width: 100%;
    }
  }
`,Bh=D(G)`
  height: 56px !important;
  padding: 0 40px !important;
  font-size: 16px !important;
  font-weight: 600 !important;
  border-radius: 12px !important;
  border: none !important;
  background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%) !important;
  box-shadow: 
    0 8px 25px rgba(255, 107, 107, 0.3),
    0 3px 10px rgba(0, 0, 0, 0.2) !important;
  transition: all 0.3s cubic-bezier(0.23, 1, 0.320, 1) !important;
  position: relative;
  overflow: hidden;
  
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s;
  }
  
  &:hover {
    transform: translateY(-3px) !important;
    box-shadow: 
      0 12px 35px rgba(255, 107, 107, 0.4),
      0 5px 15px rgba(0, 0, 0, 0.3) !important;
    background: linear-gradient(135deg, #ff5252 0%, #d63031 100%) !important;
    
    &::before {
      left: 100%;
    }
  }
  
  &:active {
    transform: translateY(-1px) !important;
  }
  
  @media (max-width: 768px) {
    width: 100%;
    max-width: 300px;
  }
`,Oh=D(G)`
  height: 56px !important;
  padding: 0 40px !important;
  font-size: 16px !important;
  font-weight: 600 !important;
  border-radius: 12px !important;
  background: rgba(255, 255, 255, 0.1) !important;
  border: 2px solid rgba(255, 255, 255, 0.3) !important;
  color: white !important;
  backdrop-filter: blur(10px);
  transition: all 0.3s cubic-bezier(0.23, 1, 0.320, 1) !important;
  
  &:hover {
    background: rgba(255, 255, 255, 0.2) !important;
    border-color: rgba(255, 255, 255, 0.5) !important;
    color: white !important;
    transform: translateY(-3px) !important;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15) !important;
  }
  
  &:active {
    transform: translateY(-1px) !important;
  }
  
  @media (max-width: 768px) {
    width: 100%;
    max-width: 300px;
  }
`,qh=D.div`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: 1;
  
  .shape {
    position: absolute;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.1);
    animation: float 8s ease-in-out infinite;
    
    &:nth-of-type(1) {
      width: 100px;
      height: 100px;
      top: 10%;
      left: 5%;
      animation-delay: 0s;
    }
    
    &:nth-of-type(2) {
      width: 150px;
      height: 150px;
      top: 70%;
      right: 10%;
      animation-delay: 3s;
    }
    
    &:nth-of-type(3) {
      width: 80px;
      height: 80px;
      top: 30%;
      right: 20%;
      animation-delay: 6s;
    }
  }
  
  @keyframes float {
    0%, 100% {
      transform: translateY(0px) rotate(0deg);
      opacity: 0.5;
    }
    50% {
      transform: translateY(-30px) rotate(180deg);
      opacity: 0.8;
    }
  }
  
  @media (max-width: 768px) {
    display: none;
  }
`,Uh=({onRegisterClick:n,isAuthenticated:e=!1})=>{const r=He();return t.jsxs(zh,{children:[t.jsxs(qh,{children:[t.jsx("div",{className:"shape"}),t.jsx("div",{className:"shape"}),t.jsx("div",{className:"shape"})]}),t.jsx("div",{style:{maxWidth:"1400px",margin:"0 auto",padding:"0 24px"},children:t.jsxs(Dh,{children:[t.jsx(Fh,{level:2,children:"Ready to Showcase Your Business?"}),t.jsx(Lh,{children:"Join thousands of successful exhibitors and book your perfect stall today. Experience the future of exhibition management with our innovative platform."}),t.jsxs(Mh,{size:20,wrap:!0,direction:"vertical",children:[t.jsx(Bh,{onClick:()=>r("/exhibitions"),icon:t.jsx(Ve,{}),children:"Browse Exhibitions"}),t.jsx(Oh,{onClick:n,icon:t.jsx(De,{}),children:e?"Go to Dashboard":"Register as Exhibitor"})]})]})})]})},{Content:Vh}=ye,Hh=D(Vh)`
  padding-top: 64px;
`,Qh=()=>{const n=ht(),e=He(),{isAuthenticated:r}=Ne(i=>i.exhibitorAuth),s=()=>{r?e("/exhibitor/dashboard"):n(Rt(void 0))};return t.jsxs(ye,{children:[t.jsx(Xe,{}),t.jsxs(Hh,{children:[t.jsx(Ju,{onRegisterClick:s,isAuthenticated:r}),t.jsx(sh,{}),t.jsx(jh,{}),t.jsx(Ph,{}),t.jsx(Uh,{onRegisterClick:s,isAuthenticated:r})]}),t.jsx(No,{})]})},Wh=h.lazy(()=>le(()=>import("./Dashboard-DL-eelry.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),Yh=h.lazy(()=>le(()=>import("./Dashboard-1w7ThspS.js"),__vite__mapDeps([7,1,2,3,4,5]))),Kh=h.lazy(()=>le(()=>import("./Bookings-s8adGA61.js"),__vite__mapDeps([8,1,2,3,4,5]))),Gh=h.lazy(()=>le(()=>import("./BookingDetails-DXSRLoHX.js"),__vite__mapDeps([9,1,2,3,4,5]))),Xh=h.lazy(()=>le(()=>import("./Profile-CE17Aqxh.js"),__vite__mapDeps([10,1,2,3,4,5]))),Jh=h.lazy(()=>le(()=>import("./InvoiceDetails-B3iqPApu.js"),__vite__mapDeps([11,1,12,13,2,3,4,5]))),Zh=h.lazy(()=>le(()=>import("./Support-C4PUXcG1.js"),__vite__mapDeps([14,1,2,3,4,5]))),ep=h.lazy(()=>le(()=>import("./Profile-B-pu6AYg.js"),__vite__mapDeps([15,1,2,3,4,5]))),tp=h.lazy(()=>le(()=>import("./Settings-9DVnS3_I.js"),__vite__mapDeps([16,1,2,3,4,5,6]))),np=h.lazy(()=>le(()=>import("./index-BUHaTf_C.js"),__vite__mapDeps([17,1,2,18,3,4,5]))),rp=h.lazy(()=>le(()=>import("./index-CpTJ6nQu.js"),__vite__mapDeps([19,1,2,18,3,4,5]))),sp=h.lazy(()=>le(()=>import("./index-xLzoI74h.js"),__vite__mapDeps([20,1,2,3,4,5]))),ip=h.lazy(()=>le(()=>import("./index-D9ov2tDF.js"),__vite__mapDeps([21,1,2,18,3,4,5,6]))),op=h.lazy(()=>le(()=>import("./index-DauFcO_k.js"),__vite__mapDeps([22,1,23,2,3,4,5]))),ap=h.lazy(()=>le(()=>import("./index-BJOkrlrN.js"),__vite__mapDeps([24,1,2,3,4,5]))),lp=h.lazy(()=>le(()=>import("./edit-CdDdkDG4.js"),__vite__mapDeps([25,1,23,2,3,4,5]))),cp=h.lazy(()=>le(()=>import("./index-Ch_tAd4A.js"),__vite__mapDeps([26,1,5,2,3,4]))),dp=h.lazy(()=>le(()=>import("./index-YK0oBO-6.js"),__vite__mapDeps([27,1,2,3,4,5]))),up=h.lazy(()=>le(()=>import("./index-BaQP7GYl.js"),__vite__mapDeps([28,1,5,2,3,4]))),hp=h.lazy(()=>le(()=>import("./index-DsO6UQTd.js"),__vite__mapDeps([29,1,5,2,3,4]))),pp=h.lazy(()=>le(()=>import("./index-D06dNjNz.js"),__vite__mapDeps([30,1,5,2,3,4]))),fp=h.lazy(()=>le(()=>import("./index-vzguTJo1.js"),__vite__mapDeps([31,1,32,2,3,4,5,6]))),gp=h.lazy(()=>le(()=>import("./index-8on0sh1I.js"),__vite__mapDeps([33,1,2,3,4,5,6]))),mp=h.lazy(()=>le(()=>import("./index-C7XVPPxK.js"),__vite__mapDeps([34,1,2,18,32,3,4,5,6]))),xp=h.lazy(()=>le(()=>import("./index-Bxg61e_I.js"),__vite__mapDeps([35,1,2,3,4,5]))),bp=h.lazy(()=>le(()=>import("./index-CMAPMNew.js"),__vite__mapDeps([36,1,12,13,2,3,4,5,37]))),yp=h.lazy(()=>le(()=>import("./index-C_-o9WQR.js"),__vite__mapDeps([38,1,2,3,4,5]))),wp=h.lazy(()=>le(()=>import("./index-ySuoVAwO.js"),__vite__mapDeps([39,1,32,2,3,4,5,6]))),vp=h.lazy(()=>le(()=>import("./index-D41rIQal.js"),__vite__mapDeps([40,1,32,2,3,4,5,41]))),jp=h.lazy(()=>le(()=>import("./index-BICjc9kl.js"),__vite__mapDeps([42,1,2,3,4,5]))),Sp=()=>{const n=le(()=>import("./Dashboard-DL-eelry.js"),__vite__mapDeps([0,1,2,3,4,5,6])),e=le(()=>import("./index-C7XVPPxK.js"),__vite__mapDeps([34,1,2,18,32,3,4,5,6]));return{preloadDashboard:n,preloadBookingManager:e}};setTimeout(Sp,3e3);const kp=()=>t.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:t.jsx(ut,{size:"large",tip:"Loading..."})}),ge=({children:n})=>Ne(r=>r.auth.isAuthenticated)?n:t.jsx(Ss,{to:"/login"}),Nt=({children:n})=>Ne(r=>r.exhibitorAuth.isAuthenticated)?n:t.jsx(Ss,{to:"/"}),Ti=n=>t.jsx(bs,{children:n});function Ep(){return t.jsx(As,{children:t.jsx(bs,{children:t.jsx(da,{children:t.jsx(h.Suspense,{fallback:t.jsx(kp,{}),children:t.jsxs(ua,{children:[t.jsx(ne,{path:"/",element:t.jsx(Qh,{})}),t.jsx(ne,{path:"/login",element:t.jsx(Md,{})}),t.jsx(ne,{path:"/exhibitions",element:t.jsx(Mu,{})}),t.jsx(ne,{path:"/exhibitions/:id",element:t.jsx(ku,{})}),t.jsx(ne,{path:"/exhibitions/:id/layout",element:t.jsx(vu,{})}),t.jsx(ne,{path:"/exhibitor/dashboard",element:t.jsx(Nt,{children:t.jsx(At,{children:t.jsx(bs,{children:t.jsx(Yh,{})})})})}),t.jsx(ne,{path:"/exhibitor/profile",element:t.jsx(Nt,{children:t.jsx(At,{children:t.jsx(Xh,{})})})}),t.jsx(ne,{path:"/exhibitor/bookings",element:t.jsx(Nt,{children:t.jsx(At,{children:t.jsx(Kh,{})})})}),t.jsx(ne,{path:"/exhibitor/bookings/:id",element:t.jsx(Nt,{children:t.jsx(At,{children:t.jsx(Gh,{})})})}),t.jsx(ne,{path:"/exhibitor/support",element:t.jsx(Nt,{children:t.jsx(At,{children:t.jsx(Zh,{})})})}),t.jsx(ne,{path:"/exhibitor/invoice/:id",element:t.jsx(Nt,{children:t.jsx(At,{children:t.jsx(Jh,{})})})}),t.jsx(ne,{path:"/dashboard",element:t.jsx(ge,{children:t.jsx(fe,{children:Ti(t.jsx(Wh,{}))})})}),t.jsx(ne,{path:"/account",element:t.jsx(ge,{children:t.jsx(fe,{children:t.jsx(ep,{})})})}),t.jsx(ne,{path:"/exhibition",element:t.jsx(ge,{children:t.jsx(fe,{children:t.jsx(ip,{})})})}),t.jsx(ne,{path:"/exhibition/create",element:t.jsx(ge,{children:t.jsx(fe,{children:t.jsx(op,{})})})}),t.jsx(ne,{path:"/exhibition/:id",element:t.jsx(ge,{children:t.jsx(fe,{children:t.jsx(ap,{})})})}),t.jsx(ne,{path:"/exhibition/:id/space",element:t.jsx(ge,{children:t.jsx(fe,{children:t.jsx(cp,{})})})}),t.jsx(ne,{path:"/exhibition/:id/layout",element:t.jsx(ge,{children:t.jsx(fe,{children:t.jsx(dp,{})})})}),t.jsx(ne,{path:"/exhibition/:id/halls",element:t.jsx(ge,{children:t.jsx(fe,{children:t.jsx(up,{})})})}),t.jsx(ne,{path:"/exhibition/:id/stalls",element:t.jsx(ge,{children:t.jsx(fe,{children:t.jsx(hp,{})})})}),t.jsx(ne,{path:"/exhibition/:id/fixtures",element:t.jsx(ge,{children:t.jsx(fe,{children:t.jsx(pp,{})})})}),t.jsx(ne,{path:"/exhibition/:id/edit",element:t.jsx(ge,{children:t.jsx(fe,{children:t.jsx(lp,{})})})}),t.jsx(ne,{path:"/stall/list",element:t.jsx(ge,{children:t.jsx(fe,{children:t.jsx(fp,{})})})}),t.jsx(ne,{path:"/stall-types",element:t.jsx(ge,{children:t.jsx(fe,{children:t.jsx(gp,{})})})}),t.jsx(ne,{path:"/bookings",element:t.jsx(ge,{children:t.jsx(fe,{children:Ti(t.jsx(mp,{}))})})}),t.jsx(ne,{path:"/bookings/create",element:t.jsx(ge,{children:t.jsx(fe,{children:t.jsx(xp,{})})})}),t.jsx(ne,{path:"/amenities",element:t.jsx(ge,{children:t.jsx(fe,{children:t.jsx(vp,{})})})}),t.jsx(ne,{path:"/letters",element:t.jsx(ge,{children:t.jsx(fe,{children:t.jsx(jp,{})})})}),t.jsx(ne,{path:"/invoices",element:t.jsx(ge,{children:t.jsx(fe,{children:t.jsx(yp,{})})})}),t.jsx(ne,{path:"/invoice/:id",element:t.jsx(ge,{children:t.jsx(fe,{children:t.jsx(bp,{})})})}),t.jsx(ne,{path:"/index",element:t.jsx(ge,{children:t.jsx(fe,{children:t.jsx(rp,{})})})}),t.jsx(ne,{path:"/settings",element:t.jsx(ge,{children:t.jsx(fe,{children:t.jsx(tp,{})})})}),t.jsx(ne,{path:"/roles",element:t.jsx(ge,{children:t.jsx(fe,{children:t.jsx(np,{})})})}),t.jsx(ne,{path:"/notifications",element:t.jsx(ge,{children:t.jsx(fe,{children:t.jsx(sp,{})})})}),t.jsx(ne,{path:"/exhibitors",element:t.jsx(ge,{children:t.jsx(fe,{children:t.jsx(wp,{})})})}),t.jsx(ne,{path:"*",element:t.jsx(Ss,{to:"/",replace:!0})})]})})})})})}const me=n=>{var r,s;const e=((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"An error occurred";throw new Error(e)},Qe={getExhibitions:async()=>{try{return await Q.get("/exhibitions")}catch(n){return me(n)}},getActiveExhibitions:async()=>{try{return await Q.get("/exhibitions/active")}catch(n){return me(n)}},getAllExhibitionsForAssignment:async()=>{try{return await Q.get("/exhibitions/all-for-assignment")}catch(n){return me(n)}},getExhibition:async n=>{try{return await Q.get(`/exhibitions/${n}`)}catch(e){return me(e)}},createExhibition:async n=>{try{return await Q.post("/exhibitions",n)}catch(e){return me(e)}},updateExhibition:async(n,e)=>{try{return await Q.put(`/exhibitions/${n}`,e)}catch(r){return me(r)}},deleteExhibition:async n=>{try{return await Q.delete(`/exhibitions/${n}`)}catch(e){return me(e)}},getExhibitionProgress:async n=>{try{return(await Q.get(`/exhibitions/${n}/progress`)).data}catch(e){return me(e)}},getHalls:async n=>{try{return await Q.get(`/exhibitions/${n}/halls`)}catch(e){return me(e)}},createHall:async(n,e)=>{try{const{_id:r,id:s,createdAt:i,updatedAt:o,...d}=e;return console.log("Creating hall with data:",{exhibitionId:n,data:d}),(await Q.post(`/exhibitions/${n}/halls`,d)).data}catch(r){throw console.error("Error creating hall:",r),r}},updateHall:async(n,e,r)=>{try{const{_id:s,id:i,createdAt:o,updatedAt:d,...u}=r;console.log("Updating hall with data:",{exhibitionId:n,hallId:e,data:u});const p=await Q.put(`/exhibitions/${n}/halls/${e}`,u);return console.log("Hall updated:",p.data),p}catch(s){return console.error("Error updating hall:",s),me(s)}},deleteHall:async(n,e)=>{var r,s,i;try{if(!n||!e)throw new Error("Exhibition ID and Hall ID are required");console.log("Deleting hall:",{exhibitionId:n,hallId:e});const o=await Q.delete(`/exhibitions/${n}/halls/${e}`);if(!o.data)throw new Error("No response received from server");return o}catch(o){throw console.error("Error deleting hall:",o),((r=o.response)==null?void 0:r.status)===401?new Error("Unauthorized. Please log in again."):((s=o.response)==null?void 0:s.status)===403?new Error("You do not have permission to delete halls."):((i=o.response)==null?void 0:i.status)===404?new Error("Hall not found."):o}},saveLayout:async(n,e)=>{try{if(!n)throw new Error("Exhibition ID is required");return{data:{halls:e}}}catch(r){return me(r)}},getLayout:async n=>{try{if(!n)throw new Error("Exhibition ID is required");return await Q.get(`/exhibitions/${n}/layout`)}catch(e){return me(e)}},getStalls:async(n,e,r)=>{try{if(!n)throw new Error("Exhibition ID is required");const s={};return e&&(s.hallId=e),r!=null&&r.page&&(s.page=r.page),r!=null&&r.limit&&(s.limit=r.limit),r!=null&&r.search&&(s.search=r.search),r!=null&&r.status&&(s.status=r.status),r!=null&&r.sortBy&&(s.sortBy=r.sortBy),r!=null&&r.sortOrder&&(s.sortOrder=r.sortOrder),r!=null&&r.minPrice&&(s.minPrice=r.minPrice),r!=null&&r.maxPrice&&(s.maxPrice=r.maxPrice),await Q.get(`/exhibitions/${n}/stalls`,{params:s})}catch(s){return me(s)}},createStall:async(n,e)=>{try{if(!n)throw new Error("Exhibition ID is required");return await Q.post(`/exhibitions/${n}/stalls`,e)}catch(r){return me(r)}},updateStall:async(n,e,r)=>{try{if(!n||!e)throw new Error("Exhibition ID and Stall ID are required");console.log("Updating stall:",{exhibitionId:n,stallId:e,data:r});const s=await Q.put(`/exhibitions/${n}/stalls/${e}`,r);return console.log("Stall update response:",s),s}catch(s){return console.error("Error updating stall:",s),me(s)}},deleteStall:async(n,e)=>{try{if(!n||!e)throw new Error("Exhibition ID and Stall ID are required");return await Q.delete(`/exhibitions/${n}/stalls/${e}`)}catch(r){return me(r)}},getFixtures:async(n,e)=>{try{const r=`/exhibitions/${n}/fixtures`,s=e?{type:e}:void 0;return await Q.get(r,{params:s})}catch(r){return me(r)}},getFixture:async(n,e)=>{try{return await Q.get(`/exhibitions/${n}/fixtures/${e}`)}catch(r){return me(r)}},createFixture:async(n,e)=>{try{return await Q.post(`/exhibitions/${n}/fixtures`,e)}catch(r){return me(r)}},updateFixture:async(n,e,r)=>{try{return await Q.put(`/exhibitions/${n}/fixtures/${e}`,r)}catch(s){return me(s)}},deleteFixture:async(n,e)=>{try{return await Q.delete(`/exhibitions/${n}/fixtures/${e}`)}catch(r){return me(r)}},assignUsersToExhibition:async(n,e)=>{try{return await Q.post(`/exhibitions/${n}/assign-users`,{userIds:e})}catch(r){return me(r)}},unassignUserFromExhibition:async(n,e)=>{try{return await Q.delete(`/exhibitions/${n}/unassign-user/${e}`)}catch(r){return me(r)}},getAssignedUsers:async n=>{try{return await Q.get(`/exhibitions/${n}/assigned-users`)}catch(e){return me(e)}}},Cp={exhibitions:[],currentExhibition:null,halls:[],stalls:[],fixtures:[],loading:!1,error:null,stallsPagination:{currentPage:1,totalPages:0,totalCount:0,pageSize:10,hasNextPage:!1,hasPrevPage:!1,startIndex:0,endIndex:0}},Er=re("exhibition/fetchExhibitions",async(n,{rejectWithValue:e})=>{try{return(await Qe.getExhibitions()).data.map(i=>({...i,id:i._id||i.id})).filter(i=>i.id)}catch(r){return e(r.message)}}),Cr=re("exhibition/fetchAllExhibitionsForAssignment",async(n,{rejectWithValue:e})=>{try{return(await Qe.getAllExhibitionsForAssignment()).data.map(i=>({...i,id:i._id||i.id})).filter(i=>i.id)}catch(r){return e(r.message)}}),Ir=re("exhibition/fetchExhibition",async(n,{rejectWithValue:e})=>{try{if(!n)throw new Error("Exhibition ID is required");return(await Qe.getExhibition(n)).data}catch(r){return e(r.message)}}),_r=re("exhibition/createExhibition",async(n,{rejectWithValue:e})=>{try{return(await Qe.createExhibition(n)).data}catch(r){return e(r.message)}}),Rr=re("exhibition/updateExhibition",async({id:n,data:e},{rejectWithValue:r})=>{try{if(!n)throw new Error("Exhibition ID is required");return(await Qe.updateExhibition(n,e)).data}catch(s){return r(s.message)}}),Tr=re("exhibition/fetchHalls",async(n,{rejectWithValue:e})=>{var r;try{if(!n)throw new Error("Exhibition ID is required");return(await Qe.getHalls(n)).data}catch(s){return((r=s.response)==null?void 0:r.status)===404?[]:e(s.message)}}),Ar=re("exhibition/fetchStalls",async({exhibitionId:n,hallId:e,page:r=1,limit:s=10,search:i,status:o,sortBy:d="number",sortOrder:u="asc",minPrice:p,maxPrice:g},{rejectWithValue:R})=>{try{if(!n)throw new Error("Exhibition ID is required");return(await Qe.getStalls(n,e,{page:r,limit:s,search:i,status:o,sortBy:d,sortOrder:u,minPrice:p,maxPrice:g})).data}catch(j){return R(j.message)}}),Pr=re("exhibition/deleteExhibition",async(n,{rejectWithValue:e})=>{try{return await Qe.deleteExhibition(n),n}catch(r){return e(r.message)}}),Nr=re("exhibition/fetchFixtures",async({exhibitionId:n,type:e},{rejectWithValue:r})=>{try{if(!n)throw new Error("Exhibition ID is required");return(await Qe.getFixtures(n,e)).data}catch(s){return r(s.message)}}),$r=re("exhibition/createFixture",async({exhibitionId:n,data:e},{rejectWithValue:r})=>{try{if(!n)throw new Error("Exhibition ID is required");return(await Qe.createFixture(n,e)).data}catch(s){return r(s.message)}}),zr=re("exhibition/updateFixture",async({exhibitionId:n,id:e,data:r},{rejectWithValue:s})=>{try{if(!n||!e)throw new Error("Exhibition ID and Fixture ID are required");return(await Qe.updateFixture(n,e,r)).data}catch(i){return s(i.message)}}),Dr=re("exhibition/deleteFixture",async({exhibitionId:n,id:e},{rejectWithValue:r})=>{try{if(!n||!e)throw new Error("Exhibition ID and Fixture ID are required");return await Qe.deleteFixture(n,e),e}catch(s){return r(s.message)}}),Fo=ze({name:"exhibition",initialState:Cp,reducers:{clearCurrentExhibition:n=>{n.currentExhibition=null,n.halls=[],n.stalls=[],n.fixtures=[],n.error=null},clearError:n=>{n.error=null},clearStalls:n=>{n.stalls=[],n.stallsPagination={currentPage:1,totalPages:0,totalCount:0,pageSize:10,hasNextPage:!1,hasPrevPage:!1,startIndex:0,endIndex:0}},clearFixtures:n=>{n.fixtures=[]}},extraReducers:n=>{n.addCase(Er.pending,e=>{e.loading=!0,e.error=null}).addCase(Er.fulfilled,(e,r)=>{e.loading=!1,e.exhibitions=r.payload}).addCase(Er.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(Cr.pending,e=>{e.loading=!0,e.error=null}).addCase(Cr.fulfilled,(e,r)=>{e.loading=!1,e.exhibitions=r.payload}).addCase(Cr.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(Ir.pending,e=>{e.loading=!0,e.error=null}).addCase(Ir.fulfilled,(e,r)=>{e.loading=!1,e.currentExhibition=r.payload}).addCase(Ir.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(_r.pending,e=>{e.loading=!0,e.error=null}).addCase(_r.fulfilled,(e,r)=>{e.loading=!1,e.exhibitions.push(r.payload)}).addCase(_r.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(Rr.pending,e=>{e.loading=!0,e.error=null}).addCase(Rr.fulfilled,(e,r)=>{e.loading=!1,e.currentExhibition=r.payload;const s=e.exhibitions.findIndex(i=>i.id===r.payload.id);s!==-1&&(e.exhibitions[s]=r.payload)}).addCase(Rr.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(Tr.pending,e=>{e.loading=!0,e.error=null}).addCase(Tr.fulfilled,(e,r)=>{e.loading=!1,e.halls=r.payload}).addCase(Tr.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(Ar.pending,e=>{e.loading=!0,e.error=null}).addCase(Ar.fulfilled,(e,r)=>{e.loading=!1;const s=r.payload,i=s&&typeof s=="object"&&"stalls"in s,o=i?s.stalls:s,d=i?s.pagination:null,u=(Array.isArray(o)?o:[]).map(p=>{var g;return{...p,id:p._id||p.id,_id:p._id||p.id,stallTypeId:typeof p.stallTypeId=="string"?p.stallTypeId:(g=p.stallTypeId)==null?void 0:g._id,stallType:p.stallType||{name:"N/A",description:null}}});e.stalls=u,d&&(e.stallsPagination=d)}).addCase(Ar.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(Pr.pending,e=>{e.loading=!0,e.error=null}).addCase(Pr.fulfilled,(e,r)=>{e.loading=!1,e.exhibitions=e.exhibitions.filter(s=>(s._id||s.id)!==r.payload)}).addCase(Pr.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(Nr.pending,e=>{e.loading=!0,e.error=null}).addCase(Nr.fulfilled,(e,r)=>{e.loading=!1,e.fixtures=r.payload.map(s=>({...s,id:s._id||s.id,_id:s._id||s.id}))}).addCase(Nr.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase($r.pending,e=>{e.loading=!0,e.error=null}).addCase($r.fulfilled,(e,r)=>{e.loading=!1;const s={...r.payload,id:r.payload._id||r.payload.id,_id:r.payload._id||r.payload.id};e.fixtures.push(s)}).addCase($r.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(zr.pending,e=>{e.loading=!0,e.error=null}).addCase(zr.fulfilled,(e,r)=>{e.loading=!1;const s={...r.payload,id:r.payload._id||r.payload.id,_id:r.payload._id||r.payload.id},i=e.fixtures.findIndex(o=>o.id===s.id||o._id===s._id);i!==-1&&(e.fixtures[i]=s)}).addCase(zr.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(Dr.pending,e=>{e.loading=!0,e.error=null}).addCase(Dr.fulfilled,(e,r)=>{e.loading=!1,e.fixtures=e.fixtures.filter(s=>s.id!==r.payload&&s._id!==r.payload)}).addCase(Dr.rejected,(e,r)=>{e.loading=!1,e.error=r.payload})}}),{clearCurrentExhibition:og,clearError:ag,clearStalls:lg,clearFixtures:cg}=Fo.actions,Ip=Fo.reducer,_p={bookings:[],currentBooking:null,loading:!1,statsLoading:!1,error:null,pagination:{total:0,page:1,limit:10,pages:0},stats:{total:0,pending:0,approved:0,rejected:0,confirmed:0,cancelled:0,totalRevenue:0,totalBaseAmount:0}},Fr=re("booking/fetchBookings",async(n={},{rejectWithValue:e})=>{var r,s;try{const i={};return n.page&&(i.page=n.page),n.limit&&(i.limit=n.limit),n.search&&(i.search=n.search),n.status&&(i.status=n.status),n.exhibitionId&&(i.exhibitionId=n.exhibitionId),n.startDate&&(i.startDate=n.startDate),n.endDate&&(i.endDate=n.endDate),(await Q.get("/bookings",{params:i})).data}catch(i){return e(((s=(r=i==null?void 0:i.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to fetch bookings")}}),Lr=re("booking/fetchBooking",async n=>(await Q.get(`/bookings/${n}`)).data),Mr=re("booking/createBooking",async n=>(await Q.post("/bookings",n)).data),Br=re("booking/updateStatus",async({id:n,status:e,rejectionReason:r})=>(await Q.patch(`/bookings/${n}`,{status:e,...r&&{rejectionReason:r}})).data),Or=re("booking/updatePaymentStatus",async({id:n,paymentStatus:e,paymentDetails:r})=>(await Q.patch(`/bookings/${n}/payment`,{paymentStatus:e,paymentDetails:r})).data),qr=re("booking/deleteBooking",async n=>(await Q.delete(`/bookings/${n}`),n)),Ur=re("booking/fetchBookingStats",async(n,{rejectWithValue:e})=>{var r,s;try{return(await Q.get("/bookings/stats")).data}catch(i){return e(((s=(r=i==null?void 0:i.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to fetch booking statistics")}}),Lo=ze({name:"booking",initialState:_p,reducers:{clearCurrentBooking:n=>{n.currentBooking=null},clearBookingError:n=>{n.error=null}},extraReducers:n=>{n.addCase(Fr.pending,e=>{e.loading=!0,e.error=null}).addCase(Fr.fulfilled,(e,r)=>{e.loading=!1,e.bookings=r.payload.data||[],r.payload.pagination&&(e.pagination=r.payload.pagination)}).addCase(Fr.rejected,(e,r)=>{e.loading=!1,e.error=r.error.message||"Failed to fetch bookings"}).addCase(Lr.pending,e=>{e.loading=!0,e.error=null}).addCase(Lr.fulfilled,(e,r)=>{e.loading=!1,e.currentBooking=r.payload}).addCase(Lr.rejected,(e,r)=>{e.loading=!1,e.error=r.error.message||"Failed to fetch booking"}).addCase(Mr.pending,e=>{e.loading=!0,e.error=null}).addCase(Mr.fulfilled,(e,r)=>{e.loading=!1,e.bookings.unshift(r.payload),e.currentBooking=r.payload}).addCase(Mr.rejected,(e,r)=>{e.loading=!1,e.error=r.error.message||"Failed to create booking"}).addCase(Br.pending,e=>{e.loading=!0,e.error=null}).addCase(Br.fulfilled,(e,r)=>{var i;e.loading=!1;const s=e.bookings.findIndex(o=>o._id===r.payload._id);s!==-1&&(e.bookings[s]=r.payload),((i=e.currentBooking)==null?void 0:i._id)===r.payload._id&&(e.currentBooking=r.payload)}).addCase(Br.rejected,(e,r)=>{e.loading=!1,e.error=r.error.message||"Failed to update booking status"}).addCase(Or.pending,e=>{e.loading=!0,e.error=null}).addCase(Or.fulfilled,(e,r)=>{var i;e.loading=!1;const s=e.bookings.findIndex(o=>o._id===r.payload._id);s!==-1&&(e.bookings[s]=r.payload),((i=e.currentBooking)==null?void 0:i._id)===r.payload._id&&(e.currentBooking=r.payload)}).addCase(Or.rejected,(e,r)=>{e.loading=!1,e.error=r.error.message||"Failed to update payment status"}).addCase(Ur.pending,e=>{e.statsLoading=!0,e.error=null}).addCase(Ur.fulfilled,(e,r)=>{e.statsLoading=!1,e.stats=r.payload}).addCase(Ur.rejected,(e,r)=>{e.statsLoading=!1,e.error=r.error.message||"Failed to fetch booking statistics"}).addCase(qr.pending,e=>{e.loading=!0,e.error=null}).addCase(qr.fulfilled,(e,r)=>{var s;e.loading=!1,e.bookings=e.bookings.filter(i=>i._id!==r.payload),((s=e.currentBooking)==null?void 0:s._id)===r.payload&&(e.currentBooking=null)}).addCase(qr.rejected,(e,r)=>{e.loading=!1,e.error=r.error.message||"Failed to delete booking"})}}),{clearCurrentBooking:dg,clearBookingError:ug}=Lo.actions,Rp=Lo.reducer,Vr={exhibitors:[],loading:!1,error:null,pagination:{total:0,page:1,limit:10,pages:0,hasNextPage:!1,hasPrevPage:!1,nextPage:null,prevPage:null},filters:{status:null,isActive:null,search:null,sortBy:"createdAt",sortOrder:"desc"}},Hr=re("exhibitors/fetchAll",async(n={},{rejectWithValue:e})=>{var r,s;try{return(await ct.getExhibitors(n)).data}catch(i){return e(((s=(r=i.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to fetch exhibitors")}}),Mo=ze({name:"exhibitor",initialState:Vr,reducers:{clearExhibitors:n=>{n.exhibitors=[],n.pagination=Vr.pagination,n.filters=Vr.filters},clearError:n=>{n.error=null}},extraReducers:n=>{n.addCase(Hr.pending,e=>{e.loading=!0,e.error=null}).addCase(Hr.fulfilled,(e,r)=>{e.exhibitors=r.payload.data,e.pagination=r.payload.pagination,e.filters=r.payload.filters,e.loading=!1}).addCase(Hr.rejected,(e,r)=>{e.loading=!1,e.error=r.payload})}}),{clearExhibitors:hg,clearError:pg}=Mo.actions,Tp=Mo.reducer,Ap=async()=>{try{return(await Q.get("/roles")).data}catch(n){throw console.error("Error fetching roles:",n),n}},Pp=async n=>{try{return(await Q.get(`/roles/${n}`)).data}catch(e){throw console.error("Error fetching role:",e),e}},Np=async n=>{try{return(await Q.post("/roles",n)).data}catch(e){throw console.error("Error creating role:",e),e}},$p=async(n,e)=>{try{return(await Q.put(`/roles/${n}`,e)).data}catch(r){throw console.error("Error updating role:",r),r}},zp=async n=>{try{await Q.delete(`/roles/${n}`)}catch(e){throw console.error("Error deleting role:",e),e}},Dp={roles:[],role:null,loading:!1,error:null},Qr=re("roles/fetchRoles",async(n,{rejectWithValue:e})=>{var r,s;try{return await Ap()}catch(i){return e(((s=(r=i.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to fetch roles")}}),Wr=re("roles/fetchRoleById",async(n,{rejectWithValue:e})=>{var r,s;try{return await Pp(n)}catch(i){return e(((s=(r=i.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to fetch role")}}),Yr=re("roles/addRole",async(n,{rejectWithValue:e})=>{var r,s;try{return await Np(n)}catch(i){return e(((s=(r=i.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to create role")}}),Kr=re("roles/modifyRole",async({id:n,roleData:e},{rejectWithValue:r})=>{var s,i;try{return await $p(n,e)}catch(o){return r(((i=(s=o.response)==null?void 0:s.data)==null?void 0:i.message)||"Failed to update role")}}),Gr=re("roles/removeRole",async(n,{rejectWithValue:e})=>{var r,s;try{return await zp(n),n}catch(i){return e(((s=(r=i.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to delete role")}}),Bo=ze({name:"roles",initialState:Dp,reducers:{clearRoleError:n=>{n.error=null},setSelectedRole:(n,e)=>{n.role=e.payload}},extraReducers:n=>{n.addCase(Qr.pending,e=>{e.loading=!0,e.error=null}).addCase(Qr.fulfilled,(e,r)=>{e.loading=!1,e.roles=r.payload}).addCase(Qr.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(Wr.pending,e=>{e.loading=!0,e.error=null}).addCase(Wr.fulfilled,(e,r)=>{e.loading=!1,e.role=r.payload}).addCase(Wr.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(Yr.pending,e=>{e.loading=!0,e.error=null}).addCase(Yr.fulfilled,(e,r)=>{e.loading=!1,e.roles.push(r.payload)}).addCase(Yr.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(Kr.pending,e=>{e.loading=!0,e.error=null}).addCase(Kr.fulfilled,(e,r)=>{var i;e.loading=!1;const s=e.roles.findIndex(o=>o._id===r.payload._id);s!==-1&&(e.roles[s]=r.payload),((i=e.role)==null?void 0:i._id)===r.payload._id&&(e.role=r.payload)}).addCase(Kr.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(Gr.pending,e=>{e.loading=!0,e.error=null}).addCase(Gr.fulfilled,(e,r)=>{var s;e.loading=!1,e.roles=e.roles.filter(i=>i._id!==r.payload),((s=e.role)==null?void 0:s._id)===r.payload&&(e.role=null)}).addCase(Gr.rejected,(e,r)=>{e.loading=!1,e.error=r.payload})}}),{clearRoleError:fg,setSelectedRole:gg}=Bo.actions,Fp=Bo.reducer,Lp=async()=>{try{return(await Q.get("/users")).data}catch(n){throw console.error("Error fetching users:",n),n}},Mp=async n=>{try{return(await Q.get(`/users/${n}`)).data}catch(e){throw console.error("Error fetching user:",e),e}},Bp=async n=>{try{return(await Q.post("/users",n)).data}catch(e){throw console.error("Error creating user:",e),e}},Op=async(n,e)=>{try{return(await Q.put(`/users/${n}`,e)).data}catch(r){throw console.error("Error updating user:",r),r}},qp=async n=>{try{await Q.delete(`/users/${n}`)}catch(e){throw console.error("Error deleting user:",e),e}},Up={users:[],selectedUser:null,loading:!1,error:null},Xr=re("users/fetchUsers",async(n,{rejectWithValue:e})=>{var r,s;try{return await Lp()}catch(i){return e(((s=(r=i.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to fetch users")}}),Jr=re("users/fetchUserById",async(n,{rejectWithValue:e})=>{var r,s;try{return await Mp(n)}catch(i){return e(((s=(r=i.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to fetch user")}}),Zr=re("users/addUser",async(n,{rejectWithValue:e})=>{var r,s;try{return await Bp(n)}catch(i){return e(((s=(r=i.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to create user")}}),es=re("users/modifyUser",async({id:n,userData:e},{rejectWithValue:r})=>{var s,i;try{return await Op(n,e)}catch(o){return r(((i=(s=o.response)==null?void 0:s.data)==null?void 0:i.message)||"Failed to update user")}}),ts=re("users/removeUser",async(n,{rejectWithValue:e})=>{var r,s;try{return await qp(n),n}catch(i){return e(((s=(r=i.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to delete user")}}),Oo=ze({name:"users",initialState:Up,reducers:{clearUserError:n=>{n.error=null},setSelectedUser:(n,e)=>{n.selectedUser=e.payload}},extraReducers:n=>{n.addCase(Xr.pending,e=>{e.loading=!0,e.error=null}).addCase(Xr.fulfilled,(e,r)=>{e.loading=!1,e.users=r.payload}).addCase(Xr.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(Jr.pending,e=>{e.loading=!0,e.error=null}).addCase(Jr.fulfilled,(e,r)=>{e.loading=!1,e.selectedUser=r.payload}).addCase(Jr.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(Zr.pending,e=>{e.loading=!0,e.error=null}).addCase(Zr.fulfilled,(e,r)=>{e.loading=!1,e.users.push(r.payload)}).addCase(Zr.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(es.pending,e=>{e.loading=!0,e.error=null}).addCase(es.fulfilled,(e,r)=>{var i;e.loading=!1;const s=e.users.findIndex(o=>o._id===r.payload._id);s!==-1&&(e.users[s]=r.payload),((i=e.selectedUser)==null?void 0:i._id)===r.payload._id&&(e.selectedUser=r.payload)}).addCase(es.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(ts.pending,e=>{e.loading=!0,e.error=null}).addCase(ts.fulfilled,(e,r)=>{var s;e.loading=!1,e.users=e.users.filter(i=>i._id!==r.payload),((s=e.selectedUser)==null?void 0:s._id)===r.payload&&(e.selectedUser=null)}).addCase(ts.rejected,(e,r)=>{e.loading=!1,e.error=r.payload})}}),{clearUserError:mg,setSelectedUser:xg}=Oo.actions,Vp=Oo.reducer;var Hp=class extends Error{constructor(e){super(e[0].message);Ws(this,"issues");this.name="SchemaError",this.issues=e}},qo=(n=>(n.uninitialized="uninitialized",n.pending="pending",n.fulfilled="fulfilled",n.rejected="rejected",n))(qo||{});function Ai(n){return{status:n,isUninitialized:n==="uninitialized",isLoading:n==="pending",isSuccess:n==="fulfilled",isError:n==="rejected"}}var Pi=nn;function Uo(n,e){if(n===e||!(Pi(n)&&Pi(e)||Array.isArray(n)&&Array.isArray(e)))return e;const r=Object.keys(e),s=Object.keys(n);let i=r.length===s.length;const o=Array.isArray(e)?[]:{};for(const d of r)o[d]=Uo(n[d],e[d]),i&&(i=n[d]===o[d]);return i?n:o}function Mt(n){let e=0;for(const r in n)e++;return e}var Ni=n=>[].concat(...n);function Qp(n){return new RegExp("(^|:)//").test(n)}function Wp(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}function qn(n){return n!=null}function Yp(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}var Kp=n=>n.replace(/\/$/,""),Gp=n=>n.replace(/^\//,"");function Xp(n,e){if(!n)return e;if(!e)return n;if(Qp(e))return e;const r=n.endsWith("/")||!e.startsWith("?")?"/":"";return n=Kp(n),e=Gp(e),`${n}${r}${e}`}function Jp(n,e,r){return n.has(e)?n.get(e):n.set(e,r).get(e)}var $i=(...n)=>fetch(...n),Zp=n=>n.status>=200&&n.status<=299,ef=n=>/ion\/(vnd\.api\+)?json/.test(n.get("content-type")||"");function zi(n){if(!nn(n))return n;const e={...n};for(const[r,s]of Object.entries(e))s===void 0&&delete e[r];return e}function qs({baseUrl:n,prepareHeaders:e=j=>j,fetchFn:r=$i,paramsSerializer:s,isJsonContentType:i=ef,jsonContentType:o="application/json",jsonReplacer:d,timeout:u,responseHandler:p,validateStatus:g,...R}={}){return typeof fetch>"u"&&r===$i&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),async(x,w,A)=>{const{getState:T,extra:P,endpoint:S,forced:N,type:C}=w;let a,{url:l,headers:c=new Headers(R.headers),params:f=void 0,responseHandler:m=p??"json",validateStatus:E=g??Zp,timeout:y=u,...b}=typeof x=="string"?{url:x}:x,k,I=w.signal;y&&(k=new AbortController,w.signal.addEventListener("abort",k.abort),I=k.signal);let _={...R,signal:I,...b};c=new Headers(zi(c)),_.headers=await e(c,{getState:T,arg:x,extra:P,endpoint:S,forced:N,type:C,extraOptions:A})||c;const B=q=>typeof q=="object"&&(nn(q)||Array.isArray(q)||typeof q.toJSON=="function");if(!_.headers.has("content-type")&&B(_.body)&&_.headers.set("content-type",o),B(_.body)&&i(_.headers)&&(_.body=JSON.stringify(_.body,d)),f){const q=~l.indexOf("?")?"&":"?",U=s?s(f):new URLSearchParams(zi(f));l+=q+U}l=Xp(n,l);const $=new Request(l,_);a={request:new Request(l,_)};let z,O=!1,H=k&&setTimeout(()=>{O=!0,k.abort()},y);try{z=await r($)}catch(q){return{error:{status:O?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(q)},meta:a}}finally{H&&clearTimeout(H),k==null||k.signal.removeEventListener("abort",k.abort)}const F=z.clone();a.response=F;let L,V="";try{let q;if(await Promise.all([j(z,m).then(U=>L=U,U=>q=U),F.text().then(U=>V=U,()=>{})]),q)throw q}catch(q){return{error:{status:"PARSING_ERROR",originalStatus:z.status,data:V,error:String(q)},meta:a}}return E(z,L)?{data:L,meta:a}:{error:{status:z.status,data:L},meta:a}};async function j(x,w){if(typeof w=="function")return w(x);if(w==="content-type"&&(w=i(x.headers)?"json":"text"),w==="json"){const A=await x.text();return A.length?JSON.parse(A):null}return x.text()}}var Di=class{constructor(n,e=void 0){this.value=n,this.meta=e}},Us=Ut("__rtkq/focused"),Vo=Ut("__rtkq/unfocused"),Vs=Ut("__rtkq/online"),Ho=Ut("__rtkq/offline");function Zn(n){return n.type==="query"}function tf(n){return n.type==="mutation"}function er(n){return n.type==="infinitequery"}function Un(n){return Zn(n)||er(n)}function Hs(n,e,r,s,i,o){return nf(n)?n(e,r,s,i).filter(qn).map(ws).map(o):Array.isArray(n)?n.map(ws).map(o):[]}function nf(n){return typeof n=="function"}function ws(n){return typeof n=="string"?{type:n}:n}function rf(n,e){return n.catch(e)}var an=Symbol("forceQueryFn"),vs=n=>typeof n[an]=="function";function sf({serializeQueryArgs:n,queryThunk:e,infiniteQueryThunk:r,mutationThunk:s,api:i,context:o}){const d=new Map,u=new Map,{unsubscribeQueryResult:p,removeMutationResult:g,updateSubscriptionOptions:R}=i.internalActions;return{buildInitiateQuery:P,buildInitiateInfiniteQuery:S,buildInitiateMutation:N,getRunningQueryThunk:j,getRunningMutationThunk:x,getRunningQueriesThunk:w,getRunningMutationsThunk:A};function j(C,a){return l=>{var m;const c=o.endpointDefinitions[C],f=n({queryArgs:a,endpointDefinition:c,endpointName:C});return(m=d.get(l))==null?void 0:m[f]}}function x(C,a){return l=>{var c;return(c=u.get(l))==null?void 0:c[a]}}function w(){return C=>Object.values(d.get(C)||{}).filter(qn)}function A(){return C=>Object.values(u.get(C)||{}).filter(qn)}function T(C,a){const l=(c,{subscribe:f=!0,forceRefetch:m,subscriptionOptions:E,[an]:y,...b}={})=>(k,I)=>{var X;const _=n({queryArgs:c,endpointDefinition:a,endpointName:C});let B;const $={...b,type:"query",subscribe:f,forceRefetch:m,subscriptionOptions:E,endpointName:C,originalArgs:c,queryCacheKey:_,[an]:y};if(Zn(a))B=e($);else{const{direction:Y,initialPageParam:pe}=b;B=r({...$,direction:Y,initialPageParam:pe})}const v=i.endpoints[C].select(c),z=k(B),O=v(I()),{requestId:H,abort:F}=z,L=O.requestId!==H,V=(X=d.get(k))==null?void 0:X[_],q=()=>v(I()),U=Object.assign(y?z.then(q):L&&!V?Promise.resolve(O):Promise.all([V,z]).then(q),{arg:c,requestId:H,subscriptionOptions:E,queryCacheKey:_,abort:F,async unwrap(){const Y=await U;if(Y.isError)throw Y.error;return Y.data},refetch:()=>k(l(c,{subscribe:!1,forceRefetch:!0})),unsubscribe(){f&&k(p({queryCacheKey:_,requestId:H}))},updateSubscriptionOptions(Y){U.subscriptionOptions=Y,k(R({endpointName:C,requestId:H,queryCacheKey:_,options:Y}))}});if(!V&&!L&&!y){const Y=Jp(d,k,{});Y[_]=U,U.then(()=>{delete Y[_],Mt(Y)||d.delete(k)})}return U};return l}function P(C,a){return T(C,a)}function S(C,a){return T(C,a)}function N(C){return(a,{track:l=!0,fixedCacheKey:c}={})=>(f,m)=>{const E=s({type:"mutation",endpointName:C,originalArgs:a,track:l,fixedCacheKey:c}),y=f(E),{requestId:b,abort:k,unwrap:I}=y,_=rf(y.unwrap().then(z=>({data:z})),z=>({error:z})),B=()=>{f(g({requestId:b,fixedCacheKey:c}))},$=Object.assign(_,{arg:y.arg,requestId:b,abort:k,unwrap:I,reset:B}),v=u.get(f)||{};return u.set(f,v),v[b]=$,$.then(()=>{delete v[b],Mt(v)||u.delete(f)}),c&&(v[c]=$,$.then(()=>{v[c]===$&&(delete v[c],Mt(v)||u.delete(f))})),$}}}var Qo=class extends Hp{constructor(n,e,r,s){super(n),this.value=e,this.schemaName=r,this._bqMeta=s}};async function Et(n,e,r,s){const i=await n["~standard"].validate(e);if(i.issues)throw new Qo(i.issues,e,r,s);return i.value}function of(n){return n}var Xt=(n={})=>({...n,[Yi]:!0});function af({reducerPath:n,baseQuery:e,context:{endpointDefinitions:r},serializeQueryArgs:s,api:i,assertTagType:o,selectors:d,onSchemaFailure:u,catchSchemaFailure:p,skipSchemaValidation:g}){const R=(b,k,I,_)=>(B,$)=>{const v=r[b],z=s({queryArgs:k,endpointDefinition:v,endpointName:b});if(B(i.internalActions.queryResultPatched({queryCacheKey:z,patches:I})),!_)return;const O=i.endpoints[b].select(k)($()),H=Hs(v.providesTags,O.data,void 0,k,{},o);B(i.internalActions.updateProvidedBy([{queryCacheKey:z,providedTags:H}]))};function j(b,k,I=0){const _=[k,...b];return I&&_.length>I?_.slice(0,-1):_}function x(b,k,I=0){const _=[...b,k];return I&&_.length>I?_.slice(1):_}const w=(b,k,I,_=!0)=>(B,$)=>{const z=i.endpoints[b].select(k)($()),O={patches:[],inversePatches:[],undo:()=>B(i.util.patchQueryData(b,k,O.inversePatches,_))};if(z.status==="uninitialized")return O;let H;if("data"in z)if(fa(z.data)){const[F,L,V]=Gi(z.data,I);O.patches.push(...L),O.inversePatches.push(...V),H=F}else H=I(z.data),O.patches.push({op:"replace",path:[],value:H}),O.inversePatches.push({op:"replace",path:[],value:z.data});return O.patches.length===0||B(i.util.patchQueryData(b,k,O.patches,_)),O},A=(b,k,I)=>_=>_(i.endpoints[b].initiate(k,{subscribe:!1,forceRefetch:!0,[an]:()=>({data:I})})),T=(b,k)=>b.query&&b[k]?b[k]:of,P=async(b,{signal:k,abort:I,rejectWithValue:_,fulfillWithValue:B,dispatch:$,getState:v,extra:z})=>{var L,V;const O=r[b.endpointName],{metaSchema:H,skipSchemaValidation:F=g}=O;try{let q=T(O,"transformResponse");const U={signal:k,abort:I,dispatch:$,getState:v,extra:z,endpoint:b.endpointName,type:b.type,forced:b.type==="query"?S(b,v()):void 0,queryCacheKey:b.type==="query"?b.queryCacheKey:void 0},X=b.type==="query"?b[an]:void 0;let Y;const pe=async(oe,ee,de,Te)=>{if(ee==null&&oe.pages.length)return Promise.resolve({data:oe});const M={queryArg:b.originalArgs,pageParam:ee},J=await we(M),ae=Te?j:x;return{data:{pages:ae(oe.pages,J.data,de),pageParams:ae(oe.pageParams,ee,de)},meta:J.meta}};async function we(oe){let ee;const{extraOptions:de,argSchema:Te,rawResponseSchema:M,responseSchema:J}=O;if(Te&&!F&&(oe=await Et(Te,oe,"argSchema",{})),X?ee=X():O.query?ee=await e(O.query(oe),U,de):ee=await O.queryFn(oe,U,de,Ce=>e(Ce,U,de)),typeof process<"u",ee.error)throw new Di(ee.error,ee.meta);let{data:ae}=ee;M&&!F&&(ae=await Et(M,ee.data,"rawResponseSchema",ee.meta));let Se=await q(ae,ee.meta,oe);return J&&!F&&(Se=await Et(J,Se,"responseSchema",ee.meta)),{...ee,data:Se}}if(b.type==="query"&&"infiniteQueryOptions"in O){const{infiniteQueryOptions:oe}=O,{maxPages:ee=1/0}=oe;let de;const Te={pages:[],pageParams:[]},M=(L=d.selectQueryEntry(v(),b.queryCacheKey))==null?void 0:L.data,ae=S(b,v())&&!b.direction||!M?Te:M;if("direction"in b&&b.direction&&ae.pages.length){const Se=b.direction==="backward",Fe=(Se?Wo:js)(oe,ae);de=await pe(ae,Fe,ee,Se)}else{const{initialPageParam:Se=oe.initialPageParam}=b,Ce=(M==null?void 0:M.pageParams)??[],Fe=Ce[0]??Se,Qt=Ce.length;de=await pe(ae,Fe,ee),X&&(de={data:de.data.pages[0]});for(let Tt=1;Tt<Qt;Tt++){const pt=js(oe,de.data);de=await pe(de.data,pt,ee)}}Y=de}else Y=await we(b.originalArgs);return H&&!F&&Y.meta&&(Y.meta=await Et(H,Y.meta,"metaSchema",Y.meta)),B(Y.data,Xt({fulfilledTimeStamp:Date.now(),baseQueryMeta:Y.meta}))}catch(q){let U=q;if(U instanceof Di){let X=T(O,"transformErrorResponse");const{rawErrorResponseSchema:Y,errorResponseSchema:pe}=O;let{value:we,meta:oe}=U;try{Y&&!F&&(we=await Et(Y,we,"rawErrorResponseSchema",oe)),H&&!F&&(oe=await Et(H,oe,"metaSchema",oe));let ee=await X(we,oe,b.originalArgs);return pe&&!F&&(ee=await Et(pe,ee,"errorResponseSchema",oe)),_(ee,Xt({baseQueryMeta:oe}))}catch(ee){U=ee}}try{if(U instanceof Qo){const X={endpoint:b.endpointName,arg:b.originalArgs,type:b.type,queryCacheKey:b.type==="query"?b.queryCacheKey:void 0};(V=O.onSchemaFailure)==null||V.call(O,U,X),u==null||u(U,X);const{catchSchemaFailure:Y=p}=O;if(Y)return _(Y(U,X),Xt({baseQueryMeta:U._bqMeta}))}}catch(X){U=X}throw console.error(U),U}};function S(b,k){const I=d.selectQueryEntry(k,b.queryCacheKey),_=d.selectConfig(k).refetchOnMountOrArgChange,B=I==null?void 0:I.fulfilledTimeStamp,$=b.forceRefetch??(b.subscribe&&_);return $?$===!0||(Number(new Date)-Number(B))/1e3>=$:!1}const N=()=>re(`${n}/executeQuery`,P,{getPendingMeta({arg:k}){const I=r[k.endpointName];return Xt({startedTimeStamp:Date.now(),...er(I)?{direction:k.direction}:{}})},condition(k,{getState:I}){var F;const _=I(),B=d.selectQueryEntry(_,k.queryCacheKey),$=B==null?void 0:B.fulfilledTimeStamp,v=k.originalArgs,z=B==null?void 0:B.originalArgs,O=r[k.endpointName],H=k.direction;return vs(k)?!0:(B==null?void 0:B.status)==="pending"?!1:S(k,_)||Zn(O)&&((F=O==null?void 0:O.forceRefetch)!=null&&F.call(O,{currentArg:v,previousArg:z,endpointState:B,state:_}))?!0:!($&&!H)},dispatchConditionRejection:!0}),C=N(),a=N(),l=re(`${n}/executeMutation`,P,{getPendingMeta(){return Xt({startedTimeStamp:Date.now()})}}),c=b=>"force"in b,f=b=>"ifOlderThan"in b,m=(b,k,I)=>(_,B)=>{const $=c(I)&&I.force,v=f(I)&&I.ifOlderThan,z=(H=!0)=>{const F={forceRefetch:H,isPrefetch:!0};return i.endpoints[b].initiate(k,F)},O=i.endpoints[b].select(k)(B());if($)_(z());else if(v){const H=O==null?void 0:O.fulfilledTimeStamp;if(!H){_(z());return}(Number(new Date)-Number(new Date(H)))/1e3>=v&&_(z())}else _(z(!1))};function E(b){return k=>{var I,_;return((_=(I=k==null?void 0:k.meta)==null?void 0:I.arg)==null?void 0:_.endpointName)===b}}function y(b,k){return{matchPending:tr(Ki(b),E(k)),matchFulfilled:tr(_t(b),E(k)),matchRejected:tr(Cs(b),E(k))}}return{queryThunk:C,mutationThunk:l,infiniteQueryThunk:a,prefetch:m,updateQueryData:w,upsertQueryData:A,patchQueryData:R,buildMatchThunkActions:y}}function js(n,{pages:e,pageParams:r}){const s=e.length-1;return n.getNextPageParam(e[s],e,r[s],r)}function Wo(n,{pages:e,pageParams:r}){var s;return(s=n.getPreviousPageParam)==null?void 0:s.call(n,e[0],e,r[0],r)}function Yo(n,e,r,s){return Hs(r[n.meta.arg.endpointName][e],_t(n)?n.payload:void 0,Es(n)?n.payload:void 0,n.meta.arg.originalArgs,"baseQueryMeta"in n.meta?n.meta.baseQueryMeta:void 0,s)}function kn(n,e,r){const s=n[e];s&&r(s)}function ln(n){return("arg"in n?n.arg.fixedCacheKey:n.fixedCacheKey)??n.requestId}function Fi(n,e,r){const s=n[ln(e)];s&&r(s)}var En={};function lf({reducerPath:n,queryThunk:e,mutationThunk:r,serializeQueryArgs:s,context:{endpointDefinitions:i,apiUid:o,extractRehydrationInfo:d,hasRehydrationInfo:u},assertTagType:p,config:g}){const R=Ut(`${n}/resetApiState`);function j(E,y,b,k){var I;E[I=y.queryCacheKey]??(E[I]={status:"uninitialized",endpointName:y.endpointName}),kn(E,y.queryCacheKey,_=>{_.status="pending",_.requestId=b&&_.requestId?_.requestId:k.requestId,y.originalArgs!==void 0&&(_.originalArgs=y.originalArgs),_.startedTimeStamp=k.startedTimeStamp;const B=i[k.arg.endpointName];er(B)&&"direction"in y&&(_.direction=y.direction)})}function x(E,y,b,k){kn(E,y.arg.queryCacheKey,I=>{if(I.requestId!==y.requestId&&!k)return;const{merge:_}=i[y.arg.endpointName];if(I.status="fulfilled",_)if(I.data!==void 0){const{fulfilledTimeStamp:B,arg:$,baseQueryMeta:v,requestId:z}=y;let O=ks(I.data,H=>_(H,b,{arg:$.originalArgs,baseQueryMeta:v,fulfilledTimeStamp:B,requestId:z}));I.data=O}else I.data=b;else I.data=i[y.arg.endpointName].structuralSharing??!0?Uo(ma(I.data)?xa(I.data):I.data,b):b;delete I.error,I.fulfilledTimeStamp=y.fulfilledTimeStamp})}const w=ze({name:`${n}/queries`,initialState:En,reducers:{removeQueryResult:{reducer(E,{payload:{queryCacheKey:y}}){delete E[y]},prepare:Yt()},cacheEntriesUpserted:{reducer(E,y){for(const b of y.payload){const{queryDescription:k,value:I}=b;j(E,k,!0,{arg:k,requestId:y.meta.requestId,startedTimeStamp:y.meta.timestamp}),x(E,{arg:k,requestId:y.meta.requestId,fulfilledTimeStamp:y.meta.timestamp,baseQueryMeta:{}},I,!0)}},prepare:E=>({payload:E.map(k=>{const{endpointName:I,arg:_,value:B}=k,$=i[I];return{queryDescription:{type:"query",endpointName:I,originalArgs:k.arg,queryCacheKey:s({queryArgs:_,endpointDefinition:$,endpointName:I})},value:B}}),meta:{[Yi]:!0,requestId:Hi(),timestamp:Date.now()}})},queryResultPatched:{reducer(E,{payload:{queryCacheKey:y,patches:b}}){kn(E,y,k=>{k.data=Ks(k.data,b.concat())})},prepare:Yt()}},extraReducers(E){E.addCase(e.pending,(y,{meta:b,meta:{arg:k}})=>{const I=vs(k);j(y,k,I,b)}).addCase(e.fulfilled,(y,{meta:b,payload:k})=>{const I=vs(b.arg);x(y,b,k,I)}).addCase(e.rejected,(y,{meta:{condition:b,arg:k,requestId:I},error:_,payload:B})=>{kn(y,k.queryCacheKey,$=>{if(!b){if($.requestId!==I)return;$.status="rejected",$.error=B??_}})}).addMatcher(u,(y,b)=>{const{queries:k}=d(b);for(const[I,_]of Object.entries(k))((_==null?void 0:_.status)==="fulfilled"||(_==null?void 0:_.status)==="rejected")&&(y[I]=_)})}}),A=ze({name:`${n}/mutations`,initialState:En,reducers:{removeMutationResult:{reducer(E,{payload:y}){const b=ln(y);b in E&&delete E[b]},prepare:Yt()}},extraReducers(E){E.addCase(r.pending,(y,{meta:b,meta:{requestId:k,arg:I,startedTimeStamp:_}})=>{I.track&&(y[ln(b)]={requestId:k,status:"pending",endpointName:I.endpointName,startedTimeStamp:_})}).addCase(r.fulfilled,(y,{payload:b,meta:k})=>{k.arg.track&&Fi(y,k,I=>{I.requestId===k.requestId&&(I.status="fulfilled",I.data=b,I.fulfilledTimeStamp=k.fulfilledTimeStamp)})}).addCase(r.rejected,(y,{payload:b,error:k,meta:I})=>{I.arg.track&&Fi(y,I,_=>{_.requestId===I.requestId&&(_.status="rejected",_.error=b??k)})}).addMatcher(u,(y,b)=>{const{mutations:k}=d(b);for(const[I,_]of Object.entries(k))((_==null?void 0:_.status)==="fulfilled"||(_==null?void 0:_.status)==="rejected")&&I!==(_==null?void 0:_.requestId)&&(y[I]=_)})}}),T={tags:{},keys:{}},P=ze({name:`${n}/invalidation`,initialState:T,reducers:{updateProvidedBy:{reducer(E,y){var b,k,I;for(const{queryCacheKey:_,providedTags:B}of y.payload){S(E,_);for(const{type:$,id:v}of B){const z=(k=(b=E.tags)[$]??(b[$]={}))[I=v||"__internal_without_id"]??(k[I]=[]);z.includes(_)||z.push(_)}E.keys[_]=B}},prepare:Yt()}},extraReducers(E){E.addCase(w.actions.removeQueryResult,(y,{payload:{queryCacheKey:b}})=>{S(y,b)}).addMatcher(u,(y,b)=>{var I,_,B;const{provided:k}=d(b);for(const[$,v]of Object.entries(k))for(const[z,O]of Object.entries(v)){const H=(_=(I=y.tags)[$]??(I[$]={}))[B=z||"__internal_without_id"]??(_[B]=[]);for(const F of O)H.includes(F)||H.push(F)}}).addMatcher(Ln(_t(e),Es(e)),(y,b)=>{N(y,[b])}).addMatcher(w.actions.cacheEntriesUpserted.match,(y,b)=>{const k=b.payload.map(({queryDescription:I,value:_})=>({type:"UNKNOWN",payload:_,meta:{requestStatus:"fulfilled",requestId:"UNKNOWN",arg:I}}));N(y,k)})}});function S(E,y){var k;const b=E.keys[y]??[];for(const I of b){const _=I.type,B=I.id??"__internal_without_id",$=(k=E.tags[_])==null?void 0:k[B];$&&(E.tags[_][B]=$.filter(v=>v!==y))}delete E.keys[y]}function N(E,y){const b=y.map(k=>{const I=Yo(k,"providesTags",i,p),{queryCacheKey:_}=k.meta.arg;return{queryCacheKey:_,providedTags:I}});P.caseReducers.updateProvidedBy(E,P.actions.updateProvidedBy(b))}const C=ze({name:`${n}/subscriptions`,initialState:En,reducers:{updateSubscriptionOptions(E,y){},unsubscribeQueryResult(E,y){},internal_getRTKQSubscriptions(){}}}),a=ze({name:`${n}/internalSubscriptions`,initialState:En,reducers:{subscriptionsUpdated:{reducer(E,y){return Ks(E,y.payload)},prepare:Yt()}}}),l=ze({name:`${n}/config`,initialState:{online:Yp(),focused:Wp(),middlewareRegistered:!1,...g},reducers:{middlewareRegistered(E,{payload:y}){E.middlewareRegistered=E.middlewareRegistered==="conflict"||o!==y?"conflict":!0}},extraReducers:E=>{E.addCase(Vs,y=>{y.online=!0}).addCase(Ho,y=>{y.online=!1}).addCase(Us,y=>{y.focused=!0}).addCase(Vo,y=>{y.focused=!1}).addMatcher(u,y=>({...y}))}}),c=pa({queries:w.reducer,mutations:A.reducer,provided:P.reducer,subscriptions:a.reducer,config:l.reducer}),f=(E,y)=>c(R.match(y)?void 0:E,y),m={...l.actions,...w.actions,...C.actions,...a.actions,...A.actions,...P.actions,resetApiState:R};return{reducer:f,actions:m}}var We=Symbol.for("RTKQ/skipToken"),Ko={status:"uninitialized"},Li=ks(Ko,()=>{}),Mi=ks(Ko,()=>{});function cf({serializeQueryArgs:n,reducerPath:e,createSelector:r}){const s=C=>Li,i=C=>Mi;return{buildQuerySelector:x,buildInfiniteQuerySelector:w,buildMutationSelector:A,selectInvalidatedBy:T,selectCachedArgsForQuery:P,selectApiState:d,selectQueries:u,selectMutations:g,selectQueryEntry:p,selectConfig:R};function o(C){return{...C,...Ai(C.status)}}function d(C){return C[e]}function u(C){var a;return(a=d(C))==null?void 0:a.queries}function p(C,a){var l;return(l=u(C))==null?void 0:l[a]}function g(C){var a;return(a=d(C))==null?void 0:a.mutations}function R(C){var a;return(a=d(C))==null?void 0:a.config}function j(C,a,l){return c=>{if(c===We)return r(s,l);const f=n({queryArgs:c,endpointDefinition:a,endpointName:C});return r(E=>p(E,f)??Li,l)}}function x(C,a){return j(C,a,o)}function w(C,a){const{infiniteQueryOptions:l}=a;function c(f){const m={...f,...Ai(f.status)},{isLoading:E,isError:y,direction:b}=m,k=b==="forward",I=b==="backward";return{...m,hasNextPage:S(l,m.data),hasPreviousPage:N(l,m.data),isFetchingNextPage:E&&k,isFetchingPreviousPage:E&&I,isFetchNextPageError:y&&k,isFetchPreviousPageError:y&&I}}return j(C,a,c)}function A(){return C=>{let a;return typeof C=="object"?a=ln(C)??We:a=C,r(a===We?i:f=>{var m,E;return((E=(m=d(f))==null?void 0:m.mutations)==null?void 0:E[a])??Mi},o)}}function T(C,a){const l=C[e],c=new Set;for(const f of a.filter(qn).map(ws)){const m=l.provided.tags[f.type];if(!m)continue;let E=(f.id!==void 0?m[f.id]:Ni(Object.values(m)))??[];for(const y of E)c.add(y)}return Ni(Array.from(c.values()).map(f=>{const m=l.queries[f];return m?[{queryCacheKey:f,endpointName:m.endpointName,originalArgs:m.originalArgs}]:[]}))}function P(C,a){return Object.values(u(C)).filter(l=>(l==null?void 0:l.endpointName)===a&&l.status!=="uninitialized").map(l=>l.originalArgs)}function S(C,a){return a?js(C,a)!=null:!1}function N(C,a){return!a||!C.getPreviousPageParam?!1:Wo(C,a)!=null}}var $t=WeakMap?new WeakMap:void 0,Vn=({endpointName:n,queryArgs:e})=>{let r="";const s=$t==null?void 0:$t.get(e);if(typeof s=="string")r=s;else{const i=JSON.stringify(e,(o,d)=>(d=typeof d=="bigint"?{$bigint:d.toString()}:d,d=nn(d)?Object.keys(d).sort().reduce((u,p)=>(u[p]=d[p],u),{}):d,d));nn(e)&&($t==null||$t.set(e,i)),r=i}return`${n}(${r})`};function Go(...n){return function(r){const s=Ys(g=>{var R;return(R=r.extractRehydrationInfo)==null?void 0:R.call(r,g,{reducerPath:r.reducerPath??"api"})}),i={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...r,extractRehydrationInfo:s,serializeQueryArgs(g){let R=Vn;if("serializeQueryArgs"in g.endpointDefinition){const j=g.endpointDefinition.serializeQueryArgs;R=x=>{const w=j(x);return typeof w=="string"?w:Vn({...x,queryArgs:w})}}else r.serializeQueryArgs&&(R=r.serializeQueryArgs);return R(g)},tagTypes:[...r.tagTypes||[]]},o={endpointDefinitions:{},batch(g){g()},apiUid:Hi(),extractRehydrationInfo:s,hasRehydrationInfo:Ys(g=>s(g)!=null)},d={injectEndpoints:p,enhanceEndpoints({addTagTypes:g,endpoints:R}){if(g)for(const j of g)i.tagTypes.includes(j)||i.tagTypes.push(j);if(R)for(const[j,x]of Object.entries(R))typeof x=="function"?x(o.endpointDefinitions[j]):Object.assign(o.endpointDefinitions[j]||{},x);return d}},u=n.map(g=>g.init(d,i,o));function p(g){const R=g.endpoints({query:j=>({...j,type:"query"}),mutation:j=>({...j,type:"mutation"}),infiniteQuery:j=>({...j,type:"infinitequery"})});for(const[j,x]of Object.entries(R)){if(g.overrideExisting!==!0&&j in o.endpointDefinitions){if(g.overrideExisting==="throw")throw new Error(Qi(39));continue}o.endpointDefinitions[j]=x;for(const w of u)w.injectEndpoint(j,x)}return d}return d.injectEndpoints({endpoints:r.endpoints})}}function at(n,...e){return Object.assign(n,...e)}var df=({api:n,queryThunk:e,internalState:r})=>{const s=`${n.reducerPath}/subscriptions`;let i=null,o=null;const{updateSubscriptionOptions:d,unsubscribeQueryResult:u}=n.internalActions,p=(w,A)=>{var P,S,N;if(d.match(A)){const{queryCacheKey:C,requestId:a,options:l}=A.payload;return(P=w==null?void 0:w[C])!=null&&P[a]&&(w[C][a]=l),!0}if(u.match(A)){const{queryCacheKey:C,requestId:a}=A.payload;return w[C]&&delete w[C][a],!0}if(n.internalActions.removeQueryResult.match(A))return delete w[A.payload.queryCacheKey],!0;if(e.pending.match(A)){const{meta:{arg:C,requestId:a}}=A,l=w[S=C.queryCacheKey]??(w[S]={});return l[`${a}_running`]={},C.subscribe&&(l[a]=C.subscriptionOptions??l[a]??{}),!0}let T=!1;if(e.fulfilled.match(A)||e.rejected.match(A)){const C=w[A.meta.arg.queryCacheKey]||{},a=`${A.meta.requestId}_running`;T||(T=!!C[a]),delete C[a]}if(e.rejected.match(A)){const{meta:{condition:C,arg:a,requestId:l}}=A;if(C&&a.subscribe){const c=w[N=a.queryCacheKey]??(w[N]={});c[l]=a.subscriptionOptions??c[l]??{},T=!0}}return T},g=()=>r.currentSubscriptions,x={getSubscriptions:g,getSubscriptionCount:w=>{const T=g()[w]??{};return Mt(T)},isRequestSubscribed:(w,A)=>{var P;const T=g();return!!((P=T==null?void 0:T[w])!=null&&P[A])}};return(w,A)=>{if(i||(i=JSON.parse(JSON.stringify(r.currentSubscriptions))),n.util.resetApiState.match(w))return i=r.currentSubscriptions={},o=null,[!0,!1];if(n.internalActions.internal_getRTKQSubscriptions.match(w))return[!1,x];const T=p(r.currentSubscriptions,w);let P=!0;if(T){o||(o=setTimeout(()=>{const C=JSON.parse(JSON.stringify(r.currentSubscriptions)),[,a]=Gi(i,()=>C);A.next(n.internalActions.subscriptionsUpdated(a)),i=C,o=null},500));const S=typeof w.type=="string"&&!!w.type.startsWith(s),N=e.rejected.match(w)&&w.meta.condition&&!!w.meta.arg.subscribe;P=!S&&!N}return[P,!1]}};function uf(n){for(const e in n)return!1;return!0}var hf=2147483647/1e3-1,pf=({reducerPath:n,api:e,queryThunk:r,context:s,internalState:i,selectors:{selectQueryEntry:o,selectConfig:d}})=>{const{removeQueryResult:u,unsubscribeQueryResult:p,cacheEntriesUpserted:g}=e.internalActions,R=Ln(p.match,r.fulfilled,r.rejected,g.match);function j(P){const S=i.currentSubscriptions[P];return!!S&&!uf(S)}const x={},w=(P,S,N)=>{const C=S.getState(),a=d(C);if(R(P)){let l;if(g.match(P))l=P.payload.map(c=>c.queryDescription.queryCacheKey);else{const{queryCacheKey:c}=p.match(P)?P.payload:P.meta.arg;l=[c]}A(l,S,a)}if(e.util.resetApiState.match(P))for(const[l,c]of Object.entries(x))c&&clearTimeout(c),delete x[l];if(s.hasRehydrationInfo(P)){const{queries:l}=s.extractRehydrationInfo(P);A(Object.keys(l),S,a)}};function A(P,S,N){const C=S.getState();for(const a of P){const l=o(C,a);T(a,l==null?void 0:l.endpointName,S,N)}}function T(P,S,N,C){const a=s.endpointDefinitions[S],l=(a==null?void 0:a.keepUnusedDataFor)??C.keepUnusedDataFor;if(l===1/0)return;const c=Math.max(0,Math.min(l,hf));if(!j(P)){const f=x[P];f&&clearTimeout(f),x[P]=setTimeout(()=>{j(P)||N.dispatch(u({queryCacheKey:P})),delete x[P]},c*1e3)}}return w},Bi=new Error("Promise never resolved before cacheEntryRemoved."),ff=({api:n,reducerPath:e,context:r,queryThunk:s,mutationThunk:i,internalState:o,selectors:{selectQueryEntry:d,selectApiState:u}})=>{const p=Gs(s),g=Gs(i),R=_t(s,i),j={};function x(S,N,C){const a=j[S];a!=null&&a.valueResolved&&(a.valueResolved({data:N,meta:C}),delete a.valueResolved)}function w(S){const N=j[S];N&&(delete j[S],N.cacheEntryRemoved())}const A=(S,N,C)=>{const a=T(S);function l(c,f,m,E){const y=d(C,f),b=d(N.getState(),f);!y&&b&&P(c,E,f,N,m)}if(s.pending.match(S))l(S.meta.arg.endpointName,a,S.meta.requestId,S.meta.arg.originalArgs);else if(n.internalActions.cacheEntriesUpserted.match(S))for(const{queryDescription:c,value:f}of S.payload){const{endpointName:m,originalArgs:E,queryCacheKey:y}=c;l(m,y,S.meta.requestId,E),x(y,f,{})}else if(i.pending.match(S))N.getState()[e].mutations[a]&&P(S.meta.arg.endpointName,S.meta.arg.originalArgs,a,N,S.meta.requestId);else if(R(S))x(a,S.payload,S.meta.baseQueryMeta);else if(n.internalActions.removeQueryResult.match(S)||n.internalActions.removeMutationResult.match(S))w(a);else if(n.util.resetApiState.match(S))for(const c of Object.keys(j))w(c)};function T(S){return p(S)?S.meta.arg.queryCacheKey:g(S)?S.meta.arg.fixedCacheKey??S.meta.requestId:n.internalActions.removeQueryResult.match(S)?S.payload.queryCacheKey:n.internalActions.removeMutationResult.match(S)?ln(S.payload):""}function P(S,N,C,a,l){const c=r.endpointDefinitions[S],f=c==null?void 0:c.onCacheEntryAdded;if(!f)return;const m={},E=new Promise(B=>{m.cacheEntryRemoved=B}),y=Promise.race([new Promise(B=>{m.valueResolved=B}),E.then(()=>{throw Bi})]);y.catch(()=>{}),j[C]=m;const b=n.endpoints[S].select(Un(c)?N:C),k=a.dispatch((B,$,v)=>v),I={...a,getCacheEntry:()=>b(a.getState()),requestId:l,extra:k,updateCachedData:Un(c)?B=>a.dispatch(n.util.updateQueryData(S,N,B)):void 0,cacheDataLoaded:y,cacheEntryRemoved:E},_=f(N,I);Promise.resolve(_).catch(B=>{if(B!==Bi)throw B})}return A},gf=({api:n,context:{apiUid:e},reducerPath:r})=>(s,i)=>{n.util.resetApiState.match(s)&&i.dispatch(n.internalActions.middlewareRegistered(e))},mf=({reducerPath:n,context:e,context:{endpointDefinitions:r},mutationThunk:s,queryThunk:i,api:o,assertTagType:d,refetchQuery:u,internalState:p})=>{const{removeQueryResult:g}=o.internalActions,R=Ln(_t(s),Es(s)),j=Ln(_t(s,i),Cs(s,i));let x=[];const w=(P,S)=>{R(P)?T(Yo(P,"invalidatesTags",r,d),S):j(P)?T([],S):o.util.invalidateTags.match(P)&&T(Hs(P.payload,void 0,void 0,void 0,void 0,d),S)};function A(P){var C;const{queries:S,mutations:N}=P;for(const a of[S,N])for(const l in a)if(((C=a[l])==null?void 0:C.status)==="pending")return!0;return!1}function T(P,S){const N=S.getState(),C=N[n];if(x.push(...P),C.config.invalidationBehavior==="delayed"&&A(C))return;const a=x;if(x=[],a.length===0)return;const l=o.util.selectInvalidatedBy(N,a);e.batch(()=>{const c=Array.from(l.values());for(const{queryCacheKey:f}of c){const m=C.queries[f],E=p.currentSubscriptions[f]??{};m&&(Mt(E)===0?S.dispatch(g({queryCacheKey:f})):m.status!=="uninitialized"&&S.dispatch(u(m)))}})}return w},xf=({reducerPath:n,queryThunk:e,api:r,refetchQuery:s,internalState:i})=>{const o={},d=(x,w)=>{(r.internalActions.updateSubscriptionOptions.match(x)||r.internalActions.unsubscribeQueryResult.match(x))&&p(x.payload,w),(e.pending.match(x)||e.rejected.match(x)&&x.meta.condition)&&p(x.meta.arg,w),(e.fulfilled.match(x)||e.rejected.match(x)&&!x.meta.condition)&&u(x.meta.arg,w),r.util.resetApiState.match(x)&&R()};function u({queryCacheKey:x},w){const A=w.getState()[n],T=A.queries[x],P=i.currentSubscriptions[x];if(!T||T.status==="uninitialized")return;const{lowestPollingInterval:S,skipPollingIfUnfocused:N}=j(P);if(!Number.isFinite(S))return;const C=o[x];C!=null&&C.timeout&&(clearTimeout(C.timeout),C.timeout=void 0);const a=Date.now()+S;o[x]={nextPollTimestamp:a,pollingInterval:S,timeout:setTimeout(()=>{(A.config.focused||!N)&&w.dispatch(s(T)),u({queryCacheKey:x},w)},S)}}function p({queryCacheKey:x},w){const T=w.getState()[n].queries[x],P=i.currentSubscriptions[x];if(!T||T.status==="uninitialized")return;const{lowestPollingInterval:S}=j(P);if(!Number.isFinite(S)){g(x);return}const N=o[x],C=Date.now()+S;(!N||C<N.nextPollTimestamp)&&u({queryCacheKey:x},w)}function g(x){const w=o[x];w!=null&&w.timeout&&clearTimeout(w.timeout),delete o[x]}function R(){for(const x of Object.keys(o))g(x)}function j(x={}){let w=!1,A=Number.POSITIVE_INFINITY;for(let T in x)x[T].pollingInterval&&(A=Math.min(x[T].pollingInterval,A),w=x[T].skipPollingIfUnfocused||w);return{lowestPollingInterval:A,skipPollingIfUnfocused:w}}return d},bf=({api:n,context:e,queryThunk:r,mutationThunk:s})=>{const i=Ki(r,s),o=Cs(r,s),d=_t(r,s),u={};return(g,R)=>{var j,x;if(i(g)){const{requestId:w,arg:{endpointName:A,originalArgs:T}}=g.meta,P=e.endpointDefinitions[A],S=P==null?void 0:P.onQueryStarted;if(S){const N={},C=new Promise((f,m)=>{N.resolve=f,N.reject=m});C.catch(()=>{}),u[w]=N;const a=n.endpoints[A].select(Un(P)?T:w),l=R.dispatch((f,m,E)=>E),c={...R,getCacheEntry:()=>a(R.getState()),requestId:w,extra:l,updateCachedData:Un(P)?f=>R.dispatch(n.util.updateQueryData(A,T,f)):void 0,queryFulfilled:C};S(T,c)}}else if(d(g)){const{requestId:w,baseQueryMeta:A}=g.meta;(j=u[w])==null||j.resolve({data:g.payload,meta:A}),delete u[w]}else if(o(g)){const{requestId:w,rejectedWithValue:A,baseQueryMeta:T}=g.meta;(x=u[w])==null||x.reject({error:g.payload??g.error,isUnhandledError:!A,meta:T}),delete u[w]}}},yf=({reducerPath:n,context:e,api:r,refetchQuery:s,internalState:i})=>{const{removeQueryResult:o}=r.internalActions,d=(p,g)=>{Us.match(p)&&u(g,"refetchOnFocus"),Vs.match(p)&&u(g,"refetchOnReconnect")};function u(p,g){const R=p.getState()[n],j=R.queries,x=i.currentSubscriptions;e.batch(()=>{for(const w of Object.keys(x)){const A=j[w],T=x[w];if(!T||!A)continue;(Object.values(T).some(S=>S[g]===!0)||Object.values(T).every(S=>S[g]===void 0)&&R.config[g])&&(Mt(T)===0?p.dispatch(o({queryCacheKey:w})):A.status!=="uninitialized"&&p.dispatch(s(A)))}})}return d};function wf(n){const{reducerPath:e,queryThunk:r,api:s,context:i}=n,{apiUid:o}=i,d={invalidateTags:Ut(`${e}/invalidateTags`)},u=j=>j.type.startsWith(`${e}/`),p=[gf,pf,mf,xf,ff,bf];return{middleware:j=>{let x=!1;const A={...n,internalState:{currentSubscriptions:{}},refetchQuery:R,isThisApiSliceAction:u},T=p.map(N=>N(A)),P=df(A),S=yf(A);return N=>C=>{if(!ga(C))return N(C);x||(x=!0,j.dispatch(s.internalActions.middlewareRegistered(o)));const a={...j,next:N},l=j.getState(),[c,f]=P(C,a,l);let m;if(c?m=N(C):m=f,j.getState()[e]&&(S(C,a,l),u(C)||i.hasRehydrationInfo(C)))for(const E of T)E(C,a,l);return m}},actions:d};function R(j){return n.api.endpoints[j.endpointName].initiate(j.originalArgs,{subscribe:!1,forceRefetch:!0})}}var Oi=Symbol(),Xo=({createSelector:n=Wi}={})=>({name:Oi,init(e,{baseQuery:r,tagTypes:s,reducerPath:i,serializeQueryArgs:o,keepUnusedDataFor:d,refetchOnMountOrArgChange:u,refetchOnFocus:p,refetchOnReconnect:g,invalidationBehavior:R,onSchemaFailure:j,catchSchemaFailure:x,skipSchemaValidation:w},A){ha();const T=U=>U;Object.assign(e,{reducerPath:i,endpoints:{},internalActions:{onOnline:Vs,onOffline:Ho,onFocus:Us,onFocusLost:Vo},util:{}});const P=cf({serializeQueryArgs:o,reducerPath:i,createSelector:n}),{selectInvalidatedBy:S,selectCachedArgsForQuery:N,buildQuerySelector:C,buildInfiniteQuerySelector:a,buildMutationSelector:l}=P;at(e.util,{selectInvalidatedBy:S,selectCachedArgsForQuery:N});const{queryThunk:c,infiniteQueryThunk:f,mutationThunk:m,patchQueryData:E,updateQueryData:y,upsertQueryData:b,prefetch:k,buildMatchThunkActions:I}=af({baseQuery:r,reducerPath:i,context:A,api:e,serializeQueryArgs:o,assertTagType:T,selectors:P,onSchemaFailure:j,catchSchemaFailure:x,skipSchemaValidation:w}),{reducer:_,actions:B}=lf({context:A,queryThunk:c,mutationThunk:m,serializeQueryArgs:o,reducerPath:i,assertTagType:T,config:{refetchOnFocus:p,refetchOnReconnect:g,refetchOnMountOrArgChange:u,keepUnusedDataFor:d,reducerPath:i,invalidationBehavior:R}});at(e.util,{patchQueryData:E,updateQueryData:y,upsertQueryData:b,prefetch:k,resetApiState:B.resetApiState,upsertQueryEntries:B.cacheEntriesUpserted}),at(e.internalActions,B);const{middleware:$,actions:v}=wf({reducerPath:i,context:A,queryThunk:c,mutationThunk:m,infiniteQueryThunk:f,api:e,assertTagType:T,selectors:P});at(e.util,v),at(e,{reducer:_,middleware:$});const{buildInitiateQuery:z,buildInitiateInfiniteQuery:O,buildInitiateMutation:H,getRunningMutationThunk:F,getRunningMutationsThunk:L,getRunningQueriesThunk:V,getRunningQueryThunk:q}=sf({queryThunk:c,mutationThunk:m,infiniteQueryThunk:f,api:e,serializeQueryArgs:o,context:A});return at(e.util,{getRunningMutationThunk:F,getRunningMutationsThunk:L,getRunningQueryThunk:q,getRunningQueriesThunk:V}),{name:Oi,injectEndpoint(U,X){var we;const pe=(we=e.endpoints)[U]??(we[U]={});Zn(X)&&at(pe,{name:U,select:C(U,X),initiate:z(U,X)},I(c,U)),tf(X)&&at(pe,{name:U,select:l(),initiate:H(U)},I(m,U)),er(X)&&at(pe,{name:U,select:a(U,X),initiate:O(U,X)},I(c,U))}}}});Xo();function Cn(n){return n.replace(n[0],n[0].toUpperCase())}function vf(n){return n.type==="query"}function jf(n){return n.type==="mutation"}function Jo(n){return n.type==="infinitequery"}function Jt(n,...e){return Object.assign(n,...e)}var ns=Symbol();function rs(n,e,r,s){const i=h.useMemo(()=>({queryArgs:n,serialized:typeof n=="object"?e({queryArgs:n,endpointDefinition:r,endpointName:s}):n}),[n,e,r,s]),o=h.useRef(i);return h.useEffect(()=>{o.current.serialized!==i.serialized&&(o.current=i)},[i]),o.current.serialized===i.serialized?o.current.queryArgs:n}function In(n){const e=h.useRef(n);return h.useEffect(()=>{en(e.current,n)||(e.current=n)},[n]),en(e.current,n)?e.current:n}var Sf=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kf=Sf(),Ef=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Cf=Ef(),If=()=>kf||Cf?h.useLayoutEffect:h.useEffect,_f=If(),qi=n=>n.isUninitialized?{...n,isUninitialized:!1,isFetching:!0,isLoading:n.data===void 0,status:qo.pending}:n;function ss(n,...e){const r={};return e.forEach(s=>{r[s]=n[s]}),r}var is=["data","status","isLoading","isSuccess","isError","error"];function Rf({api:n,moduleOptions:{batch:e,hooks:{useDispatch:r,useSelector:s,useStore:i},unstable__sideEffectsInRender:o,createSelector:d},serializeQueryArgs:u,context:p}){const g=o?a=>a():h.useEffect;return{buildQueryHooks:S,buildInfiniteQueryHooks:N,buildMutationHook:C,usePrefetch:x};function R(a,l,c){if(l!=null&&l.endpointName&&a.isUninitialized){const{endpointName:k}=l,I=p.endpointDefinitions[k];c!==We&&u({queryArgs:l.originalArgs,endpointDefinition:I,endpointName:k})===u({queryArgs:c,endpointDefinition:I,endpointName:k})&&(l=void 0)}let f=a.isSuccess?a.data:l==null?void 0:l.data;f===void 0&&(f=a.data);const m=f!==void 0,E=a.isLoading,y=(!l||l.isLoading||l.isUninitialized)&&!m&&E,b=a.isSuccess||m&&(E&&!(l!=null&&l.isError)||a.isUninitialized);return{...a,data:f,currentData:a.data,isFetching:E,isLoading:y,isSuccess:b}}function j(a,l,c){if(l!=null&&l.endpointName&&a.isUninitialized){const{endpointName:k}=l,I=p.endpointDefinitions[k];c!==We&&u({queryArgs:l.originalArgs,endpointDefinition:I,endpointName:k})===u({queryArgs:c,endpointDefinition:I,endpointName:k})&&(l=void 0)}let f=a.isSuccess?a.data:l==null?void 0:l.data;f===void 0&&(f=a.data);const m=f!==void 0,E=a.isLoading,y=(!l||l.isLoading||l.isUninitialized)&&!m&&E,b=a.isSuccess||E&&m;return{...a,data:f,currentData:a.data,isFetching:E,isLoading:y,isSuccess:b}}function x(a,l){const c=r(),f=In(l);return h.useCallback((m,E)=>c(n.util.prefetch(a,m,{...f,...E})),[a,c,f])}function w(a,l,{refetchOnReconnect:c,refetchOnFocus:f,refetchOnMountOrArgChange:m,skip:E=!1,pollingInterval:y=0,skipPollingIfUnfocused:b=!1,...k}={}){const{initiate:I}=n.endpoints[a],_=r(),B=h.useRef(void 0);if(!B.current){const U=_(n.internalActions.internal_getRTKQSubscriptions());B.current=U}const $=rs(E?We:l,Vn,p.endpointDefinitions[a],a),v=In({refetchOnReconnect:c,refetchOnFocus:f,pollingInterval:y,skipPollingIfUnfocused:b}),z=k.initialPageParam,O=In(z),H=h.useRef(void 0);let{queryCacheKey:F,requestId:L}=H.current||{},V=!1;F&&L&&(V=B.current.isRequestSubscribed(F,L));const q=!V&&H.current!==void 0;return g(()=>{q&&(H.current=void 0)},[q]),g(()=>{var Y;const U=H.current;if($===We){U==null||U.unsubscribe(),H.current=void 0;return}const X=(Y=H.current)==null?void 0:Y.subscriptionOptions;if(!U||U.arg!==$){U==null||U.unsubscribe();const pe=_(I($,{subscriptionOptions:v,forceRefetch:m,...Jo(p.endpointDefinitions[a])?{initialPageParam:O}:{}}));H.current=pe}else v!==X&&U.updateSubscriptionOptions(v)},[_,I,m,$,v,q,O,a]),[H,_,I,v]}function A(a,l){return(f,{skip:m=!1,selectFromResult:E}={})=>{const{select:y}=n.endpoints[a],b=rs(m?We:f,u,p.endpointDefinitions[a],a),k=h.useRef(void 0),I=h.useMemo(()=>d([y(b),(z,O)=>O,z=>b],l,{memoizeOptions:{resultEqualityCheck:en}}),[y,b]),_=h.useMemo(()=>E?d([I],E,{devModeChecks:{identityFunctionCheck:"never"}}):I,[I,E]),B=s(z=>_(z,k.current),en),$=i(),v=I($.getState(),k.current);return _f(()=>{k.current=v},[v]),B}}function T(a){h.useEffect(()=>()=>{var l,c;(c=(l=a.current)==null?void 0:l.unsubscribe)==null||c.call(l),a.current=void 0},[a])}function P(a){if(!a.current)throw new Error(Qi(38));return a.current.refetch()}function S(a){const l=(m,E={})=>{const[y]=w(a,m,E);return T(y),h.useMemo(()=>({refetch:()=>P(y)}),[y])},c=({refetchOnReconnect:m,refetchOnFocus:E,pollingInterval:y=0,skipPollingIfUnfocused:b=!1}={})=>{const{initiate:k}=n.endpoints[a],I=r(),[_,B]=h.useState(ns),$=h.useRef(void 0),v=In({refetchOnReconnect:m,refetchOnFocus:E,pollingInterval:y,skipPollingIfUnfocused:b});g(()=>{var L,V;const F=(L=$.current)==null?void 0:L.subscriptionOptions;v!==F&&((V=$.current)==null||V.updateSubscriptionOptions(v))},[v]);const z=h.useRef(v);g(()=>{z.current=v},[v]);const O=h.useCallback(function(F,L=!1){let V;return e(()=>{var q;(q=$.current)==null||q.unsubscribe(),$.current=V=I(k(F,{subscriptionOptions:z.current,forceRefetch:!L})),B(F)}),V},[I,k]),H=h.useCallback(()=>{var F,L;(F=$.current)!=null&&F.queryCacheKey&&I(n.internalActions.removeQueryResult({queryCacheKey:(L=$.current)==null?void 0:L.queryCacheKey}))},[I]);return h.useEffect(()=>()=>{var F;(F=$==null?void 0:$.current)==null||F.unsubscribe()},[]),h.useEffect(()=>{_!==ns&&!$.current&&O(_,!0)},[_,O]),h.useMemo(()=>[O,_,{reset:H}],[O,_,H])},f=A(a,R);return{useQueryState:f,useQuerySubscription:l,useLazyQuerySubscription:c,useLazyQuery(m){const[E,y,{reset:b}]=c(m),k=f(y,{...m,skip:y===ns}),I=h.useMemo(()=>({lastArg:y}),[y]);return h.useMemo(()=>[E,{...k,reset:b},I],[E,k,b,I])},useQuery(m,E){const y=l(m,E),b=f(m,{selectFromResult:m===We||E!=null&&E.skip?void 0:qi,...E}),k=ss(b,...is);return h.useDebugValue(k),h.useMemo(()=>({...b,...y}),[b,y])}}}function N(a){const l=(f,m={})=>{const[E,y,b,k]=w(a,f,m),I=h.useRef(k);g(()=>{I.current=k},[k]);const _=h.useCallback(function(v,z){let O;return e(()=>{var H;(H=E.current)==null||H.unsubscribe(),E.current=O=y(b(v,{subscriptionOptions:I.current,direction:z}))}),O},[E,y,b]);T(E);const B=rs(m.skip?We:f,Vn,p.endpointDefinitions[a],a),$=h.useCallback(()=>P(E),[E]);return h.useMemo(()=>({trigger:_,refetch:$,fetchNextPage:()=>_(B,"forward"),fetchPreviousPage:()=>_(B,"backward")}),[$,_,B])},c=A(a,j);return{useInfiniteQueryState:c,useInfiniteQuerySubscription:l,useInfiniteQuery(f,m){const{refetch:E,fetchNextPage:y,fetchPreviousPage:b}=l(f,m),k=c(f,{selectFromResult:f===We||m!=null&&m.skip?void 0:qi,...m}),I=ss(k,...is,"hasNextPage","hasPreviousPage");return h.useDebugValue(I),h.useMemo(()=>({...k,fetchNextPage:y,fetchPreviousPage:b,refetch:E}),[k,y,b,E])}}}function C(a){return({selectFromResult:l,fixedCacheKey:c}={})=>{const{select:f,initiate:m}=n.endpoints[a],E=r(),[y,b]=h.useState();h.useEffect(()=>()=>{y!=null&&y.arg.fixedCacheKey||y==null||y.reset()},[y]);const k=h.useCallback(function(F){const L=E(m(F,{fixedCacheKey:c}));return b(L),L},[E,m,c]),{requestId:I}=y||{},_=h.useMemo(()=>f({fixedCacheKey:c,requestId:y==null?void 0:y.requestId}),[c,y,f]),B=h.useMemo(()=>l?d([_],l):_,[l,_]),$=s(B,en),v=c==null?y==null?void 0:y.arg.originalArgs:void 0,z=h.useCallback(()=>{e(()=>{y&&b(void 0),c&&E(n.internalActions.removeMutationResult({requestId:I,fixedCacheKey:c}))})},[E,c,y,I]),O=ss($,...is,"endpointName");h.useDebugValue(O);const H=h.useMemo(()=>({...$,originalArgs:v,reset:z}),[$,v,z]);return h.useMemo(()=>[k,H],[k,H])}}}var Tf=Symbol(),Af=({batch:n=ba,hooks:e={useDispatch:ht,useSelector:Ne,useStore:ya},createSelector:r=Wi,unstable__sideEffectsInRender:s=!1,...i}={})=>({name:Tf,init(o,{serializeQueryArgs:d},u){const p=o,{buildQueryHooks:g,buildInfiniteQueryHooks:R,buildMutationHook:j,usePrefetch:x}=Rf({api:o,moduleOptions:{batch:n,hooks:e,unstable__sideEffectsInRender:s,createSelector:r},serializeQueryArgs:d,context:u});return Jt(p,{usePrefetch:x}),Jt(u,{batch:n}),{injectEndpoint(w,A){if(vf(A)){const{useQuery:T,useLazyQuery:P,useLazyQuerySubscription:S,useQueryState:N,useQuerySubscription:C}=g(w);Jt(p.endpoints[w],{useQuery:T,useLazyQuery:P,useLazyQuerySubscription:S,useQueryState:N,useQuerySubscription:C}),o[`use${Cn(w)}Query`]=T,o[`useLazy${Cn(w)}Query`]=P}if(jf(A)){const T=j(w);Jt(p.endpoints[w],{useMutation:T}),o[`use${Cn(w)}Mutation`]=T}else if(Jo(A)){const{useInfiniteQuery:T,useInfiniteQuerySubscription:P,useInfiniteQueryState:S}=R(w);Jt(p.endpoints[w],{useInfiniteQuery:T,useInfiniteQuerySubscription:P,useInfiniteQueryState:S}),o[`use${Cn(w)}InfiniteQuery`]=T}}}}}),Qs=Go(Xo(),Af());const os=Qs({reducerPath:"bookingApi",baseQuery:qs({baseUrl:"/api"}),endpoints:n=>({getBookings:n.query({query:()=>"/bookings"}),getBooking:n.query({query:e=>`/bookings/${e}`}),createBooking:n.mutation({query:e=>({url:"/bookings",method:"POST",body:e})}),updateBookingStatus:n.mutation({query:({id:e,status:r})=>({url:`/bookings/${e}/status`,method:"PATCH",body:{status:r}})})})}),Pf="/api",Dn=Qs({reducerPath:"invoiceApi",baseQuery:qs({baseUrl:Pf,credentials:"include",prepareHeaders:n=>{const e=localStorage.getItem("token");return e&&n.set("authorization",`Bearer ${e}`),n.set("Content-Type","application/json"),n.set("Accept","application/json"),n}}),tagTypes:["Invoice"],endpoints:n=>({getInvoices:n.query({query:(e={page:1,limit:10})=>({url:"/invoices",method:"GET",params:e}),transformResponse:e=>(console.log("Raw invoice response:",e),typeof e=="object"&&e!==null&&"data"in e?e:Array.isArray(e)?{success:!0,data:e,pagination:{total:e.length,page:1,limit:e.length,pages:1}}:(console.error("Invalid invoice response:",e),{success:!1,data:[],pagination:{total:0,page:1,limit:10,pages:0}})),transformErrorResponse:e=>(console.error("Invoice API Error:",e),e),providesTags:["Invoice"]}),getInvoice:n.query({query:e=>({url:`/invoices/${e}`,method:"GET"}),transformErrorResponse:e=>(console.error("Get Invoice Error:",e),e),providesTags:(e,r,s)=>[{type:"Invoice",id:s}]}),downloadInvoice:n.mutation({query:e=>({url:`/invoices/${e}/download`,method:"GET",responseHandler:r=>r.blob()})}),shareViaEmail:n.mutation({query:({id:e,...r})=>({url:`/invoices/${e}/share/email`,method:"POST",body:r})}),shareViaWhatsApp:n.mutation({query:({id:e,...r})=>({url:`/invoices/${e}/share/whatsapp`,method:"POST",body:r})})})}),{useGetInvoicesQuery:bg,useGetInvoiceQuery:yg,useShareViaEmailMutation:wg}=Dn,Nf="/api",Fn=Qs({reducerPath:"exhibitorInvoiceApi",baseQuery:qs({baseUrl:Nf,credentials:"include",prepareHeaders:n=>{const e=localStorage.getItem("exhibitor_token");return e&&n.set("authorization",`Bearer ${e}`),n.set("Content-Type","application/json"),n.set("Accept","application/json"),n}}),tagTypes:["ExhibitorInvoice"],endpoints:n=>({getExhibitorInvoice:n.query({query:e=>({url:`/exhibitor-bookings/${e}/invoice`,method:"GET"}),transformResponse:e=>e,transformErrorResponse:e=>e,providesTags:(e,r,s)=>[{type:"ExhibitorInvoice",id:s}]}),downloadExhibitorInvoice:n.mutation({query:e=>({url:`/exhibitor-bookings/${e}/invoice/download`,method:"GET",responseHandler:r=>r.blob()})}),shareViaEmail:n.mutation({query:({bookingId:e,...r})=>({url:`/exhibitor-bookings/${e}/invoice/share/email`,method:"POST",body:r})}),shareViaWhatsApp:n.mutation({query:({bookingId:e,...r})=>({url:`/exhibitor-bookings/${e}/invoice/share/whatsapp`,method:"POST",body:r})})})}),{useGetExhibitorInvoiceQuery:vg,useDownloadExhibitorInvoiceMutation:jg,useShareViaEmailMutation:Sg,useShareViaWhatsAppMutation:kg}=Fn,$f=wa({reducer:{auth:Pl,exhibitorAuth:Zc,exhibition:Ip,booking:Rp,exhibitor:Tp,settings:Oc,role:Fp,user:Vp,[os.reducerPath]:os.reducer,[Dn.reducerPath]:Dn.reducer,[Fn.reducerPath]:Fn.reducer},middleware:n=>n().concat(os.middleware).concat(Dn.middleware).concat(Fn.middleware)}),zf={token:{colorPrimary:"#7C3AED",borderRadius:8,colorBgContainer:"#FFFFFF",colorBgLayout:"#F9FAFB",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif"},components:{Layout:{siderBg:"#FFFFFF",headerBg:"#FFFFFF"},Menu:{itemBg:"transparent",itemSelectedBg:"#F3F4F6",itemHoverBg:"#F3F4F6",itemSelectedColor:"#7C3AED",itemColor:"#6B7280"},Card:{boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)"},Button:{borderRadius:8,primaryShadow:"0 1px 2px 0 rgb(124 58 237 / 0.05)"},Table:{borderRadius:8,headerBg:"#F9FAFB"},Modal:{borderRadius:8}}};ds.createRoot(document.getElementById("root")).render(t.jsx(Ie.StrictMode,{children:t.jsx(va,{store:$f,children:t.jsx(ul,{theme:zf,children:t.jsx(As,{children:t.jsx(Ep,{})})})})}));export{Ur as $,rt as A,Qf as B,Er as C,Qe as D,Pr as E,ig as F,$o as G,_r as H,Ir as I,Tr as J,Ar as K,Rr as L,Po as M,Nc as N,Vf as O,bs as P,Vd as Q,Kf as R,Ao as S,Zf as T,Nr as U,zr as V,$r as W,Dr as X,bg as Y,Br as Z,Fr as _,Q as a,le as a0,qr as a1,Hr as a2,Mr as a3,yg as a4,Rl as a5,wg as a6,qf as a7,Yf as a8,jg as b,Sg as c,kg as d,ct as e,ao as f,Al as g,$n as h,zn as i,t as j,lr as k,Qr as l,Kr as m,Yr as n,Cr as o,xt as p,es as q,Gr as r,Xc as s,Zr as t,vg as u,Xr as v,xg as w,ts as x,_e as y,Hf as z};
